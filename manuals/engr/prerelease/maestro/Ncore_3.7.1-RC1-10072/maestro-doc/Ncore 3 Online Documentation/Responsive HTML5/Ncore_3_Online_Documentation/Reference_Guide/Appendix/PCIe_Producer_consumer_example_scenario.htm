<html lang="en-US">
<head>
<meta content="IE=edge" http-equiv="X-UA-Compatible" />
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
<title>PCIe_Producer_consumer_example_scenario</title>
<meta content="PCIe Producer consumer example scenario" name="title_original" />
<link href="../../../rhstylemapping.css" rel="stylesheet" type="text/css" />
<link href="../Reference_Guide.css" rel="stylesheet" type="text/css" />
<link href="../../../editstyle.css" rel="stylesheet" type="text/css" /><script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
p.WebHelpNavBar { text-align:right; }
-->
</style>
 <meta name="generator" content="Adobe FrameMaker v17.0" />
<script type="text/javascript" src="../../../template/scripts/rh.min.js"></script>
<script type="text/javascript" src="../../../template/scripts/common.min.js"></script>
<script type="text/javascript" src="../../../template/scripts/topic.min.js"></script>
<script type="text/javascript" src="../../../template/scripts/constants.js"></script>
<script type="text/javascript" src="../../../template/scripts/utils.js"></script>
<script type="text/javascript" src="../../../template/scripts/mhutils.js"></script>
<script type="text/javascript" src="../../../template/scripts/mhlang.js"></script>
<script type="text/javascript" src="../../../template/scripts/mhver.js"></script>
<script type="text/javascript" src="../../../template/scripts/settings.js"></script>
<script type="text/javascript" src="../../../template/scripts/XmlJsReader.js"></script>
<script type="text/javascript" src="../../../template/scripts/loadparentdata.js"></script>
<script type="text/javascript" src="../../../template/scripts/loadscreen.js"></script>
<script type="text/javascript" src="../../../template/scripts/loadprojdata.js"></script>
<script type="text/javascript" src="../../../template/scripts/mhtopic.js"></script>
 <link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css">
<script type="text/javascript" >
gRootRelPath = "../../..";
gCommonRootRelPath = "../../..";
gTopicId = "4.6.0_2";
</script>
 <meta name="brsprev" value="Ncore_3_Online_Documentation/Reference_Guide/Appendix/System_Address_Map.htm">
 <meta name="topic-breadcrumbs" content="Reference Guide > Appendix" />
</head>
<body dir="ltr">
<script type="text/javascript" src="../../../ehlpdhtm.js"></script>
<div><p class="Heading1" id="949344">A.2 <a id="XREF_26017__A_2_Producer_consumer_example_scenario21" name="XREF_26017__A_2_Producer_consumer_example_scenario21">PCIe Producer consumer example scenario</a></p><p class="Body" id="950394"><a id="1088_Body_950394" name="1088_Body_950394"></a>A simple PCIe producer&#x2D;consumer scenario is described here. The producer&#x2D;consumer scenario assumes that the Data and the Flag are sent with the same AxID. This is setup by configuring two GPRARs at producer with different order settings, one with relaxed order setting for data and another with strict order setting for Flag&#47;MSIX Interrupt. </p><p class="BodyAfterHead" id="950396">Relaxed Order setting for data&#x3A;<div align="left"><table class="Terms" style="max-width: 100% ;height: auto;"><col width="201.53px"/><tr height="24.00px"><td><p class="CellBody" id="950425"><span style="font-size : 10.00pt;">Write ID override set as &apos;1&#x2019;</span></p></td></tr><tr height="24.00px"><td><p class="CellBody" id="950427"><span style="font-size : 10.00pt;">Read ID override set as &apos;1&apos;</span></p></td></tr><tr height="24.00px"><td><p class="CellBody" id="950429" style="font-size : 10.00pt;">Policy set as &apos;1<span style="font-family : Consolas ; ">&#x30;</span>&apos; &quot;Relaxed order&quot;</p></td></tr></table></div></p><p class="BodyAfterHead" id="950401">Strict Order setting for flag&#x3A;<span style="font-family : Times New Roman ; font-size : 12.00pt;font-kerning:none;"><div align="left"><table class="Terms" style="max-width: 100% ;height: auto;"><col width="211.53px"/><tr height="24.00px"><td><p class="CellBody" id="950489" style="font-size : 10.00pt;">Write ID override set as &apos;<span style="font-family : Consolas ; ">&#x30;</span>&apos;</p></td></tr><tr height="24.00px"><td><p class="CellBody" id="950491" style="font-size : 10.00pt;">Read ID override set as &apos;<span style="font-family : Consolas ; ">&#x30;</span>&apos;</p></td></tr><tr height="24.00px"><td><p class="CellBody" id="950493" style="font-size : 10.00pt;">Policy set as &apos;11&apos; &quot;endpoint order&quot;</p></td></tr></table></div></span></p><p class="BodyAfterHead" id="950406">The above distinction with different GPRAs guarantees that data is processed as soon as possible by ignoring the AxID ordering for internal Ncore processing purposes, this achieves maximum possible bandwidth for data. While the Flag&#47;MSIX is processed after the data has reached point of serialization as Flag will hit the strict GPRA. The worst case scenario with race conditions between two interleaved DCEs and memory path, is shown in <a  href="#XREF_65957__Figure%1125__Order_Write21" style="color:#0000ff;">Figure&#160;25</a>. As described in the figure Ncore uses implicit barriers that inhibit RAW accesses and guarantees that the consumer sees the new data once it sees that the flag is updated.  </p><p class="Figure" id="950390">Figure&#160;25.<a id="XREF_65957__Figure%1125__Order_Write21" name="XREF_65957__Figure%1125__Order_Write21">Order Write</a><img align="" alt="Ordered Write" class="imageSettings" height="174.044373" preserveAspectRatio="none" src="../assets/Ordered_Write.jpg" style="max-width: 100% ;height: auto;display:block;margin:auto;" width="612.000000" x="8.000000" y="8.000000" /></p><p class="Body" id="952836"><a id="1088_Body_952836" name="1088_Body_952836"></a>&#160;</p></div>
</body>
</html>