<p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759723598624 {padding: 0px;}
div.rbtoc1759723598624 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759723598624 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759723598624'>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>1</span> <a href='#CCETestPlan-Introduction'>Introduction</a></li>
<li><span class='TOCOutline'>2</span> <a href='#CCETestPlan-TestbenchDescription'>Testbench Description</a></li>
<li><span class='TOCOutline'>3</span> <a href='#CCETestPlan-ConfigurationSpace'>Configuration Space</a></li>
<li><span class='TOCOutline'>4</span> <a href='#CCETestPlan-Features'>Features</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>4.1</span> <a href='#CCETestPlan-WithCache'>With Cache</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>4.1.1</span> <a href='#CCETestPlan-CoherentReads'>Coherent Reads</a></li>
<li><span class='TOCOutline'>4.1.2</span> <a href='#CCETestPlan-CoherentWrites'>Coherent Writes</a></li>
<li><span class='TOCOutline'>4.1.3</span> <a href='#CCETestPlan-Dataless'>Dataless</a></li>
</ul>
</li>
<li><span class='TOCOutline'>4.2</span> <a href='#CCETestPlan-Nocache(SLCMissNoAllocate)'>No cache (SLC Miss No Allocate)</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>4.2.1</span> <a href='#CCETestPlan-CoherentReads.1'>Coherent Reads</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>4.2.1.1</span> <a href='#CCETestPlan-Cachemiss'>Cache miss</a></li>
<li><span class='TOCOutline'>4.2.1.2</span> <a href='#CCETestPlan-Cachehit'>Cache hit</a></li>
</ul>
</li>
<li><span class='TOCOutline'>4.2.2</span> <a href='#CCETestPlan-CoherentWrites.1'>Coherent Writes</a></li>
<li><span class='TOCOutline'>4.2.3</span> <a href='#CCETestPlan-Dataless.1'>Dataless</a></li>
</ul>
</li>
<li><span class='TOCOutline'>4.3</span> <a href='#CCETestPlan-ExclusiveMonitors'>Exclusive Monitors</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>4.3.1</span> <a href='#CCETestPlan-'></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div></p><h1 id="CCETestPlan-Introduction">Introduction</h1><h1 id="CCETestPlan-TestbenchDescription">Testbench Description</h1><h1 id="CCETestPlan-ConfigurationSpace">Configuration Space</h1><h1 id="CCETestPlan-Features">Features</h1><h2 id="CCETestPlan-WithCache">With Cache</h2><h3 id="CCETestPlan-CoherentReads">Coherent Reads</h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">CmdType</th><th class="confluenceTh"><br/></th><th class="confluenceTh"><br/></th><th class="confluenceTh"><br/></th><th class="confluenceTh"><br/></th><th class="confluenceTh"><br/></th><th class="confluenceTh"><br/></th></tr><tr><td class="confluenceTd">RdCln</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr></tbody></table></div><h3 id="CCETestPlan-CoherentWrites">Coherent Writes</h3><h3 id="CCETestPlan-Dataless">Dataless</h3><h2 id="CCETestPlan-Nocache(SLCMissNoAllocate)">No cache (SLC Miss No Allocate)</h2><h3 id="CCETestPlan-CoherentReads.1">Coherent Reads</h3><p><br/></p><h4 id="CCETestPlan-Cachemiss">Cache miss</h4><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">read_cmdtypes</th><th class="confluenceTh">dm_rsp (sf state)</th></tr><tr><td colspan="1" class="confluenceTd"><p>RdNITC</p><p>RdCln, </p><p>RdVld, </p><p>RdNotShDirty,</p><p>RdUnq</p></td><td class="confluenceTd"><ol><li>dm miss </li><li>dm hit with iid as owner (UC/UD), no other sharers</li><li>dm hit with iid as owner(SD), with other sharers present</li><li>dm hit with iid as sharer(SC), no other sharers present</li><li>dm hit with iid as sharer(SC), other sharers present (SC), no owner(SD) present</li><li>dm hit with iid as sharer(SC), other sharers(SC) and owner(SD) present</li><li>dm hit with iid as IX, other owner(UC/UD) only present</li><li>dm hit with iid as IX, other owner(SD) and sharers(SC) present</li><li>dm hit with iid as IX, other sharers(SC) present</li></ol></td></tr></tbody></table></div><p class="auto-cursor-target">Implement the following crosses for coverage </p><p class="auto-cursor-target">cross read_cmdtype(see above table) x sf_state (see above table)</p><p class="auto-cursor-target">cross read_cmdtype x aggregate_snprsp_dt_dmi x aggregate_snprsp_dt_aiu</p><p class="auto-cursor-target"><span class="legacy-color-text-red2">02/10 4.0 sync up meeting: StrReq is not issued to requestor for Reads if DtrReq is issued. Update tables below  when spec is updated. </span></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 91.0849%;"><colgroup><col style="width: 45.9027%;"/><col style="width: 20.1479%;"/><col style="width: 9.67344%;"/><col style="width: 16.1429%;"/><col style="width: 8.00986%;"/></colgroup><tbody><tr><th class="confluenceTh">Scenario</th><th colspan="1" class="confluenceTh">logic expectation</th><th colspan="1" class="confluenceTh">hash-tags</th><th colspan="1" class="confluenceTh">checks implemented</th><th class="confluenceTh">covered</th></tr><tr><td colspan="1" class="confluenceTd"><p>No Snps Required || aggregate (SnpRsp.dt_aiu == 0 &amp;&amp; SnpRsp.dt_dmi ==0)</p><p><br/></p><p>Expected Behavior:</p><p>Since there is no data transfer from the snooper, data is requested from next level in memory-hierarchy(DMI) and forwarded to requestor by CCE. </p></td><td colspan="1" class="confluenceTd"><p>→ after skid-buffer exit seen: expect aiu_cmdrsp, dm_req </p><p>→ after dm_req seen:</p><p>expect dm_rsp</p><p>→ after dm_rsp seen:</p><p>expect str_req, dm_cmtreq, dmi_cmdreq</p><p>→ after dmi_cmdreq seen:</p><p>expect dmi_cmdrsp, dmi_strreq, dmi_dtrreq</p><p> → after dmi_strreq seen:</p><p>expect dmi_strrsp</p><p>→ after dmi_dtrreq seen:</p><p>expect aiu_dtrreq, dmi_dtrrsp</p><p>→ after aiu_strreq &amp;&amp; aiu_dtrrreq seen:</p><p>expect aiu_dtrrsp, aiu_strrsp</p></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>Snps Required &amp;&amp; aggregate (SnpRsp.dt_aiu == 0 &amp;&amp; SnpRsp.dt_dmi == 1)</p><p>RdNITC – not possible</p><p>RdCln – not possible</p><p>RdVld – not possible</p><p>RdNotShDirty – not possible</p><p>RdUnq – not possible</p></td><td colspan="1" class="confluenceTd">----N/A----</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>Snps Required &amp;&amp; aggregate (SnpRsp.dt_aiu == 1 &amp;&amp; SnpRsp.dt_dmi == 0)</p><p>Expected Behavior:</p><p>This is case of direct cache(aiu)-to-cache(aiu) transfer, so CCE never receives any data, nor it needs to forward any data to requestor.</p></td><td colspan="1" class="confluenceTd"><p>→ after skid-buffer exit seen: expect aiu_cmdrsp, dm_req </p><p>→ after dm_req seen:</p><p>expect dm_rsp</p><p>→ after dm_rsp seen:</p><p>expect aiu_strreq, dm_cmtreq</p><p>→ after aiu_strreq seen:</p><p>expect aiu_strrsp</p></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>Snps Required &amp;&amp; aggregate (SnpRsp.dt_aiu == 1 &amp;&amp; SnpRsp.dt_dmi == 1), DTW is Full Data</p><p>RdNITC:</p><p>SnpRespData_I_PD(UD/SD→IX)  – 000110 (DtrDataInv, DtwDataFullDty)</p><p>SnpRespData_SC_PD(UD/SD→SC)  – 110110 (DtrDataInv, DtwDataFullDty)</p><p>RdCln:</p><p>SnpRespData_I_PD (UD → IX) – 001110 (DtrDataUC, DtwDataFullDty)</p><p>SnpRespData_I_PD (SD → IX) – 000110 (DtrDataSC, DtwDataFullDty)</p><p>SnpRespData_SC_PD (UD/SD → SC) - 110110 (DtrDataSC, DtwDataFullDty)</p><p>RdVld: No DtwDataFullDty</p><p>RdNotShDirty:  </p><p>SnpRespData_I_PD () 00010 DtwDataFullDty</p><p>RdUnq: No DtwDataFullDty</p><p><br/></p><p>Expected Behavior:</p><p>Dtw received from snooper needs to be forwarded to main memory by CCE. Since snooper is also initiating a cache-to-cache transfer to provide read data to requestor, CCE does not need to forward data to the requestor. </p></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div><h4 id="CCETestPlan-Cachehit">Cache hit</h4><h3 id="CCETestPlan-CoherentWrites.1">Coherent Writes</h3><h3 id="CCETestPlan-Dataless.1">Dataless</h3><h2 id="CCETestPlan-ExclusiveMonitors">Exclusive Monitors</h2><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 85.0247%;"><colgroup><col style="width: 24.0801%;"/><col style="width: 7.87605%;"/><col style="width: 12.5888%;"/><col style="width: 4.06714%;"/><col style="width: 4.06714%;"/><col style="width: 3.48612%;"/><col style="width: 3.48612%;"/><col style="width: 1.87218%;"/><col style="width: 6.64945%;"/><col style="width: 7.10136%;"/><col style="width: 3.80891%;"/><col style="width: 4.45449%;"/><col style="width: 5.48741%;"/><col style="width: 6.2621%;"/><col style="width: 4.71272%;"/></colgroup><tbody><tr><th rowspan="2" style="text-align: center;" class="confluenceTh"><p><br/></p><p><br/></p><p>Scenario</p></th><th rowspan="2" class="confluenceTh"><p><br/></p><p style="text-align: center;">Cmds</p><p style="text-align: center;">(Exclusive)</p></th><th rowspan="2" style="text-align: center;" class="confluenceTh"><p><br/></p><p><br/></p><p>Hash-Tag</p></th><th colspan="12" style="text-align: center;" class="confluenceTh">Logic for Exclusive Monitors</th></tr><tr><th style="text-align: center;" class="confluenceTh"><p>Match</p><p>TM</p><p>Addr</p></th><th style="text-align: center;" class="confluenceTh"><p>Match</p><p>TM</p><p>Valid</p></th><th style="text-align: center;" class="confluenceTh"><p>BM</p><p>Valid</p></th><th style="text-align: center;" class="confluenceTh"><p>New</p><p>TM</p><p>Avail</p></th><th style="text-align: center;" class="confluenceTh"><br/></th><th style="text-align: center;" class="confluenceTh"><p>Match TM</p><p>proc_id</p><p>Valid</p></th><th colspan="1" style="text-align: center;" class="confluenceTh"><p>Match TM</p><p>other proc_id Valid</p></th><th style="text-align: center;" class="confluenceTh"><p>Other</p><p>TM</p><p>Valid</p></th><th style="text-align: center;" class="confluenceTh"><p>BM</p><p>proc_id</p><p>Valid</p></th><th style="text-align: center;" class="confluenceTh"><p>BM other</p><p>proc_id</p><p>Valid</p></th><th style="text-align: center;" class="confluenceTh"><p>New TM</p><p>Valid/</p><p>Addr</p></th><th colspan="1" style="text-align: center;" class="confluenceTh"><p>EXMON</p><p>Result</p></th></tr><tr><td class="confluenceTd">exld_nomatch_tmaddr_other_tm_not_available</td><td rowspan="3" class="confluenceTd"><p>RdCln,</p><p>RdVld,</p><p>RdNotShdDirty</p></td><td rowspan="3" class="confluenceTd"><br/></td><td class="confluenceTd">No</td><td class="confluenceTd">x</td><td class="confluenceTd">x</td><td class="confluenceTd">No</td><td class="confluenceTd"><br/></td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">n/a</td><td class="confluenceTd">Clear</td><td class="confluenceTd">Set</td><td class="confluenceTd">n/a</td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">----</td></tr><tr><td class="confluenceTd">exld_nomatch_tmaddr_other_tm_available</td><td class="confluenceTd">No</td><td class="confluenceTd">x</td><td class="confluenceTd">x</td><td class="confluenceTd">Yes</td><td class="confluenceTd"><br/></td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">n/a</td><td class="confluenceTd">Clear</td><td class="confluenceTd">Clear</td><td class="confluenceTd">n/a</td><td class="confluenceTd">Set/Tag</td><td colspan="1" class="confluenceTd">----</td></tr><tr><td class="confluenceTd">exld_match_tmaddr</td><td class="confluenceTd">Yes</td><td class="confluenceTd">x</td><td class="confluenceTd">x</td><td class="confluenceTd">x</td><td class="confluenceTd"><br/></td><td class="confluenceTd">Set</td><td colspan="1" class="confluenceTd">n/a</td><td class="confluenceTd">Clear</td><td class="confluenceTd">Clear</td><td class="confluenceTd">n/a</td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">----</td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">exst_nomatch_tmaddr_no_bmvld_other_tm_not_available</td><td rowspan="5" class="confluenceTd"><p><br/></p><p><br/></p><p>ClnUnq<br/><br/><br/><br/></p></td><td rowspan="5" class="confluenceTd"><br/></td><td class="confluenceTd">No</td><td class="confluenceTd">x</td><td class="confluenceTd">No</td><td class="confluenceTd">No</td><td class="confluenceTd"><br/></td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">n/a</td><td class="confluenceTd">Clear</td><td class="confluenceTd">Set</td><td class="confluenceTd">n/a</td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Fail</td></tr><tr><td class="confluenceTd">exst_nomatch_tmaddr_no_bmvld_other_tm_available</td><td class="confluenceTd">No</td><td class="confluenceTd">x</td><td class="confluenceTd">No</td><td class="confluenceTd">Yes</td><td class="confluenceTd"><br/></td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">n/a</td><td class="confluenceTd">Clear</td><td class="confluenceTd">Clear</td><td class="confluenceTd">n/a</td><td class="confluenceTd">Set/Tag</td><td colspan="1" class="confluenceTd">Fail</td></tr><tr><td class="confluenceTd">exst_nomatch_tmaddr_bmvld</td><td class="confluenceTd">No</td><td class="confluenceTd">x</td><td class="confluenceTd">Yes</td><td class="confluenceTd">x</td><td class="confluenceTd"><br/></td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">n/a</td><td class="confluenceTd">n/a</td><td class="confluenceTd">Set</td><td class="confluenceTd">Clear</td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Pass</td></tr><tr><td class="confluenceTd">exst_match_tmaddr_no_tmvld</td><td class="confluenceTd">Yes</td><td class="confluenceTd">No</td><td class="confluenceTd">x</td><td class="confluenceTd">x</td><td class="confluenceTd"><br/></td><td class="confluenceTd">Set</td><td colspan="1" class="confluenceTd">n/a</td><td class="confluenceTd">Clear</td><td class="confluenceTd">Clear</td><td class="confluenceTd">n/a</td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Fail</td></tr><tr><td class="confluenceTd">exst_match_tmaddr_tmvld</td><td class="confluenceTd">Yes</td><td class="confluenceTd">Yes</td><td class="confluenceTd">x</td><td class="confluenceTd">x</td><td class="confluenceTd"><br/></td><td class="confluenceTd">Clear</td><td colspan="1" class="confluenceTd">Clear</td><td class="confluenceTd">n/a</td><td class="confluenceTd">Set</td><td class="confluenceTd">n/a</td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Pass</td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 55.0192%;"><colgroup><col style="width: 45.2096%;"/><col style="width: 19.6607%;"/><col style="width: 15.3693%;"/><col style="width: 13.5729%;"/><col style="width: 6.18762%;"/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh"><p>Scenario</p></th><th style="text-align: center;" class="confluenceTh">Hash-Tag</th><th class="confluenceTh"><p style="text-align: center;">File</p><p style="text-align: center;">Covered/Check</p></th><th style="text-align: center;" class="confluenceTh">Run Cmds</th><th style="text-align: center;" class="confluenceTh">Status</th></tr><tr><td class="confluenceTd">Cover all AIUID-LPID Pairs for Basic monitor</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">Cover all AIUID-LPID Pairs for Tag monitor/s</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><p>Exclusive Cmds should update the basic and tag monitors(If any)</p><p>based on the logic table above at dm_cmd_resp</p></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><span class="legacy-color-text-blue3">ex_load always returns an EXMON_PASS status on STRreq</span></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><p style="text-align: left;"><span>Successful ex_store should return an EXMON_PASS status on STRreq</span></p><p style="text-align: left;"><span>Unsuccessful ex_store should return an EXMON_FAIL status on STRreq</span></p></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><h3 id="CCETestPlan-"> </h3>