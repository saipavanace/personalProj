<p> </p><p>checkin_test is a utility/regression written by DV team, which generates RTL for multiple configurations and runs all of them through verilog simulation. It's far more exhaustive test then just running through run_maestro which ends with RTL generation. checkin_test is being run as a part of maestro_test pipeline. Bleeding edge deployment is promoted to stable only if 100% of tests pass (there are 112 of them right now). </p><p>We have recently enabled it to be run in local sandboxes with private versions of maestro-client binary and backend repos. </p><h2 id="Runningcheckin_testinyoursandbox-Launchingcheckin_test">Launching checkin_test</h2><p>1.  Create complete local maestro-client build, including shared libraries</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">gmake build_debug
gmake package_debug
gmake deploy_now_debug</pre>
</div></div><p>2. Set 'stable' environment</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">module purge
module load dev/maestro_test/stable</pre>
</div></div><p><br/>3. Launch the regression </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">run_dv_checkin_test  -mc &lt;path_to_your_maestro_client_binary&gt; ...</pre>
</div></div><p>run_dv_checkin_test allows overriding of backend repos as well - flags are identical to that of run_maestro:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">  -mc,  --maestro_exec_path &lt;path&gt;     path to maestro executable
  -me,  --maestro_examples_path &lt;path&gt; path to maestro examples  
  -hwn, --hw_ncr_path &lt;path&gt;           path to hw_ncr
  -hws, --hw_sym_path &lt;path&gt;           path to hw_sym
  -hwl, --hw_lib_path &lt;path&gt;           path to hw_lib
  -hwc, --hw_ccp_path &lt;path&gt;           path to hw_ccp
  -swu, --sw_utl_path &lt;path&gt;           path to utils</pre>
</div></div><p>if you use -me flag make sure that it contains all the configs found under $MAESTRO_EXAMPLES </p><p>Example:</p><p><code>run_dv_checkin_test -mc /scratch3/klaw/sandbox/0501/maestro/ci_debug/latest/bin/maestro -me /scratch3/klaw/sandbox/0501/maestro/tests/cases/test_tcl</code></p><h2 id="Runningcheckin_testinyoursandbox-Monitoringcheckin_testresults">Monitoring checkin_test results</h2><p>When you launch run_dv_checkin_test it prints</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">...
Run Name is /scratch/bennyw/checkin_2020_05_04_14_59_52/pre_push_testlist_2020_4_4_14_59_53Linux gr6-3.arteris.com 3.10.0-514.10.2.el7.x86_64 #1 SMP Fri Mar 3 00:04:05 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
Waiting for runs to finish
If you kill this script before all the grid jobs are done, please run following commands to kill your jobs on the grid: 
qdel -j 2205709,2205710,2205711,2205712,...</pre>
</div></div><p>Then it goes silent for at least 30 min or longer while all individual jobs sent to the grid are still waiting or running. You can verify the status of the jobs with</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">module load sge
qstat</pre>
</div></div><p>Meanwhile you can look at the accumulation of results in /scratch/$USER/checkin_&lt;date&gt;_&lt;time&gt;</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="600" src="https://arterisip.atlassian.net/wiki/download/attachments/16154887/image2020-5-4%2015:29:36.png?api=v2"></span></p><p>Few files which are worth to mention</p><p>compile.err file (such as debug/fsys/hw_config_2/compile.err) can reveal if run_maestro phase failed and simulation couldn't even start   </p><p>In exe subdir<br/>  maestro_cmd - shows exact command line of run_maestro, see if path to private maestro-client exec (-mc) is correct<br/>  run_maestro.log - redirected output of run_maestro</p><p>sumulation log file, such as <br/>  debug/fsys/hw_config_2/exe/mti_vopt.log</p><p>When all the jobs in the batch complete a summary will be printed:</p><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">********************************************************
REPORT FOR UNLABELED
********************************************************
Total tests    : 113
Passed         : 107
Pass Rate      : 94.69%
Failed         : 6
Did Not Run    : 0
Failed compile : 2
Wall time      : 1:36:30
Total Cycles   : 9.45166*10^6

</pre>
</div></div><p>It will also include pointers to individual failures</p><p> </p><p> </p><p> </p>