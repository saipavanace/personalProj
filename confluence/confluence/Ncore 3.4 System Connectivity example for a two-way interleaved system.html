<p>This is an example of a two-way interleaved system:</p><p>-an even cache line would travel path 0, issued by AIU<sub>x0</sub> - hitting DCE<sub>0</sub> - snoops would be sent to AIU<sub>y0</sub> - memory reads would travel through DMI<sub>0</sub>.</p><p>-an odd cache line would travel path 1, issued by AIU<sub>x1</sub> - hitting DCE<span style="font-size: 11.6667px;">1</span> - snoops would be sent to AIU<sub>y1</sub> - memory reads would travel through DMI<span style="font-size: 11.6667px;">1</span>.</p><p><br/></p><p><strong>The JSON parameters and CSR register settings for the AIUs:</strong></p><p>AIU<sub>x</sub></p><p>  nAiuPorts = 2</p><p>  aPrimaryAiuPortBits = [6]</p><p>    address[6]</p><p>      0 =&gt; AIU<sub>x0   </sub>i.e.  AIU<sub>x</sub> Port<sub>0</sub></p><p>      1 =&gt; AIU<sub>x1</sub>   i.e. AIU<sub>x</sub> Port<sub>1</sub></p><p>  dceSelectInfo.PriSubDiagAddrBits = [6]</p><p>    address[6]</p><p>      0 =&gt; DCE<sub>0</sub></p><p>      1 =&gt; DCE<sub>1</sub></p><p>  InterleaveInfo.dmiIGSV[0].IGV[0].DMIIDV = [0,1]</p><p>  dmi2WIFV[0].PrimaryBits = [6]</p><p>  dmi3WIFV = []</p><p>  dmi4WIFV = []</p><p>  dmi8WIFV = []</p><p>  dmi16WIFV = []</p><p>  CSR: AMIGR.AMIGS=0 i.e select the 1st Memory Interleave Group Set which is { {DMI0,DMI1} }</p><p> CSR: GPRAR0.HUT=0 i.e. DMI</p><p>  CSR: GPRAR0.HomeUnitId=0 i.e. select the 1st Memory Interleave Group which is {DMI0,DMI1}</p><p>  CSR: GPRAR0.SizeOfIG=1 i.e. AMIFR_A2WIFId (2-way interleave function) which is address bits {6}</p><p>    address[6]</p><p>      0 =&gt; DMI<sub>0</sub></p><p>      1 =&gt; DMI<sub>1</sub></p><p><br/></p><p><br/></p><p>AIU<sub>y</sub> is configured similarly as AIU<sub>x</sub></p><p><br/></p><p><br/></p><p><strong>The JSON parameters and CSR register settings for the DCEs:</strong></p><p>DCE<sub>0</sub></p><p>  InterleaveInfo.dmiIGSV[0].IGV[0].DMIIDV = [0,1]</p><p>  dmi2WIFV[0].PrimaryBits = [6]</p><p>  dmi3WIFV = []</p><p>  dmi4WIFV = []</p><p>  dmi8WIFV = []</p><p>  dmi16WIFV = []</p><p>  CSR: AMIGR.AMIGS=0 i.e select the 1st Memory Interleave Group Set which is { {DMI0,DMI1} }</p><p>  CSR: GPRAR0.HUT=0 i.e. DMI</p><p>  CSR: GPRAR0.HomeUnitId=0 i.e. select the 1st Memory Interleave Group which is {DMI0,DMI1}</p><p>  CSR: GPRAR0.SizeOfIG=1 i.e. AMIFR_A2WIFId (2-way interleave function) which is address bits {6}</p><p>    address[6]</p><p>      0 =&gt; DMI<sub>0</sub></p><p>      1 =&gt; DMI<sub>1</sub></p><p>  SnoopFilterInfo[0].SnoopFilterAssignment = [0, 1]</p><p><br/></p><p><br/></p><p>DCE<sub>1</sub> is configured similarly as DCE<sub>0</sub></p><p><br/></p><p><strong>Combining all of the above:</strong></p><p>  address[6]</p><p>    0 =&gt; AIU<sub>x0  </sub>to DCE<sub>0</sub></p><p>            DCE<sub>0</sub> to DMI<sub>0</sub></p><p>            DCE<sub>0</sub> to AIU<sub>y0</sub></p><p><sub>               </sub>AIU<sub>x0  </sub>to DMI<sub>0</sub></p><p>    1 =&gt; AIU<sub>x1  </sub>to DCE<sub>1</sub></p><p>            DCE<sub>1</sub> to DMI<sub>1</sub></p><p>            DCE<sub>1</sub> to AIU<sub>y1</sub></p><p><sub>               </sub>AIU<sub>x1  </sub>to DMI<sub>1</sub></p><p><br/></p><p>NOTE:</p><p>Maestro needs to generate the connectivity vectors</p><p>  for AIUs</p><p>      hexAiuDceVec, hexAiuDmiVec, hexAiuDiiVec</p><p>and DCEs</p><p>      hexDceDmiVec</p><p>accordingly.</p><p><br/></p><p class="xmsonormal">Maestro needs to generate the correct Caching Agent FUnitId array for each DCE, so that in this case:</p><p class="xmsonormal"><span style="color: black;">  DCE<sub>0 </sub></span> tracks<span style="color: black;"> AIU<sub>x0 </sub> AIU<sub>y0</sub></span></p><p class="xmsonormal"><span style="color: black;">  DCE<sub>1 </sub></span> tracks<span style="color: black;"> AIU<sub>x1 </sub> AIU<sub>y1</sub></span></p><p class="xmsonormal"><br/></p><p><br/></p><p>The <strong>Caching Agents in the Caching Agent FUnitId Array</strong> provided for a DCE <strong>must be all connected</strong> to the DCE. This definition already exists prior to the existence of System Connectivity arch spec.</p><p><br/></p><p>Say in this case:</p><p>  DCE<sub>0</sub> and DCE<sub>1</sub> are configured to have only one Snoop Filter that tracks two Caching Agents.</p><p>  The JSON parameter is:</p><p>    SnoopFilterInfo[0].SnoopFilterAssignment = [0, 1]</p><p><br/></p><p>Then the Caching Agent FUnitId Array for DCE<sub>0</sub> is [ FUnitId for AIU<sub>x0 </sub> , FUnitId for AIU<sub>y0</sub> ]. This is implemented as a static tie offs at the Ncore3 top-level where DCE<sub>0</sub> is instantiated.</p><p>Then the Caching Agent FUnitId Array for DCE<sub>1</sub> is [ FUnitId for AIU<sub>x1 </sub> , FUnitId for AIU<sub>y1</sub> ]. This is implemented as a static tie offs at the Ncore3 top-level where DCE<sub>1</sub> is instantiated.</p><p class="xmsonormal"><br/></p>