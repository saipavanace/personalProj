<div class="contentLayout2">
<div class="columnLayout fixed-width" data-layout="fixed-width">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<style type='text/css'>/*<![CDATA[*/
div.rbtoc1759724206482 {padding: 0px;}
div.rbtoc1759724206482 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759724206482 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759724206482'>
<ul class='toc-indentation'>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Environment'>Environment</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-CreateandConfigureaVM'>Create and Configure a VM</a>
<ul class='toc-indentation'>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-EnableVirtualizationontheHost'>Enable Virtualization on the Host</a>
<ul class='toc-indentation'>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-EnableVirtualizationinUEFI'>Enable Virtualization in UEFI</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-(Windows)DisableHyper-V'>(Windows) Disable Hyper-V</a></li>
</ul>
</li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-InstallVirtualBoxandExtensionPack'>Install VirtualBox and Extension Pack</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-CreateaVirtualMachine'>Create a Virtual Machine</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-InstallGuestAdditions'>Install Guest Additions</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-LinuxUpdatesandInstallations'>Linux Updates and Installations</a></li>
</ul>
</li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-InstallToolsandAdditionalMaestroDependencies'>Install Tools and Additional Maestro Dependencies</a>
<ul class='toc-indentation'>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Git'>Git</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Python3&amp;Dependencies'>Python 3 &amp; Dependencies</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Jinja'>Jinja</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Conan'>Conan</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-MiscellaneousDependencies'>Miscellaneous Dependencies</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-CMake'>CMake</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Qt'>Qt</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-CoverageTools'>Coverage Tools</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Node.js'>Node.js</a></li>
</ul>
</li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Other(Optional)BuildTools'>Other (Optional) Build Tools</a>
<ul class='toc-indentation'>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-cpplint'>cpplint</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-clangandllvm'>clang and llvm</a></li>
</ul>
</li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-devtoolset8Installingdevtoolset8(gcc8.3)'>Installing devtoolset8 (gcc 8.3)</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Guest-HostCommunication'>Guest-Host Communication</a></li>
<li><a href='#CreatingaVMforOfflineMaestroDevelopment-Troubleshooting'>Troubleshooting</a></li>
</ul>
</div><h1 id="CreatingaVMforOfflineMaestroDevelopment-Environment">Environment</h1><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="171593b1-68ef-4e7c-8935-ba31b0d3c45a" class="confluenceTable"><colgroup><col style="width: 248.0px;"/><col style="width: 1550.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Host OS*</p></th><td class="confluenceTd"><ul><li><p>Windows 10 64-bit</p></li><li><p>Ubuntu 18.04</p></li></ul></td></tr><tr><th class="confluenceTh"><p>Virtualization Software</p></th><td class="confluenceTd"><p>Virtual Box 6.1+ (<a class="external-link" href="https://www.virtualbox.org/wiki/Downloads" rel="nofollow">Download</a> | <a class="external-link" href="https://www.virtualbox.org/manual/" rel="nofollow">Documentation</a>)</p><p>Virtual Box Extension Pack of the same version (for disk encryption) (<a class="external-link" href="https://www.virtualbox.org/wiki/Downloads" rel="nofollow">Download</a> | <a class="external-link" href="https://www.virtualbox.org/manual/ch01.html#intro-installing" rel="nofollow">Documentation</a>)</p></td></tr><tr><th class="confluenceTh"><p>Guest OS</p></th><td class="confluenceTd"><p>CentOS 7 64-bit (<a class="external-link" href="https://wiki.centos.org/Download" rel="nofollow">Download</a>)</p></td></tr></tbody></table></div><p>*verified hosts; if you're using another host please document your experience here</p><h1 id="CreatingaVMforOfflineMaestroDevelopment-CreateandConfigureaVM">Create and Configure a VM</h1><h2 id="CreatingaVMforOfflineMaestroDevelopment-EnableVirtualizationontheHost">Enable Virtualization on the Host</h2><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Please note that you should enable virtualization and disable Hyper-V before installing VirtualBox.</p></div></div><h3 id="CreatingaVMforOfflineMaestroDevelopment-EnableVirtualizationinUEFI">Enable Virtualization in UEFI</h3><ol start="1"><li><p>Restart your computer</p></li><li><p>Load into UEFI (press Del, F1, Esc, Enter key, depending on your motherboard)</p></li><li><p>Find Virtualization setting and enable it. It might look different in different systems</p></li></ol><h3 id="CreatingaVMforOfflineMaestroDevelopment-(Windows)DisableHyper-V">(Windows) Disable Hyper-V</h3><ol start="1"><li><p>Open Control Panel</p></li><li><p>Go to Program section -&gt; &quot;Turn Windows features on or off&quot;</p></li><li><p>Disable &quot;Hyper-V&quot;</p></li><li><p>Reboot</p></li></ol><h2 id="CreatingaVMforOfflineMaestroDevelopment-InstallVirtualBoxandExtensionPack">Install VirtualBox and Extension Pack</h2><ol start="1"><li><p>Install VirtualBox on your host machine. Downloads and detailed instructions can be found here: <a class="external-link" href="https://www.virtualbox.org/wiki/Downloads" rel="nofollow">https://www.virtualbox.org/wiki/Downloads</a>.<br/>Your user must be an administrator in order to be able to install the software.</p></li><li><p>Install Oracle VM VirtualBox Extension Pack <em>of the same version</em> as the main VirtualBox package. Downloads and detailed instructions can be found here: <a class="external-link" href="https://www.virtualbox.org/wiki/Downloads" rel="nofollow">https://www.virtualbox.org/wiki/Downloads</a>.</p></li><li><p>If you prefer VMware Workstation Player 16, you can download it from the VMware webpage, install and activate it using the public key of Arteris - <em>1428P-0DL0N-J89JE-0A106-9D6H4</em>.</p></li></ol><h2 id="CreatingaVMforOfflineMaestroDevelopment-CreateaVirtualMachine">Create a Virtual Machine</h2><p>TL;DR VM settings:</p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="0fff8e0f-890c-43f7-91c9-6a9bf08f0c32" class="confluenceTable"><colgroup><col style="width: 250.0px;"/><col style="width: 1548.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Type</p></th><td class="confluenceTd"><p>Linux</p></td></tr><tr><th class="confluenceTh"><p>Version</p></th><td class="confluenceTd"><p>Red Hat (64-bit)</p></td></tr><tr><th class="confluenceTh"><p>Storage</p></th><td class="confluenceTd"><p>60GB+ (the more the better), dynamically allocated</p><p>can be in a single chunk or 30 GB HDD for / + 30 GB for /home/myusername</p></td></tr><tr><th class="confluenceTh"><p>Shared Clipboard</p></th><td class="confluenceTd"><p>Bidirectional</p></td></tr><tr><th class="confluenceTh"><p>Drag'n'Drop</p></th><td class="confluenceTd"><p>Bidirectional</p></td></tr><tr><th class="confluenceTh"><p>Disk Encryption</p></th><td class="confluenceTd"><p>AES-256 (AES-XTS256-PLAIN64)</p></td></tr><tr><th class="confluenceTh"><p>CPU Cores</p></th><td class="confluenceTd"><p>4+ (the more the better)</p></td></tr><tr><th class="confluenceTh"><p>RAM</p></th><td class="confluenceTd"><p>16GB+ (8GB min)<br/>(the more the better; it's recommended to have 2, 4 or 8GB of RAM per CPU Core)</p></td></tr><tr><th class="confluenceTh"><p>Video Memory</p></th><td class="confluenceTd"><p>16MB+ (the more the better)</p></td></tr></tbody></table></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The below instructions are correct. However, in different versions of VirtualBox the controls my be labeled or located differently than indicated.</p></div></div><ol start="1"><li><p>Download a CentOS 7 image (<a class="external-link" href="https://wiki.centos.org/Download" rel="nofollow">Download</a>).</p></li><li><p>Run VirtualBox and create a new virtual machine:</p><ol start="1"><li><p>Select the CentOS 7 .iso file you've downloaded in the step 1.</p></li><li><p>Choose &quot;Skip Unattended Installation&quot;</p></li><li><p>Processors: 4+ CPUs</p></li><li><p>Memory size: 16GB+ recommended, 8GB minimum (it's recommended to have 2, 4 or 8GB of RAM per CPU Core)</p></li><li><p>Create a virtual hard disk: VDI, dynamically allocated, 60GB+</p></li></ol></li><li><p>Select the newly created virtual machine and go to Settings. Adjust the following settings:</p><ol start="1"><li><p>General → Basic → Type: Linux, Version: Red Hat (64 -bit)</p></li><li><p>General → Advanced → Shared Clipboard: Bidirectional</p></li><li><p>General → Advanced → Drag'n'Drop: Bidirectional</p></li><li><p>Display → Screen → Video Memory: 16MB+ (consider having even more)</p></li></ol></li><li><p>Start the virtual machine.</p><ol start="1"><li><p>Choose: Install CentOS 7.</p></li><li><p>Installation Summary screen:</p><ol start="1"><li><p>Localization → Date &amp; Time: select your timezone.</p></li><li><p>Software → Software Selection: GNOME Desktop + Development Tools.</p></li><li><p>System → Installation Destination: Automatic partitioning selected (you might need to select the disk twice). Set &quot;encrypt my data&quot; here.</p></li><li><p>System → Network &amp; Host Name: enable Ethernet.</p></li><li><p>Click &quot;Begin Installation&quot;.</p></li></ol></li><li><p>Configuration screen:</p><ol start="1"><li><p>User Settings → Set Root Password.</p></li><li><p>User Settings → Create a user and make the user an Administrator.</p></li></ol></li><li><p>Wait for installation to complete and reboot the guest system.</p></li></ol></li><li><p>Accept the CentOS 7 License Agreement after reboot.</p></li><li><p>Verify Network and Host Name.</p></li><li><p>Click &quot;Finish Configuration&quot;.</p></li></ol><p>A bit out-of-date, but still pretty good video on the topic: <a class="external-link" href="https://www.youtube.com/watch?v=A-VZwc-0Y1M" rel="nofollow">How to Install CentOS 7 on VirtualBox in Windows 8 / Windows 10</a></p><h2 id="CreatingaVMforOfflineMaestroDevelopment-InstallGuestAdditions">Install Guest Additions</h2><p>Login to the guest system providing encryption key if disk encryption is enabled, and do the following:</p><ol start="1"><li><p>Confirm language, keyboard, and disable location services.</p></li><li><p>Install Guest Additions:</p><ol start="1"><li><p>From the Virtual machine menu bar, go to <strong>Devices</strong> →  <strong>Insert Guest Additions CD image...</strong> to mount the Guest Additions ISO file in your guest OS.</p></li><li><p>If prompted &quot;VBox_* contains software intended to be automatically started. Would you like to run it?&quot; select &quot;Run&quot;.</p></li><li><p>If not prompted, use the following terminal commands:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ sudo mount -r /dev/cdrom /media
$ cd /media/
$ sudo ./VBoxLinuxAdditions.run </pre>
</div></div></li></ol></li></ol><h2 id="CreatingaVMforOfflineMaestroDevelopment-LinuxUpdatesandInstallations">Linux Updates and Installations</h2><ol start="1"><li><p>Start a terminal and enable EPEL repository and update packages and kernel on your system:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">## Add EPEL repo
$ sudo yum -y install epel-release

## Install packages
$ sudo yum -y update

## Reboot
$ reboot</pre>
</div></div></li><li><p>Double check that you are running the latest kernel and reboot if needed:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ sudo yum update kernel*

## If something has been installed - reboot.
$ reboot</pre>
</div></div></li><li><p>Install additional packages:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ sudo yum groupinstall &#39;Development Tools&#39;
$ sudo yum -y install make kernel-headers kernel-devel perl perl-core pcre-devel dkms bzip2 wget zlib-devel bison dnf

# Install openssl
$ wget https://ftp.openssl.org/source/openssl-1.1.1k.tar.gz
$ tar -xzvf openssl-1.1.1k.tar.gz
$ cd openssl-1.1.1k
$ ./config --prefix=/usr --openssldir=/etc/ssl --libdir=lib no-shared zlib-dynamic
$ sudo make
# Optional test
$ make test</pre>
</div></div></li><li><p>Set KERN_DIR environment variable:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ export KERN_DIR=/usr/src/kernels/$(uname -r)</pre>
</div></div></li><li><p>Reboot the guest system.</p></li></ol><p>Now mouse integration, full-screen and seamless view modes, shared clipboard and other features should work.</p><p>Sources:</p><ul><li><p><a class="external-link" href="https://www.tecmint.com/install-virtualbox-guest-additions-in-centos-rhel-fedora/" rel="nofollow">Install VirtualBox Guest Additions in CentOS, RHEL &amp; Fedora</a></p></li><li><p><a class="external-link" href="https://www.if-not-true-then-false.com/2010/install-virtualbox-guest-additions-on-fedora-centos-red-hat-rhel/" rel="nofollow">VirtualBox Guest Additions on Fedora 31/30, CentOS/RHEL 8/7/6/5</a></p></li></ul><h1 id="CreatingaVMforOfflineMaestroDevelopment-InstallToolsandAdditionalMaestroDependencies">Install Tools and Additional Maestro Dependencies</h1><h2 id="CreatingaVMforOfflineMaestroDevelopment-Git">Git</h2><p>CentOS 7 is shipped with an older version of Git. Update it.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence"># Install newer Git
$ sudo yum -y remove git
$ sudo yum -y remove git-*
$ sudo yum -y install https://packages.endpointdev.com/rhel/7/os/x86_64/endpoint-repo.x86_64.rpm
$ sudo yum -y install git</pre>
</div></div><p>Setup your Git environment: <a class="external-link" href="https://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup" rel="nofollow">https://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup</a></p></div>
</div>
</div>
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="CreatingaVMforOfflineMaestroDevelopment-Python3&amp;Dependencies">Python 3 &amp; Dependencies</h2><p>CentOS 7 is shipped with Python 2.7. However some build tools (e.g. Conan) require Python 3.</p><p>Before doing the below, copy the attached file requirements.txt to your VM.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence"># Python needs openssl when you compile it in a later step. Install openssl
sudo yum install openssl-devel

# For compatibility with the build servers, install this version of Python 3.
$ wget https://www.python.org/ftp/python/3.6.11/Python-3.6.11.tgz
$ tar -xzf Python-3.6.11.tgz
$ cd Python-3.6.11
$ ./configure --enable-optimization
$ sudo make altinstall
# create python3 link
$ sudo ln -s /usr/local/bin/python3.6 /usr/local/bin/python3

# Install Python package manager.
$ sudo yum -y install python3-pip

# Install Python modules used on our build servers
# NOTE: you may need to upgrade pip first before you can run this install
#    python3 -m pip install --upgrade pip --trusted-host pypi.org --trusted-host files.pythonhosted.org
pip3 install -r requirements.txt --trusted-host pypi.org --trusted-host files.pythonhosted.org --user

# Install GitPython (used for build).
# NOTE: this may have been installed by the previous step
$ pip3 install --user --trusted-host pypi.org --trusted-host files.pythonhosted.org gitpython</pre>
</div></div></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<p class="media-group"><a href="/wiki/spaces/ENGR/pages/16168219/Creating+a+VM+for+Offline+Maestro+Development?preview=%2F16168219%2F367001640%2Frequirements.txt"><span style="background: url('/wiki/s/-672721829/6452/d621ad2a33e27b90ca05c475b216bfab745e08a2/1000.0.0-d621ad2a33e2/_/download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-text.png'); width: 177px; height: 95px; display: inline-block; padding-top: 155px; margin: 2px; border: 1px solid #ddd; text-align: center; vertical-align: text-bottom; text-decoration: none; font-size: 12px; color: #000;">requirements.txt</span></a></p><p /></div>
</div>
</div>
<div class="columnLayout fixed-width" data-layout="fixed-width">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="CreatingaVMforOfflineMaestroDevelopment-Jinja">Jinja</h2><p>Jinja-2 is used for code-generation.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence"># While project is using python 2.7, DO NOT use pip3 to install jinja2
# $ sudo pip3 install jinja2
# or (if it won&#39;t install)
$ sudo yum -y install python-jinja2</pre>
</div></div><h2 id="CreatingaVMforOfflineMaestroDevelopment-Conan">Conan</h2><p>Maestro uses <a class="external-link" href="https://conan.io/" rel="nofollow">Conan</a> to manage its third-party dependencies. Install and configure it:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence"># Install Conan, this version to be compatible with the build servers
$ sudo pip3 install --trusted-host pypi.org --trusted-host files.pythonhosted.org pipe --force-reinstall -v &quot;conan==1.56.0&quot;</pre>
</div></div><p>Replace your <code>~/.conan2/remotes.json</code> content by:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;remotes&quot;: [{
    &quot;name&quot;: &quot;arteris&quot;,
    &quot;url&quot;: &quot;http://conan.arteris.com:9300&quot;,
    &quot;verify_ssl&quot;: true
  }]
}</pre>
</div></div><p>Copy this file to your VM</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">cd /conan_config_arteris.tar.gz</pre>
</div></div><p>Update your .conan:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">conan config install conan_config_arteris.tar.gz</pre>
</div></div><h2 id="CreatingaVMforOfflineMaestroDevelopment-MiscellaneousDependencies">Miscellaneous Dependencies</h2><p>clang-3.4.2, graphviz-2.30, tcl-1:8.5, tcl-devel-1:85, tk-1:8.5, tk-devel-1:85, valgrind-1:3.12, mesa-libGL-devel-17.0.1, imake</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">$ sudo yum install -y clang graphviz tcl tcl-devel tk tk-devel valgrind mesa-libGL-devel imake binutils-devel</pre>
</div></div><h2 id="CreatingaVMforOfflineMaestroDevelopment-CMake">CMake</h2><p>Minimum required CMake version for Maestro is 3.23.0. However, you can install any newer version.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ cd /usr/local/bin
$ sudo wget https://github.com/Kitware/CMake/releases/download/v3.23.0/cmake-3.23.0-linux-x86_64.tar.gz
$ sudo tar -zxf cmake-3.23.0-linux-x86_64.tar.gz
$ sudo rm cmake-3.23.0-linux-x86_64.tar.gz</pre>
</div></div><p>Add CMake directory to your <code>PATH</code>:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ echo &#39;export PATH=/usr/local/bin/cmake-3.23.0-linux-x86_64/bin/:$PATH&#39; &gt;&gt; ~/.bashrc </pre>
</div></div><h2 id="CreatingaVMforOfflineMaestroDevelopment-Qt">Qt</h2><ol start="1"><li><p>Install pre-reqs</p></li><li><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">$ sudo yum install mesa-libGL-devel mesa-libGLU-devel</pre>
</div></div></li><li><p>Go to <a class="external-link" data-card-appearance="inline" href="https://download.qt.io/archive/online_installers/3.2/" rel="nofollow">https://download.qt.io/archive/online_installers/3.2/</a> and download qt-unified-linux-x64-3.2.3-online.run.</p></li><li><p>Go to the downloaded file location (e.g. ~/Downloads/) and make it executable:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ chmod +x qt-unified-linux-x64-3.2.3-online.run</pre>
</div></div></li><li><p>Run the installer.</p></li><li><p>Login with your Qt account credentials or create a new account.</p></li><li><p>Specify installation directory: <code>/usr/local/bin/Qt</code></p></li><li><p>Select the version you need. Currently Qt 5.12.9 is used, however it's a subject to change.</p></li><li><p>Accept the license and install Qt.</p></li><li><p>Make sure<a class="external-link" href="https://doc.qt.io/qt-5/cmake-get-started.html#build-a-gui-executable" rel="nofollow"> CMake find the relevant Qt5 package</a>  :</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ echo &#39;export CMAKE_PREFIX_PATH=&quot;/usr/local/bin/Qt/5.12.9/gcc_64;$CMAKE_PREFIX_PATH&quot;&#39; &gt;&gt; ~/.bashrc</pre>
</div></div></li></ol><p>An untested alternative to the above:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ sudo yum -y install qt5-qtbase-devel qt5-qtwebkit-devel qt5-qtsvg-devel libmarkdown-devel
$ echo &#39;export CMAKE_PREFIX_PATH=&quot;/usr/local/bin/Qt/5.15.2/gcc_64;$CMAKE_PREFIX_PATH&quot;&#39; &gt;&gt; ~/.bashrc</pre>
</div></div><h2 id="CreatingaVMforOfflineMaestroDevelopment-CoverageTools">Coverage Tools</h2><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">$ sudo yum -y install lcov
$ sudo pip3 install cxxfilt</pre>
</div></div><h2 id="CreatingaVMforOfflineMaestroDevelopment-Node.js">Node.js</h2><p>Some Tcl tests use Javascript scripts to verify its output json files. These scripts require Node.js v10.x.x or higher to run correctly.</p><p>You can install Node.js on CentOS 7 as described here: <a class="external-link" href="https://linuxize.com/post/how-to-install-node-js-on-centos-7/" rel="nofollow">https://linuxize.com/post/how-to-install-node-js-on-centos-7/</a></p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>You will get two deprecation warnings during this installation.</p></div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>I (Mike K) had to run the installation steps as root. It would not work with sudo.</p></div></div><h1 id="CreatingaVMforOfflineMaestroDevelopment-Other(Optional)BuildTools">Other (Optional) Build Tools</h1><h2 id="CreatingaVMforOfflineMaestroDevelopment-cpplint">cpplint</h2><p>Not certain what needs cpplint but it has been a tool associated with Maestro.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">sudo python3 -m pip install cpplint</pre>
</div></div><h2 id="CreatingaVMforOfflineMaestroDevelopment-clangandllvm">clang and llvm</h2><p>Not commonly used to build Maestro but can be used for some (perhaps obsolete) purposes</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">$ sudo yum install centos-release-scl
$ sudo yum install llvm-toolset-7</pre>
</div></div><h1 id="CreatingaVMforOfflineMaestroDevelopment-devtoolset8Installingdevtoolset8(gcc8.3)"><span class="confluence-anchor-link" id="CreatingaVMforOfflineMaestroDevelopment-devtoolset8"><span class="confluence-anchor-link" id="devtoolset8"></span></span>Installing devtoolset8 (gcc 8.3)</h1><p>These steps will add a second build tool chain to the above VM image based on CentOS 7.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence"># install devtoolset 8
$ sudo yum -y install centos-release-scl
$ sudo yum -y install devtoolset-8-gcc devtoolset-8-gcc-c++</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If <code>devtoolset 8</code> is added after Conan is installed, you may receive errors about a missing Conan profile to use the new gcc. In this case, you will need to rerun:</p><p><code>conan config install /engr/dev/tools/maestro/conan/config/conan_config_arteris.tar.gz</code></p></div></div><h1 id="CreatingaVMforOfflineMaestroDevelopment-Guest-HostCommunication">Guest-Host Communication</h1><p>Sometimes it's useful to have communication channels between guest OS (VM) and host OS. It can be achieved in different ways:</p><ol start="1"><li><p>Shared Clipboard.</p></li><li><p>Drag and Drop (see <a class="external-link" href="https://www.virtualbox.org/manual/ch04.html#guestadd-dnd" rel="nofollow">documentation</a>).</p></li><li><p>Shared Folders (see <a class="external-link" href="https://www.virtualbox.org/manual/ch04.html#sharedfolders" rel="nofollow">documentation</a>).<br/>If you have <a class="external-link" href="https://stackoverflow.com/a/26981786/2764823" rel="nofollow">trouble with shared folder permissions</a> : <br/>Edit the file <strong>/etc/group</strong> (you will need root privileges). Look for the line <strong>vboxsf:x:999</strong> and add at the end<strong> :yourusername</strong>. To take effect you should log out and then log in.</p></li><li><p>SSH tunnel (see <a class="external-link" href="https://medium.com/nycdev/how-to-ssh-from-a-host-to-a-guest-vm-on-your-local-machine-6cb4c91acc2e" rel="nofollow">the blog post</a>).</p></li></ol><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Shared Clipboard, Drag and Drop, Shared Folders require Oracle VM VirtualBox Guest Additions to be installed. See Install Guest Additions section.</p></div></div><h1 id="CreatingaVMforOfflineMaestroDevelopment-Troubleshooting">Troubleshooting</h1><div id="expander-57565197" class="expand-container"><div id="expander-control-57565197" class="expand-control"><span class="expand-control-icon"><img style="vertical-align:middle;" class="expand-control-image" src="https://arterisip.atlassian.net/wiki/images/icons/grey_arrow_down.png"></span><span class="expand-control-text">Failed to open a session for the virtual machine MachineName. VMMR0_DO_NEM_INIT_VM failed: VERR_NEM_MISSING_KERNEL_API_2 (VERR_NEM_MISSING_KERNEL_API_2) VT-x is not available (VERR_VMX_NO_VMX)</span></div><div id="expander-content-57565197" class="expand-content"><ul><li><p>Make sure that Virtualization is enabled on the host and that Hyper-V is disable on Windows. Please refer to <strong>Enable Virtualization on the Host.</strong></p></li><li><p>If Virtualization is enabled and Hyper-V is disabled on Windows try to uninstall VirtualBox, reboot and then install VirtualBox again.</p></li><li><p>If it appears that you don't have a network connection to the internet change the network adapter from the default setting to 'Bridged Adapter'</p></li></ul></div></div><p /><div id="expander-383005723" class="expand-container"><div id="expander-control-383005723" class="expand-control"><span class="expand-control-icon"><img style="vertical-align:middle;" class="expand-control-image" src="https://arterisip.atlassian.net/wiki/images/icons/grey_arrow_down.png"></span><span class="expand-control-text">My user is not Administartor (sudo not working)</span></div><div id="expander-content-383005723" class="expand-content"><p>As &quot;root&quot;: usermod -aG wheel myusername [adds user to sudo - enabled list; must logout and login for this to take effect]</p></div></div><p /><div id="expander-1608384262" class="expand-container"><div id="expander-control-1608384262" class="expand-control"><span class="expand-control-icon"><img style="vertical-align:middle;" class="expand-control-image" src="https://arterisip.atlassian.net/wiki/images/icons/grey_arrow_down.png"></span><span class="expand-control-text">Old page contents</span></div><div id="expander-content-1608384262" class="expand-content"><p>Tested with: VirtualBox 5.2.8; CentOS 7 1708 64-bit guest; Windows (2018 feature update) 64-bit host</p><p><br/></p><p>Ensure host machine has VT-x enabled in BIOS and enough free disk space<br/>Install on host VirtualBox 5.2.8 + expansion pack</p><p>   Downloads: <a class="external-link" href="https://www.virtualbox.org/wiki/Downloads" rel="nofollow">https://www.virtualbox.org/wiki/Downloads</a><br/>Create VM: linux, RedHat 64bit</p><p>    Google latest instructions on how to install CentOS.  This video was out-of-date, but good enough:  <a class="external-link" href="https://www.youtube.com/watch?v=A-VZwc-0Y1M" rel="nofollow">https://www.youtube.com/watch?v=A-VZwc-0Y1M</a>.</p><p>    Suggested settings: 16+ GB RAM, 30 GB HDD for / + 30 GB for /home/myusername (both dynamically allocated, encryption suggested; for the second, once user home is created, mount the partition somewhere with gnome-disks, move onto it the contents of /home/myusername with an appropriate &quot;chown myusername:myusername&quot; on all moved files, then mount it onto /home/myusername again)<br/>In the VirtualBox VM settings, enable bidirectional clipboard, enable encryption AES 256, add a shared folder<br/>Mount CentOS live DVD onto virtual CD reader in VirtualBox and start VM<br/>Install CentOS: English, GNOME desktop + development tools distribution, enable Ethernet, automatic partitioning, root pwd, create user &quot;myusername&quot;<br/>After boot in GNOME: no location services, no screen lock, enable automatic login, Devices -&gt; Install Guest Additions. Then reboot and set resolution to Full HD.<br/>Choose GNOME option for login<br/>As &quot;root&quot;: usermod -aG wheel myusername [adds user to sudo - enabled list; must logout and login for this to take effect]<br/>As &quot;myusername&quot;: sudo yum install epel-release</p><p>Installed packages from CentOS package manager: boost-1.53, boost-devel-1.53, clang-3.4.2, graphviz-2.30, tcl-1:8.5, tcl-devel-1:85, tk-1:8.5, tk-devel-1:85, valgrind-1:3.12, mesa-libGL-devel-17.0.1</p><p>Other stuff to be installed by hand:<br/>sudo mkdir /tools<br/>===================== note we probably need 3.15.1 or newer</p><p>CMake 3.11: download then<br/>    cd Downloads<br/>    chmod +x cmake-3.11.0-rc3-Linux-x86_64.sh<br/>    ./cmake-3.11.0-rc3-Linux-x86_64.sh [install to /tools]<br/>    add to ~/.bashrc: export PATH=/tools/cmake-3.11.0-rc3-Linux-x86_64/bin/:$PATH</p><p>===================== note this section is obsolete; we're using Qt 5.12.8 now<br/>Qt5.10: download then<br/>    cd Downloads<br/>    chmod +x qt-unified-linux-x64-3.0.2-online.run<br/>    ./qt-unified-linux-x64-3.0.2-online.run [create or log into Qt account, install to /tools/Qt, choose 5.10.1 only]<br/>    echo 'export ENABLE_GUI=1' &gt;&gt; ~/.bashrc<br/>    echo 'export Qt5_DIR=/tools/Qt/5.10.1/gcc_64/lib/cmake/Qt5' &gt;&gt; ~/.bashrc<br/>=====================</p><p>Google Style Guide:<br/>    cd /tools<br/>    sudo git clone <a class="external-link" href="https://github.com/google/styleguide.git" rel="nofollow">https://github.com/google/styleguide.git</a><br/><br/>To be able to SSH/SCP into the VM from the host:<br/>sudo vi /etc/ssh/sshd_config [uncomment the line &quot;Port 22&quot;]<br/>sudo systemctl restart sshd.service<br/>Enable host-only adapter network and followed the steps in <a class="external-link" href="https://blog.basefarm.com/blog/how-to-ssh-into-a-virtualbox-linux-guest-from-your-host-machine/" rel="nofollow">https://blog.basefarm.com/blog/how-to-ssh-into-a-virtualbox-linux-guest-from-your-host-machine/</a><br/><br/>To be able to use the host/guest shared VirtualBox folder:<br/>sudo usermod -aG vboxsf myusername</p><p>Checkout the maestro repository according to the Maestro FAQ</p><p>To compile/run the Maestro GUI from QtCreator:<br/>QtCreator -&gt; open maestro/CMakeLists.txt, choose top compiler config and disable the others</p><p>             Projects -&gt; Run - &gt; Run Configuration: an option is to clone &quot;maestro&quot; into a new configuration &quot;maestro-tcl&quot;, Command Line Arguments: &quot;-c&quot;, and click the checkbox &quot;Run in terminal&quot;<br/>             Then push the &quot;Run&quot; button.</p></div></div><p><br/></p></div>
</div>
</div>
</div>