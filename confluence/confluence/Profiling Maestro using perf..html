<div class="contentLayout2">
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759723529005 {padding: 0px;}
div.rbtoc1759723529005 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759723529005 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759723529005'>
<ul class='toc-indentation'>
<li><a href='#ProfilingMaestrousingperf.-Installingperf'>Installing perf</a></li>
<li><a href='#ProfilingMaestrousingperf.-Collectprofileinformation'>Collect profile information</a></li>
<li><a href='#ProfilingMaestrousingperf.-Reviewprofilereport'>Review profile report</a></li>
<li><a href='#ProfilingMaestrousingperf.-Links'>Links</a></li>
</ul>
</div></p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 id="ProfilingMaestrousingperf.-Installingperf">Installing perf</h1><p>To install perf on CentOS 7:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sudo yum install perf</pre>
</div></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 id="ProfilingMaestrousingperf.-Collectprofileinformation">Collect profile information</h1><p>To collect information about whole session:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">perf record -g ./maestro</pre>
</div></div><p>Â Option <strong>-g</strong> is to record call graph information.</p><p>If recording of the entire session is not required, it's better to record only part of the session which contains a desired event.</p><p>Start maestro as usual. Set up the environment required for the experiment. When ready attach to the process with perf.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">perf record -g -p &lt;PID&gt;</pre>
</div></div><p>Perform actions which you want to profile. Press Ctrl-C to stop recording.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><a class="external-link" href="https://confluence.arteris.com/display/ENGR/Maestro+Performance+Profiling+and+Flame+Graphs" rel="nofollow">Detailed usage here</a>. (with Flame graph usage)</p></div></div></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 id="ProfilingMaestrousingperf.-Reviewprofilereport">Review profile report</h1><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">perf report</pre>
</div></div><p>Press 'h' for help</p><p>Some useful keys:</p><p>'a' - annotate</p><p>'e' - expand</p><p>'c' - close</p><p>'/' - search symbol</p><p class="auto-cursor-target">In annotation screen:</p><p class="auto-cursor-target">'t' - toggle between period, samples and percentage</p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 id="ProfilingMaestrousingperf.-Links">Links</h1><p><span>Tutorial - </span><a class="external-link" href="https://perf.wiki.kernel.org/index.php/Tutorial" rel="nofollow">https://perf.wiki.kernel.org/index.php/Tutorial</a></p><p>Examples - <a class="external-link" href="http://www.brendangregg.com/perf.html" rel="nofollow">http://www.brendangregg.com/perf.html</a></p></div>
</div>
</div>
</div>