<h1 id="Piano2/NcoreInteroperabilityFD-1.0Introduction">1.0 Introduction</h1><p>Piano 2 is basically Piano with a graphical interface. It allows users to manipulate floorplans,  interfaces assignment as well as running autopipe from FlexNoC. This preliminary document describes the requirements and assumptions of the flow between Ncore and Piano 2.</p><h1 id="Piano2/NcoreInteroperabilityFD-2.0Integration">2.0 Integration</h1><p>Conductor is a top level application framework and is responsible to provide a plugin registration mechanism. This would enable conductor to communicate between the plugins thru  events, such as 'open', 'save', or 'close'. The plugin on the other hand would need to have access to the project file so that it could retrieve informations from and save to.</p><p>Piano 2 will be integrated into conductor as a top level tab, possibly called 'physical' and be inserted between 'transport' and 'export'.</p><h1 id="Piano2/NcoreInteroperabilityFD-3.0DesignFlow">3.0 Design Flow</h1><p>Here is the preliminary design flow between Ncore and Piano 2. The data transfer is bi-directional. Piano 2 reads the PDD from Ncore's project file, and Ncore reads the autopiped results from Piano 2 before RTL generation.</p><h1 id="Piano2/NcoreInteroperabilityFD-3.1ImportdatafromNcoretoPiano2">3.1 Import data from Ncore to Piano2</h1><p>Piano 2 expects a working PDD from Ncore. This is done by going thru  the coherent sub-sytems creation and the transport generation.</p><p>In order to keep Piano 2 be able to run independently from Ncore, the transfer of data will be explicit.There will be two commands in the Piano 2 import menu to import the Ncore data.</p><ul><li>Import Ncore PDD - this will trigger Piano 2 to import the PDD from the project file.  This will populate the sockets table in Piano 2 and user can start doing the sockets assignment over the floorplan. User will need to re-import the PDD when the design changes. Piano 2 will try to salvage the sockets information as much as possible during the re-import.</li><li>Import Ncore Area - this should be called only after user has created / imported a floorplan. This will cluster all the Ncore components next the the prBoundary, and let user to place them within the floorplan. User can re-import the area file just as the PDD file, and Piano 2 will try to keep the physical attributes of the Ncore instances intact.</li></ul><p>Once  user finished importing the Ncore data, they can perform normal Piano operations, such as manipulate the floorplan and assigning the sockets. User  can pick and choose which architecture to work on. Intermediate results can be saved and loaded.</p><h1 id="Piano2/NcoreInteroperabilityFD-3.2ExportdatafromPiano2">3.2 Export data from Piano 2</h1><p>The main feature of Piano 2 is to allow user to run Autopipe from FlexNoC to optimize the pipeline stages. To do so, user need to generate an outline PDD file for the selected architecture. This PDD file is an augmented one from the project's PDD with a new outline object appended as well as an attachment of the background png file.  Area estimation file is optional for this feature.</p><p>Since Autopipe's runtime could be very long, user can choose to run in three different ways:</p><ul><li>from Piano 2's menu as a spawned process. (batch)</li><li>by running a script created by Piano 2. (batch)</li><li>by invoking FlexNoC directly.</li></ul><p>The output from Autopipe is yet another augmented PDD file, in which the original Architecture object be moved to &quot;&lt;original_archtecture_name&gt;_original&quot; and a new  architecture object and a ffe file be added. The ffe is an attachment to the PDD file.</p><h1 id="Piano2/NcoreInteroperabilityFD-3.3ReadingautopiperesultstoPiano2">3.3 Reading autopipe results to Piano 2</h1><p>User can read back the PDD from Autopipe into Piano 2, manipulate the noc elements location before generating the DEF/DCT files for the back end tools. Ipxact file is required during the import for the top level pin creations.</p><h1 id="Piano2/NcoreInteroperabilityFD-3.4UpdatingNcore&#39;sprojectfile">3.4 Updating Ncore's project file</h1><p>The PDD from the Autopipe will be saved in the project file as a new transport section. Results from multiple Autopipe runs will merge to the same section. Ncore then can choose to use the original PDD or the Autopipe PDD to generate RTL.</p><h1 id="Piano2/NcoreInteroperabilityFD-4.0Issues">4.0 Issues</h1><ul><li>Need to store the autopiped's PDD within the project file. Ncore will need to handle multiple PDDs.</li><li>Piano 2 need Ipxact file and Area estimation file from FlexNoC. Current conductor UI do not have way to do so.</li><li>User can only run Autopipe one architecture at a time, then merge the result back to the project file. Could be painfully slow.</li></ul><p> </p>