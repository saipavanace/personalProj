<h1 id="CommonLayer(CL)TestPlan:-History">History</h1><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"> </th><th class="confluenceTh">Date</th><th class="confluenceTh">Owner</th><th class="confluenceTh">Comment</th></tr><tr><td class="confluenceTd">0.1</td><td class="confluenceTd">18-Jun-2019</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd">Initial version</td></tr><tr><td class="confluenceTd">0.2</td><td class="confluenceTd">09-Jul-2019</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd">add parameters, status, finish timelines</td></tr><tr><td class="confluenceTd">0.3</td><td class="confluenceTd">17-Jul-2019</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd"><p>add more parameters, buffered, posted writes</p></td></tr><tr><td class="confluenceTd">0.4</td><td class="confluenceTd">17-Jul-2019</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd"><p>add timeouts, width conversions, P0/P1 and AXI exposure columns</p></td></tr><tr><td colspan="1" class="confluenceTd">0.5</td><td colspan="1" class="confluenceTd">04-Nov-2019</td><td colspan="1" class="confluenceTd">Andrew Brock</td><td colspan="1" class="confluenceTd">schedule review w/Bill</td></tr></tbody></table></div><p style="text-align: left;"> </p><h1 id="CommonLayer(CL)TestPlan:-ReviewHistory">Review History</h1><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"> </th><th class="confluenceTh">Date</th><th class="confluenceTh">Presenter</th><th class="confluenceTh">Attendees</th></tr><tr><td class="confluenceTd">0.1</td><td class="confluenceTd">09-Jul-2019</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">0.3</td><td class="confluenceTd">17-Jul-2019</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd">Eric, Saad</td></tr><tr><td class="confluenceTd">0.4</td><td class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16156357/2019-07-18+Meeting+notes+--+CTL+P0+features+verification+at+Native-Layer+AXI+..." data-linked-resource-id="16156357" data-linked-resource-version="2" data-linked-resource-type="page">18-Jul-2019</a></td><td class="confluenceTd">Saad Zahid</td><td class="confluenceTd">John, Syed, Eric, Chandra, Darshan, Andrew</td></tr></tbody></table></div><p> </p><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759723830009 {padding: 0px;}
div.rbtoc1759723830009 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759723830009 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759723830009'>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>1</span> <a href='#CommonLayer(CL)TestPlan:-History'>History</a></li>
<li><span class='TOCOutline'>2</span> <a href='#CommonLayer(CL)TestPlan:-ReviewHistory'>Review History</a></li>
<li><span class='TOCOutline'>3</span> <a href='#CommonLayer(CL)TestPlan:-References:'>References:</a></li>
<li><span class='TOCOutline'>4</span> <a href='#CommonLayer(CL)TestPlan:-TestBench:'>Test Bench:</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>4.1</span> <a href='#CommonLayer(CL)TestPlan:-Configurations'>Configurations</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>4.1.1</span> <a href='#CommonLayer(CL)TestPlan:-Basic'>Basic</a></li>
<li><span class='TOCOutline'>4.1.2</span> <a href='#CommonLayer(CL)TestPlan:-Splitting'>Splitting</a></li>
<li><span class='TOCOutline'>4.1.3</span> <a href='#CommonLayer(CL)TestPlan:-Striping'>Striping</a></li>
<li><span class='TOCOutline'>4.1.4</span> <a href='#CommonLayer(CL)TestPlan:-FeaturesWithoutConfigurations'>Features Without Configurations</a></li>
</ul>
</li>
</ul>
</li>
<li><span class='TOCOutline'>5</span> <a href='#CommonLayer(CL)TestPlan:-TestPlanItems'>Test Plan Items</a></li>
<li><span class='TOCOutline'>6</span> <a href='#CommonLayer(CL)TestPlan:-ACTIONITEMS/NOTES:(fromreviewson8/28/2019)'>ACTION ITEMS / NOTES: (from reviews on 8/28/2019)</a></li>
</ul>
</div></p><p> </p><h1 id="CommonLayer(CL)TestPlan:-References:">References:</h1><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"> </th><th class="confluenceTh"> </th></tr><tr><td class="confluenceTd"> </td><td class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16156349/HW-SYM+Common+Transaction+Layer+Microarchitecture+Specification" data-linked-resource-id="16156349" data-linked-resource-version="327" data-linked-resource-type="page">HW-SYM Common Transaction Layer Microarchitecture Specification</a></td></tr><tr><td class="confluenceTd"> </td><td class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157432/HW-SYM+Common+Layer+Protocol" data-linked-resource-id="16157432" data-linked-resource-version="84" data-linked-resource-type="page">HW-SYM Common Layer Protocol</a></td></tr></tbody></table></div><p> </p><h1 id="CommonLayer(CL)TestPlan:-TestBench:">Test Bench:</h1><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/16157556/SymphonyTB.jpg?api=v2"></span></p><p>Verification of most CL features is happening at the top_axi level. A testbench exists at the top_ctl level, but consolidating on top_axi gets better software support. The AXI NL is a thin layer, so we can still get good coverage of all features from top_axi.</p><h2 id="CommonLayer(CL)TestPlan:-Configurations">Configurations</h2><h3 id="CommonLayer(CL)TestPlan:-Basic">Basic</h3><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="500" src="https://arterisip.atlassian.net/wiki/download/attachments/16163349/CTL_1x1.png?api=v2"></span></p><h3 id="CommonLayer(CL)TestPlan:-Splitting">Splitting</h3><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="150" src="https://arterisip.atlassian.net/wiki/download/attachments/16163349/CTL_1x1_split.png?api=v2"></span></p><p>The scoreboard is handed sequence items by the monitor. It calls a <code>split()</code> method on the sequence item, which breaks it into an array of sequence items which should be the same as the shards the RTL will generate.</p><h3 id="CommonLayer(CL)TestPlan:-Striping">Striping</h3><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/16163349/CTL_1x4_stripe.png?api=v2"></span></p><p>Striping is similar except that the various shards of the transaction go to different targets.</p><h3 id="CommonLayer(CL)TestPlan:-FeaturesWithoutConfigurations">Features Without Configurations</h3><p>Most features do not need their own configurations, because they do not have specific topology requirements.</p><h1 id="CommonLayer(CL)TestPlan:-TestPlanItems">Test Plan Items</h1><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">P0/P1</th><th class="confluenceTh">AXI?</th><th class="confluenceTh">Feature</th><th class="confluenceTh">Parameters</th><th class="confluenceTh">Stimulus</th><th class="confluenceTh">Checker Changes</th><th class="confluenceTh"><p>Timeline</p><p>Start 11/5/2019</p></th><th class="confluenceTh">Status</th></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td class="confluenceTd">Splitting</td><td class="confluenceTd"><p>data width = 4 bytes, no narrows</p><p>all interfaces symmetric</p><p>pamTargSplitWrap = 0, 1</p><p>maxBurstSize &lt;, &gt;, = width of initiator bus.</p></td><td class="confluenceTd">Directed Random</td><td class="confluenceTd">Monitor to split packets before sending to scoreboard</td><td class="confluenceTd">2d</td><td class="confluenceTd"><p>was Done, has regressed (SYM-1825),</p><p>Corner case pending.</p></td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td class="confluenceTd">Striping</td><td class="confluenceTd"><p>on 1x4, 128-byte stripes</p><p>data width = 4 bytes, no narrows</p><p>all interfaces symmetric</p></td><td class="confluenceTd">Directed Random</td><td class="confluenceTd">Monitor to stripe packets before sending to scoreboard, scoreboard to reorder responses from slaves</td><td class="confluenceTd">0d</td><td class="confluenceTd">was Done, has regressed (SYM-1825)</td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td class="confluenceTd">ID Compression</td><td class="confluenceTd"><p>on 1x4, striping+splitting enabled</p><p>data width = 4 bytes</p><p>heterogeneous interfaces necessary (using 2, 4, 8, 16-bit ordering IDs)</p></td><td class="confluenceTd">Directed Random</td><td class="confluenceTd">Initiator monitor compresses ID before sending it to scoreboard</td><td class="confluenceTd">1d</td><td class="confluenceTd">Implementation complete, checker enabling blocked (SYM-1847)</td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td class="confluenceTd">Multi-VC/Interleaving</td><td class="confluenceTd"><p>on 4x4, DW=4B</p><p>initially symmetric</p><p>initially no narrow transactions</p><p>initially nVC=2, nChannels = 2</p></td><td class="confluenceTd">Add sequencers so they are per-VC and per-channel, not per-port</td><td class="confluenceTd">Monitor changes to support multi-VC multi-channel data payload reassembly</td><td class="confluenceTd">2d</td><td class="confluenceTd">Implementation Complete, in debug</td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td class="confluenceTd">Width Conversions</td><td class="confluenceTd"><p>4x4 with {16,32,64,128}-&gt;{16,32,64,128} widths</p><p>initially no narrow transactions</p><p>initially nVC=1, nChannels = 1</p></td><td class="confluenceTd">Directed random</td><td class="confluenceTd">Scoreboard handles equivalence between packets of multiple widths</td><td class="confluenceTd">0d</td><td class="confluenceTd">Done (on seagate)</td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td class="confluenceTd">Narrow Burst</td><td class="confluenceTd"><p>data width = 4 bytes</p><p>txn width any integer in 1-16</p></td><td class="confluenceTd">remove constraints that exist specifically to prevent this</td><td class="confluenceTd">Monitor to pad/align expected packets</td><td class="confluenceTd">5d</td><td class="confluenceTd">Pending</td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td class="confluenceTd">Buffered writes</td><td class="confluenceTd">Enable on all tests</td><td class="confluenceTd">Enable buffering bit on all tests</td><td class="confluenceTd">Response generated at initiator. This will need an additional response generator to be instantiated at the initiator, running only for buffered writes.</td><td class="confluenceTd">3-4d</td><td class="confluenceTd">In Progress</td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td class="confluenceTd">Decode error</td><td class="confluenceTd">enable on all tests</td><td class="confluenceTd">New sequencer generates intentionally out-of-range addresses</td><td class="confluenceTd">error handling</td><td class="confluenceTd">3d</td><td class="confluenceTd">Saad to follow.</td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">not in CTL</td><td colspan="1" class="confluenceTd">Slave error</td><td class="confluenceTd">enable on all tests</td><td colspan="1" class="confluenceTd">New sequencer controls which packets will have a slave error</td><td colspan="1" class="confluenceTd">error handling, actual error generation in response generator</td><td colspan="1" class="confluenceTd">3d</td><td class="confluenceTd"><span>Saad to follow.</span></td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td class="confluenceTd">Timeout error</td><td class="confluenceTd">enable on all tests</td><td class="confluenceTd">New sequencer controls which packets will get lost discarded by response</td><td class="confluenceTd">error handling (including clearing dropped packets from the scoreboard)</td><td class="confluenceTd">1w</td><td class="confluenceTd">In Progress</td></tr><tr><td class="confluenceTd">P0</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">Atomics/Exclusives</td><td class="confluenceTd"> </td><td colspan="1" class="confluenceTd"><p>Directed random w/ stimulus enhancement for:</p><ul style="list-style-type: square;"><li>overwriting of in-progress transactions</li><li>collisions between masters</li></ul></td><td colspan="1" class="confluenceTd">Checker verifies correct returns here</td><td colspan="1" class="confluenceTd">2w</td><td class="confluenceTd"><span>Saad to follow.</span></td></tr><tr><td class="confluenceTd">P1</td><td class="confluenceTd">yes</td><td class="confluenceTd">Posted writes</td><td class="confluenceTd">Enable on all tests</td><td class="confluenceTd">Enable posting bit on all tests</td><td class="confluenceTd">Response generator ignores posted writes</td><td class="confluenceTd"> </td><td class="confluenceTd">N/A</td></tr><tr><td class="confluenceTd">P1</td><td class="confluenceTd">only at ATP level</td><td colspan="1" class="confluenceTd">Interface Protection</td><td class="confluenceTd"><p>needs some of each protection style, including &quot;ecc&quot;, &quot;parity&quot;, &quot;none&quot;</p><p>no errors: actual error correction/detection is tested in protection unit bench</p></td><td colspan="1" class="confluenceTd"><p>Stimulus contrained to only emit valid protection fields, based on protection style</p></td><td colspan="1" class="confluenceTd">Response generator emits valid protection<br/>Sequence item comparator overridden to verify protection<br/>– do this in symphony base class?</td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">N/A</td></tr><tr><td colspan="1" class="confluenceTd">P0</td><td colspan="1" class="confluenceTd">need stats and APB monitors</td><td colspan="1" class="confluenceTd">Trace/Debug</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"><span>Saad to follow.</span></td></tr></tbody></table></div><h1 id="CommonLayer(CL)TestPlan:-ACTIONITEMS/NOTES:(fromreviewson8/28/2019)">ACTION ITEMS / NOTES: (from reviews on 8/28/2019) </h1><ol><li>Decode Error feature is now available in CTL RTL. </li><li>Buffered writes is a P0 feature.</li><li><a class="confluence-userlink user-mention" data-account-id="624b37fc258562006fa692fa" href="https://arterisip.atlassian.net/wiki/people/624b37fc258562006fa692fa?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">John Coddington (Deactivated)</a> requested a separate in-depth meeting on different type of Projection styles and how do we verify them. --&gt; <strong> <a class="confluence-userlink user-mention" data-account-id="5ed63c82037d930c16bd8c73" href="https://arterisip.atlassian.net/wiki/people/5ed63c82037d930c16bd8c73?ref=confluence" target="_blank" data-linked-resource-id="327834" data-linked-resource-version="1" data-linked-resource-type="userinfo" data-base-url="https://arterisip.atlassian.net/wiki">Saad Zahid</a> will setup this meeting in next 2 to 3 weeks.</strong></li><li>In &quot;Posted writes&quot; target need to response. Currently RTL don't have this feature. --&gt; <strong> <a class="confluence-userlink user-mention" data-account-id="624b37e8699649006ae9901f" href="https://arterisip.atlassian.net/wiki/people/624b37e8699649006ae9901f?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">Eric Taylor (Deactivated)</a> need to add this feature in CTL target layer RTL.</strong></li><li>Need to add details on CTL layer &quot;Trace/Debug&quot; features. --&gt; <strong> <a class="confluence-userlink user-mention" data-account-id="624b36d6f4079800705922a6" href="https://arterisip.atlassian.net/wiki/people/624b36d6f4079800705922a6?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">Andrew Brock (Deactivated)</a> will work with <a class="confluence-userlink user-mention" data-account-id="624b37fc258562006fa692fa" href="https://arterisip.atlassian.net/wiki/people/624b37fc258562006fa692fa?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">John Coddington (Deactivated)</a> &amp; <a class="confluence-userlink user-mention" data-account-id="624b37e8699649006ae9901f" href="https://arterisip.atlassian.net/wiki/people/624b37e8699649006ae9901f?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">Eric Taylor (Deactivated)</a> on this and update the test plan.</strong></li></ol><p> </p>