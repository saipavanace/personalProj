<p /><h1 id="Ncore3.4DCETestplan-TableofContents">Table of Contents</h1><p /><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759725019460 {padding: 0px;}
div.rbtoc1759725019460 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759725019460 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759725019460'>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>1</span> <a href='#Ncore3.4DCETestplan-TableofContents'>Table of Contents</a></li>
<li><span class='TOCOutline'>2</span> <a href='#Ncore3.4DCETestplan-Introduction'>Introduction</a></li>
<li><span class='TOCOutline'>3</span> <a href='#Ncore3.4DCETestplan-TestbenchDescription'>Testbench Description</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>3.1</span> <a href='#Ncore3.4DCETestplan-DCElocationwithinNcore'>DCE location within Ncore</a></li>
<li><span class='TOCOutline'>3.2</span> <a href='#Ncore3.4DCETestplan-DCEUnit-LevelTest-BenchDiagram'>DCE Unit-Level Test-Bench Diagram</a></li>
<li><span class='TOCOutline'>3.3</span> <a href='#Ncore3.4DCETestplan-ListandDescriptionofTBcomponents'>List and Description of TB components</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>3.3.1</span> <a href='#Ncore3.4DCETestplan-ModelsusedforStimulusGeneration'>Models used for Stimulus Generation</a></li>
<li><span class='TOCOutline'>3.3.2</span> <a href='#Ncore3.4DCETestplan-Stimulus/Sequences'>Stimulus/Sequences</a></li>
<li><span class='TOCOutline'>3.3.3</span> <a href='#Ncore3.4DCETestplan-Monitors/Interfaces'>Monitors/Interfaces</a></li>
<li><span class='TOCOutline'>3.3.4</span> <a href='#Ncore3.4DCETestplan-Scoreboard/Checkers'>Scoreboard/Checkers</a></li>
<li><span class='TOCOutline'>3.3.5</span> <a href='#Ncore3.4DCETestplan-EndofTestChecks'>End of Test Checks</a></li>
</ul>
</li>
</ul>
</li>
<li><span class='TOCOutline'>4</span> <a href='#Ncore3.4DCETestplan-ConfigurationSpace'>Configuration Space</a></li>
<li><span class='TOCOutline'>5</span> <a href='#Ncore3.4DCETestplan-TransactionManager'>Transaction Manager</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1</span> <a href='#Ncore3.4DCETestplan-ConcertoMessages'>Concerto Messages</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.1</span> <a href='#Ncore3.4DCETestplan-CMDrequest'>CMD request</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.1.1</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverage/Checks'>Functional Coverage/Checks</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.2</span> <a href='#Ncore3.4DCETestplan-CMDresponse'>CMD response</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.2.1</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverage/Checks.1'>Functional Coverage/Checks</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.3</span> <a href='#Ncore3.4DCETestplan-UPDATErequest'>UPDATE request</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.3.1</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverage/Checks.2'>Functional Coverage/Checks</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.4</span> <a href='#Ncore3.4DCETestplan-UPDATEresponse'>UPDATE response</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.4.1</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverage/Checks.3'>Functional Coverage/Checks</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.5</span> <a href='#Ncore3.4DCETestplan-SNPrequest'>SNP request</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.5.1</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverageandChecks'>Functional Coverage and Checks</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.6</span> <a href='#Ncore3.4DCETestplan-SNPresponse'>SNP response</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.6.1</span> <a href='#Ncore3.4DCETestplan-FunctionalChecksandCoverage'>Functional Checks and Coverage</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.7</span> <a href='#Ncore3.4DCETestplan-STRrequest'>STR request</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.7.1</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverage&amp;Checks'>Functional Coverage &amp; Checks</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.8</span> <a href='#Ncore3.4DCETestplan-STRresponse'>STR response</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.8.1</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverageandChecks.'>Functional Coverage and Checks.</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.9</span> <a href='#Ncore3.4DCETestplan-MRDrequest'>MRD request</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.9.1</span> <a href='#Ncore3.4DCETestplan-Functionalcoverageandchecks.'>Functional coverage and checks.</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.10</span> <a href='#Ncore3.4DCETestplan-MRDresponse'>MRD response</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.10.1</span> <a href='#Ncore3.4DCETestplan-Functionalcoverageandchecks..1'>Functional coverage and checks.</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.11</span> <a href='#Ncore3.4DCETestplan-RBrequest'>RB request</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.11.1</span> <a href='#Ncore3.4DCETestplan-Functionalcoverageandchecks..2'>Functional coverage and checks.</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.12</span> <a href='#Ncore3.4DCETestplan-RBresponse'>RB response</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.12.1</span> <a href='#Ncore3.4DCETestplan-Functionalcoverageandchecks..3'>Functional coverage and checks.</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.13</span> <a href='#Ncore3.4DCETestplan-RBUserequest'>RBUse request</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.13.1</span> <a href='#Ncore3.4DCETestplan-Functionalcoverageandchecks..4'>Functional coverage and checks.</a></li>
</ul>
</li>
<li><span class='TOCOutline'>5.1.14</span> <a href='#Ncore3.4DCETestplan-RBUseresponse'>RBUse response</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1.14.1</span> <a href='#Ncore3.4DCETestplan-FunctionalcoverageandChecks'>Functional coverage and Checks</a></li>
</ul>
</li>
</ul>
</li>
<li><span class='TOCOutline'>5.2</span> <a href='#Ncore3.4DCETestplan-ConcertoMessages/DMMessagesTiming'>Concerto Messages/DM Messages Timing</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.2.1</span> <a href='#Ncore3.4DCETestplan-'></a></li>
</ul>
</li>
</ul>
</li>
<li><span class='TOCOutline'>6</span> <a href='#Ncore3.4DCETestplan-DirectoryManager'>Directory Manager</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>6.1</span> <a href='#Ncore3.4DCETestplan-Interfaces'>Interfaces</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>6.1.1</span> <a href='#Ncore3.4DCETestplan-RequestInterface'>Request Interface</a></li>
<li><span class='TOCOutline'>6.1.2</span> <a href='#Ncore3.4DCETestplan-ResponseInterface'>Response Interface</a></li>
<li><span class='TOCOutline'>6.1.3</span> <a href='#Ncore3.4DCETestplan-RetryInterface'>Retry Interface</a></li>
<li><span class='TOCOutline'>6.1.4</span> <a href='#Ncore3.4DCETestplan-WriteInterface'>Write Interface</a></li>
<li><span class='TOCOutline'>6.1.5</span> <a href='#Ncore3.4DCETestplan-RecallInterface'>Recall Interface</a></li>
<li><span class='TOCOutline'>6.1.6</span> <a href='#Ncore3.4DCETestplan-UpdateInterface'>Update Interface</a></li>
<li><span class='TOCOutline'>6.1.7</span> <a href='#Ncore3.4DCETestplan-DMInterfaceAssertions'>DM Interface Assertions</a></li>
<li><span class='TOCOutline'>6.1.8</span> <a href='#Ncore3.4DCETestplan-DMInterfaceCoverproperties'>DM Interface Coverproperties</a></li>
</ul>
</li>
</ul>
</li>
<li><span class='TOCOutline'>7</span> <a href='#Ncore3.4DCETestplan-ArchitecturalFeatures'>Architectural Features</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>7.1</span> <a href='#Ncore3.4DCETestplan-ReadStashing'>Read Stashing</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>7.1.1</span> <a href='#Ncore3.4DCETestplan-LoadCchUnique(ARM-StashOnceUnique)'>LoadCchUnique (ARM - StashOnceUnique)</a></li>
<li><span class='TOCOutline'>7.1.2</span> <a href='#Ncore3.4DCETestplan-LoadCchShared(ARM-StashOnceShared)'>LoadCchShared (ARM - StashOnceShared)</a></li>
</ul>
</li>
<li><span class='TOCOutline'>7.2</span> <a href='#Ncore3.4DCETestplan-WriteStashing'>Write Stashing</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>7.2.1</span> <a href='#Ncore3.4DCETestplan-WriteStashFull(ARM-WriteUniqueFullStash)'>WriteStashFull (ARM - WriteUniqueFullStash)</a></li>
<li><span class='TOCOutline'>7.2.2</span> <a href='#Ncore3.4DCETestplan-WriteStashPtl(ARM-WriteUniquePtlStash)'>WriteStashPtl (ARM - WriteUniquePtlStash)</a></li>
</ul>
</li>
<li><span class='TOCOutline'>7.3</span> <a href='#Ncore3.4DCETestplan-ExclusiveMonitors'>Exclusive Monitors</a></li>
<li><span class='TOCOutline'>7.4</span> <a href='#Ncore3.4DCETestplan-CreditChecks'>Credit Checks</a></li>
<li><span class='TOCOutline'>7.5</span> <a href='#Ncore3.4DCETestplan-QOS(QualityofService)'>QOS (Quality of Service)</a></li>
<li><span class='TOCOutline'>7.6</span> <a href='#Ncore3.4DCETestplan-SharerPromotion'>Sharer Promotion</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>7.6.1</span> <a href='#Ncore3.4DCETestplan-Description'>Description</a></li>
<li><span class='TOCOutline'>7.6.2</span> <a href='#Ncore3.4DCETestplan-UPField'>UP Field</a></li>
<li><span class='TOCOutline'>7.6.3</span> <a href='#Ncore3.4DCETestplan-Checks'>Checks</a></li>
<li><span class='TOCOutline'>7.6.4</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverage'>Functional Coverage</a></li>
</ul>
</li>
<li><span class='TOCOutline'>7.7</span> <a href='#Ncore3.4DCETestplan-SoftwareCreditManagement(SCM)MrdCredits'>Software Credit Management (SCM) Mrd Credits</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>7.7.1</span> <a href='#Ncore3.4DCETestplan-Description.1'>Description</a></li>
<li><span class='TOCOutline'>7.7.2</span> <a href='#Ncore3.4DCETestplan-Stimulus'>Stimulus</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>7.7.2.1</span> <a href='#Ncore3.4DCETestplan-BootupSeq'>Boot up Seq</a></li>
<li><span class='TOCOutline'>7.7.2.2</span> <a href='#Ncore3.4DCETestplan-RandomSCMCSRSeq'>Random SCM CSR Seq</a></li>
</ul>
</li>
<li><span class='TOCOutline'>7.7.3</span> <a href='#Ncore3.4DCETestplan-Scenario/Tests'>Scenario/Tests</a></li>
<li><span class='TOCOutline'>7.7.4</span> <a href='#Ncore3.4DCETestplan-ErrorTest:DCEErrorTestplanDecodeError-NoCreditsConfigured'>Error Test: DCE Error Testplan Decode Error - No Credits Configured</a></li>
<li><span class='TOCOutline'>7.7.5</span> <a href='#Ncore3.4DCETestplan-Checks.1'>Checks</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>7.7.5.1</span> <a href='#Ncore3.4DCETestplan-FunctionalChecks'>Functional Checks</a></li>
<li><span class='TOCOutline'>7.7.5.2</span> <a href='#Ncore3.4DCETestplan-Endofsimulation'>End of simulation</a></li>
</ul>
</li>
<li><span class='TOCOutline'>7.7.6</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverage.1'>Functional Coverage</a></li>
</ul>
</li>
</ul>
</li>
<li><span class='TOCOutline'>8</span> <a href='#Ncore3.4DCETestplan-SystemCoherency-SysCo(Receiver)'>System Coherency - SysCo (Receiver)</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>8.1</span> <a href='#Ncore3.4DCETestplan-Description.2'>Description</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>8.1.1</span> <a href='#Ncore3.4DCETestplan-Sys.CohReceivertransactionflow'>Sys.Coh Receiver transaction flow</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>8.1.1.1</span> <a href='#Ncore3.4DCETestplan-SysReq.Attach'>SysReq.Attach</a></li>
<li><span class='TOCOutline'>8.1.1.2</span> <a href='#Ncore3.4DCETestplan-SysReq.Detach'>SysReq.Detach</a></li>
</ul>
</li>
</ul>
</li>
<li><span class='TOCOutline'>8.2</span> <a href='#Ncore3.4DCETestplan-Stimulus.1'>Stimulus</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>8.2.1</span> <a href='#Ncore3.4DCETestplan-Tasks/Functions'>Tasks/Functions</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>8.2.1.1</span> <a href='#Ncore3.4DCETestplan-send_sysreq_attach(dce_mst_seq.svh)'>send_sysreq_attach (dce_mst_seq.svh)</a></li>
<li><span class='TOCOutline'>8.2.1.2</span> <a href='#Ncore3.4DCETestplan-send_sysreq_detach(dce_mst_seq.svh)'>send_sysreq_detach (dce_mst_seq.svh)</a></li>
</ul>
</li>
<li><span class='TOCOutline'>8.2.2</span> <a href='#Ncore3.4DCETestplan-Tests'>Tests</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>8.2.2.1</span> <a href='#Ncore3.4DCETestplan-DirectedTests'>Directed Tests</a></li>
<li><span class='TOCOutline'>8.2.2.2</span> <a href='#Ncore3.4DCETestplan-RandomTests'>Random Tests</a></li>
</ul>
</li>
</ul>
</li>
<li><span class='TOCOutline'>8.3</span> <a href='#Ncore3.4DCETestplan-Checks.2'>Checks</a></li>
<li><span class='TOCOutline'>8.4</span> <a href='#Ncore3.4DCETestplan-FunctionalCoverage.2'>Functional Coverage</a></li>
<li><span class='TOCOutline'>8.5</span> <a href='#Ncore3.4DCETestplan-References'>References</a></li>
</ul>
</li>
<li><span class='TOCOutline'>9</span> <a href='#Ncore3.4DCETestplan-EndofTestChecks.1'>End of Test Checks</a></li>
</ul>
</div><hr/><h1 id="Ncore3.4DCETestplan-Introduction">Introduction</h1><p>DCE is the central block in Concerto System and is the point of serialization for all the coherent cacheline addresses assigned to it. It is responsible for maintaining memory coherence across the set memory locations mapped to it. DCE streamlines and maintains the order of various types of agent protocol transactions. The DCE directory is responsible for keeping track of cacheline owners and sharers with respect to all agents. Using directory lookup information along with the request type, DCE generates appropriate protocol snoops to be broadcast to the required snooping agents. DCE also collects all the snoop responses from various snooping agents and forwards the summary result to the requesting agent. Based on the snoop responses or directory look up, DCE may initiate memory read requests to the next level of memory through DMI.</p><p>DCE supports the following features:</p><ul><li><p>Multiple snoop filters per Directory as defined by number of Caching Agents assigned to each.</p></li><li><p>Ncore 3.0 supports only owner-sharer type of snoop-filter.</p></li><li><p>Victim Buffer per snoop filter for directory recalls.</p></li><li><p>Directory maintenance and debug operations</p></li><li><p>ECC protection for all SRAM memories</p></li><li><p>Exclusive monitors comprise Tagged monitors (minimum can be zero) and there should be one basic monitor.<br/></p></li></ul><p><br/></p><p>For more information on DCE block and Ncore or ARM architecture in general refer to the following documents.</p><p>Arch Docs</p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169712/Arch+Ncore+3.X+Docs" data-linked-resource-id="16169712" data-linked-resource-version="34" data-linked-resource-type="page">Arch Ncore 3.X Docs</a> </p><p>DCE MircoArch</p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168627/Ncore+3.0+DCE+Micro-Architecture+Specification" data-linked-resource-id="16168627" data-linked-resource-version="5" data-linked-resource-type="page">Ncore 3.0 DCE Micro-Architecture Specification</a></p><p>ARM</p><p><a class="external-link" href="https://svn.arteris.com/engdocs/trunk/3rd_party/ARM/IHI0022E_amba_axi_and_ace_protocol_spec.pdf?view=log" rel="nofollow">https://svn.arteris.com/engdocs/trunk/3rd_party/ARM/IHI0022E_amba_axi_and_ace_protocol_spec.pdf?view=log</a></p><p><a class="external-link" href="https://confluence.arteris.com/download/attachments/5570709/amba_5_chi_architecture_specification_IHI0050B.pdf?api=v2" rel="nofollow">https://confluence.arteris.com/download/attachments/5570709/amba_5_chi_architecture_specification_IHI0050B.pdf?api=v2</a></p><h1 id="Ncore3.4DCETestplan-TestbenchDescription">Testbench Description</h1><h2 id="Ncore3.4DCETestplan-DCElocationwithinNcore">DCE location within Ncore</h2><p><br/></p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" width="680" src="https://arterisip.atlassian.net/wiki/download/attachments/235470849/Ncore3_System_Diagram_w_DCE.jpg?api=v2"></span><p>Archive the diagram in editable format --&gt; <a href="https://arterisip.atlassian.net/wiki/download/attachments/16777324/Ncore3_System_Diagram_w_DCE.pptx?version=2&amp;modificationDate=1553552442146&amp;cacheVersion=1&amp;api=v2" rel="nofollow">Ncore3_System_Diagram_w_DCE.pptx</a></p><h2 id="Ncore3.4DCETestplan-DCEUnit-LevelTest-BenchDiagram">DCE Unit-Level Test-Bench Diagram</h2><span class="confluence-embedded-file-wrapper image-left-wrapper"><img class="confluence-embedded-image image-left" src="https://arterisip.atlassian.net/wiki/download/attachments/235470849/image2020-5-13%2022:53:24.png?api=v2"></span><p>  </p><p>Archive the diagram in editable format --&gt; <a href="https://arterisip.atlassian.net/wiki/download/attachments/16777324/Ncore3_DCE_DV_Process_Diagram.pptx?version=1&amp;modificationDate=1553562035751&amp;cacheVersion=1&amp;api=v2" rel="nofollow">Ncore3_DCE_DV_Process_Diagram.pptx</a></p><h2 id="Ncore3.4DCETestplan-ListandDescriptionofTBcomponents">List and Description of TB components</h2><h3 id="Ncore3.4DCETestplan-ModelsusedforStimulusGeneration">Models used for Stimulus Generation</h3><ul><li><p><u>Ncore cache_model</u><br/>It is used to track the cache-state of all the caching agents connected to DCE. This model is queried by DCE master sequence to check and control/constraint stimulus if certain requests should not be initiated from certain cache states based on spec. It is updated when snooper AIU need to be downgraded based on SNPrsp, or when initiator AIU cache-state needs to updated on a STRreq (when the op completes).</p></li></ul><ul><li><p><u>Address Manager</u><br/>Address manager has the capability of generating coherent address for a particular DCE FUNIT ID. It also has the intelligence built into it to generate addresses targeting the same set for a particular snoop-filter ID. <br/><br/></p></li><li><p><u>register_model</u><br/>Entity that encompasses and describes the hierarchical structure of class objects for each register and its individual fields. Read/Write operations on RTL registers can be performed using the register model object. </p></li></ul><h3 id="Ncore3.4DCETestplan-Stimulus/Sequences">Stimulus/Sequences</h3><p>       DCE unit level verif environment has following sequence for stimulus generation.</p><ul><li><p><u>DCE master sequence</u><br/>Creates master stimulus for DCE by modelling AIU agents (native protocols supported: CHI (does not differentiate between CHI-A and CHI-B), AXI-w/ and w/o proxy cache, ACE-LITE, ACE-LITE-E, ACE). Issues CMDreq via SMI Active BFM and interface, based on various randomization knobs to precisely control stimulus parameters, like CMDreq_type, CMDreq.address, CMDreq.initiatorID, delays on CMDreq interface etc. The master sequence also waits for CMDrsps, and stays alive (via objection mechanism) until the number of (CMDrsps+UPDrsps) received is equal to knob - (num_cmdreqs + num_updreqs) set for the test.  It also maintains/checks the CMD credit mechanism per AIU, and CMDreqs are not sent from that AIU if there are not credits available.<br/><br/></p></li><li><p><u>DCE aiu slave sequence </u><br/>Waits for and grabs STRreq via SMI Reactive BFM and interface, and generates appropriate STRrsps to be issued to DCE block. Once STRreq is received the messageID is freed to be used for another request. Waits for and grabs SNPreq via SMI Reactive BFM and interface, and generates appropriate SNPrsps to be issued to DCE block.  SNPrsp.CMStatus bits are randomized based on Snp Type, Snooper Initial State as referred from specification(ConcertoCProtocolArch.pdf, CHI ARM Spec, ARM ACE spec). The delays on rsps issued by the sequence are randomized via delay knobs.<br/><br/></p></li><li><p><u>DCE dmi slave sequence </u><br/>Waits for and grabs MRDreq via SMI Reactive BFM and interface, and generates appropriate MRDrsps to be issued to DCE block. Waits for and grabs RBreq via SMI Reactive BFM and generates appropriate RBrsps to be issued to DCE block. Predicts and issues RBUse reqs on write reqs or based on snoop_rsps(dt_dmi=1) and are issued to DCE block on appropriate SMI ports. The delays on requests/rsps issued by the sequence are randomized via delay knobs.</p></li></ul><h3 id="Ncore3.4DCETestplan-Monitors/Interfaces"><strong>Monitors/Interfaces</strong></h3><ul><li><p> smi system if , and smi monitors from smi_agent_pkg are integrated in the DV testbench.</p></li><li><p> dce_probe_interface and dce_probe monitors are instantiated to capture the directory manager interface signals, for monitoring and checking purposes.</p></li></ul><h3 id="Ncore3.4DCETestplan-Scoreboard/Checkers">Scoreboard/Checkers</h3><ul><li><p>dce_txn_scb.svh and dce_scoreboard.svh incorporate most of the checks in the DCE. </p></li><li><p>dce_txn_scb is a class object that tracks all information pertaining to a single transaction during its lifetime through the DCE block. The next SMI/DM packets are predicted and constructed here. </p></li><li><p>SMI and DM packets are all collected in the dce_scoreboard. dce_scb uvm_component class maintains a queue of dce_txn_scb packets that are inflight, that means they have not finished all operations as predicted by the scoreboard. Checks for sleep-wakeup transactions are also here. Objections are not dropped until the inflight transaction queue(dce_scb_txnq) is empty.</p></li><li><p>seq_item fields checks are done in the smi_seq_item.svh and dce_probe_seq_item.svh<br/><br/>dce_scb_txnq --&gt; it is a queue of all outstanding CMDreqs/UPDreqs that are still pending action items within the DCE block. It is constructed within the DCE scoreboard.<br/>Below picture illustrated DCE scoreboard checking mechanism.<br/><br/></p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/235470849/image2020-5-13%200:25:18.png?api=v2"></span><p><br/><br/></p></li></ul><h3 id="Ncore3.4DCETestplan-EndofTestChecks">End of Test Checks</h3><p>The following mechanism helps with end of test checking.</p><ul><li><p>Objection mechanism in DCE stimulus that is raised at start of test and is not dropped until number of CMDrsps+UPDrsps received == number of CMDreqs + UPDreqs set in the test using knobs.</p></li><li><p>Objection mechanism in DCE scoreboard that is raised when each transaction (CMDreq/UPDreq) is pushed into dce_scb_txnq and is dropped when the the txn is deleted from dce_scb_txnq.</p></li><li><p>When all objections are dropped, there are checks in report phase to make sure dce_scb_txnq is empty.</p></li></ul><h1 id="Ncore3.4DCETestplan-ConfigurationSpace">Configuration Space</h1><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="9ba128f1-9d37-48e1-b5a3-5511b1826684" class="confluenceTable"><colgroup><col style="width: 100.04px;"/><col style="width: 167.2px;"/><col style="width: 174.19px;"/><col style="width: 167.2px;"/><col style="width: 144.11px;"/><col style="width: 118.23px;"/><col style="width: 141.31px;"/><col style="width: 117.53px;"/><col style="width: 145.51px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td colspan="7" class="confluenceTd"><p style="text-align: center;">Static Config</p></td></tr><tr><td data-highlight-colour="#f0f0f0" colspan="2" class="confluenceTd"><p><strong>Parameter</strong></p></td><td data-highlight-colour="#f0f0f0" class="confluenceTd"><p><strong>hw_cfg_2</strong></p><p><strong>(fsys config)</strong></p></td><td data-highlight-colour="#f0f0f0" class="confluenceTd"><p><strong>hw_cfg_3</strong></p><p><strong>(fsys config)</strong></p></td><td data-highlight-colour="#f0f0f0" class="confluenceTd"><p><strong>hw_cfg_7</strong></p><p><strong>(nxp config)</strong></p></td><td data-highlight-colour="#f0f0f0" class="confluenceTd"><p><strong>hw_cfg_20</strong></p><p><strong>(samsung config)</strong></p></td><td data-highlight-colour="#f0f0f0" class="confluenceTd"><p><strong>hw_cfg_40</strong></p><p><br/></p></td><td data-highlight-colour="#f0f0f0" class="confluenceTd"><p><strong>hw_cfg_41</strong></p></td><td data-highlight-colour="#f0f0f0" class="confluenceTd"><p><strong>Remarks/Questions</strong></p></td></tr><tr><td colspan="2" class="confluenceTd"><p>Description</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>NXP config</p></td><td class="confluenceTd"><p>Samsung config</p></td><td class="confluenceTd"><p>ACE-only config. Similar to ncore2 product.</p><p>Single DMI</p></td><td class="confluenceTd"><p>max config</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="2" class="confluenceTd"><p>Resiliency</p></td><td class="confluenceTd"><p>useResiliency:true</p><p>ResiliencyProtectionType:PARITY</p><p>UnitDuplication:true</p><p>InterUnitDelay:4</p></td><td class="confluenceTd"><p>useResiliency:true</p><p>ResiliencyProtection:SECDED</p><p>unitDuplication:false</p><p><br/></p></td><td class="confluenceTd"><p>useResiliency: true</p><p>ResiliencyProtectionType: SECDED</p><p>UnitDuplication: true</p><p>InterUnitDelay: 1</p></td><td class="confluenceTd"><p>useResiliency: false</p><p>UnitDuplication:false</p></td><td class="confluenceTd"><p>useResiliency:true</p><p>ResiliencyProtectionType: SECDED</p><p>UnitDuplication: true</p><p>InterUnitDelay: 1</p></td><td class="confluenceTd"><p>useResiliency:false</p><p>UnitDuplication:false</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="2" class="confluenceTd"><p>QOS Enable</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="2" class="confluenceTd"><p>usePma</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="2" class="confluenceTd"><p>wSysAddr</p></td><td class="confluenceTd"><p>48</p></td><td class="confluenceTd"><p>48</p></td><td class="confluenceTd"><p>44</p></td><td class="confluenceTd"><p>44</p></td><td class="confluenceTd"><p>44</p></td><td class="confluenceTd"><p>44</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="2" class="confluenceTd"><p>nAius </p></td><td class="confluenceTd"><p>5</p></td><td class="confluenceTd"><p>5</p></td><td class="confluenceTd"><p>17</p></td><td class="confluenceTd"><p>14</p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>48</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>DceInfo</p></td><td class="confluenceTd"><p>nAttCtrlEntries</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>16</p></td><td class="confluenceTd"><p>32</p></td><td class="confluenceTd"><p>43</p></td><td class="confluenceTd"><p>32</p></td><td class="confluenceTd"><p>64</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>nSnpsPerAiu</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>nRbsPerDmi</p></td><td class="confluenceTd"><p>12</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>10</p></td><td class="confluenceTd"><p>12</p></td><td class="confluenceTd"><p>10</p></td><td class="confluenceTd"><p>10</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>nMrdsPerDmi</p></td><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>16</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>nTaggedMonitors</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="2" class="confluenceTd"><p>nDmis</p></td><td class="confluenceTd"><p>3</p></td><td class="confluenceTd"><p>3</p></td><td class="confluenceTd"><p>5</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>16</p></td><td class="confluenceTd"><p>Ncore3SystemParams.xlsx specified max nDmis = 32 </p></td></tr><tr><td colspan="2" class="confluenceTd"><p>nCachingAius</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>28</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td rowspan="7" class="confluenceTd"><p>fnNativeInterface <br/><br/><br/><br/></p></td><td class="confluenceTd"><p>CHI-A (agentid-nProcs)</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>8(all-1)</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>CHI-B(agentid-nProcs)</p></td><td class="confluenceTd"><p>2(all-2)</p></td><td class="confluenceTd"><p>1(2)</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>2(all-1)</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>11</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ACE(agentid-nProcs)</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>1(2)</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>4(0-1, 1-8, 2-2, 3-4)</p></td><td class="confluenceTd"><p>5</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>AXI w/ useIoCache = 1</p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>12</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>AXI w/ useIoCache = 0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ACE-LITE-E</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ACE-LITE</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>12</p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="2" class="confluenceTd"><p>numSF</p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>range: min:1 max:8 default for Ncore3.0: 1</p><p>AddressMap sheet from Ncore3SystemParams.xlsx</p></td></tr><tr><td colspan="2" class="confluenceTd"><p>SF.TagMem.MemType</p></td><td class="confluenceTd"><p>NONE</p></td><td class="confluenceTd"><p>NONE</p></td><td class="confluenceTd"><p>NONE</p></td><td class="confluenceTd"><p>NONE</p></td><td class="confluenceTd"><p>NONE</p></td><td class="confluenceTd"><p>NONE<br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="2" class="confluenceTd"><p>tagFilterErrorInfo</p></td><td class="confluenceTd"><p>PARITY</p></td><td class="confluenceTd"><p>SECDED</p></td><td class="confluenceTd"><p>SECDED</p></td><td class="confluenceTd"><p>SECDED</p></td><td class="confluenceTd"><p>NONE</p></td><td class="confluenceTd"><p>NONE</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td data-highlight-colour="#ffebe6" class="confluenceTd"><p>SF0</p></td><td data-highlight-colour="#ffebe6" class="confluenceTd"><p>nCachingAgents, </p><p>nSets</p><p>nWays</p><p>nVictimEntries</p></td><td data-highlight-colour="#ffebe6" class="confluenceTd"><p>2,</p><p>512,</p><p>20,</p><p>0</p></td><td data-highlight-colour="#ffebe6" class="confluenceTd"><p>2</p><p>256</p><p>8</p><p>11</p></td><td data-highlight-colour="#ffebe6" class="confluenceTd"><p>2</p><p>1024</p><p>10</p><p>16</p></td><td data-highlight-colour="#ffebe6" class="confluenceTd"><p>1</p><p>1024</p><p>10</p><p>0</p></td><td data-highlight-colour="#ffebe6" class="confluenceTd"><p>6</p><p>2048</p><p>7</p><p>12</p></td><td data-highlight-colour="#ffebe6" class="confluenceTd"><p>3</p><p>1024</p><p>10</p><p>0</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td data-highlight-colour="#eae6ff" class="confluenceTd"><p>SF1</p></td><td data-highlight-colour="#eae6ff" class="confluenceTd"><p>nCachingAgents</p><p>nSets</p><p>nWays</p><p>nVictimEntries<br/></p></td><td data-highlight-colour="#eae6ff" class="confluenceTd"><p>2</p><p>1024</p><p>20</p><p>16</p></td><td data-highlight-colour="#eae6ff" class="confluenceTd"><p>2</p><p>1024</p><p>10</p><p>0</p></td><td data-highlight-colour="#eae6ff" class="confluenceTd"><p>2</p><p>1024</p><p>10</p><p>16</p></td><td data-highlight-colour="#eae6ff" class="confluenceTd"><p>1</p><p>1024</p><p>10</p><p>0</p></td><td class="confluenceTd"><p>n/a</p></td><td data-highlight-colour="#eae6ff" class="confluenceTd"><p>4</p><p>512</p><p>5</p><p>4</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td data-highlight-colour="#fffae6" class="confluenceTd"><p>SF2<br/><br/><br/><br/></p></td><td data-highlight-colour="#fffae6" class="confluenceTd"><p>nCachingAgents</p><p>nSets</p><p>nWays</p><p>nVictimEntries</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td data-highlight-colour="#fffae6" class="confluenceTd"><p>2</p><p>1024</p><p>10</p><p>16</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td data-highlight-colour="#e6fcff" class="confluenceTd"><p>3</p><p>2048</p><p>12</p><p>1</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td data-highlight-colour="#e3fcef" class="confluenceTd"><p>SF3</p></td><td data-highlight-colour="#e3fcef" class="confluenceTd"><p>nCachingAgents</p><p>nSets</p><p>nWays</p><p>nVictimEntries</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td data-highlight-colour="#e3fcef" class="confluenceTd"><p>2</p><p>1024</p><p>10</p><p>16</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td data-highlight-colour="#e3fcef" class="confluenceTd"><p>4</p><p>64</p><p>3</p><p>15</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>SF4</p></td><td class="confluenceTd"><p>nCachingAgents</p><p>nSets</p><p>nWays</p><p>nVictimEntries</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td data-highlight-colour="#fffae6" class="confluenceTd"><p>2</p><p>128</p><p>7</p><p>5</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>SF5</p></td><td class="confluenceTd"><p>nCachingAgents</p><p>nSets</p><p>nWays</p><p>nVictimEntries</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td data-highlight-colour="#ffebe6" class="confluenceTd"><p>5</p><p>256</p><p>9</p><p>9</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>SF6</p></td><td class="confluenceTd"><p>nCachingAgents</p><p>nSets</p><p>nWays</p><p>nVictimEntries</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td data-highlight-colour="#eae6ff" class="confluenceTd"><p>3</p><p>32</p><p>11</p><p>0</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>SF7</p></td><td class="confluenceTd"><p>nCachingAgents</p><p>nSets</p><p>nWays</p><p>nVictimEntries</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td data-highlight-colour="#fffae6" class="confluenceTd"><p>4</p><p>16</p><p>20</p><p>2</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><h1 id="Ncore3.4DCETestplan-TransactionManager">Transaction Manager</h1><h2 id="Ncore3.4DCETestplan-ConcertoMessages">Concerto Messages</h2><h3 id="Ncore3.4DCETestplan-CMDrequest">CMD request</h3><p>CMDreq to DCE block are coherent requests initiated by CHI-AIUs or IO-AIUs, in response to transactions from native agents. Each unique type of native transaction invokes a unique CCMP operation, which in turn causes a unique type of CMDreq to be generated. CMDreq reach the DCE block via the SMI interface.</p><p>DCE master sequence(dce_mst_seq.svh) is responsible for constraining CMDreq (based on knobs and initiator initial cache state)  and issues the CMDreq to DCE via SMI Agent's Active BFM (<a class="external-link" href="http://smi_agent_pkg.sv" rel="nofollow">smi_agent_pkg.sv</a>)</p><h4 id="Ncore3.4DCETestplan-FunctionalCoverage/Checks">Functional Coverage/Checks</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="fffa734b-160a-4f85-a060-14218dbcf285" class="confluenceTable"><colgroup><col style="width: 71.01px;"/><col style="width: 88.77px;"/><col style="width: 125.46px;"/><col style="width: 263.93px;"/><col style="width: 126.05px;"/><col style="width: 175.76px;"/><col style="width: 49.71px;"/><col style="width: 180.49px;"/></colgroup><tbody><tr><th class="confluenceTh"><p style="text-align: center;"> Field Name</p></th><th class="confluenceTh"><p>Description</p></th><th class="confluenceTh"><p>Constraint(applies for block level tests) / Check(applies for fsys tests)</p></th><th class="confluenceTh"><p>Hash Tag</p></th><th class="confluenceTh"><p>Where Constrained/</p><p>Checked/</p><p>Covered</p></th><th class="confluenceTh"><p style="text-align: center;">Reference</p><p style="text-align: center;">Document</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td colspan="8" class="confluenceTd"><p><strong>CMDreq Header</strong></p></td></tr><tr><td class="confluenceTd"><p>Target Id</p></td><td class="confluenceTd"><p>FUID of the target ncore</p><p>unit of the message</p></td><td class="confluenceTd"><p>= FUNITID of DCE0</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.TgtFUnitId</p><p>(cover/constraint that CMDreq.smi_tgt_funit_id is DCE0 FunitID</p><p>#Check.DCE.CmdReq.TgtFUnitId</p><p>(check that the CMDreq.smi_tgt_funit_id inside {all available DCEs funit-ids}</p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.3.2.1</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Initiator Id</p></td><td class="confluenceTd"><p>FUID of the ncore unit that is</p><p>initiating the message</p></td><td class="confluenceTd"><p>= FUNITID of one of the AIUs attached to DCE</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.SrcId</p><p>(cover/constraint that CMDreq.smi_tgt_funit_id is DCE0 FunitID</p><p>#Check.DCE.CmdReq.SrcId</p><p>(check that the CMDreq.smi_src_funit_id inside {all available AIUs funit-ids}</p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.3.2.2</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>CMType</p></td><td class="confluenceTd"><p>Type of the CCMP message</p></td><td class="confluenceTd"><p>All coherent CMD Types for CHI-A/CHI-B</p><p>non-stash reads --&gt; RdNITC, RdNITCCI, RdNITCMI, RdCln, RdVld, RdUnq, RdNotShDirty</p><p>stash reads --&gt; LdCchShared, LdCchUnique</p><p>non-stash writes --&gt; WrUnqPtl, WrUnqFull, WrClnPtl, WrClnFull,</p><p>WrBkPtl, WrBkFull, WrEvict</p><p>stash writes --&gt; WrStshPtl, WrStshFull</p><p>dataless --&gt; ClnUnq, ClnVld, ClnShPer, ClnInv, MkUnq, MkInv, Evict</p><p>atomics --&gt; RdAtm, WrAtm, CompAtm, SwapAtm</p><p>Only following CMDreqs are issued by proxy Cache:</p><p>eCmdRdNITC, eCmdRdVld, eCmdRdUnq, eCmdMkUnq, eCmdWrUnqPtl, eCmdWrUnqFull</p></td><td class="confluenceTd"><p>#Cover.DCE.DM.CmdReqType</p><p>#Stimulus.DCE.proxyCache_CmdRedType</p><p><br/></p><p>#Cover.DCE.DM.CmdReqType_iidType</p><p>(cross cmd_req_type with the iid_type)</p></td><td class="confluenceTd"><p>dce_coverage.svh</p><p>dce_mst_seq.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 3.1 – TABLE 1</p><p>Section 4.3.2.3</p><p><br/></p><p>//CCMP spec v 0.90 Section 9.4.1 AXI I/O AIU Tables</p><p><br/></p><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Message Id</p></td><td class="confluenceTd"><p>unique identifier sender of the message assigns to it.</p></td><td class="confluenceTd"><p>random</p><p>(cover upper and lower limits and some values in between)</p></td><td class="confluenceTd"><p><br/></p><p>#Cover.DCE.CmdReq.MsgId</p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.3.2.4</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Priority</p></td><td class="confluenceTd"><p>priority value based on QOS</p></td><td class="confluenceTd"><p>pri is constrainted from qos mapping table.</p><p><br/></p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.Pri</p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="8" class="confluenceTd"><p><strong>CMDreq Body</strong></p></td></tr><tr><td class="confluenceTd"><p>CMStatus</p></td><td class="confluenceTd"><p>Input-only for CMDReq. Used to deliver transport encountered errors to target unit</p></td><td class="confluenceTd"><p>Non-Error Testing:</p><p>drive 0 on all bits.</p><p><br/></p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.Cmstatus</p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.2 - TABLE 4.3</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>not in seq_item.construct_cmdmsg()</p><p>dce_mst_seq does not drive anything for this field.</p><p>For non-Errors: Drive all 0s.</p><p>For Errors: Refer to Errors Testplan</p></td></tr><tr><td class="confluenceTd"><p>Addr</p></td><td class="confluenceTd"><p>address field of the native operation</p></td><td class="confluenceTd"><p>random address, (addr generated using a utility Address Manager , which has the intelligence to generate valid coherent addresses for DCE.)</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.Addr</p><p>(cover different address-ranges)</p><p>#Cover.DCE.CmdReq.BlockOffsetAddr</p><p>(cover all BlockOffset addresses)</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.2 - TABLE 4.3</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>VZ</p></td><td class="confluenceTd"><p>Visibility</p><p>(0 - Coherency Domain Visibility)</p><p>(1- System Visibility)</p></td><td class="confluenceTd"><p>completely randomize</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">#Cover.DCE.CmdReq.Visibility</span></p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.4</p><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>This field is not consumed by DCE, just forwarded.</p></td></tr><tr><td class="confluenceTd"><p>CA</p></td><td class="confluenceTd"><p>Cacheability</p><p>0 - address must not be cached</p><p>1 - address is cacheable. system caches must inspect their contents to check if there is an address match</p></td><td class="confluenceTd"><p>completely randomize</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.Cacheability</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.1</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>This field is not consumed by DCE, just forwarded.</p></td></tr><tr><td class="confluenceTd"><p>AC</p></td><td class="confluenceTd"><p>Allocation Hint</p><p>0 - cacheline need not be allocated in the system-cache</p><p>1 - Hint to allocate in system cache</p></td><td class="confluenceTd"><p>completely randomize</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.AllocationHint</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.2</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>This field is not consumed by DCE, just forwarded.</p></td></tr><tr><td class="confluenceTd"><p>CH</p></td><td class="confluenceTd"><p>Coherency Requirement</p><p>0 - Non-coherent Access</p><p>1 - Coherent Access</p></td><td class="confluenceTd"><p>do not randomize</p><p>CMDreq.CH is always driven to 1</p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.CoherencyRequirement</p><p>(It should never be 0 for any CmdReq that DCE receives)</p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p><p><br/></p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.1</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ST</p></td><td class="confluenceTd"><p>Storage Type</p><p>0 - System memory address</p><p>1 - Peripheral Storage</p></td><td class="confluenceTd"><p>do not randomize</p><p>CMDreq.ST is always driven to 0.</p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.StorageType</p><p><br/></p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p><p><br/></p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.1</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>Refer TABLE 4-5 ST type should always be driven to 0 for coherent CMDreq</p></td></tr><tr><td class="confluenceTd"><p>EN</p></td><td class="confluenceTd"><p>Endianness</p><p>0 - Little Endian Access</p><p>1 - Big Endian Access</p><p><br/></p></td><td class="confluenceTd"><p>randomize (0 or 1)</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.Endianness</p><p>(No checks required)</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.1</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ES</p><p>(EX and SS)</p></td><td class="confluenceTd"><p>Exclusive Access /Self-Snoop</p><p>0 - Not an exclusive access / No Self-snoop</p><p>1 - Is an exclusive access /Send a snoop for this operation to requestor also.</p></td><td class="confluenceTd"><p>For Exclusive Ops: RdCln, RdVld, RdNotShdDirty, ClnUnq randomize ES or EX bit</p><p>For Atomic Ops: randomize ES or SS bit</p><p>For others: Drive 0 only.</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.ExclusiveOps_ES</p><p>#Cover.DCE.CmdReq.AtomicOps_SS</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.6</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>NS</p></td><td class="confluenceTd"><p>Non-secure Access</p><p><br/></p><p>0 - Secure Access</p><p>1 - Non-secure Access</p></td><td class="confluenceTd"><p>Depends on wSecurityAttribute in static config.</p><p>wSecurityAttribute =1 (drive only 1)</p><p>wSecurityAttribute =0 (randomize 0 or 1)</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.NonSecure</p><p>(no checks for this field)</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.5</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>PR</p></td><td class="confluenceTd"><p>Privileged Access</p><p>0 - Application Access</p><p>1 - Privileged Access (OS or Hypervisor)</p></td><td class="confluenceTd"><p>randomize (0 or 1)</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.PrivilegedAccess</p><p>(no checks for this field)</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.5</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>This field is not consumed by DCE, just forwarded. </p></td></tr><tr><td class="confluenceTd"><p>OR</p></td><td class="confluenceTd"><p>Ordering</p></td><td class="confluenceTd"><p>randomize (all 4 values)</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.Order</p><p>(no checks for this field)</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.4</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>This field is not consumed by DCE, just forwarded.</p></td></tr><tr><td class="confluenceTd"><p>LK</p></td><td class="confluenceTd"><p>Line-Locking</p></td><td class="confluenceTd"><p>randomize (all 4 values)</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.Linelocking</p><p>(no checks for this field)</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.2</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>This field is not consumed by DCE, just forwarded.</p></td></tr><tr><td class="confluenceTd"><p>RL</p></td><td class="confluenceTd"><p>Response Level</p><p><br/></p></td><td class="confluenceTd"><p>CMDreq is issued with RL='b01</p><p><br/></p><p><br/></p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.ResponseLevel</p><p><br/></p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p><p><br/></p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.8</p><p>TABLE 4-15. RL[] settings for various CCMP messages.</p><p>v 0.85 of CCMP spec.</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>TM</p></td><td class="confluenceTd"><p>Trace Me</p><p>0 - No-op</p><p>1 - Trace this access</p></td><td class="confluenceTd"><p>randomize (0 or 1)</p></td><td class="confluenceTd"><p>#Cover.DCE.CmdReq.TraceMe</p><p>(no checks for this field)</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.3.7</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>This field is not consumed by DCE, just forwarded.</p></td></tr><tr><td class="confluenceTd"><p>MPF1</p></td><td class="confluenceTd"><p>Stashing ops - (Valid | StashTarget)</p><p>Atomics ops - ArgV[5:0]</p></td><td class="confluenceTd"><p><strong><u>For stashing ops </u></strong></p><p>randomize valid 1:80% 0:20%</p><p>if Valid=1, randomize StashTarget = Stashable Target 80%</p><p>StashTarget = Non-Stashable Target 20%</p><p>If Valid = 0, randomize StashTarget = Any Target</p><p><strong><u>For Atomics ops</u> </strong></p><p>completely randomize</p><p><strong><u>For Wr Unq ops</u></strong></p><p>Used by only ACE agent to specify AWUNIQUE signal as the LSB bit. This is used by DCE to maintain the DCE snoop filter</p><p><strong><u>For all other ops</u> </strong></p><p>completely randomize (since don't care)</p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.Mpf1</p><p>(no checks for this field)</p><p><br/></p><p>#Stimulus.DCE.CmdReq.Mpf1_awunq</p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.4 TABLE 4-16</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>Description in Section 4.4.3.3.6 TABLE 4-11</p><p>ArgV is just a pass-through in DCE. No checks needed for this.</p></td></tr><tr><td class="confluenceTd"><p>MPF2</p></td><td class="confluenceTd"><p>All exclusive ops -</p><p>(Valid | FlowId)</p><p><br/></p></td><td class="confluenceTd"><p>For exclusive ops</p><p>Valid = 1 </p><p>if Valid==1 </p><p>FlowId &lt; AiuInfo.nProcs</p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.Mpf2</p><p>(no checks for this field)</p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p><p><br/></p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.4 TABLE 4-17</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Size</p></td><td class="confluenceTd"><p>Access size in bytes. Number of bytes accessed is 2^Size. Size=3'b111 is reserved.</p></td><td class="confluenceTd"><p>randomize with constraint </p><p>Size !== 7</p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.Size</p><p>#Cover.DCE.CmdReq.Size</p><p>(no checks for this field)</p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.6</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>IntfSize</p></td><td class="confluenceTd"><p>Intfsize in double-words at the receiver of data. </p></td><td class="confluenceTd"><p> randomize (0 to 7)</p><p><br/></p></td><td class="confluenceTd"><p> #Cover.DCE.CmdReq.IntfSize</p><p>(no checks for this field)</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p> ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.7</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p> spec says 5 to 7 is reserved but that should not break anything.</p><p>Completely randomize. Any value should not affect DCE block.</p></td></tr><tr><td class="confluenceTd"><p>DId</p></td><td class="confluenceTd"><p> target DMIId</p></td><td class="confluenceTd"><p> = DMIId for that coherent address</p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.DId</p><p>(Constraint the DId driven with CMDReq for coherent address with information from address map)</p><p>#Cover.DCE.CmdReq.DId</p><p>(cover that addresses-space covers all the DMIIds attached to the DCE) </p><p><br/></p></td><td class="confluenceTd"><p> dce_mst_seq.svh</p><p> smi_coverage.svh</p></td><td class="confluenceTd"><p> ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.8</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>TOF</p></td><td class="confluenceTd"><p> Transaction Ordering Framework to apply to the current</p></td><td class="confluenceTd"><p>1- CHI master</p><p>2- ACE master</p><p>3 - AXI master</p></td><td class="confluenceTd"><p>#Stimulus.DCE.CmdReq.Tof</p><p><br/></p></td><td class="confluenceTd"><p>dce_mst_seq.svh</p><p><br/></p></td><td class="confluenceTd"><p> ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.9</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>QOS</p></td><td class="confluenceTd"><p> Quality of Service label field</p></td><td class="confluenceTd"><p> randomize based on QOS mapping from json</p></td><td class="confluenceTd"><p> #Cover.DCE.CmdReq.Qos</p><p><br/></p></td><td class="confluenceTd"><p> smi_coverage.svh</p></td><td class="confluenceTd"><p>  ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.10</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p> Can it be completely randomizable? Yes based on QOS mapping table from json.</p></td></tr><tr><td class="confluenceTd"><p>NDPROT</p></td><td class="confluenceTd"><p> protection bits for non-data payload</p></td><td class="confluenceTd"><p> randomize</p></td><td class="confluenceTd"><p> #Cover.DCE.CmdReq.NDProt</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p> ConcertoCProtocolArch.pdf</p><p>Section 4.4.3.12</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>  Can it be completely randomizable? Yes</p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-CMDresponse">CMD response</h3><p>CMDrsp message implies that a CMDreq message has been accepted by DCE. It is sent by DCE and returns the flow-control credit to the issuer of the original CMDreq initiator. </p><p>Refer to Section 4.5.6 TABLE 4-20 for description about each of the message fields </p><p><br/></p><h4 id="Ncore3.4DCETestplan-FunctionalCoverage/Checks.1">Functional Coverage/Checks</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="55783c2b-ba36-4406-b24f-d1f7f7f11cab" class="confluenceTable"><colgroup><col style="width: 821.0px;"/><col style="width: 310.0px;"/><col style="width: 244.0px;"/><col style="width: 270.0px;"/><col style="width: 62.0px;"/><col style="width: 91.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>HashTag</p></th><th class="confluenceTh"><p>Where Checked/Covered</p></th><th class="confluenceTh"><p>Reference Document</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Remarks</p></th></tr><tr><td class="confluenceTd"><p>RMessageId, TargetId of CMDrsp is matching SrcId, MessageId of one CMDreq in flight</p></td><td class="confluenceTd"><p>#Check.DCE.CmdRsp.RmsgId</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>ConcertoCprotocolArch.pdf</p><p>Section 4.5.6 TABLE 4-20</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Initiator Id of CMDrsp matches DCE's FUNIT Id i.e the CMDreq's TargId</p></td><td class="confluenceTd"><p>#Check.DCE.CmdRsp.InitiatorId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>ConcertoCprotocolArch.pdf</p><p>Section 4.5.6 TABLE 4-20</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that CMStatus for CMDrsp is always 0</p></td><td class="confluenceTd"><p>#Check.DCE.CMDRsp.Cmstatus</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>smi_seq_item.svh</p></td><td class="confluenceTd"><p>ConcertoCprotocolArch.pdf</p><p>Section 4.5.6 TABLE 4-20</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-UPDATErequest">UPDATE request</h3><p>Stands for Directory Update. Sent by ACE-AIU or IOAIU w/ proxy Cache to DCE to update the directory. UpdInv is the only type of UPDmsg defined. </p><p>Please refer to ConcertoCProtocolSpec.pdf Section 4.13.1 to Section 4.13.3  for complete details.</p><p><br/></p><h4 id="Ncore3.4DCETestplan-FunctionalCoverage/Checks.2">Functional Coverage/Checks</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="12689688-728b-461a-9b40-34ed36966854" class="confluenceTable"><colgroup><col style="width: 1132.0px;"/><col style="width: 260.0px;"/><col style="width: 196.0px;"/><col style="width: 50.0px;"/><col style="width: 160.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>HashTag</p></th><th class="confluenceTh"><p>Where Checked/Covered</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Remarks/Comments</p></th></tr><tr><td class="confluenceTd"><p>Every UPDreq should do a Directory Lookup</p></td><td class="confluenceTd"><p>#Check.DCE.UpdReq.DMUpdReq</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>random UPDreq address, (addr generated using a utility Address Manager , which has the intelligence to generate valid coherent addresses for DCE.)</p></td><td class="confluenceTd"><p>#Cover.DCE.UpdReq_Addr</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover the NS bit on the UpdReq</p></td><td class="confluenceTd"><p>#Cover.DCE.UpdReq.NonSecure</p></td><td class="confluenceTd"><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><h3 id="Ncore3.4DCETestplan-UPDATEresponse">UPDATE response</h3><p>After receiving the UPDreq message, the DCE issues an UPDrsp message back to the AIU to acknowledge the receipt of the request message</p><p>Please refer to ConcertoCProtocolSpec.pdf Section 4.13.4 to Section 4.13.6  for complete details.</p><h4 id="Ncore3.4DCETestplan-FunctionalCoverage/Checks.3">Functional Coverage/Checks</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="ea868477-4e47-4d63-814a-f78ea6ba6dd6" class="confluenceTable"><colgroup><col style="width: 767.0px;"/><col style="width: 402.0px;"/><col style="width: 304.0px;"/><col style="width: 77.0px;"/><col style="width: 248.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>HashTag</p></th><th class="confluenceTh"><p>Where Checked/Covered</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Remarks/Comments</p></th></tr><tr><td class="confluenceTd"><p>Every UPDreq should conclude with an UPDrsp</p></td><td class="confluenceTd"><p>#Check.DCE.CmdUpdRsp</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>RMsgId of UPDrsp is matches MsgId of a unique UPDreq in flight</p></td><td class="confluenceTd"><p>#Check.DCE.CmdUpdRsp.rmsgid</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>TargetId of UPDrsp is matches SrcId of UPDreq</p></td><td class="confluenceTd"><p>#Check.DCE.CmdUpdRsp.TargId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>InitiatorId of UPDrsp matches DCE's FUNIT Id.</p></td><td class="confluenceTd"><p>#Check.DCE.CmdUpdRsp.SrcId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><h3 id="Ncore3.4DCETestplan-SNPrequest">SNP request</h3><p>Refer to description of SNP request message from Section 4.5.1 of ConcertoCProtocol Spec.</p><h4 id="Ncore3.4DCETestplan-FunctionalCoverageandChecks"><strong>Functional Coverage and Checks</strong></h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="775cd005-e138-4205-a383-e1ea06358233" class="confluenceTable"><colgroup><col style="width: 874.0px;"/><col style="width: 228.0px;"/><col style="width: 182.0px;"/><col style="width: 212.0px;"/><col style="width: 46.0px;"/><col style="width: 256.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p><p>(ConcertoCProtocolArch.pdf)</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>Set expects for an SNP request messsage based on CMDType, DM lookup response. There could be multiple snoops issued.</p><p>Test fails on hb timeout if Request was expected and not Seen</p><p>Test fails on Unexpected Pkt Seen if SNP request was not expected but seen.</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Section 4.5.1</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that Src Id of the snoop request matches DCE FUNIT Id</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.SrcId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Section 4.5.1</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that Target Id of the snoop request matches the snooper AIU FUNIT Id</p><p>as determined by directory lkp_rsp and snoop_type</p></td><td class="confluenceTd"><p>#Check.DCE..SnpReq.TargId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Section 4.5.1</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that correct SnpType is generated for the CmdType</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.SnpType</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Section 4.5.2 TABLE 4-21</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover that every CMDType issues a SNPreq as per ConcertoCProtocol</p><p>cross CMDreqType x IssuesSnp</p></td><td class="confluenceTd"><p>#Cover.DCE.SnpReq</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>Section 4.5.2 TABLE 4-21</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that fields addr, vz, ac, ca, ns, pr, rl, tm, intfsize, dest_id, tof, qos, err, aux are match incoming CMDreq</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.Attributes</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Section 4.5.5</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check UP field (00-Unique Presence 01- Unique Provider 11-Unique Permission)</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.UP</p><p>#Cover.DCE.SnpReq.UP<br/></p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>smi_coverage.svh</p></td><td class="confluenceTd"><p>Section 4.5.5.4 TABLE 4-28</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MPF1 fields, If Stash: = CMDreq.MPF1 If non-Stash: = CMDreq.InitiatorId</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.MPF1</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Section 4.5.5.7</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MPF2 fields, If Stash: = CMDreq.MPF2 If non-Stash: = CMDreq.MessageId</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.MPF2</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Section 4.5.5.8</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MPF3 fields, If UP=11, FUNIT Id of AIU that is given permission to transfer data to requesting AIU.</p><p>if UP != 11 Dont care</p><p>For ncore3.0 DV expects the owner FUnit ID, on this field for SnpType:SNP_INV_DTR</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.MPF3</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Section 4.5.5.9 TABLE 4-32</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>UP=11 is not applicable to ncore 3.0</p></td></tr><tr><td class="confluenceTd"><p>Check RL field</p></td><td class="confluenceTd"><p>#Check.DCE..SnpReq.RL</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Section 4.5.5.5</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>DV maintains a pool of RBID per DMI with status (UNRESERVED, RESERVED)</p><p>Check to make sure the RBID picked is with status UNRESERVED</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.RBID</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Section 4.5.5.5</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-SNPresponse">SNP response  </h3><p>After processing the SNP transactions, the agents caches or proxy caches issue snoop responses of which data transfers to requesting AIU or DMI, if necessary may be a part. Each snooped AIU summarizes these responses in a message called SNPrsp, back to DCE.</p><p>Refer to description of SNP response message from Section 4.5.6 of ConcertoCProtocol Spec for more details.</p><p>DCE aiu slave sequence drives the SNPrsp message in response to the SNPreq it receives from DCE block. SNPrsp.CMStatus bits convey information about what the snooper AIU plans to do in response to SNPreq. slave sequence picks a random value among the legal possible values that could be driven. CMStatus bits are a function of SnpType and Snooper Initial State, and the legal values are specified in the ConcertoCProtocolSpec.</p><h4 id="Ncore3.4DCETestplan-FunctionalChecksandCoverage">Functional Checks and Coverage</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="ade31392-f94c-43e7-aa39-a3dcbcba1231" class="confluenceTable"><colgroup><col style="width: 659.0px;"/><col style="width: 370.0px;"/><col style="width: 216.0px;"/><col style="width: 342.0px;"/><col style="width: 51.0px;"/><col style="width: 159.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Coverered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p><p>(ConcertoCProtocolArch.pdf)</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>Every SNP request should be acknowledge by a subsequent SNP response message</p></td><td class="confluenceTd"><p>#Check.DCE.SnpRsp</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Section 4.5.6</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that initiatorId field matches the snooper AIU FUNIT Id</p></td><td class="confluenceTd"><p>#Check.DCE.SnpRsp.SrcId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-33 CCMP SNPrsp Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that targetId field matches DCE FUNIT Id</p></td><td class="confluenceTd"><p>#Check.DCE.SnpRsp.TargId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-33 CCMP SNPrsp Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that RMessageId field matches SNPreq MessageId</p></td><td class="confluenceTd"><p>#Check.DCE..SnpRsp.RMsgId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-33 CCMP SNPrsp Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that the CMStatus bits are among the legal possible values.</p></td><td class="confluenceTd"><p>#Check.DCE.SnpRsp.CMStatus</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Section 5.6 to Section 5.9</p><p>Coherency Protocol Tables for various ops.</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover that all possible legal values of CMStatus bits for a SNPtype</p><p>cross:</p><p>SNPtype x SNPrsp.CMStatus</p></td><td class="confluenceTd"><p>#Cover.DCE.RdVld.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.RdCln.SnpRsp_CMstatus<br/></p><p>#Cover.DCE.RdNotShdDirty.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.RdNITC.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.RdNITCClnInv.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.RdNITCMkInv.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.MkInv.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.MkUnq.SnpRsp_CMStatus</p><p>#Cover.DCE.WrUnqFull.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.WrUnqPtl.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.ClnInv.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.ClnUnq.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.RdAtm.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.WrAtm.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.CmpAtm.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.SwpAtm.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.ClnVld.SnpRsp_CMStatus<br/></p><p>#Cover.DCE.ClnShPer.SnpRsp_CMStatus</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>Section 5.6 to Section 5.9</p><p>Coherency Protocol Tables for various ops.</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-STRrequest">STR request</h3><p>STRreq is sent by DCE to requestor AIU, to mark a key event in the processing of the CMDreq from the requestor AIU. It indicates the achievement of global ordering and visibility and forward progress of the operation.</p><p>Refer to description of STR request message from Section 4.10.1 to 4.10.3 of ConcertoCProtocol Spec for more details.</p><h4 id="Ncore3.4DCETestplan-FunctionalCoverage&amp;Checks">Functional Coverage &amp; Checks</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="f3dce790-d319-4010-90a9-ee75e1d72c2b" class="confluenceTable"><colgroup><col style="width: 582.0px;"/><col style="width: 195.0px;"/><col style="width: 183.0px;"/><col style="width: 276.0px;"/><col style="width: 56.0px;"/><col style="width: 62.0px;"/><col style="width: 91.0px;"/><col style="width: 149.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p><p>(ConcertoCProtocolArch.pdf</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>Every transaction starts with a CMDreq and STRreq is expected to be issued by DCE.</p><p>Test fails on hb timeout if STRreq was not seen</p></td><td class="confluenceTd"><p> #Check.DCE.StrReq</p></td><td class="confluenceTd"><p> dce_scoreboard.svh</p></td><td class="confluenceTd"><p> Section 4.10</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that targetID field matches requestor aiu FUnitID</p></td><td class="confluenceTd"><p>#Check.DCE.StrReq_TargetId</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>TABLE 4-52 CCMP STRreq Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that MsgId field matches the ATTID allocated to the transaction</p></td><td class="confluenceTd"><p>#Check.DCE.StrReq_MsgId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-52 CCMP STRreq Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that RMsgId field matches CMDreq.MsgId</p></td><td class="confluenceTd"><p>#Check.DCE.StrReq_RMsgId</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>TABLE 4-52 CCMP STRreq Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that RBId if RESERVED already matches the RBID of the transaction. </p><p>RBID Availability checks are done on RBRsv request. </p></td><td class="confluenceTd"><p>#Check.DCE.StrReq_RBID</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-52 CCMP STRreq Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MPF1 stash_nid for Stashing requests. For other requests, it is a don't care</p></td><td class="confluenceTd"><p>#Check.DCE.StrReq_MPF1</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-52 CCMP STRreq Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MPF2 dtr_msg_id. It should match CMDreq msg_id.</p></td><td class="confluenceTd"><p>#Check.DCE.StrReq_MPF2</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-52 CCMP STRreq Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check IntfSize = SNprsp.IntfSize for snooper with SNPrsp.CMStatus.Snarf=1, else don't care</p></td><td class="confluenceTd"><p>#Check.DCE.StrReq_IntfSize</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-52 CCMP STRreq Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover STRReq smi_cmstatus_state</p></td><td class="confluenceTd"><p>#Cover.DCE.StrReq_finalstate</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>TABLE 4-52 CCMP STRreq Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-STRresponse">STR response</h3><p>After receiving an STRreq message, AIU issues an STRrsp message back to DCE to acknowledge the receipt of the former message. </p><p>DCE aiu slave sequence generates and issues an STR response on receipt of an STR request from DCE.</p><p>Refer to description of STR response message from Section 4.10.4 of ConcertoCProtocol Spec for more details.</p><h4 id="Ncore3.4DCETestplan-FunctionalCoverageandChecks.">Functional Coverage and Checks.</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="1d8b68a9-0a15-4c35-8dfa-3f0788d36315" class="confluenceTable"><colgroup><col style="width: 599.0px;"/><col style="width: 218.0px;"/><col style="width: 279.0px;"/><col style="width: 311.0px;"/><col style="width: 46.0px;"/><col style="width: 52.0px;"/><col style="width: 58.0px;"/><col style="width: 89.0px;"/><col style="width: 144.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p><p>(ConcertoCProtocolArch.pdf)</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Priority</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>Every STR request should be acknowledge by a subsequent STR response message</p></td><td class="confluenceTd"><p>#Check.DCE.StrRspCheck</p></td><td class="confluenceTd"><p>dce_scoreboard.svh, dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Section 4.10.4</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that initiatorID field matches STRreq Targ FUNIT Id</p></td><td class="confluenceTd"><p>#Check.DCE.StrRsp.InitiatorId</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>TABLE 4-54 CCMP STRrsp Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that targetID field matches DCE FUNIT Id</p></td><td class="confluenceTd"><p>#Check.DCE.StrRsp.TargetId</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>TABLE 4-54 CCMP STRrsp Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that RMsgId field matches STRreq.MsgId</p></td><td class="confluenceTd"><p>#Check.DCE.StrRsp.MsgId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-54 CCMP STRrsp Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-MRDrequest">MRD request</h3><p>This type of message is sent by DCE to DMI for two reasons: </p><ol start="1"><li><p>In response to a Read command after DCE has concluded that data will not be provided to the requestor by a snooper. This determination may be based on the SNPrsp messages received from a snoopers or may be based on the inspection of the states of the cacheline in various potential snoopers as reflected in the directory.</p></li><li><p>In order to enforce a CMO at the SMC. After having enforced the semantics of the CMO among systems agents via snoops, the CMOs must also be enforced at the system memory cache to fully perform the CMO</p></li></ol><h4 id="Ncore3.4DCETestplan-Functionalcoverageandchecks.">Functional coverage and checks.</h4><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="88eeba45-512e-4fde-99e0-6ada5f94c8d5" class="confluenceTable"><colgroup><col style="width: 545.0px;"/><col style="width: 263.0px;"/><col style="width: 246.0px;"/><col style="width: 281.0px;"/><col style="width: 56.0px;"/><col style="width: 63.0px;"/><col style="width: 133.0px;"/><col style="width: 150.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>Check that addr,ns of the MRDreq matches the addr,ns of the outstanding TXN waiting on MRDreq</p></td><td class="confluenceTd"><p> #Check.DCE.MrdReq_AddrNS</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-48 CCMP MRDreq message fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that MsgId field matches the attid of the outstanding TXN waiting on MRDreq</p></td><td class="confluenceTd"><p> #Check.DCE.MrdReq_ATTId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-48 CCMP MRDreq message fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MRDreq.Type match DV prediction</p></td><td class="confluenceTd"><p> #Check.DCE.MrdReq_Type</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-47 MRDreq Messages</p><p>Stashing Transaction Flows.ppt</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MRDreq Attributes are a pass-through from the CMDreq</p><p>(Addr, NS, VZ, AC, PR, RL, LK, TM, Size, IntfSixe QOS, AUX)</p></td><td class="confluenceTd"><p> #Check.DCE.MrdReq_Attr_PassThru</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-48 CCMP MRDreq message fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MRDreq.RL</p><p>MrdRdCln* caused due to stashing: RL = 'b11</p><p>MrdCln, MrdFlush, MrdInvalid: RL = 'b10</p><p>All others: RL = 'b01</p></td><td class="confluenceTd"><p>#Check.DCE.MrdReq_RL</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>CCMP spec</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>any reads test</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MRDreq.MPF1 matches CMDreq.smi_src_id(non-stash cmds or stash cmds with snarf=0) and matches CMDreq.mpf1_stash_nid(stash cmds with snarf=1)</p></td><td class="confluenceTd"><p> #Check.DCE.MrdReq_mpf1</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-48 CCMP MRDreq message fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check MRDreq.MPF2 matches CMDreq.MsgId(non-stash cmds or stash cmds with snarf=0) and matches stash_target.smi_mpf1_dtr_msg_id(stash cmds with starf=1)</p></td><td class="confluenceTd"><p> #Check.DCE.MrdReq_mpf2</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-48 CCMP MRDreq message fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that no MRDreq is issued by DCE when it is out of credits</p></td><td class="confluenceTd"><p>#Check.DCE.MrdReq_CreditCheck</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>CCMP spec</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="d21c8439-d5a2-491f-9381-47d4050aea22" class="confluenceTable"><colgroup><col style="width: 168.57px;"/><col style="width: 68.99px;"/><col style="width: 305.14px;"/></colgroup><tbody><tr><th colspan="3" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_miss)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th></tr><tr><td class="confluenceTd"><p>RdVld</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td></tr><tr><td class="confluenceTd"><p>RdCln</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td></tr><tr><td class="confluenceTd"><p>RdNotShdDirty</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td></tr><tr><td class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWU</p></td></tr><tr><td class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWINV</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="9856442d-aebb-47b0-a9c4-64f7e3d7f04b" class="confluenceTable"><colgroup><col style="width: 309.0px;"/><col style="width: 174.0px;"/><col style="width: 275.0px;"/></colgroup><tbody><tr><th colspan="3" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_hit_iid_inv_owner_absent_other_sharers_present)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th></tr><tr><td class="confluenceTd"><p>RdVld</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td></tr><tr><td class="confluenceTd"><p>RdCln</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td></tr><tr><td class="confluenceTd"><p>RdNotShdDirty</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td></tr><tr><td class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWU</p></td></tr><tr><td class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWINV</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="ed89c700-3667-4e1d-9583-63b4a65a4e61" class="confluenceTable"><colgroup><col style="width: 162.0px;"/><col style="width: 91.0px;"/><col style="width: 506.0px;"/></colgroup><tbody><tr><th colspan="3" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_hit_iid_inv_owner_present_other_sharers_absent)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th></tr><tr><td class="confluenceTd"><p>RdVld</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU ($onehot(cmt_req.sharer_vec) = 1)</p><p>MrdRdClnWS ($onehot(cmt_req.sharer_vec) = 0)</p></td></tr><tr><td class="confluenceTd"><p>RdCln</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU ($onehot(cmt_req.sharer_vec) = 1)</p><p>MrdRdClnWS ($onehot(cmt_req.sharer_vec) = 0)</p></td></tr><tr><td class="confluenceTd"><p>RdNotShdDirty</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU ($onehot(cmt_req.sharer_vec) = 1)</p><p>MrdRdClnWS ($onehot(cmt_req.sharer_vec) = 0)</p></td></tr><tr><td class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWU</p></td></tr><tr><td class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWINV</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="wide" data-local-id="3967a0fb-2349-4aec-99e8-613841bc0c9a" class="confluenceTable"><colgroup><col style="width: 217.17px;"/><col style="width: 88.88px;"/><col style="width: 393.11px;"/></colgroup><tbody><tr><th colspan="3" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_hit_iid_inv_owner_present_other_sharers_present)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th></tr><tr><td class="confluenceTd"><p>RdVld</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS </p></td></tr><tr><td class="confluenceTd"><p>RdCln</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS </p></td></tr><tr><td class="confluenceTd"><p>RdNotShdDirty</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS </p></td></tr><tr><td class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWU</p></td></tr><tr><td class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWINV</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="0f6628a4-4675-4000-b779-96388b7710f0" class="confluenceTable"><colgroup><col style="width: 157.45px;"/><col style="width: 139.17px;"/><col style="width: 369.01px;"/></colgroup><tbody><tr><th colspan="3" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_hit_iid_sharer_owner_absent_sharers_absent)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th></tr><tr><td class="confluenceTd"><p>RdVld</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td></tr><tr><td class="confluenceTd"><p>RdCln</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td></tr><tr><td class="confluenceTd"><p>RdNotShdDirty</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td></tr><tr><td class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWU</p></td></tr><tr><td class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>all others except ace_aiu</p><p>ace_aiu </p></td><td class="confluenceTd"><p>MrdRdWINV</p><p>MrdRdClnWU</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="7c262bfa-c844-41a6-92a6-8a1791353c81" class="confluenceTable"><colgroup><col style="width: 248.0px;"/><col style="width: 290.0px;"/><col style="width: 220.0px;"/></colgroup><tbody><tr><th colspan="3" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_hit_iid_sharer_owner_absent_sharers_present)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th></tr><tr><td class="confluenceTd"><p>RdVld</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td></tr><tr><td class="confluenceTd"><p>RdCln</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td></tr><tr><td class="confluenceTd"><p>RdNotShdDirty</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td></tr><tr><td class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWU</p></td></tr><tr><td class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>all except ace_aiu</p><p>ace_aiu</p></td><td class="confluenceTd"><p>MrdRdWINV</p><p>MrdRdClnWS</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="c1cd61ca-8eba-4270-a321-1ca511fe4d99" class="confluenceTable"><colgroup><col style="width: 92.12px;"/><col style="width: 104.07px;"/><col style="width: 270.03px;"/></colgroup><tbody><tr><th colspan="3" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_hit_iid_sharer_owner_present_sharers_absent)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th></tr><tr><td rowspan="2" class="confluenceTd"><p>RdVld</p></td><td rowspan="2" class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU ($onehot(cmt_req.sharer_vec) = 1)</p></td></tr><tr><td class="confluenceTd"><p>MrdRdClnWS ($onehot(cmt_req.sharer_vec) = 0)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p>RdCln</p></td><td rowspan="2" class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU ($onehot(cmt_req.sharer_vec) = 1)</p></td></tr><tr><td class="confluenceTd"><p>MrdRdClnWS ($onehot(cmt_req.sharer_vec) = 0)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p>RdNotShdDirty</p></td><td rowspan="2" class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU ($onehot(cmt_req.sharer_vec) = 1)</p></td></tr><tr><td class="confluenceTd"><p>MrdRdClnWS ($onehot(cmt_req.sharer_vec) = 0)</p></td></tr><tr><td class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWU</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>all except ace_aiu</p></td><td class="confluenceTd"><p>MrdRdWINV</p></td></tr><tr><td class="confluenceTd"><p>ace_aiu</p></td><td class="confluenceTd"><p>MrdRdClnWU ($onehot(cmt_req.sharer_vec) = 1)</p><p>MrdRdClnWS ($onehot(cmt_req.sharer_vec) = 0)</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="eec24242-7576-4cb3-9556-0088f2c177ea" class="confluenceTable"><colgroup><col style="width: 262.17px;"/><col style="width: 229.84px;"/><col style="width: 186.26px;"/></colgroup><tbody><tr><th colspan="3" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_hit_iid_sharer_owner_present_sharers_present)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th></tr><tr><td class="confluenceTd"><p>RdVld</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td></tr><tr><td class="confluenceTd"><p>RdCln</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS </p></td></tr><tr><td class="confluenceTd"><p>RdNotShdDirty</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td></tr><tr><td class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdWU</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>all except ace_aiu</p></td><td class="confluenceTd"><p>MrdRdWINV</p></td></tr><tr><td class="confluenceTd"><p>ace_aiu</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="70ff9228-14ae-4d14-85a0-72f65ee39bfd" class="confluenceTable"><colgroup><col style="width: 123.0px;"/><col style="width: 142.68px;"/><col style="width: 151.82px;"/><col style="width: 260.76px;"/></colgroup><tbody><tr><th colspan="4" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_hit_iid_owner_other_sharers_absent)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th><th class="confluenceTh"><p>Reference Document</p></th></tr><tr><td class="confluenceTd"><p>RdVld</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>RdCln</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>RdNotShdDirty</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td rowspan="2" class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>all except ace_aiu</p></td><td class="confluenceTd"><p>MrdRdWU</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ace_aiu</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td><td class="confluenceTd"><p>CONC-6456</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>all except ace_aiu</p></td><td class="confluenceTd"><p>MrdRdWINV</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ace_aiu</p></td><td class="confluenceTd"><p>MrdRdClnWU</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="42eb19eb-6cd1-4e8f-af0c-27c4717fb592" class="confluenceTable"><colgroup><col style="width: 197.0px;"/><col style="width: 231.0px;"/><col style="width: 455.0px;"/><col style="width: 915.0px;"/></colgroup><tbody><tr><th colspan="4" class="confluenceTh"><p>dm_lkp_rsp = (Hash-Tag: #Cover.DCE.MrdReq.dm_hit_iid_owner_other_sharers_present)</p><p>Reference: TABLE 4-48 CCMP MRDreq message fields</p></th></tr><tr><th class="confluenceTh"><p>CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p>MRDreq</p></th><th class="confluenceTh"><p>Reference </p></th></tr><tr><td class="confluenceTd"><p>RdVld</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>RdCln</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>RdNotShdDirty</p></td><td class="confluenceTd"><p>any</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td rowspan="2" class="confluenceTd"><p>RdUnq</p></td><td class="confluenceTd"><p>all except ace_aiu</p></td><td class="confluenceTd"><p>MrdRdWU</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ace_aiu</p></td><td class="confluenceTd"><p>MrdRdClnWU (since it is not unique)</p></td><td class="confluenceTd"><p>CONC-6711 ACE master in owner state should always issue MrdRdClnWU </p></td></tr><tr><td rowspan="2" class="confluenceTd"><p>RdNITC</p></td><td class="confluenceTd"><p>all except ace_aiu</p></td><td class="confluenceTd"><p>MrdRdWINV</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ace_aiu</p></td><td class="confluenceTd"><p>MrdRdClnWS</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="wide" data-local-id="db3d2e34-35c9-41d3-8304-3a53309d50e5" class="confluenceTable"><colgroup><col style="width: 248.11px;"/><col style="width: 74.5px;"/><col style="width: 56.23px;"/><col style="width: 302.93px;"/></colgroup><tbody><tr><th colspan="4" class="confluenceTh"><p style="text-align: center;">Stash Reads</p><p style="text-align: center;">Hash-Tag: #Cover.DCE.MrdReq.stash.iid</p></th></tr><tr><th class="confluenceTh"><p style="text-align: center;">dm_lkp_rsp</p></th><th class="confluenceTh"><p style="text-align: center;">CMDreq</p></th><th class="confluenceTh"><p>iid_type</p></th><th class="confluenceTh"><p style="text-align: center;">MRDreq</p></th></tr><tr><td rowspan="2" class="confluenceTd"><p style="text-align: center;"><br/></p><p style="text-align: center;"><br/></p><p style="text-align: center;">dm_miss</p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWU (target identified, snarf = 1)</p></td></tr><tr><td class="confluenceTd"><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWS (target identified, snarf = 1)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><br/></p><p>dm_hit_trgt_inv_owner_absent_other_shares_present</p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWU (target identified, snarf = 1)</p></td></tr><tr><td class="confluenceTd"><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWS (target identified, snarf = 1)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><br/></p><p><span class="legacy-color-text-blue3">dm_hit_trgt_inv_owner_present_other_sharers_absent</span></p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">No Mrd Issued (target not identified and requester is not owner)</span></p><p><span class="legacy-color-text-blue3">MrdPrefetch (target not identified and requester is owner)</span></p><p><span class="legacy-color-text-blue3">MrdRdClnWU (target identified, snarf=1)</span></p></td></tr><tr><td class="confluenceTd"><p><br/></p><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">No Mrd Issued (target not identified and requester is not owner)</span></p><p><span class="legacy-color-text-blue3">MrdPrefetch (target not identified and requester is owner)</span></p><p><span class="legacy-color-text-blue3">MrdRdClnWS (target identified, snarf=1)</span></p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><br/></p><p><span class="legacy-color-text-blue3">dm_hit_trgt_inv_owner_present_other_sharers_present</span></p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">No Mrd Issued (target not identified and requester is not owner)</span></p><p><span class="legacy-color-text-blue3">MrdPrefetch (target not identified and requester is owner)</span></p><p>MrdRdClnWU (target identified, snarf=1)</p></td></tr><tr><td class="confluenceTd"><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">No Mrd Issued (target not identified and requester is not owner)</span></p><p><span class="legacy-color-text-blue3">MrdPrefetch (target not identified and requester is owner)</span></p><p>MrdRdClnWS (target identified, snarf=1)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><br/></p><p><span class="legacy-color-text-blue3">dm_hit_trgt_sharer_owner_absent_sharers_absent</span></p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWU (target identified, snarf=1)</p></td></tr><tr><td class="confluenceTd"><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWS (target identified, snarf=1)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><br/></p><p><span class="legacy-color-text-blue3">dm_hit_trgt_sharer_owner_absent_sharers_present</span></p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWU (target identified, snarf=1)</p></td></tr><tr><td class="confluenceTd"><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWS (target identified, snarf=1)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><br/></p><p><span class="legacy-color-text-blue3">dm_hit_trgt_sharer_owner_present_sharers_absent</span></p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">No Mrd Issued (target not identified and requester is not owner)</span></p><p><span class="legacy-color-text-blue3">MrdPrefetch (target not identified and requester is owner)</span></p><p>MrdRdClnWU (target identified, snarf=1)</p></td></tr><tr><td class="confluenceTd"><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">No Mrd Issued (target not identified and requester is not owner)</span></p><p><span class="legacy-color-text-blue3">MrdPrefetch (target not identified and requester is owner)</span></p><p>MrdRdClnWS (target identified, snarf=1)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><br/></p><p><span class="legacy-color-text-blue3">dm_hit_trgt_sharer_owner_present_sharers_present</span></p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">No Mrd Issued (target not identified and requester is not owner)</span></p><p><span class="legacy-color-text-blue3">MrdPrefetch (target not identified and requester is owner)</span></p><p>MrdRdClnWU (target identified, snarf=1)</p></td></tr><tr><td class="confluenceTd"><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">No Mrd Issued (target not identified and requester is not owner)</span></p><p><span class="legacy-color-text-blue3">MrdPrefetch (target not identified and requester is owner)</span></p><p>MrdRdClnWS (target identified, snarf=1)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><br/></p><p><span class="legacy-color-text-blue3">dm_hit_trgt_owner_other_sharers_absent</span></p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWU (target identified, snarf=1)</p></td></tr><tr><td class="confluenceTd"><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWU (target identified, snarf=1)</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><br/></p><p><span class="legacy-color-text-blue3">dm_hit_trgt_owner_other_sharers_present</span></p></td><td class="confluenceTd"><p>LdCchUnq</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWU (target identified, snarf=1)</p></td></tr><tr><td class="confluenceTd"><p>LdCchShd</p></td><td class="confluenceTd"><p>chi_aiu</p><p>ace_lite_e</p></td><td class="confluenceTd"><p>MrdPrefetch (target not identified)</p><p>MrdRdClnWS (target identified, snarf=1)</p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-MRDresponse">MRD response</h3><p>After receiving an MRDreq message, DMI issues an MRDrsp message back to DCE to acknowledge the receipt of the former message. It re</p><p>DCE dmi slave sequence generates and issues an MRD response on receipt of an MRD request from DCE.</p><p>Refer to description of MRD response message from Section 4.8.5 of ConcertoCProtocol Spec for more details.</p><h4 id="Ncore3.4DCETestplan-Functionalcoverageandchecks..1">Functional coverage and checks.</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="f3ab3a19-ecbf-4929-938b-fcf989be63b3" class="confluenceTable"><colgroup><col style="width: 515.0px;"/><col style="width: 277.0px;"/><col style="width: 236.0px;"/><col style="width: 267.0px;"/><col style="width: 39.0px;"/><col style="width: 44.0px;"/><col style="width: 49.0px;"/><col style="width: 247.0px;"/><col style="width: 122.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p><p>(ConcertoCProtocolArch.pdf)</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Priority</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>Every MRD request should be acknowledge by a subsequent MRD response message</p></td><td class="confluenceTd"><p>#Check.DCE.Concerto.v3.0.MrdRsp</p></td><td class="confluenceTd"><p>dce_scoreboard.svh, dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Section 4.8.5</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_step_all_ops, +no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that initiatorID field matches MRDreq.Target FUNIT Id</p></td><td class="confluenceTd"><p>#Check.DCE.Concerto.v3.0.MrdRsp.InitiatorId</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>TABLE 4-49 CCMP MRDrsp Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_step_all_ops, +no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that targetID field matches DCE FUNIT Id</p></td><td class="confluenceTd"><p>#Check.DCE.Concerto.v3.0.MrdRsp.TargetId</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>TABLE 4-49 CCMP MRDrsp Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_step_all_ops, +no_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that RMsgId field matches MRDreq.MsgId</p></td><td class="confluenceTd"><p>#Check.DCE.Concerto.v3.0.MrdRsp.RMsgId</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>TABLE 4-49 CCMP MRDrsp Message Fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_step_all_ops, +no_addr_conflict</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-RBrequest">RB request</h3><p>Request Buffer (RB) is a hardware data structure used to hold control information from the coherent CMDreq that is needed to process an intervention data transfer to DMI that might result from an SNPreq corresponding to the said CMDreq. They are also utilized to mediate data transfers from requesting AIUs such as in the case of Write CMDreqs.</p><p>The control information held in the Request Buffer is delivered via the RBreq (with RType =1 Reserve) message, sent to the DMI via the DCE. The same RBID field is supplied to snoopers on SNPreq and to requestor AIU on STRreq, so RBID is copied into the data transfer meesage DTWreq from snooper or requestor(in case of writes).</p><p>DCE keeps track of the RBs it has been allocated on a per DMI basis, and does not issue an RBRreq unless it has an unreserved RB available. </p><p>A reserved RB may not get utilized if the snoops for CMDreq do not generate any DTWs. In this case DCE may unreserve or release the RB to be able to reuse it for another CMDreq. releasing the RB invokes another RB request (with RType=0 or Release) to DMI.</p><p>An RBID is marked RESERVED (in DV)  when a RB Reserve Request is issued by DCE.</p><h4 id="Ncore3.4DCETestplan-Functionalcoverageandchecks..2">Functional coverage and checks.</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="98c1b188-e0fe-432e-bead-a941d542e481" class="confluenceTable"><colgroup><col style="width: 590.0px;"/><col style="width: 288.0px;"/><col style="width: 185.0px;"/><col style="width: 275.0px;"/><col style="width: 56.0px;"/><col style="width: 63.0px;"/><col style="width: 148.0px;"/><col style="width: 150.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p><p>(ConcertoCProtocolArch.pdf)</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>Set expects for an RB request Reserve and Release based on CMDType, DM lookup, and aggregate of all SnpResps</p><p>Test fails on hb timeout if Request was expected and not Seen</p><p>Test fails on Unexpected Pkt Seen if RB request was not expected but seen.</p></td><td class="confluenceTd"><p>#Check.DCE.RBReq_Rsv</p><p>#Check.DCE.RBReq_Rls</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Section 4-11</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_step_all_ops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that TargetId field matches the DMI FUNIT Id (DId) for that address.</p></td><td class="confluenceTd"><p>#Check.DCE.RBReq_TargetId</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-55 CCMP RBRreq message fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_step_all_ops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that RBreq MessageId field match the ATTID of the transaction,</p></td><td class="confluenceTd"><p>#Check.DCE.RBReq_MsgId</p></td><td class="confluenceTd"><p> dce_scb_txn.svh</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_step_all_ops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Check that Attributes are pass-through from CMDreq</del></p><p><del>(Addr, NS, Size,IntfSize, VZ, AC, NS, PR, LK, TOF, QOS,</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBReqAttr_PassThr</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p><p><del>dce_scb_txn.svh</del></p></td><td class="confluenceTd"><p><del>TABLE 4-55 CCMP RBRreq message fields</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all_ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Check that MW(Merging Write) is only set for WrUnqPtl op</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBReqAttr_MW</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p><p><del>dce_scb_txn.svh</del></p></td><td class="confluenceTd"><p><del>Section 4.11.4.5.1</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all_ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Check that RL field in RBRreq message</del></p><p><del>For Reserve: Set to 'b01 or 'b10</del></p><p><del>For Release: Set to 'b10</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBReq_Rsv_Attr_RL</del></p><p><del>Check.DCE.RBReq_Rls_Attr_RL</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p><p><del>dce_scb_txn.svh</del></p></td><td class="confluenceTd"><p><del>Section 4.11.4.5.2</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all_ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check RBID field is not already in Use and not released.</p></td><td class="confluenceTd"><p>#Check.DCE.RBReq.RBIDAvailabilityCheck</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>CCMP spec</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_step_all_ops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that RBID is within the RBID_RANGE for that DCE_ID</p><p>example: nDceRbCredits=12</p><p>RBIDs for DCE0 : 0 - 11</p><p>RBIDs for DCE1: 12 - 23 </p><p>...</p></td><td class="confluenceTd"><p>#Check.DCE.RBReqRBID_Range</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>CCMP spec</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_step_all_ops</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-RBresponse">RB response </h3><p>After receiving the RBRreq message, DMI issues an RBRrsp message back to the DCE to acknowledge the receipt of the former message. An RB response for an RB Release Request needs to seen by DCE rtl to mark an RBID as UNRESERVED.</p><p>DCE dmi slv sequence generates and issues a RB response on receipt of a RB request.</p><h4 id="Ncore3.4DCETestplan-Functionalcoverageandchecks..3">Functional coverage and checks.</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="e8136f96-8097-4993-89d4-94a9c981a329" class="confluenceTable"><colgroup><col style="width: 615.0px;"/><col style="width: 236.0px;"/><col style="width: 195.0px;"/><col style="width: 327.0px;"/><col style="width: 49.0px;"/><col style="width: 55.0px;"/><col style="width: 165.0px;"/><col style="width: 153.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p><p>(ConcertoCProtocolArch.pdf)</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p><del>Every RB request should be acknowledge by a subsequent RB response message</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBRsp</del></p></td><td class="confluenceTd"><p><del>dce_scb_txn.svh</del></p></td><td class="confluenceTd"><p><del>Section 4.11.5</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all_ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that initiatorID field matches DMI FunitID</p></td><td class="confluenceTd"><p>#Check.DCE.RBRsp_InitiatorId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-56 CCMP RBRrsp message fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_step_all_ops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that RMsgId field matches RBreq.MsgId or TXN's attid</p></td><td class="confluenceTd"><p>#Check.DCE.RBRsp_RMsgId</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>TABLE 4-56 CCMP RBRrsp message fields</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_step_all_ops</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-RBUserequest"><del>RBUse request</del></h3><p><del> The message is sent by the DMI to DCE after a reserved RB allocated to the DCE has been utilized to handle all DTWs generated by AIUs for a CMDreq. After receiving the RBUreq, the DCE marks the RB as unreserved in its own data structures, so it can be reused for another CMDreq.</del></p><p><del>DCE dmi slv sequence has the capability of peeking through snp_rsps (for non-writes) and determine if RBUsed req needs to be issued. RBUsed requests are always issued for write requests. RBUsed requests are only issued once RB Reserve Requests are seen by the slave sequence. </del></p><h4 id="Ncore3.4DCETestplan-Functionalcoverageandchecks..4"><del>Functional coverage and checks.</del></h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="8bf6399f-8c46-49c3-9967-7cb690560f30" class="confluenceTable"><colgroup><col style="width: 617.0px;"/><col style="width: 234.0px;"/><col style="width: 170.0px;"/><col style="width: 287.0px;"/><col style="width: 43.0px;"/><col style="width: 48.0px;"/><col style="width: 263.0px;"/><col style="width: 134.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p><p>(ConcertoCProtocolArch.pdf)</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p><del>Set expects for an RBUsed Req based on SnpRsps and CmdType</del></p><p><del>Test fails on hb timeout if Request was expected and not Seen</del></p><p><del>Test fails on Unexpected Pkt Seen if RBUse request was not expected but seen.</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBUseReq</del></p></td><td class="confluenceTd"><p><del>dce_scb_txn.svh</del></p></td><td class="confluenceTd"><p><del>Section 4-12</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all</del><em><del>_</del></em><del>ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Check that InitiatorId field matches the DMI FUNIT Id (DId).</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBUseReq_InitiatorId</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p><p><del>dce_scb_txn.svh</del></p></td><td class="confluenceTd"><p><del>TABLE 4-57 CCMP RBUreq message fields</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all</del><em><del>_</del></em><del>ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Randomize RBUse req MessageId field</del></p></td><td class="confluenceTd"><p><del>Cover.DCE.RBUseReq_MsgID</del></p></td><td class="confluenceTd"><p><del> dce_slv_seq.svh</del></p></td><td class="confluenceTd"><p><del>CCMP spec</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all</del><em><del>_</del></em><del>ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Check that RBID matches the RB Reserve Request RBID</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBUseReq_RBID</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p></td><td class="confluenceTd"><p><del>Section 4.11.4.1</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all</del><em><del>_</del></em><del>ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Check that RL field in RBUreq message</del></p><p><del>is always set to 'b01 (merely requests for an acknowledgement of recepit of RBUreq message</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBUseReq_RL</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p><p><del>dce_scb_txn.svh</del></p></td><td class="confluenceTd"><p><del>Section 4.12.3.3.1</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all</del><em><del>_</del></em><del>ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-RBUseresponse"><del>RBUse response</del></h3><p><del>After receiving RBU req message, DCE issues a RBUrsp message back to DMI to acknowledge the receipt of the former message.</del></p><h4 id="Ncore3.4DCETestplan-FunctionalcoverageandChecks"><del>Functional coverage and Checks</del></h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="c977703c-faf4-4aff-ab19-9622e13c1c95" class="confluenceTable"><colgroup><col style="width: 633.0px;"/><col style="width: 227.0px;"/><col style="width: 193.0px;"/><col style="width: 325.0px;"/><col style="width: 49.0px;"/><col style="width: 55.0px;"/><col style="width: 163.0px;"/><col style="width: 152.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p><p>(ConcertoCProtocolArch.pdf)</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p><del>Every RBU request should be acknowledge by a subsequent RBU response message</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBURsp</del></p></td><td class="confluenceTd"><p><del>dce_scb_txn.svh</del></p></td><td class="confluenceTd"><p><del>Section 4.14.4</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all_ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Check that targetID field matches RBUreq.Src FUNIT Id or DMI FUNIT Id</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBURspTargetId</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p></td><td class="confluenceTd"><p><del>TABLE 4-58 CCMP RBUrsp message fields</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all_ops</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Check that RMsgId field matches RBUreq.MsgId</del></p></td><td class="confluenceTd"><p><del>Check.DCE.RBURspRMsgId</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p></td><td class="confluenceTd"><p><del>TABLE 4-58 CCMP RBUrsp message fields</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>PASS</del></p></td><td class="confluenceTd"><p><del>+single_step_all_ops</del></p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><p><br/></p><p>RBs Functional Coverage</p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="e5db5711-d2b3-4d89-88e5-429e4f611709" class="confluenceTable"><colgroup><col style="width: 545.0px;"/><col style="width: 208.0px;"/><col style="width: 142.0px;"/><col style="width: 159.0px;"/><col style="width: 56.0px;"/><col style="width: 62.0px;"/><col style="width: 71.0px;"/><col style="width: 84.0px;"/><col style="width: 149.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered</p></th><th class="confluenceTh"><p>Reference Document</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Priority</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p><del>Cover that every CMDreq issues an RB Reserve Request, followed by RBUsed Request</del></p><p><del>cross: CMDreq.Type x RB Reserve_and_RBUsed</del></p></td><td class="confluenceTd"><p><del>Cover.DCE.RBRsrv_RBUsed</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p></td><td class="confluenceTd"><p><del>CCMP spec</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>DONE</del></p></td><td class="confluenceTd"><p><del>1</del></p></td><td class="confluenceTd"><p><del>cmdreq_addrconflict</del></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><del>Cover that every CMDreq issues an RB Reserve Request followed RB Release request.</del></p><p><del>(Obviously Write CMDreqs are excluded)</del></p><p><del>cross: CMDreq.Type x RB Reserve_and_Release.</del></p></td><td class="confluenceTd"><p><del>Cover.DCE.RBRsrv_RBRelease</del></p></td><td class="confluenceTd"><p><del>dce_scoreboard.svh</del></p></td><td class="confluenceTd"><p><del>CCMP spec</del></p></td><td class="confluenceTd"><p><del>Y</del></p></td><td class="confluenceTd"><p><del>DONE</del></p></td><td class="confluenceTd"><p><del>1</del></p></td><td class="confluenceTd"><p><del>cmdreq_addrconflict</del></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><h2 id="Ncore3.4DCETestplan-ConcertoMessages/DMMessagesTiming"><strong>Concerto Messages/DM Messages Timing</strong></h2><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="43603fa8-d33f-422a-ac04-c258baaa6320" class="confluenceTable"><colgroup><col style="width: 772.0px;"/><col style="width: 367.0px;"/><col style="width: 196.0px;"/><col style="width: 67.0px;"/><col style="width: 75.0px;"/><col style="width: 110.0px;"/><col style="width: 209.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>Cover that every CMDreq issue the following order of SMI messages.</p><p>SMI messages Order (RB release is always issued after SNPrsp is received)</p><p>SNPreq --&gt; SNPrsp --&gt; RB Reserve req --&gt; RB Release req</p><p>SNPreq --&gt; RB Reserve req --&gt; SNPrsp --&gt; RB Release req</p><p>RB Reserve req --&gt; SNPreq --&gt; SNPrsp --&gt; RB Release req</p><p>SNPreq --&gt; SNPrsp --&gt; RB Reserve req --&gt; RBUsed req</p><p>SNPreq --&gt; RB Reserve req --&gt; SNPrsp --&gt; RBUsed req</p><p>SNPreq --&gt; RB Reserve req --&gt; RBUsed req → SNPrsp</p><p>RB Reserve req --&gt; SNPreq --&gt; SNPrsp --&gt; RBUsed req</p><p>RB Reserve req --&gt; SNPreq --&gt; RBUsed req --&gt; SNPrsp</p></td><td class="confluenceTd"><p>#Cover.DCE.SMIMsgsTiming</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover STRreq issue wrt DM_write</p><p>DM_write --&gt;STRreq</p><p>STRreq --&gt; DM_write</p></td><td class="confluenceTd"><p>#Cover.DCE.STRreqDMwriteTiming</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-"><br/></h3><h1 id="Ncore3.4DCETestplan-DirectoryManager"><br/>Directory Manager</h1><p>The directory manager (DM) is responsible for maintaining the cache-states of all the agents it is tracking. It consists of top-level pipeline stages that control multiple directory blocks that are individually configured in size and features.</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" width="680" src="https://arterisip.atlassian.net/wiki/download/attachments/235470849/image2019-3-30%2016:43:44.png?api=v2"></span><p>Picture pasted from <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168627/Ncore+3.0+DCE+Micro-Architecture+Specification" data-linked-resource-id="16168627" data-linked-resource-version="5" data-linked-resource-type="page">Ncore 3.0 DCE Micro-Architecture Specification</a>. For more details on directory manager refer to  5.5 Directory Manager (DM) from DCE Micro-Architecture Specification.</p><h2 id="Ncore3.4DCETestplan-Interfaces"><strong>Interfaces</strong></h2><p>The DM communicates with the Transaction Manager (TM) using full handshake ready/valid interfaces:</p><h3 id="Ncore3.4DCETestplan-RequestInterface"><strong>Request Interface</strong></h3><p>Directory lookup requests arrive on this interface.</p><p><strong>Checks and Functional Coverage </strong></p><p><strong>(</strong>Note: The following checks are active only if the DM  cmd_req is made when the ATTID is ACTIVE state or WAKEUP state(and not in SLEEP state)</p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="2405ecaf-e41d-4229-9620-23d22c2352cd" class="confluenceTable"><colgroup><col style="width: 732.0px;"/><col style="width: 244.0px;"/><col style="width: 184.0px;"/><col style="width: 248.0px;"/><col style="width: 56.0px;"/><col style="width: 62.0px;"/><col style="width: 71.0px;"/><col style="width: 92.0px;"/><col style="width: 149.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Priority</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>dm_cmdreq_ns_i, dm_cmdreq_addr_i match the incoming CMDreq addr, ns</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqAddrNS</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_cmdreq_iid_i matches the incoming CMDreq initiator src_id</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqIID</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_cmdreq_type_i matches the incoming CMDreq type</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqType</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_cmdreq_att_vec_i (attid) does not match any previously allocated and still valid attid</p><p><br/></p><p>dm_cmdreq_att_vec_i(attid) is less than DceInfo.AttCtrlEntries from dv json</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqATTIDChk1</p><p><br/></p><p>#Check.DCE.DM.CmdReqATTIDChk2</p><p><br/></p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_cmdreq1_filter_num_o matches dv prediction (from caching AIU FUNIT --&gt; SnoopFilterId mapping in dv json)</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqFilterNum</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_cmdreq1_alloc_i matches dv prediction</p><p>(currently dv predicts alloc bit should be set for only RdCln, RdVld, RdUnq, RdNotShdDirty, ClnUnq, MkUnq ops)</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqAlloc</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_cmdreq_cancel(SLEEP) matches DV's expectation due to addr conflict with previous outstanding ops</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqCancel</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_cmdreq_wakeup(WAKEUP) matches DV's expectation due to addr conflict with previous outstanding ops</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqWakeup</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that every command type is put into SLEEP state (cancel=1) at least once.</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqSleep</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that every command type is WAKEUP state (wakeup=1) by a previous request at least once.</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqWakeup</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that every command type is in ACTIVE state (wakeup=0) i.e not encountering any address conflict.</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqActive</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover that every attid (based on DceInfo.AttCtrlEntries) is allocated at some point.</p></td><td class="confluenceTd"><p>#Check.DCE.DM.CmdReqAttAllocate</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>add a test to warm up every entry in the snoop filter, to check address aliasing issue.</p></td><td class="confluenceTd"><p>#Check.DCE.dm_aliasing_test</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Request Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-ResponseInterface"><br/><strong>Response Interface</strong></h3><p>Directory lookup results are driven out on this interface. </p><p>DCE DV Scoreboard instantiates a DIRM Model(Directory Manager Model) that maintains a model of all the snoop filters information. So it basically tracks the contents of all snoop filters, and thus used to predict dm_cmd_rsp (DM lookup) information, and predicts recalls from snoop filter. Allocated way is not predicted since way allocation tends to be random.</p><p><strong>Checks and Functional Coverage </strong></p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="9ba1c1d3-5c27-4092-a16c-118cecfc05e9" class="confluenceTable"><colgroup><col style="width: 629.0px;"/><col style="width: 363.0px;"/><col style="width: 183.0px;"/><col style="width: 256.0px;"/><col style="width: 57.0px;"/><col style="width: 62.0px;"/><col style="width: 110.0px;"/><col style="width: 150.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>dm_cmd_rsp_att_vec_o</p><p>(check whether attid matches attid of any inflight txns which are waiting on cmdrsp)</p></td><td class="confluenceTd"><p>#Check.DCE.dm_CmdRsp_attid</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Response Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_cmd_rsp_way_vec_o</p><p>(check whether way_vec per sf is always onehot for alloc request)</p><p>(check whether way_vec per sf is never more than one way indicated $countones &lt;= 1)</p><p>(check that way_num should be &lt; number of ways in the configuration)</p></td><td class="confluenceTd"><p>#Check.DCE.dm_CmdRspWayVecAllocReq</p><p>#Check.DCE.dm_CmdRspWayVecOneHotOrZeroAnyReq</p><p>#Check.DCE.dm_CmdRspWayNumLegal</p></td><td class="confluenceTd"><p>dce_dirm_model.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Response Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>If non-alloc request misses in directory, way_vec should be 0.</p></td><td class="confluenceTd"><p>#Check.DCE.dm_CmdRspNonAllocReqMissWayVec</p></td><td class="confluenceTd"><p>dirm_model.sch</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Response Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_cmd_rsp_owner_val, dm_cmd_rsp_owner_num, dm_cmd_rsp_sharer_vec match dv prediction from dirm_model</p></td><td class="confluenceTd"><p>#Check.DCE.dm_cmdrsp</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Response Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>On vb hit, there should be a swap way indicated on lkprsp</p></td><td class="confluenceTd"><p>#Check.DCE.dm_CmdRsp_VBSwapWay</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>any test</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that every way of every tag_filter is picked for allocation on a dm_miss</p><p>(to make sure all ways are getting allocated at some point)</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_alloc_way</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>any test</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that every way of every tag_filter is picked for swap on a dm vb hit</p><p>(to make sure all ways are getting swapped into vb at some point)</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_vbhit_swap_way</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>any test</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that every CMDreq gets every type of dm_cmd_rsp</p><p>cross dm cmdrsp_type x cmdtype (RdCln, RdVld....etc)</p><p>dm_cmdrsp_type bins:</p><p>dm_miss,<br/>dm_hit_as_owner_and_other_sharers_absent (requestor in UC, UD)<br/>dm_hit_as_owner_and_other_sharers_present (requestor in SD, and others in SC)<br/>dm_hit_as_sharer_and_owner_absent_other_sharers_absent (requestor in SC, no others valid)<br/>dm_hit_as_sharer_and_owner_absent_other_sharers_present, (requestor in SC and others SC)<br/>dm_hit_as_sharer_and_owner_present_other_sharers_absent, (requestor in SC and other SD)<br/>dm_hit_as_sharer_and_owner_present_other_sharers_present, (requestor in SC and others SD, SC)<br/>dm_hit_as_neither_and_owner_absent_other_sharers_present, (requestor is invalid, others in SC)<br/>dm_hit_as_neither_and_owner_present_other_sharers_absent, (requestor is invalid, other in SD)<br/>dm_hit_as_neither_and_owner_present_other_sharers_present (requestor is invalid, others in SD, SC)</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_nonstash_cmdtype_lkprsp</p><p>#Cover.DCE.dm_stash_cmdtype_lkprsp_tgt_identified<br/></p><p>#Cover.DCE.dm_stash_cmdtype_lkprsp_tgt_not_identified</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1 Response Interface Table</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>+addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that WrUnqFull, WrUnqPtl from ACE with awunique asserted/deasserted, see every lkprsp</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp_wrunqs_ace_awunq</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>+addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover hits in victim_buffer (causing a vb - tag_filter swap).</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_vbhit</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>+addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>check that there is a dm_wr if lkprsp indicates vbhit</p></td><td class="confluenceTd"><p>#Check.DCE.dm_vbhit_dm_write</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>+addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>check that lkprsp (owner_val, owner_num, sharer_vec) indicate a hit if lkprsp indicates vbhit</p></td><td class="confluenceTd"><p>#Check.DCE.dm_vbhit_sfhit</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>+addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that a CMDreq hits in multiple tagf (more than 1)</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.mutiple_tag_hit</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that a CMDreq hits in multiple VB. (more than 1)</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.mutiple_vb_hit</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that a CMDreq is alloc miss in one filter and VBhit in one or more filters</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.vb_hit_tag_hit</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that a CMDreq hits in at least one tagf and at least one VB.</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.alloc_miss_vb_hit</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover 3 back-back allocating requests to the different SF.</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.back_back_3_allocs_tags_hit<br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover 3 back-back allocating requests to same SF, same set-addr, different tag-addr</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.back_back_3_allocs_diff_tag_addr</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover 3 back-back allocating requests to same SF , same set-addr and all are tag-filter hits </p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.back_back_3_allocs_tags_hit</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover 3 back-back allocating requests to same SF , same set-addr and all are vb hits </p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.back_back_3_allocs_vb_hit</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover 3 back-back allocating requests to same SF, same set-addr and all are misses</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.back_back_3_allocs_misses</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover 3 back-back allocating requests to same address</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_lkprsp.back_back_3_allocs_tags_hit<br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y<br/></p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><h3 id="Ncore3.4DCETestplan-RetryInterface"><strong>Retry Interface </strong></h3><p>Directory lookup requests that could not be completed will be sent back to TM on this interface, so they can be recirculated and sent in again on the Request Interface. A request cannot be completed, for example, if it needs to allocate a way but all ways are currently busy.</p><p>The Retry Buffer is currently implemented as a FIFO whose depth is controlled by RetryDepth. Minimum value must be 3. </p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="1b04a1ad-9022-4c10-8045-961c786746ef" class="confluenceTable"><colgroup><col style="width: 865.0px;"/><col style="width: 303.0px;"/><col style="width: 142.0px;"/><col style="width: 161.0px;"/><col style="width: 56.0px;"/><col style="width: 62.0px;"/><col style="width: 84.0px;"/><col style="width: 149.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>dm_rtr_att_vec_o(ATTID) matches only one in-flight transactions to DCE with matching ATTID and has already issued a dm_cmdreq but not received a dm_cmdrsp</p></td><td class="confluenceTd"><p>#Check.DCE.dm_rtyreq_attid_match</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1</p><p>3- Retry Interface</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>any test</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>if dm_rty occurs, set_expect for dm_cmd_req</p></td><td class="confluenceTd"><p>#Check.DCE.dm_rtyreq_dm_cmdreq_expected</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>A CMDreq incurs a retry response for every possible retry_reason</p><p>cover all retry causes.</p><p>causes for a retry can be one or more of the following.</p><ol start="1"><li><p>pipelined request: a dm cohreq is marked pipelined_req if it is presented &amp; accepted by dm exactly in the next cycle after a matching (on filter_num, set_index) previous req is accepted by dm.</p></li><li><p>all ways in the tag_filter are busy</p></li><li><p>the address is out of VB (if it exists) or out of tag_filter(if VB does not exists) and on its way(in a pipe stage) to be presented on recall_interface</p></li><li><p>VB is full</p></li><li><p>Recall Interface has a valid request that is not accepted by the TM.</p></li></ol><p>(Update: cannot test this cover-point since DM model cannot precisely track TF and VB contents with VB recovery enabled)</p></td><td class="confluenceTd"><p><br/></p><p>N/A</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification</p><p>Section 5.4.1</p><p>3- Retry Interface</p></td><td class="confluenceTd"><p>N</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>VB hit in home-filter and all ways busy causing retry (refer to conc-5050 for details)</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_vbhit_hf_all_ways_busy</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>VB hit in non home-filter and all ways busy causing retry (refer to conc-5050 for details)</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_vbhit_nonhf_all_ways_busy</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>allocting miss and all ways busy causing retry</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_alloc_miss_all_ways_busy</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-WriteInterface"><strong>Write Interface</strong></h3><p>The TM examines the results from the Response Interface and updates the DM state on this interface.</p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="09c42e4a-6f90-47af-b76c-224e7dcf2757" class="confluenceTable"><colgroup><col style="width: 410.0px;"/><col style="width: 123.0px;"/><col style="width: 96.0px;"/><col style="width: 574.0px;"/><col style="width: 24.0px;"/><col style="width: 27.0px;"/><col style="width: 60.0px;"/><col style="width: 483.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Reference Document</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>dm_wrreq_ns_i, dm_wrreq_addr_i match (addr, ns) of in-flight txns waiting to see a dir write request</p></td><td class="confluenceTd"><p>#Check.DCE.DM.WrAddrNS</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification Section 5.4.1</p><p>4- Write Interface</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+addr_conflicts</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_wrreq_way_vec_i should always match the way_vec from the cmd lkp_rsp</p></td><td class="confluenceTd"><p>#Check.DCE.DM.WrWayVec</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification Section 5.4.1</p><p>4- Write Interface</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+addr_conflicts</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_wrreq_owner_val_i, dm_wrreq_owner_num_i, dm_wrreq_owner_val_i, should match values predicted by DV</p></td><td class="confluenceTd"><p>#Check.DCE.DM.WrInfo</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>Behavior Implied/Derived from ARM CHI spec,</p><p>ConcertoCProtocolArch.pdf, email conversations with Sanjay/Khaleel, based on cache-state transitions (in requestor and snoopers) after every op completes.</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+addr_conflicts</p></td><td class="confluenceTd"><p>There is not one spec that documents how SF is supposed to be updated for each op.</p><p>sf update is determined by general understanding of the op-behavior as derieved from the concertoCprotocol spec, and ARM specs</p></td></tr><tr><td class="confluenceTd"><p>dm_wrreq_change_vec_i should match DV prediction.</p><p>if dm_cmd_rsp.wr_required=1, then change_vec = 'hfffff (all bits asserted)</p><p>if wr_required=0, change_vec is a bit-vector indicating which cache_ids information needs to be updated.</p><p><br/></p></td><td class="confluenceTd"><p>#Check.DCE.DM.WrChangeVec</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>DCE micro-Architecture Specification Section 5.4.1</p><p>4- Write Interface</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+addr_conflicts</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-RecallInterface"><strong>Recall Interface </strong></h3><p>A directory entry may need to be evicted in order to make room for the new incoming request. The TM will be notified on this interface so the evicted line can be recalled from its caching agent.</p><p>TM only accepts one recall request to process at a time. If DM issues another recall request while there is an attid working on an older RECALL_REQ., this new RECALL_REQ is stalled on DM interface, irrespective of address match. (CONC-6467)</p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="00765542-96f5-4e59-bfa0-21b9404da6e0" class="confluenceTable"><colgroup><col style="width: 1012.0px;"/><col style="width: 236.0px;"/><col style="width: 134.0px;"/><col style="width: 34.0px;"/><col style="width: 38.0px;"/><col style="width: 236.0px;"/><col style="width: 106.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>check that the recall_request's dm_recreq_ns_o, dm_recreq_addr_o match (addr, ns) match an entry in dm model, (though cannot precisely track tf or vb since vb recovery is enabled by default) </p></td><td class="confluenceTd"><p>#Check.DCE.dm_recall_req_addr_ns</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict, +alloc_ops, +single_sfset</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>check that dm_recreq_owner_num_o, owner_val_o, sharer_vec_o match the contents of the recall entry that matches from the dirm model</p></td><td class="confluenceTd"><p>#Check.DCE.dm_recall_req_attributes</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict, config4</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>On a recall request, check that recall address is removed from dirm model's tag_filter.</p></td><td class="confluenceTd"><p>#Check.DCE.dm_recall_addr_del_from_filter</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+no_addr_conflict, config4</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>There is recall from every snoop-filter. </p></td><td class="confluenceTd"><p>#Cover.DCE.dm_recall_req_from_each_sf</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+stress_recalls</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><h3 id="Ncore3.4DCETestplan-UpdateInterface"><strong>Update Interface </strong></h3><p>Every UPDreq will conclude with a directory update if the UPDreq sees a hit in the directory and issues upd_status=UPD_COMP</p><p>upd_status = UPD_FAIL if the request is a miss in associated snoop-filter or if hit is suppressed (for example due to collision with a ongoing REC_REQ see CONC-6467 for details)</p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="a9600405-7eab-464a-a7a5-d834e71ca836" class="confluenceTable"><colgroup><col style="width: 878.0px;"/><col style="width: 337.0px;"/><col style="width: 184.0px;"/><col style="width: 57.0px;"/><col style="width: 62.0px;"/><col style="width: 214.0px;"/><col style="width: 150.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>upd_req.addr, upd_req.ns, upd_req.iid &gt;&gt; WSMINCOREPORTID should match corresponding SMI UPDreq (addr, ns, srcid &gt;&gt; WSMIPORTID)</p></td><td class="confluenceTd"><p>#Check.DCE.DM.UPDReq_attributes</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+cmdreq_updreq_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_upd_req should make dm_model update if RTL indicates upd_status = UPD_COMP</p></td><td class="confluenceTd"><p> #Check.DCE.DM.UPDreq_COMP_DMmodelupdate</p></td><td class="confluenceTd"><p> dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_upd_txn</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>dm_upd_req should not make dm_model update if RTL indicates upd_status = UPD_FAIL</p></td><td class="confluenceTd"><p> #Check.DCE.DM.UPDreq_FAIL_NoDMmodelupdate</p></td><td class="confluenceTd"><p> dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+cmdreq_updreq_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that an dm_upd_req hits the snoop-filter with requestor in all possible states. (upd_status=UPD_COMP)</p><ol start="1"><li><p>requestor as owner (SD, UC, UD)</p></li><li><p>requestor as sharer (SC)</p></li></ol></td><td class="confluenceTd"><p>#Cover.DCE.DM.UPDreq_COMP_RequestorOwner</p><p>#Cover.DCE.DM.UPDreq_COMP_RequestorSharer</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+cmdreq_updreq_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that an dm_upd_req hits in the snoop-filter but hit is suppressed.(upd_status=UPD_FAIL)</p><p>Hit supression could be due to various reasons like hit on busy-way, hit on an entry on recall interface etc.</p></td><td class="confluenceTd"><p>#Check.DCE.DM.UPDreq_FAIL_SFHit</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+cmdreq_updreq_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>cover that an dm_upd_req misses in the snoop-filter(upd_status=UPD_FAIL)</p></td><td class="confluenceTd"><p> #Check.DCE.DM.UPDreq_FAIL_SFMiss</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+cmdreq_updreq_addr_conflict</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-DMInterfaceAssertions"><strong>DM Interface Assertions</strong></h3><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="e061da6e-18be-4402-96be-cb7083f294cb" class="confluenceTable"><colgroup><col style="width: 1455.0px;"/><col style="width: 295.0px;"/><col style="width: 48.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Done</p></th></tr><tr><td class="confluenceTd"><p>A DM write request should be immediately accepted by DM in the same cycle, unless it is in the middle of a 3-cycle DM upd_req window.</p></td><td class="confluenceTd"><p>#Check.DCE.dm_wrreq_accept</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>A DM update request should be immediately accepted if there is no DM write request the same cycle, or in the middle if a 3-cycle previous DM upd_req window </p></td><td class="confluenceTd"><p>#Check.DCE.dm_updreq_accept</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>A DM command request should be immediately accepted if there is no DM write request or DM update request the same cycle, or in the middle of a 3-cycle previous updreq window</p></td><td class="confluenceTd"><p>#Check.DCE.dm_cmdreq_accept</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>A retry request from DM should be immediately accepted by TM in the same cycle</p></td><td class="confluenceTd"><p>#Check.DCE.dm_rtyreq_accept</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>A recall request from DM should be immediately accepted by TM in the same cycle. Note: we cannot add this assertion since TM can serve only one outstanding recall at a time regardless of address. </p><p>So if is an outstanding recall in any attid, this new recall will not be accepted by TM.</p></td><td class="confluenceTd"><p><br/></p><p>N/A</p></td><td class="confluenceTd"><p>N</p></td></tr><tr><td class="confluenceTd"><p>A command response from DM should be immediately accepted by TM in the same cycle</p></td><td class="confluenceTd"><p>#Check.DCE.dm_cmdrsp_accept</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>Valid on every DM interface should remain stable and asserted until ready is asserted.</p></td><td class="confluenceTd"><p>#Check.DCE.dm_validStableUntilReady</p></td><td class="confluenceTd"><p>Y</p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-DMInterfaceCoverproperties"><strong>DM Interface Coverproperties</strong></h3><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="e314806c-e925-4670-a8dd-6766f058d958" class="confluenceTable"><colgroup><col style="width: 746.0px;"/><col style="width: 243.0px;"/><col style="width: 56.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Done</p></th></tr><tr><td class="confluenceTd"><p>dm_write_valid and dm_upd_valid asserted same cycle , dm_write is accepted before upd_req</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_wrreq_updreq_priority</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>dm_write_valid and dm_cmd req_valid asserted same cycle , dm_write is accepted before dm_cmd_req</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_wrreq_cmdreq_priority</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>dm_upd_valid and dm_cmd req_valid asserted same cycle , dm_upd is accepted before dm_cmd_req</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_updreq_cmdreq_priority</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>dm_cmdreq backpressure for 2,3,4 cycles.</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_cmdreq_backpressure</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>dm_updreq backpressure for 2,3,4 cycles.</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_updreq_backpressure</p></td><td class="confluenceTd"><p>Y</p></td></tr><tr><td class="confluenceTd"><p>dm_writereq backpressure for 2,3,4 cycles.</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_writereq_backpressure</p></td><td class="confluenceTd"><p>Y</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="wide" data-local-id="a0eea16b-c21d-46d7-be74-9c96166d51a7" class="confluenceTable"><colgroup><col style="width: 582.0px;"/><col style="width: 260.0px;"/><col style="width: 56.0px;"/><col style="width: 140.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Remarks</p></th></tr><tr><td class="confluenceTd"><p>DM Update Request is on same cycle as DM Command Request to same address</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>DM_UPD Req will block DM for 3 cycles so DM_CMD Req can not be accepted. DM_UPD has more priority than DM_CMD</p></td></tr><tr><td class="confluenceTd"><p>DM Update Request is followed by DM Command Request by one cycle to same address</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_cmd_upd_one_cycle</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td></tr><tr><td class="confluenceTd"><p>DM Update Request is followed by DM Command Request by two cycles to same address</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_cmd_upd_two_cycles</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td></tr><tr><td class="confluenceTd"><p>DM Update Request is followed by DM Command Request by three cycles to same address</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_cmd_upd_three_cycles</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td></tr><tr><td class="confluenceTd"><p>DM Update Request is followed by DM Command Request by four cycle to same address</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_cmd_upd_four_cycles</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="wide" data-local-id="35825785-9c03-4804-9a9f-ca5145940acf" class="confluenceTable"><colgroup><col style="width: 383.94px;"/><col style="width: 223.67px;"/><col style="width: 49.86px;"/><col style="width: 233.64px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Remarks</p></th></tr><tr><td class="confluenceTd"><p>DM Update Request is on same cycle as DM write to same address</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>Update Req will block DM for 3 cycles so DM_CMT Req can not be accepted on the same cycle. CMT have more priority than DM_UPD.</p></td></tr><tr><td class="confluenceTd"><p>DM Update Request is one cycle before DM write to same address</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>Update Req will block DM for 3 cycles so DM_CMT Req can not be accepted next cycle of DM_UPD Req.</p></td></tr><tr><td class="confluenceTd"><p>DM Update Request is one cycle after DM write to same address</p></td><td class="confluenceTd"><p>#Cover.DCE.dm_upd_after_write</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td></tr></tbody></table></div><h1 id="Ncore3.4DCETestplan-ArchitecturalFeatures">Architectural Features</h1><h2 id="Ncore3.4DCETestplan-ReadStashing">Read Stashing</h2><p>Refer to Transaction Flows ppt and ConcertoCProtocol spec for detailed description.</p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="646" src="https://arterisip.atlassian.net/wiki/download/attachments/235470849/image2019-6-28%2022:41:29.png?api=v2"></span><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="ced1b987-ed94-49b9-836a-65eb481a906d" class="confluenceTable"><colgroup><col style="width: 710.0px;"/><col style="width: 189.0px;"/><col style="width: 184.0px;"/><col style="width: 56.0px;"/><col style="width: 152.0px;"/><col style="width: 238.0px;"/><col style="width: 149.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>check on dm_cmd_req.m_alloc. It should be asserted only if</p><ol start="1"><li><p>stash target specified is a stash enabled target. (CHI-B)</p></li><li><p>stash valid is asserted on the request.</p></li></ol></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">#Check.DCE.StashReq.Alloc</span></p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p><p>(both test and check)</p></td><td class="confluenceTd"><p>+ldcchshd_stashaccepted_dm_miss</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>check on dm_cmd_req.m_sid. It should correctly indicate the Stash Target LPId if cmd_req.stash_valid is asserted.</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">#Check.DCE.StashReq.Sid</span></p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p><p>(both test and check)</p></td><td class="confluenceTd"><p>+ldcchshd_stashaccepted_dm_miss</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>check on correct SnpType is issued to stash target</p><p>and correct SnpType are issued to peer (as applicable)</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">#Check.DCE.StashReq.SnoopType</span></p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_golden_ref_model.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p><p>(both test and check)</p></td><td class="confluenceTd"><p>+ldcchshd_stashaccepted_dm_miss</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>check on correct MrdType is issued</p></td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">#Check.DCE.StashReq.MrdReq</span></p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_golden_ref_model.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p><p>(both check and test)</p></td><td class="confluenceTd"><p>+ldcchshd_stashaccepted_dm_miss</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-LoadCchUnique(ARM-StashOnceUnique)">LoadCchUnique (ARM - StashOnceUnique) </h3><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="ac998c76-3d82-4267-bda8-ad36d77235f3" class="confluenceTable"><colgroup><col style="width: 41.0px;"/><col style="width: 91.0px;"/><col style="width: 139.0px;"/><col style="width: 132.0px;"/><col style="width: 124.0px;"/><col style="width: 207.0px;"/><col style="width: 61.0px;"/><col style="width: 131.0px;"/><col style="width: 260.0px;"/><col style="width: 137.0px;"/><col style="width: 56.0px;"/><col style="width: 62.0px;"/><col style="width: 232.0px;"/><col style="width: 149.0px;"/></colgroup><tbody><tr><th colspan="9" class="confluenceTh"><p>Scenarios/Hash-Tags</p><p>#Cover.DCE.LdCchUnq.StshTgt.SnpRsps_CMStatus</p><p>#Cover.DCE.LdCchUnq.Peer.SnpRsps_CMStatus</p></th><th rowspan="3" class="confluenceTh"><p>Where Covered/Checked</p></th><th rowspan="3" class="confluenceTh"><p>Done</p></th><th rowspan="3" class="confluenceTh"><p>Status</p></th><th rowspan="3" class="confluenceTh"><p>Run_Cmd</p></th><th rowspan="3" class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><th rowspan="2" class="confluenceTh"><p>No</p></th><th rowspan="2" class="confluenceTh"><p>snarf</p></th><th colspan="3" class="confluenceTh"><p>stash-target</p></th><th colspan="3" class="confluenceTh"><p>peer non-stash target</p></th><th rowspan="2" class="confluenceTh"><p>reference</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></th></tr><tr><th class="confluenceTh"><p>initial state</p></th><th class="confluenceTh"><p>final state</p></th><th class="confluenceTh"><p>snp_type: SnpStshUnq</p><p>snp_rsp</p><p>(rv, rs,dc, dt_aiu, dt_dmi)</p></th><th class="confluenceTh"><p>initial state</p></th><th class="confluenceTh"><p>final state</p></th><th class="confluenceTh"><p>snp_type:</p><p>SnpStshUnq</p><p>(AIU–&gt; Proc:</p><p>SnpUnique)</p><p>snp_rsp</p><p>(rv, rs,dc, dt_aiu, dt_dmi)</p></th></tr><tr><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 26)</p><p>TABLE 5-30. SnpStshUnq protocol on target CHI-B.</p><p>TABLE 5-31. SnpStshUnq protocol on non-target CHI-B or CHI-A.</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p> 2</p></td><td class="confluenceTd"><p> 1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p> 0,0,0,0,0</p></td><td class="confluenceTd"><p>UC/UD</p></td><td class="confluenceTd"><p> IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>0,0,0,0,1</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 26)</p><p>TABLE 5-30. SnpStshUnq protocol on target CHI-B.</p><p>TABLE 5-31. SnpStshUnq protocol on non-target CHI-B or CHI-A.</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>3 </p></td><td class="confluenceTd"><p>1 </p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p> 0,0,0,0,0</p></td><td class="confluenceTd"><p>SC(one or more sharer only present)</p></td><td class="confluenceTd"><p> IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 26)</p><p>TABLE 5-30. SnpStshUnq protocol on target CHI-B.</p><p>TABLE 5-31. SnpStshUnq protocol on non-target CHI-B or CHI-A.</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p> 4</p></td><td class="confluenceTd"><p> 1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p> UC</p></td><td class="confluenceTd"><p> 0,0,0,0,0</p></td><td class="confluenceTd"><p>SD, SC (one or more sharer and an owner present)</p></td><td class="confluenceTd"><p> IX</p></td><td class="confluenceTd"><p>0,0,0,0,1(SD)</p><p>0,0,0,0,0(SC)</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 26)</p><p>TABLE 5-30. SnpStshUnq protocol on target CHI-B.</p><p>TABLE 5-31. SnpStshUnq protocol on non-target CHI-B or CHI-A.</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>5</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>Only for UCE (snarf=1 possible)</p><p>For UC/UD/UDP</p><p>(snarf=0 is only possible)</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p>1,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 28)</p><p><br/></p><p><br/></p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p>1,1,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 28)</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>7</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p>1,1,0,0,0</p></td><td class="confluenceTd"><p>SC(peer one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 35)</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p>1,1,0,0,0</p></td><td class="confluenceTd"><p>SD (peer owner only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,1</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 30)</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>9</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p>1,1,0,0,0</p></td><td class="confluenceTd"><p>SD, SC (peer owner and one/more sharers present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,1(SD)</p><p>0,0,0,0,0(SC)</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 30, 35)</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops </p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>10</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>1,0,0,0,0</p></td><td class="confluenceTd"><p>SC (peer one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 28)</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>11</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX(no state change)</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p><br/></p></td><td class="confluenceTd"><p>all states except IX</p><p><br/></p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0 (SC,UC,UCE)</p><p>0,0,0,0,1</p><p>(UC,UD,UDP,SD)</p></td><td class="confluenceTd"><p>ARM specs</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>12</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>UC/UD/SD</p></td><td class="confluenceTd"><p>UC/UD/SD(no state change)</p></td><td class="confluenceTd"><p>1,0,0,0,0</p></td><td class="confluenceTd"><p>SC (peer one or more sharer only present)</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>Will not be snooped (snarf=0)</p></td><td class="confluenceTd"><p>ARM specs</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>13</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>SC(no state change)</p></td><td class="confluenceTd"><p>1,1,0,0,0</p></td><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>Will not be snooped (snarf=0)</p></td><td class="confluenceTd"><p>ARM specs</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>14</p></td><td class="confluenceTd"><p>tgt not identified </p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td colspan="3" class="confluenceTd"><p>no snoops are issued if target is not identified. </p></td><td class="confluenceTd"><p>ARM specs</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-LoadCchShared(ARM-StashOnceShared)">LoadCchShared (ARM - StashOnceShared)</h3><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="3f3ed28c-cd97-463f-8fad-c20b196223c1" class="confluenceTable"><colgroup><col style="width: 41.0px;"/><col style="width: 55.0px;"/><col style="width: 67.0px;"/><col style="width: 63.0px;"/><col style="width: 120.0px;"/><col style="width: 136.0px;"/><col style="width: 81.0px;"/><col style="width: 181.0px;"/><col style="width: 225.0px;"/><col style="width: 150.0px;"/><col style="width: 56.0px;"/><col style="width: 212.0px;"/><col style="width: 239.0px;"/><col style="width: 196.0px;"/></colgroup><tbody><tr><th colspan="9" class="confluenceTh"><p>Scenarios/Hash-Tags</p><p>#Cover.DCE.LdCchShd.StshTgt.SnpRsps_CMStatus</p><p>#Cover.DCE.LdCchShd.Peer.SnpRsps_CMStatus</p></th><th rowspan="3" class="confluenceTh"><p>Where Covered/Checked</p></th><th rowspan="3" class="confluenceTh"><p>Done</p></th><th rowspan="3" class="confluenceTh"><p>Status</p></th><th rowspan="3" class="confluenceTh"><p>Run_Cmd</p></th><th rowspan="3" class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><th rowspan="2" class="confluenceTh"><p>No</p></th><th rowspan="2" class="confluenceTh"><p>snarf</p></th><th colspan="3" class="confluenceTh"><p>stash-target</p></th><th colspan="3" class="confluenceTh"><p>peer non-stash target</p></th><th rowspan="2" class="confluenceTh"><p>reference</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p><p>TABLE 5-27. SnpStshUnq protocol on target CHI-B.</p><p>TABLE 5-28. SnpStshUnq protocol on non-target CHI-B or CHI-A.</p></th></tr><tr><th class="confluenceTh"><p>initial state</p></th><th class="confluenceTh"><p>final state</p></th><th class="confluenceTh"><p>snp_type: SnpStshShd</p><p>snp_rsp</p><p>(rv, rs,dc, dt_aiu, dt_dmi)</p></th><th class="confluenceTh"><p>initial state</p></th><th class="confluenceTh"><p>final state</p></th><th class="confluenceTh"><p>snp_type:</p><p>SnpStshShd</p><p>(AIU–&gt; Proc:</p><p>SnpShared)</p><p>CCMP snp_rsp</p><p>(TABLE 5-28)</p><p>(rv, rs,dc, dt_aiu, dt_dmi)</p></th></tr><tr><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 38)</p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+ldcchshd_stashaccepted_dm_miss</p><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC (one or more sharer only present)</p></td><td class="confluenceTd"><p>SC/IX</p></td><td class="confluenceTd"><p>SC --&gt;SC 1,1,0,0,0</p><p>(SnpRsp_SC)</p><p>SC --&gt;IX 0,0,0,0,0</p><p>(SnpRsp_I)</p></td><td class="confluenceTd"><p>ARM specs &amp; CCMP spec</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>+ldcchshd_stashaccepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>3</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC, SD (one or more sharer, and owner present)</p></td><td class="confluenceTd"><p>SD/SC/IX</p></td><td class="confluenceTd"><p>SC --&gt; SC/IX</p><p>(refer above row)</p><p>SD --&gt; SD 1,0,0,0,1</p><p>(SnpRspData_SD)</p><p>SD --&gt; SC 1,1,0,0,1</p><p>(SnpRspData_SC_PD)</p><p>SD --&gt; IX 0,0,0,0,1</p><p>(SnpRspData_I_PD)</p></td><td class="confluenceTd"><p>ARM specs &amp; CCMP spec</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+ldcchshd_stashaccepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td rowspan="6" class="confluenceTd"><p>5</p></td><td rowspan="6" class="confluenceTd"><p>1</p></td><td rowspan="6" class="confluenceTd"><p>IX</p></td><td rowspan="6" class="confluenceTd"><p>SC</p></td><td rowspan="6" class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>1,1,0,0,0 (SnpResp_SC)</p><p>1,1,0,0,1 (SnpRespData_SC)</p></td><td rowspan="6" class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 43)</p><p>TABLE 5-27. SnpStshUnq protocol on target CHI-B.</p><p>TABLE 5-28. SnpStshUnq protocol on non-target CHI-B or CHI-A.</p><p><br/></p><p><br/></p><p>ARM specs &amp; CCMP spec</p></td><td rowspan="6" class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td rowspan="6" class="confluenceTd"><p>Y</p></td><td rowspan="6" class="confluenceTd"><p>PASS</p></td><td rowspan="6" class="confluenceTd"><p>+ldcchshd_stashaccepted_dm_hit</p></td><td rowspan="6" class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,1</p><p>(SnpRespData_I)</p></td></tr><tr><td class="confluenceTd"><p>UC/UCE</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpResp_I)</p></td></tr><tr><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>1,0,0,0,1</p><p>(SnpRespData_SD)</p></td></tr><tr><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>1,1,0,0,1 (SnpRspData_SC_PD)</p></td></tr><tr><td class="confluenceTd"><p>UD/UDP</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,1</p><p>(SnpRspData_I_PD, SnpRspDataPtl_I_PD)</p></td></tr></tbody></table></div><p>continuation to above table...</p><div class="table-wrap"><table data-table-width="1800" data-layout="wide" data-local-id="3fde35ec-00ae-4789-a7eb-092572005506" class="confluenceTable"><colgroup><col style="width: 41.0px;"/><col style="width: 84.0px;"/><col style="width: 66.0px;"/><col style="width: 72.0px;"/><col style="width: 169.0px;"/><col style="width: 85.0px;"/><col style="width: 81.0px;"/><col style="width: 157.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>No</p></th><th class="confluenceTh"><p>snarf</p></th><th colspan="2" class="confluenceTh"><p>stash-target</p></th><th class="confluenceTh"><p><br/></p></th><th class="confluenceTh"><p>peer non-stash target</p></th><th class="confluenceTh"><p><br/></p></th><th class="confluenceTh"><p><br/></p></th></tr><tr><th class="confluenceTh"><p><br/></p></th><th class="confluenceTh"><p><br/></p></th><th class="confluenceTh"><p>Initial-state</p></th><th class="confluenceTh"><p>Final-state</p></th><th class="confluenceTh"><p>snp_type: SnpStshShd</p><p>snp_rsp</p><p>(rv, rs,dc, dt_aiu, dt_dmi)</p></th><th class="confluenceTh"><p>Initial-state</p></th><th class="confluenceTh"><p>Final-state</p></th><th class="confluenceTh"><p>snp_type:</p><p>SnpStshShd</p><p>(AIU–&gt; Proc:</p><p>SnpShared)</p><p>CCMP snp_rsp</p><p>(TABLE 5-28)</p><p>(rv, rs,dc, dt_aiu, dt_dmi)</p></th></tr><tr><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>UCE</p></td><td class="confluenceTd"><p>UC</p></td><td class="confluenceTd"><p>1,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td></tr><tr><td class="confluenceTd"><p>7</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>UC, UCE, UD, UDP, SD</p></td><td class="confluenceTd"><p>UC, UCE, UD, UDP, SD</p></td><td class="confluenceTd"><p>0,0,0,0,0 (SnpResp_IX is possible for all)</p><p>1,0,0,0,0 (UC, UCE, UD, UDP, SD SnpResp_UC, SnpResp_SD, SnpResp_UD)</p><p><br/></p></td><td class="confluenceTd"><p>n/a (owner is only snooped)</p></td><td class="confluenceTd"><p>n/a (owner is only snooped)</p></td><td class="confluenceTd"><p>n/a (owner is only snooped)</p></td></tr><tr><td rowspan="3" class="confluenceTd"><p>8<br/><br/></p></td><td rowspan="3" class="confluenceTd"><p>0<br/><br/></p></td><td rowspan="3" class="confluenceTd"><p> SC<br/><br/></p></td><td rowspan="3" class="confluenceTd"><p>SC</p><p>(no state change)</p><p><br/><br/></p></td><td rowspan="3" class="confluenceTd"><p>0,0,0,0,0 (SnpResp_IX is possible for all)</p><p>1,1,0,0,0 (SnpResp_SC)</p><p><br/></p><p><br/><br/></p></td><td class="confluenceTd"><p>SD  </p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,1 (SnpRespData_IX</p></td></tr><tr><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>1,1,0,0,1</p><p>(SnpRespData_SC_PD)</p></td></tr><tr><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>1,0,0,0,0 (ACE snooper)</p><p>1,0,0,0,1(CHI/proxy cache snooper)</p><p>SnpRespData_SD)</p></td></tr><tr><td class="confluenceTd"><p>9</p></td><td class="confluenceTd"><p>tgt not identified </p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td colspan="3" class="confluenceTd"><p>no snoops are issued if target is not identified. </p></td></tr></tbody></table></div><h2 id="Ncore3.4DCETestplan-WriteStashing">Write Stashing</h2><p>Refer to Transaction Flows ppt and ConcertoCProtocol spec for detailed description</p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="578" src="https://arterisip.atlassian.net/wiki/download/attachments/235470849/image2019-6-28%2022:36:6.png?api=v2"></span><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="f2c2b8f7-0040-47ac-8fef-5ecbae06b032" class="confluenceTable"><colgroup><col style="width: 982.0px;"/><col style="width: 216.0px;"/><col style="width: 160.0px;"/><col style="width: 40.0px;"/><col style="width: 45.0px;"/><col style="width: 231.0px;"/><col style="width: 124.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>check on dm_cmd_req.m_alloc. It should be asserted only if stash_valid is asserted on incoming cmd request and associated stash target is valid (CHI processor)</p></td><td class="confluenceTd"><p>#Check.DCE.StashReq.Alloc</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstshfull_stashaccepted_dm_miss</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>check on dm_cmd_req.m_sid. It should correctly indicate the cmdreq.stash_target_LPId if cmd_req.stash_valid is asserted.</p></td><td class="confluenceTd"><p>#Check.DCE.StashReq.Sid</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p>dce_probe_seq_item.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstshfull_stashaccepted_dm_miss</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>check on correct SnpType is issued to stash target and to peer snoopers(as deemed necessary)</p></td><td class="confluenceTd"><p>#Check.DCE.StashReq.SnoopType</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p><p><a class="external-link" href="http://dce_goldenref_model.sv" rel="nofollow">dce_goldenref_model.sv</a></p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstshfull_stashaccepted_dm_miss</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>check that DM CMT_REQ occurs if stash is accepted by stash target</p></td><td class="confluenceTd"><p>#Check.DCE.StashReq.DMWrite</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstshfull_stashaccepted_dm_miss</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-WriteStashFull(ARM-WriteUniqueFullStash)">WriteStashFull (ARM - WriteUniqueFullStash)</h3><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="38c39f01-cc84-48b1-a215-ef3956e8986e" class="confluenceTable"><colgroup><col style="width: 41.0px;"/><col style="width: 82.0px;"/><col style="width: 66.0px;"/><col style="width: 56.0px;"/><col style="width: 170.0px;"/><col style="width: 196.0px;"/><col style="width: 57.0px;"/><col style="width: 172.0px;"/><col style="width: 185.0px;"/><col style="width: 133.0px;"/><col style="width: 107.0px;"/><col style="width: 82.0px;"/><col style="width: 255.0px;"/><col style="width: 149.0px;"/></colgroup><tbody><tr><th colspan="9" class="confluenceTh"><p>Scenario</p><p>Hash-Tags:</p><p>#Cover.DCE.WrStshFull.StshTgt.SnpRsp_CMStatus</p><p>#Cover.DCE.WrStshFull.Peer.SnpRsp_CMStatus</p></th><th rowspan="3" class="confluenceTh"><p>where covered/checked<br/><br/></p></th><th rowspan="3" class="confluenceTh"><p>Done<br/><br/></p></th><th rowspan="3" class="confluenceTh"><p>Status<br/><br/></p></th><th rowspan="3" class="confluenceTh"><p>run_cmd<br/><br/></p></th><th rowspan="3" class="confluenceTh"><p>Remarks/Questions<br/><br/></p></th></tr><tr><th class="confluenceTh"><p>No</p></th><th rowspan="2" class="confluenceTh"><p>snarf</p></th><th colspan="3" class="confluenceTh"><p>stash_target</p></th><th colspan="3" class="confluenceTh"><p>peer non_stash target</p></th><th rowspan="2" class="confluenceTh"><p>reference</p></th></tr><tr><th class="confluenceTh"><p><br/></p></th><th class="confluenceTh"><p>initial state</p></th><th class="confluenceTh"><p>final state</p></th><th class="confluenceTh"><p>CCMP snp_type:</p><p>SnpInvStsh</p><p>(AIU-&gt;Proc: SnpMakeInvalidStash)</p><p>snp_rsp</p><p>(rv, rs,dc, dt_aiu, dt_dmi)</p></th><th class="confluenceTh"><p>initial state</p></th><th class="confluenceTh"><p>final state</p></th><th class="confluenceTh"><p>CCMP snp_type: SnpInvStsh</p><p>(AIU-&gt;Proc: SnpInv)</p><p>snp_rsp (rv,rs,dc,dt_aiu,dt_dmi)</p></th></tr><tr><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_miss</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>UC/UD</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>3</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC (one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC, SD (one or more sharer, and owner present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>5</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>UD/UC</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>7</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC (peer one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SD (peer owner only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>9</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SD, SC (peer owner and one/more sharers present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>10</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC (peer one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 15)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>11</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_miss</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>12</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>UC/UD</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>13</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC (one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>14</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC, SD (one or more sharer, and owner present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>15</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>UD/UC</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>16</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>N/A</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>17</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC (peer one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>18</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SD (peer owner only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>19</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SD, SC (peer owner and one/more sharers present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>20</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC (peer one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 16)</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashfull_stash_accepted_dm_hit</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>21</p></td><td class="confluenceTd"><p>tgt not identified</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>22</p></td><td class="confluenceTd"><p>tgt not identified</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>UC/UCE/UD/UDP/SC/SD</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0 (SnpRsp_I)</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-WriteStashPtl(ARM-WriteUniquePtlStash)">WriteStashPtl (ARM - WriteUniquePtlStash)</h3><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="6ed9d567-c333-4393-af32-acf6d8c20ae6" class="confluenceTable"><colgroup><col style="width: 43.0px;"/><col style="width: 115.0px;"/><col style="width: 77.0px;"/><col style="width: 71.0px;"/><col style="width: 203.0px;"/><col style="width: 341.0px;"/><col style="width: 71.0px;"/><col style="width: 228.0px;"/><col style="width: 203.0px;"/><col style="width: 115.0px;"/><col style="width: 77.0px;"/><col style="width: 71.0px;"/><col style="width: 203.0px;"/><col style="width: 341.0px;"/></colgroup><tbody><tr><th colspan="9" class="confluenceTh"><p>Scenarios</p><p>Hash-Tags:</p><p>#Cover.DCE.WrStshPtl.StshTgt.SnpRsp_CMStatus</p><p>#Cover.DCE.WrStshPtl.Peer.SnpRsp_CMStatus</p></th><th rowspan="3" class="confluenceTh"><p>where covered/checked<br/><br/></p></th><th rowspan="3" class="confluenceTh"><p>Done<br/><br/></p></th><th rowspan="3" class="confluenceTh"><p>Status<br/><br/></p></th><th rowspan="3" class="confluenceTh"><p>run_cmd<br/><br/></p></th><th rowspan="3" class="confluenceTh"><p>Remarks/Questions<br/><br/></p></th></tr><tr><th class="confluenceTh"><p>No</p></th><th rowspan="2" class="confluenceTh"><p>snarf</p></th><th colspan="3" class="confluenceTh"><p>stash_target</p></th><th colspan="3" class="confluenceTh"><p>peer non_stash target</p></th><th rowspan="2" class="confluenceTh"><p>reference</p><p>ConcertoCprotocol Spec TABLE 3-1. CCMP Operations</p><p>TABLE 5-26. SnpUnqStsh protocol on non-target CHI-B and CHI-A.</p><p>Table 4-18 Cache state transitions, RetToSrc value, and valid completion responses in CHI-B spec</p><p>Table 4-20 Snoop response to SnpUniqueStash </p></th></tr><tr><th class="confluenceTh"><p><br/></p></th><th class="confluenceTh"><p>initial state</p></th><th class="confluenceTh"><p>final state</p></th><th class="confluenceTh"><p>CCMP snp_type:</p><p>SnpUnqStsh</p><p>(AIU-&gt;Proc: SnpUniqueStash)</p><p>snp_rsp</p><p>(rv, rs,dc, dt_aiu, dt_dmi)</p></th><th class="confluenceTh"><p>initial state</p></th><th class="confluenceTh"><p>final state</p></th><th class="confluenceTh"><p>CCMP snp_type: SnpUnqStsh</p><p>(AIU-&gt;Proc: SnpUnique)</p><p>snp_rsp (rv,rs,dc,dt_aiu,dt_dmi)</p><p><br/></p><p><br/></p></th></tr><tr><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p> 0,0,0,0,0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p> n/a</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_miss</p><p>single_step_allocops_w_stashops</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>UC/UD</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UC/UCE --&gt; 0,0,0,0,0 (SnpRsp_I)</p><p>UD/UDP --&gt; 0,0,0,0,1</p><p>(SnpRspData_I_PD,</p><p>SnpRspDataPtl_I_PD)</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p><p><br/></p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p><br/></p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>3</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC (one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpRsp_I)</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p></td><td class="confluenceTd"><p>SC, SD (one or more sharer, and owner present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>SC –&gt; 0,0,0,0,0 (SnpRsp_I)</p><p>SD --&gt; 0,0,0,0,1</p><p>(SnpRspData_I_PD)</p><p><br/></p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>5</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>UC/UCE</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>(UCE/UC) 0,0,0,0,0</p><p>(UC) 0,0,0,0,1</p><p>(SnpRsp_I_Read,</p><p>SnpRspData_I_Read)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>UD/UDP</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,1</p><p>(SnpRspData_I_PD,</p><p>SnpRspDataPtl_I_PD)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>7</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpRsp_I only since UP=1)</p><p><br/></p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpRsp_I,</p><p>SnpRspData_I)</p></td><td class="confluenceTd"><p>SC (peer one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpRsp_I)</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>9</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpRsp_I,</p><p>SnpRspData_I)</p></td><td class="confluenceTd"><p>SD (peer owner only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,1</p><p>(SnpRspData_I_PD)</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>10</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SC</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpRsp_I,</p><p>SnpRspData_I)</p></td><td class="confluenceTd"><p>SD, SC (peer owner and one/more sharers present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>SC –&gt; 0,0,0,0,0 (SnpRsp_I)</p><p>SD --&gt; 0,0,0,0,1</p><p>(SnpRspData_I_PD)</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>11</p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>SD</p></td><td class="confluenceTd"><p>UD</p></td><td class="confluenceTd"><p>0,0,0,0,1</p><p>(SnpRspData_I_PD)</p></td><td class="confluenceTd"><p>SC (peer one or more sharer only present)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpRsp_I)</p></td><td class="confluenceTd"><p>transactionflows.ppt v-0.49 (slide 17)</p><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_accepted_dm_hit</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>12</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpRsp_I)</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_rejected_dm_miss</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>13</p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>0,0,0,0,0</p><p>(SnpRsp_I)</p></td><td class="confluenceTd"><p>UC/UD/SC/SD</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UC/UCE --&gt; 0,0,0,0,0 (SnpRsp_I)</p><p>UD/UDP --&gt; 0,0,0,0,1</p><p>(SnpRspData_I_PD,</p><p>SnpRspDataPtl_I_PD)</p><p>SC –&gt; 0,0,0,0,0 (SnpRsp_I)</p><p>SD --&gt; 0,0,0,0,1</p><p>(SnpRspData_I_PD)</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>Y</p><p>(test done, coverage pending)</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+wrstashptl_stash_rejected_dm_hit</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>14</p></td><td class="confluenceTd"><p>tgt not identified</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>N</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>+wrstashptl_tgt_not_identified_dm_miss</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>15</p></td><td class="confluenceTd"><p>tgt not identified</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>UC/UD/SC/SD</p></td><td class="confluenceTd"><p>IX</p></td><td class="confluenceTd"><p>UC/UCE --&gt; 0,0,0,0,0 (SnpRsp_I)</p><p>UD/UDP --&gt; 0,0,0,0,1</p><p>(SnpRspData_I_PD,</p><p>SnpRspDataPtl_I_PD)</p><p>SC –&gt; 0,0,0,0,0 (SnpRsp_I)</p><p>SD --&gt; 0,0,0,0,1</p><p>(SnpRspData_I_PD)</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv/" rel="nofollow">dce_coverage.sv</a></p><p><a class="external-link" href="http://dce_scb_txn.sv/" rel="nofollow">dce_scb_txn.sv</a></p></td><td class="confluenceTd"><p>N</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>+wrstashptl_tgt_not_identified_dm_hit</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h2 id="Ncore3.4DCETestplan-ExclusiveMonitors"><br/>Exclusive Monitors</h2><p>Refer to-

    

            



<style>
    .jira-issue {
        padding: 0 0 0 2px;
        line-height: 20px;
    }

    .jira-issue img {
        padding-right: 5px;
    }
    .jira-issue .aui-lozenge {
        line-height: 18px;
        vertical-align: top;
    }

    .jira-issue .icon {
        background-position: left center;
        background-repeat: no-repeat;
        display: inline-block;
        font-size: 0;
        max-height: 16px;
        text-align: left;
        text-indent: -9999em;
        vertical-align: text-bottom;
    }
</style>

    <span class="confluence-jim-macro jira-issue" data-jira-key="CONC-4940"  data-client-id="SINGLE_bfb5209b-5e34-3655-9c0b-93d8d0d4bec5_235470849_624b3807a629c30068a79f50" >
                <a href="https://arterisip.atlassian.net/browse/CONC-4940" class="jira-issue-key"><span class="aui-icon aui-icon-wait issue-placeholder"></span>CONC-4940</a>
                    -
            <span class="summary">Getting issue details...</span>
                                    <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-default issue-placeholder">STATUS</span>
            </span>
 for implementation details. </p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="9777cc36-485b-404a-9a1c-524c37488c3b" class="confluenceTable"><colgroup><col style="width: 507.0px;"/><col style="width: 138.0px;"/><col style="width: 297.0px;"/><col style="width: 62.0px;"/><col style="width: 62.0px;"/><col style="width: 56.0px;"/><col style="width: 56.0px;"/><col style="width: 56.0px;"/><col style="width: 74.0px;"/><col style="width: 123.0px;"/><col style="width: 57.0px;"/><col style="width: 74.0px;"/><col style="width: 74.0px;"/><col style="width: 80.0px;"/><col style="width: 76.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>EXMON</p><p>Cmd</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Match</p><p>TM</p><p>Addr</p></th><th class="confluenceTh"><p>Match</p><p>TM</p><p>Valid</p></th><th class="confluenceTh"><p>BM</p><p>Valid</p></th><th class="confluenceTh"><p>New</p><p>TM</p><p>Avail</p></th><th class="confluenceTh"><p><br/></p></th><th class="confluenceTh"><p>Match</p><p>TM</p><p>proc_id</p><p>Valid</p></th><th class="confluenceTh"><p>Match</p><p>TM</p><p>other proc_id</p><p>Valid</p></th><th class="confluenceTh"><p>Other</p><p>TM</p><p>Valid</p></th><th class="confluenceTh"><p>BM</p><p>proc_id</p><p>Valid</p></th><th class="confluenceTh"><p>BM</p><p>other</p><p>proc_id</p><p>Valid</p></th><th class="confluenceTh"><p>New TM</p><p>Valid/</p><p>Addr</p></th><th class="confluenceTh"><p>EXMON</p><p>Result</p></th></tr><tr><td class="confluenceTd"><p>exld_nomatch_tmaddr_other_tm_not_available</p></td><td rowspan="3" class="confluenceTd"><p>RdCln,</p><p>RdVld,</p><p>RdNotShdDirty</p></td><td rowspan="3" class="confluenceTd"><p>#Cover.DCE.ExMon.ExLdScenario</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>Set</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>----</p></td></tr><tr><td class="confluenceTd"><p>exld_nomatch_tmaddr_other_tm_available</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>Yes</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Set/Tag</p></td><td class="confluenceTd"><p>----</p></td></tr><tr><td class="confluenceTd"><p>exld_match_tmaddr</p></td><td class="confluenceTd"><p>Yes</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Set</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>----</p></td></tr><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>exst_nomatch_tmaddr_no_bmvld_other_tm_not_available</p></td><td rowspan="5" class="confluenceTd"><p>ClnUnq<br/><br/><br/><br/></p></td><td rowspan="5" class="confluenceTd"><p>#Cover.DCE.ExMon.ExStScenario</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>Set</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Fail</p></td></tr><tr><td class="confluenceTd"><p>exst_nomatch_tmaddr_no_bmvld_other_tm_available</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p>Yes</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Set/Tag</p></td><td class="confluenceTd"><p>Fail</p></td></tr><tr><td class="confluenceTd"><p>exst_nomatch_tmaddr_bmvld</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>Yes</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Set</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Pass</p></td></tr><tr><td class="confluenceTd"><p>exst_match_tmaddr_no_tmvld</p></td><td class="confluenceTd"><p>Yes</p></td><td class="confluenceTd"><p>No</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Set</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Fail</p></td></tr><tr><td class="confluenceTd"><p>exst_match_tmaddr_tmvld</p></td><td class="confluenceTd"><p>Yes</p></td><td class="confluenceTd"><p>Yes</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p>x</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>Clear</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Set</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Pass</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="013b6ddd-4205-4f0c-b2a5-23386776a5d3" class="confluenceTable"><colgroup><col style="width: 773.0px;"/><col style="width: 326.0px;"/><col style="width: 208.0px;"/><col style="width: 53.0px;"/><col style="width: 59.0px;"/><col style="width: 213.0px;"/><col style="width: 164.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where Covered/Checked</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Run_Cmd</p></th><th class="confluenceTh"><p>Remarks/Questions</p></th></tr><tr><td class="confluenceTd"><p>Cover all LPIds behind every AIU Id ie. aiuid_lpid pair</p></td><td class="confluenceTd"><p>#Cover.DCE.ExMon.AiuidProcidPair</p></td><td class="confluenceTd"><p>dce_coverage.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>+k_max_num_addr=6,</p><p>+k_num_coh_cmds=200,</p><p>+k_no_addr_conflicts=0,</p><p>+exc_ops_only</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>exclusive ops should update tagged monitors information based on table above at dm_cmd_rsp</p></td><td class="confluenceTd"><p>#Check.DCE.ExMon.MonUpdOnLkpRsp</p></td><td class="confluenceTd"><p>dce_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>ex_load always returns an EXMON_PASS status on STRreq</p></td><td class="confluenceTd"><p>#Check.DCE.ExMon.ExLdStrExOkay</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Successful ex_store should return an EXMON_PASS status on STRreq</p><p>Unsuccessful ex_store should return an EXMON_FAIL status on STRreq</p></td><td class="confluenceTd"><p>#Check.DCE.ExMon.ExStStrExOkay</p></td><td class="confluenceTd"><p>dce_scb_txn.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p><p><br/></p></td><td class="confluenceTd"><p>&quot;same as above&quot;</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><h2 id="Ncore3.4DCETestplan-CreditChecks">Credit Checks</h2><p><span class="legacy-color-text-default">The credit manager is responsible for maintaining snoop and Mrd credits. The credits are checked and allocated after it is determined that a snoop or Mrd must be sent for the transaction. The credits are returned to the credit manager once the SnpRsp / MrdRsp is received. A credit counter is maintained per target i.e. AIU / DMI.   </span></p><p><br/></p><p> RB Reserve request is sent out only when an RBID is available for that DMI. RBID is released if one of the two conditions happen.</p><p> </p><ol start="1"><li><p>RB Release request is sent out to that DMI</p></li><li><p>RBUsed request is received from that DMI </p></li></ol><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="96784d6e-c474-412e-9e07-1282af24dca4" class="confluenceTable"><colgroup><col style="width: 450.0px;"/><col style="width: 304.0px;"/><col style="width: 56.0px;"/><col style="width: 172.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th></tr><tr><td class="confluenceTd"><p>Check Mrd Request is not issued if Mrd Credit is not available for DMI target</p></td><td class="confluenceTd"><p>#Check.DCE.MrdReq.CreditCheck</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td></tr><tr><td class="confluenceTd"><p>Check Snp Request is not issued if Snp Credit is not available for AIU target</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.CreditCheck</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td></tr><tr><td class="confluenceTd"><p>Check RB Request is not issued if RBID is not available for that DMI target</p></td><td class="confluenceTd"><p>#Check.DCE.RBReq.RBIDAvailabilityCheck</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td></tr><tr><td class="confluenceTd"><p>Cover all Mrd Credits are used up for a particular DMI target.</p></td><td class="confluenceTd"><p>#Cover.DCE.MrdReq.CreditCounterEqualsZero</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td></tr><tr><td class="confluenceTd"><p>Cover all Snp Credits are used up for a particular AIU target. </p></td><td class="confluenceTd"><p>#Cover.DCE.SnpReq.CreditCounterEqualsZero</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td></tr><tr><td class="confluenceTd"><p>Cover all RBIDs are in use for a particular DMI target</p></td><td class="confluenceTd"><p>#Cover.DCE.RBReq.RBIDNotAvailable</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>PASS</p></td></tr></tbody></table></div><p><br/></p><h2 id="Ncore3.4DCETestplan-QOS(QualityofService)">QOS (Quality of Service)</h2><p><span class="legacy-color-text-blue3">The QOS value on native interface / concerto command is mapped to QOS bucket (priority) mapping function. The mapping is provided through predetermined design time parameters. Ncore units AIUs, DCEs &amp; DMIs participate in QOS and implement following (for DCE)</span></p><ol start="1"><li><p>Incoming commands are stored in a skid buffer and QOS in age order is used to pick commands form the buffer</p></li><li><p>All outgoing associated messages will have the calculated priority value on SMI.</p></li><li><p>Recall transaction uses fixed QOS value that can be specified at design time or via CSR.</p></li></ol><p><u>QOS Starvation</u></p><p>DCE maintains a request pool (CMDReq) and arbitrating based on priority and age.</p><p>There’s an event counter increments when every request is issued (popped out) from the buffer, and when this counter value reaches a threshold:</p><ol start="1"><li><p>A starvOverflowEvent is raised</p></li><li><p>All active requests (not deallocating) are marked as stavOverflow.</p></li><li><p>Counter resets to zero.</p></li><li><p>Threshold is from CSR field XQOSCR.EventThreshold</p></li></ol><p>Later, when another starvOverflowEvent is raised, any active request with starvOverflow flag set is marked as a starved request.</p><p>The buffer enters starvation mode if any staved request exists.</p><p>When the buffer enters starvation mode, starved request is getting higher priority over non-starved request and among all starved requests, the arbitration is a simple find first.</p><p>At the time of purging starved requests, the counter stops to increment until back to normal mode.</p><p>For more details please refer to : <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16166830/Ncore+3.0+System+Specification#Ncore3.0SystemSpecification-_Toc43139298" data-linked-resource-id="16166830" data-linked-resource-version="7" data-linked-resource-type="page">Ncore 3.0 System Specification#_Toc43139298</a> QOS section.</p><div class="table-wrap"><table data-table-width="1800" data-layout="wide" data-local-id="1e014069-abac-410a-8ff9-2c4a26eb61ff" class="confluenceTable"><colgroup><col style="width: 660.0px;"/><col style="width: 175.0px;"/><col style="width: 56.0px;"/><col style="width: 63.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Done</p></th><th class="confluenceTh"><p>Status</p></th></tr><tr><td class="confluenceTd"><p>when dm_cmdreq is issued, check to make sure sb_cmdrsp was already issued or is issued in same cycle</p></td><td class="confluenceTd"><p>#Check.DCE.QOS.dm_cmdreq_after_sb_cmdrsp</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td></tr><tr><td class="confluenceTd"><p>smaller the value of smi_msg_pri, higher the priority. when a sb_cmdrsp is issued, check to make sure there are no pending transactions with higher priority in the skid buffer.</p></td><td class="confluenceTd"><p>#Check.DCE.QOS.sb_cmdrsp.Check1</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td></tr><tr><td class="confluenceTd"><p>when sb_cmdrsp is issued , if there are multiple pending requests with same priority, the sb_cmdrsp issued should be the oldest request </p></td><td class="confluenceTd"><p>#Check.DCE.QOS.sb_cmdrsp.Check2</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td></tr><tr><td class="confluenceTd"><p>randomize different values of qoscr_event_threshold.  currently randomized 0 to 16</p></td><td class="confluenceTd"><p>#Cover.DCE.QOS.qoscr_event_threshold</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td></tr><tr><td class="confluenceTd"><p>DV models when the blcok is in starvation mode vs normal mode.</p><p>Check to make sure that when in StarvationMode(predicted by DV) only a starved request is issued (indicated by sb_cmdrsp.starve_mode = 1))</p></td><td class="confluenceTd"><p>#Check.DCE.QOS.StarvationMode</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td></tr><tr><td class="confluenceTd"><p>Check to make sure that when in NormalMode(predicted by DV) only a non-starved request is issued (indicated by sb_cmdrsp.starve_mode = 0)</p></td><td class="confluenceTd"><p>#Check.DCE.QOS.NormalMode</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p>DONE</p></td></tr></tbody></table></div><h2 id="Ncore3.4DCETestplan-SharerPromotion">Sharer Promotion</h2><h3 id="Ncore3.4DCETestplan-Description">Description</h3><p>Sharer promotion feature is introduced to avoid reads from DMI when a copy of cacheline is available in the cache upstream. This is achieved by promoting one of the sharers as an owner for snooping and data retrieval.</p><h3 id="Ncore3.4DCETestplan-UPField">UP Field</h3><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="330dd188-0755-4439-b9ae-dd74c56642b9" class="confluenceTable"><colgroup><col style="width: 28.45px;"/><col style="width: 97.72px;"/><col style="width: 267.03px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>UP</p></th><th class="confluenceTh"><p>Name</p></th><th class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd"><p>00</p></td><td class="confluenceTd"><p>Reserved</p></td><td class="confluenceTd"><p>Null filter (Future Use)</p></td></tr><tr><td class="confluenceTd"><p>01</p></td><td class="confluenceTd"><p>Unique Presence</p></td><td class="confluenceTd"><p>This is the only copy in the system as per the Snoop filter.</p><p>The snooping AIU maybe able to upgrade the Dtr type</p><p>being issued to the requesting AIU</p></td></tr><tr><td class="confluenceTd"><p>10</p></td><td class="confluenceTd"><p>Reserved</p></td><td class="confluenceTd"><p>Reserved</p></td></tr><tr><td class="confluenceTd"><p>11</p></td><td class="confluenceTd"><p>Unique Permission</p></td><td class="confluenceTd"><p>The AIU identified in the MPF3 field</p><p>is authorized to send</p><p>DtrReq to the requesting AIU</p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-Checks">Checks</h3><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="7c950c1e-3f0d-459c-a77c-da2ea817a27c" class="confluenceTable"><colgroup><col style="width: 114.26px;"/><col style="width: 122.01px;"/><col style="width: 46.55px;"/><col style="width: 50.99px;"/><col style="width: 29.9px;"/><col style="width: 77.83px;"/><col style="width: 30.7px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario/Checks</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where</p></th><th class="confluenceTh"><p>Reference</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Comments</p></th><th class="confluenceTh"><p>Priority</p></th></tr><tr><td class="confluenceTd"><p>Check if UP is set to 2'b01 When there is Unique Owner/Sharer in the system</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.UP_01</p></td><td class="confluenceTd"><p>dce_scoreboard</p><p>dce_scb_txn</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if UP is set to 2'b11 When there are Multiple Sharers in the system</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.UP_11</p></td><td class="confluenceTd"><p>dce_scoreboard</p><p>dce_scb_txn</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if MPF3 is set to owner target ID when UP is 2'b11 and Owner identified</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.MPF3_OwnerID</p></td><td class="confluenceTd"><p>dce_scoreboard</p><p>dce_scb_txn</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if MPF3 is set to promoted sharer target ID when UP is 2'b11 and Owner not identified</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.MPF3_PromotedSharerID</p></td><td class="confluenceTd"><p>dce_scoreboard</p><p>dce_scb_txn</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if promoted sharer is find first sharer</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.MPF3_FindFirstSharer</p></td><td class="confluenceTd"><p>dce_scoreboard</p><p>dce_scb_txn</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if Snoop Req is issued to Promoted Sharer for SnpClnDtr, SnpNoSDInt, SnpVldDtr and SnpNitc</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.NonInvSpns_Promoted_Sharer</p></td><td class="confluenceTd"><p>dce_scoreboard</p><p>dce_scb_txn</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p>Before this feature DCE never issued these SnpReq's when owner_val is 0</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check only one sharer is promoted</p><p>(Includes Only one SnpReq generated for Non-Inv type)</p></td><td class="confluenceTd"><p>#Check.DCE.SnpReq.MPF3_SameInAllSnps</p></td><td class="confluenceTd"><p>dce_scoreboard</p><p>dce_scb_txn</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if SnpRsp DT_AIU !=1 when DT_DMI == 0 for SnpInvDtr and UP == 2'b11</p></td><td class="confluenceTd"><p>#Check.DCE.SnpRsp_SnpInvDtr</p></td><td class="confluenceTd"><p>dce_scoreboard</p><p>dce_scb_txn</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p>PASS</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><h3 id="Ncore3.4DCETestplan-FunctionalCoverage">Functional Coverage</h3><div class="table-wrap"><table data-table-width="1800" data-layout="wide" data-local-id="84b2ddfd-1f8f-445f-a378-d5ae8a952ae2" class="confluenceTable"><colgroup><col style="width: 246.0px;"/><col style="width: 314.0px;"/><col style="width: 116.0px;"/><col style="width: 134.0px;"/><col style="width: 57.0px;"/><col style="width: 91.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where</p></th><th class="confluenceTh"><p>Reference</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Comments</p></th></tr><tr><td class="confluenceTd"><p>Cover all legal UP Values</p></td><td class="confluenceTd"><p>#Cover.DCE.SnpReq.UP</p></td><td class="confluenceTd"><p>dce_coverage</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover all possible MPF3 Values</p></td><td class="confluenceTd"><p>#Cover.DCE.SnpReq.MPF3</p></td><td class="confluenceTd"><p>dce_coverage</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cross SnpReq X UP X MPF3 </p></td><td class="confluenceTd"><p>#Cover.DCE.SnpReq.SnpReq_UP_MPF3</p></td><td class="confluenceTd"><p>dce_coverage</p></td><td class="confluenceTd"><p>Ncore Sharer</p><p>Promotion</p><p>Architecture</p><p>Specification</p><p>Section 1.2 &amp; 1.3</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h2 id="Ncore3.4DCETestplan-SoftwareCreditManagement(SCM)MrdCredits">Software Credit Management (SCM) Mrd Credits</h2><h3 id="Ncore3.4DCETestplan-Description.1">Description</h3><p>Software Credit Management allows number of credits per DMI to be configured dynamically, which allows few DCEs to issue more MrdReqs to DMIs. </p><h3 id="Ncore3.4DCETestplan-Stimulus">Stimulus</h3><h4 id="Ncore3.4DCETestplan-BootupSeq">Boot up Seq</h4><p>In Boot up sequence DCEUCCR.DMICreditLimit is programmed to (MrdSkidBufferSize in DMI) / (Number of DCE's).</p><h4 id="Ncore3.4DCETestplan-RandomSCMCSRSeq">Random SCM CSR Seq</h4><p>Random SCM CSR seq randomizes DMI FunitId, CreditLimit value from 0 to DmiInfo[0].nMrdSkidBufSize and program it to corresponding DCEUCCR.DMICreditLimit.</p><h3 id="Ncore3.4DCETestplan-Scenario/Tests">Scenario/Tests</h3><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="0ea96f6d-fc3a-4246-86d4-61bc7c560134" class="confluenceTable"><colgroup><col style="width: 221.03px;"/><col style="width: 86.62px;"/><col style="width: 24.52px;"/><col style="width: 76.65px;"/><col style="width: 48.67px;"/><col style="width: 24.52px;"/><col style="width: 35.81px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Tests</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where</p></th><th class="confluenceTh"><p>Constraint</p></th><th class="confluenceTh"><p>Reference</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Comments</p></th></tr><tr><td class="confluenceTd"><p>Random Test that randomizes Credit Limit using Random SCM CSR Seq</p></td><td class="confluenceTd"><p>#Stimulus.DCE.SCM.Randomize</p></td><td class="confluenceTd"><p>dce_csr_seq_lib</p></td><td class="confluenceTd"><p>Credit Limit Value from 0 to </p><p>DmiInfo[0].nMrdSkidBufSize </p></td><td class="confluenceTd"><p>Ncore SkidBuffer Architecture Specification</p><p>Section 3</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h3 id="Ncore3.4DCETestplan-ErrorTest:DCEErrorTestplanDecodeError-NoCreditsConfigured">Error Test: <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/66355203/DCE+Error+Test+Plan" data-linked-resource-id="66355203" data-linked-resource-version="9" data-linked-resource-type="page">DCE Error Testplan</a> Decode Error - <span class="legacy-color-text-blue3">No Credits Configured</span></h3><h3 id="Ncore3.4DCETestplan-Checks.1">Checks</h3><h4 id="Ncore3.4DCETestplan-FunctionalChecks">Functional Checks</h4><p><a class="external-link" href="http://dce_credits_check.sv" rel="nofollow">dce_credits_check.sv</a> keeps track of max credits per DMI and available credits and compares with MrdReqs InFlight.</p><h4 id="Ncore3.4DCETestplan-Endofsimulation">End of simulation </h4><p>At End of simulation all the credits must be returned from all the DMIs</p><h3 id="Ncore3.4DCETestplan-FunctionalCoverage.1">Functional Coverage</h3><div class="table-wrap"><table data-table-width="1800" data-layout="wide" data-local-id="912a5d12-6fa2-4162-b7d3-8486bb7874e5" class="confluenceTable"><colgroup><col style="width: 165.72px;"/><col style="width: 223.66px;"/><col style="width: 97.12px;"/><col style="width: 184.38px;"/><col style="width: 57.02px;"/><col style="width: 83.23px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Coverage</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Where</p></th><th class="confluenceTh"><p>Reference</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Comments</p></th></tr><tr><td class="confluenceTd"><p>Cover all possible counter States </p><p>CCR.DMICounterState</p><ol start="1"><li><p>000: Normal Operation</p></li><li><p>001: Empty</p></li><li><p>010: Negative</p></li><li><p>100: Full</p></li><li><p>111: No Connection</p></li></ol></td><td class="confluenceTd"><p>#Cover.DCE.SCM.CCRCounterState</p></td><td class="confluenceTd"><p>dce_coverage</p></td><td class="confluenceTd"><p>Ncore SkidBuffer Architecture Specification</p><p>Section 3</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover all DMIs for SCM</p></td><td class="confluenceTd"><p>#Cover.DCE.SCM.dmi_ids</p></td><td class="confluenceTd"><p>dce_coverage</p></td><td class="confluenceTd"><p>Ncore SkidBuffer Architecture Specification</p><p>Section 3</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cross all DMICCR's and States</p></td><td class="confluenceTd"><p>#Cover.DCE.SCM.IdsxStates</p></td><td class="confluenceTd"><p>dce_coverage</p></td><td class="confluenceTd"><p>Ncore SkidBuffer Architecture Specification</p><p>Section 3</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h1 id="Ncore3.4DCETestplan-SystemCoherency-SysCo(Receiver)">System Coherency - SysCo (Receiver)</h1><h2 id="Ncore3.4DCETestplan-Description.2">Description</h2><p>DCE has a SysCo Receiver interface which receives and process the SysReq.Attach and SysReq.Detach</p><span class="confluence-embedded-file-wrapper image-left-wrapper"><img class="confluence-embedded-image confluence-external-resource image-left" src="https://confluence.arteris.com/download/attachments/30510025/SysCohReceiver.png?version=1&amp;modificationDate=1624925967884&amp;api=v2" data-image-src="https://confluence.arteris.com/download/attachments/30510025/SysCohReceiver.png?version=1&amp;modificationDate=1624925967884&amp;api=v2" loading="lazy"></span><h3 id="Ncore3.4DCETestplan-Sys.CohReceivertransactionflow"><strong>Sys.Coh Receiver transaction flow</strong></h3><h4 id="Ncore3.4DCETestplan-SysReq.Attach"><span class="legacy-color-text-blue3">SysReq.Attach</span></h4><p><span class="legacy-color-text-blue3"> * Map the SourceID of the arriving SysReq to the associated T[i] and set the bit.</span><br/><span class="legacy-color-text-blue3"> * Issue a SysRsp.Ok if the CMStatus of SysReq is OK and SER is set successfully.</span><br/><span class="legacy-color-text-blue3"> * Issue a SysRsp.Error if</span><br/><span class="legacy-color-text-blue3"> i. CMSatus of SysReq indicates an error</span><br/><span class="legacy-color-text-blue3"> ii. target does not exist within the T-vector</span><br/><span class="legacy-color-text-blue3"> iii. target is already set</span></p><h4 id="Ncore3.4DCETestplan-SysReq.Detach"><span class="legacy-color-text-blue3">SysReq.Detach</span></h4><p><span class="legacy-color-text-blue3"> * Map the SourceID of the arriving SysReq to the associated T[i] and clear the bit</span><br/><span class="legacy-color-text-blue3"> * Issue a SysRsp.Ok if the CMStatus of SysReq is OK and SER is cleared successfully.</span><br/><span class="legacy-color-text-blue3"> * Issue a SysRsp.Error if</span><br/><span class="legacy-color-text-blue3">i. CMStatus of SysReq indicates an error</span><br/><span class="legacy-color-text-blue3">ii. Target does not exist within the T-vector</span><br/><span class="legacy-color-text-blue3">iii. Target is already clear</span></p><h2 id="Ncore3.4DCETestplan-Stimulus.1">Stimulus</h2><h3 id="Ncore3.4DCETestplan-Tasks/Functions">Tasks/Functions</h3><h4 id="Ncore3.4DCETestplan-send_sysreq_attach(dce_mst_seq.svh)">send_sysreq_attach (dce_mst_seq.svh)</h4><p>This task sends SysReq.Attach from all the caching agents in the config before sending coherent command requests to DCE and this task can also send SysReq.Attach from any cacheable agent during the run to bring detached agent to attach.</p><h4 id="Ncore3.4DCETestplan-send_sysreq_detach(dce_mst_seq.svh)">send_sysreq_detach (dce_mst_seq.svh)</h4><p>This task sends CmdReqs to invalidate all cache lines in the DCE cache model for the agent to be detached to update directory. CmdReqs are not send for the address which can go to IX with a valid silent cache state transition. After all the cache lines are invalidated for the agent, it send SysReq.Detach to the DCE.</p><h3 id="Ncore3.4DCETestplan-Tests">Tests</h3><h4 id="Ncore3.4DCETestplan-DirectedTests">Directed Tests</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="34552a2e-3dc0-41af-9a3d-bb37780aa115" class="confluenceTable"><colgroup><col style="width: 1009.0px;"/><col style="width: 270.0px;"/><col style="width: 100.0px;"/><col style="width: 87.0px;"/><col style="width: 150.0px;"/><col style="width: 78.0px;"/><col style="width: 103.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Tests/Stimulus</p></th><th class="confluenceTh"><p>Ref Doc</p></th><th class="confluenceTh"><p>Hashtag</p></th><th class="confluenceTh"><p>Priority</p></th><th class="confluenceTh"><p>Implemented</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Remarks</p></th></tr><tr><td class="confluenceTd"><p>Directed test to test a scenario where Directory tracks the detached agent as owner or sharer</p><p>and verify if DCE is suppressing the snoop requests and events to the detached agent</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Test.DCE.SysCoTests</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Directed test to test a scenario where Directory tracks the detached agent as owner or sharer</p><p>and other agent as sharer or owner and verify if DCE is suppressing snoops to detached agent</p><p>but issue snoop request to the attached agent.</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Test.DCE.SysCoTests</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Directed test to test a scenario where stash target is a detached agent and</p><p>verify if DCE sees it as a stash target not identified scenario.</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Test.DCE.SysCoTests</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Directed test to test a scenario where 2 or more agents are in detached state and verify if DCE </p><p>is suppressing snoops to the detached agents.</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Test.DCE.SysCoTests</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h4 id="Ncore3.4DCETestplan-RandomTests">Random Tests</h4><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="30fa62ff-6b4c-4fef-bf6d-e87faff07278" class="confluenceTable"><colgroup><col style="width: 895.0px;"/><col style="width: 310.0px;"/><col style="width: 115.0px;"/><col style="width: 100.0px;"/><col style="width: 171.0px;"/><col style="width: 90.0px;"/><col style="width: 118.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Tests/Stimulus</p></th><th class="confluenceTh"><p>Ref doc</p></th><th class="confluenceTh"><p>Hashtag</p></th><th class="confluenceTh"><p>Priority</p></th><th class="confluenceTh"><p>Implemented</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Remarks</p></th></tr><tr><td class="confluenceTd"><p>Allow the random traffic to flow for some time and randomly send Detach</p><p>from one of the agents and continue the traffic from other agents.</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Test.DCE.SysCoTests</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Allow the random traffic to flow for some time and randomly send Detach</p><p>from one of the agents and continue the traffic from other agents and</p><p>send attach from the detached agent and continue the traffic</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Test.DCE.SysCoTests<br/></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h2 id="Ncore3.4DCETestplan-Checks.2">Checks</h2><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="ee499f74-ab5b-47aa-8727-6a995a95382a" class="confluenceTable"><colgroup><col style="width: 423.52px;"/><col style="width: 119.41px;"/><col style="width: 53.57px;"/><col style="width: 88.04px;"/><col style="width: 49.2px;"/><col style="width: 75.44px;"/><col style="width: 44.96px;"/><col style="width: 109.91px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario/Checks</p></th><th class="confluenceTh"><p>Ref Doc</p></th><th class="confluenceTh"><p>Hashtag</p></th><th class="confluenceTh"><p>TB Location</p></th><th class="confluenceTh"><p>Priority</p></th><th class="confluenceTh"><p>Implemented</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Remarks/Comments</p></th></tr><tr><td class="confluenceTd"><p>Check if smi_sysreq_op is 1 for attach and 2 for detach</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if the src_id of SysReq.Attach/SysReq.Detach is a cachable agent</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if the SER (Snoop Enable Register) for the AIU is set to 1 after SysRsp.OK (SysReq.Attach)</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if the agent was already attached before it sends out a SysReq.Detach</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if DCE is suppressing the snoops to the AIU when processing Detach Req</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if the Sysrsp for the SysReq.Detach is issued only after snoop count to AIU is 0</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check if the SER for the AIU is set to 0 after SysRsp.OK (SysReq.Detach)</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check r_msg_id of SysRsp is same as SysReq</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that DCE is not issuing snoops/SysReq.Event to the AIU which is detached</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that DCE is not receiving any coherent requests from the AIU which is detached</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that smi_msg_err is asserted when there is an error</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that smi_tm is &quot;0&quot; for SysReq.Attach/SysReq.Dettach and SysRsp</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_scb_txn.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h2 id="Ncore3.4DCETestplan-FunctionalCoverage.2">Functional Coverage</h2><div class="table-wrap"><table data-table-width="1800" data-layout="wide" data-local-id="ae6a3e1b-9415-45cb-814e-f4b0aba98195" class="confluenceTable"><colgroup><col style="width: 349.14px;"/><col style="width: 111.01px;"/><col style="width: 58.32px;"/><col style="width: 89.14px;"/><col style="width: 0.0px;"/><col style="width: 44.97px;"/><col style="width: 0.0px;"/><col style="width: 109.94px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Ref Doc</p></th><th class="confluenceTh"><p>Hashtag</p></th><th class="confluenceTh"><p>TB Location</p></th><th class="confluenceTh"><p>Priority</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Remarks/Comments</p></th></tr><tr><td class="confluenceTd"><p>Cover that all cacheable agents send SysReq.Attach</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p>dce_coverage.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover that all cacheable agents send SysReq.Detach</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent<br/></p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover that Coherency Reciever generates all possible SysRsp CM Status</p><p>  1. Status - Success(No Error) CMStatus[7:6] = 2'b00</p><p>         1. 6'b000_xx0 - No Operation performed</p><p>         2. 6'b000_001 - Completion (Execution state machine is still running)</p><p>         3. 6'b000_011 - Final (Execution state machine went to IDLE</p><p>  2. Status - Error CMStatus[7:6] = 2'b01</p><p>         1. 6'b000_xx0 - No Operation performed - unit signals error</p><p>         2. 6'b000_001 - Completion (with unknown error)</p><p>         3. 6'b000_111 - Unit is busy and cannot perform operation </p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover snoops are being suppressed to owner agent</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover snoops are being suppressed to sharer agent</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover every eSnpReq type is suppressed to Owner/Sharer</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover that snoops sent out after DCE see a SysReq.Detach for DMReq (Active)</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover that snoops sent out after DCE see a SysReq.Detach for DMReq (Wakeup)</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Cover that snoops sent out after DCE see a SysReq.Detach for RecallReq</p></td><td class="confluenceTd"><p>Reference section below</p></td><td class="confluenceTd"><p>#Check.DCE.v36.SysEvent</p></td><td class="confluenceTd"><p><a class="external-link" href="http://dce_coverage.sv" rel="nofollow">dce_coverage.sv</a></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><h2 id="Ncore3.4DCETestplan-References">References</h2><ol start="1"><li><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16159850/Arch+Ncore+3.2+Docs" data-linked-resource-id="16159850" data-linked-resource-version="57" data-linked-resource-type="page">Arch Ncore 3.2 Docs</a></p></li><li><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16160443/Outstanding+Issues+for+System+Event+and+Coherency+Messaging" data-linked-resource-id="16160443" data-linked-resource-version="30" data-linked-resource-type="page">Outstanding Issues for System Event and Coherency Messaging</a></p></li><li><p><a class="external-link" href="https://confluence.arteris.com/pages/viewpage.action?spaceKey=ENGR&amp;title=System+Event+and+Coherency+Wrapper" rel="nofollow">System Event and Coherency Wrapper - Engineering - Confluence (arteris.com)</a></p></li></ol><h1 id="Ncore3.4DCETestplan-EndofTestChecks.1">End of Test Checks</h1><p>Following checks are done at EOT,</p><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="0fb5d123-a353-4509-b9da-1502359abe0c" class="confluenceTable"><colgroup><col style="width: 352.74px;"/><col style="width: 91.57px;"/><col style="width: 15.09px;"/><col style="width: 15.09px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Check</p></th><th class="confluenceTh"><p>Hash-Tag</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Remarks/Comments</p></th></tr><tr><td class="confluenceTd"><p>dce_scb_txnq keeps track of every transaction (CMD_REQ, UPD_REQ, REC_REQ), If test hits hb_timeout and dce_scb_txnq is not empty, error is thrown.</p></td><td class="confluenceTd"><p>#Check.DCE.HBTimeout_PendingTxns</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>at every attid deallocation, check to make sure all events that have to be completed while attid is allocated are done (cmdrsp, rbureq, rbursp can be excluded), else attid premature deallocation error is thrown</p></td><td class="confluenceTd"><p>#Check.DCE.PrematureAttidDeallocation</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>a scrub_routine sequence accesses all the addresses that were once used by the test, so that dm lookup_responses are checked to make sure we did not lose any lines in the directory and the content was not unknowingly altered.</p></td><td class="confluenceTd"><p>#Check.DCE.ScrubRoutine</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Objection mechanism in DCE stimulus that is raised at start of test and is not dropped until number of CMDrsps+UPDrsps received == number of CMDreqs + UPDreqs set in the test using knobs.</p></td><td class="confluenceTd"><p>#Check.DCE.CmdUpdRspsReceived</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Check that DCEUTAR.TransActv is high in middle of test and then drops when simulation ends. </p></td><td class="confluenceTd"><p>#Check.DCE.TransActvSeq</p></td><td class="confluenceTd"><p>DONE</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p>