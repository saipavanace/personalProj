<p>This is a JS class that can be found in the following path and file:<br/><strong>hw-lib/js/sym_csr_lib.js</strong></p><h2 id="HW-SYMclassPmonProbeExtraConfig-BaseClass">Base Class</h2><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16171972/HW-SYM+class+PmonProbeStdConfig+PMON+Probe+Standard+Configuration" data-linked-resource-id="16171972" data-linked-resource-version="19" data-linked-resource-type="page">HW-SYM class PmonProbeStdConfig (PMON Probe Standard Configuration)</a>.</p><p>This means the ExtraConfig has all the features (events, interrupts, and registers) mentioned below in addition to that in the base class.</p><h2 id="HW-SYMclassPmonProbeExtraConfig-Purpose">Purpose</h2><p>The class is meant to be used for generating JSON params for the <a class="external-link" href="https://confluence.arteris.com/display/ENGR/pmon_probe" rel="nofollow">pmon_probe</a>s in the <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16171559/AXI+N+X+M+single-switch+with+standard+PMON+configuration" data-linked-resource-id="16171559" data-linked-resource-version="27" data-linked-resource-type="page">AXI N X M single-switch with standard PMON configuration</a>. This works in conjunction with the <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16172032/HW-SYM+class+PmonStatsExtraConfig" data-linked-resource-id="16172032" data-linked-resource-version="8" data-linked-resource-type="page">HW-SYM class PmonStatsExtraConfig</a>. The set of features include (in addition to base class features):</p><p><strong>Packet count</strong>: Total number of packets that pass the link, packets to a certain range of addresses, write packets, read packets on the request network. And number of response packets on the response network.</p><p>There are total of 6 events defined (3 reference + 3 conditional):</p><ol><li>ref_evt_beat_sent_ : Event occurs each time a ready valid handshake occurs on the ATP interface.</li><li>ref_evt_pkt_start_: Event occurs each time a packet's first beat arrives.</li><li>ref_evt_pkt_end_: Event occurs each time a packet's last beat arrives.</li><li>cnd_evt_addr_hit_: Event occurs each time H_addr in the packet lies in a certain programmed address-range. The address-range can be programmed via two register fields defined - addr_range_ll (lower limit) and addr_range_ul (upper limit).</li><li>cnd_evt_write_req_: Event occurs for every packet of write type that traverses the link on which the probe sits.</li><li>cnd_evt_read_req: Same as above except this one is for read type packets.</li></ol><p><br/></p><p>In order to generate the above fields, the Probe reads the following packet fields:</p><p>fieldArray = [ &quot;H_addr&quot;, &quot;H_msg_type_attr&quot; ] (for request network. For response network, this is empty)</p><h2 id="HW-SYMclassPmonProbeExtraConfig-Interface(Methods)">Interface (Methods)</h2><p>The class provides the following interface methods:</p><p><em><strong>constructor(nodeId, network, protectionStyle)</strong></em> - The <em>network</em> parameter sets the type of probe (&quot;request&quot; if it sits on a request link, or &quot;response&quot; if it sits on a response link), the nodeID, and protectionStyle (defaults to none).</p><p><strong><em>evtWireInterfaces()</em></strong> - This generates the above 6 events mentioned. This lets the client remain agnostic to in what order the events are arranged in the evtInterfaces array. The client is expected to generate the remaining interfaces (module and local) of the block on it's own and pass it to the params() method</p><p><strong><em>params(interfaces)</em></strong> - This takes in only one parameter - the interfaces connecting to the PMON probe block and returns all the parameters configured to generate the 6 events according to the standard set of features. Hence the client can remain agnostic to how the evtDefines, and regFieldDefines data-structure params are filled.</p><h2 id="HW-SYMclassPmonProbeExtraConfig-Interrupts">Interrupts</h2><p>In addition to base class interrupts, this class includes the following interrupts:</p><p>The &quot;<em>cnd_evt_addr_hit_</em>&quot; event will generate an interrupt every time it occurs.</p><h2 id="HW-SYMclassPmonProbeExtraConfig-Registers">Registers</h2><p>Below is the register address structure for this configuration (in addition to registers generated by the base class) :</p><div class="table-wrap"><table class="wrapped confluenceTable"><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Name</div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Address Offset</div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Description</div></th></tr></thead><tbody><tr><td class="confluenceTd">GLBL_EN</td><td class="confluenceTd">0</td><td class="confluenceTd">Global Enable register for the probe block</td></tr><tr><td class="confluenceTd">PMON_PROBE_USER_0</td><td class="confluenceTd">8</td><td class="confluenceTd">This will have a <em>target</em> field that can be programmed so that the <em>target_hit</em> event occurs when the value matches H_tid field in the packet</td></tr><tr><td colspan="1" class="confluenceTd">PMON_PROBE_USER_1</td><td colspan="1" class="confluenceTd">12</td><td colspan="1" class="confluenceTd">This will have an <em>addr_range_ll</em> field that will be used to program the lower bound of the address range used to generate the <em>addr_hit</em> event.</td></tr><tr><td colspan="1" class="confluenceTd">PMON_PROBE_USER_2</td><td colspan="1" class="confluenceTd">16</td><td colspan="1" class="confluenceTd">This will have an <em>addr_range_ul</em> field that will be used to program the upper bound of the address range used to generate the <em>addr_hit</em> event.</td></tr><tr><td colspan="1" class="confluenceTd">PMON_PROBE_SEL_addr_hit</td><td colspan="1" class="confluenceTd">20</td><td colspan="1" class="confluenceTd">Select register for <em>addr_hit</em> event. This will have an <em>sel</em> field that willl be used to choose between three possible conditions for generating the <em>addr_hit</em> event.</td></tr><tr><td class="confluenceTd">INTVR</td><td class="confluenceTd">2048</td><td class="confluenceTd">Interrupt valid register. Bit: 0 corresponds to the <em>target_hit</em> interrupt. Bit: 1 corresponds to cnd_evt_addr_hit_ event.</td></tr><tr><td class="confluenceTd">INTMR</td><td class="confluenceTd">2052</td><td class="confluenceTd">Interrupt mask register. Bit: 0 corresponds to the <em>target_hit</em> interrupt. <span>Bit: 1 corresponds to cnd_evt_addr_hit_ event.</span></td></tr><tr><td class="confluenceTd">IDR</td><td class="confluenceTd">4092</td><td class="confluenceTd">Read-only ID register that has the configured ID of the block.</td></tr></tbody></table></div><p><br/></p><p>For details of what fields exist in the above registers and their RW accessibility refer <a class="external-link" href="https://confluence.arteris.com/display/ENGR/pmon_probe" rel="nofollow">pmon_probe</a> and <a class="external-link" href="https://confluence.arteris.com/display/ENGR/interrupt" rel="nofollow">interrupt</a> block descriptions.</p>