<ul><li>The number of credit control registers (CCR) and credit counters in AIUs are determined by the number of DIIs, DCEs, and DMIs that the AIU can talk to and hence dependent on connectivity information. Will this connectivity information be received as a software/TACHL param or a system-connectivity bit-vector ?</li></ul><p><span class="legacy-color-text-orange2">Â </span><span class="legacy-color-text-orange2">[ MKÂ ] No it is one register for each DCE, DMI, DII in the system. Runtime SW will use this to determine connectivity and configure credits accordinglyÂ </span></p><ul><li>If the latter is true, we will have to include all DIIs, DCEs, and DMIs whether connected to the AIU or not to determine the number of credit counters and CCR registers required = Max( nDiis, nDCEs, nDMIs ). Synthesis tool may not be able to optimize this even if some bits in the system-connectivity bit vector are tied off. Are we okay with that ?</li></ul><p><span class="legacy-color-text-red2"><em><strong>[Michael]</strong></em> Yes, I think this not a big problem</span></p><p><span class="legacy-color-text-orange2">[ MKÂ ] Agreed</span></p><ul><li>The arch spec talks about when a DII or DCE or DMI does not exist at a particular index in the CCR register array. In such a case, the reset value should be 0xE0 for those 8-bits replacing the CCF field. Is it still okay to leave the accessibility/read-writability of the fields the same as a valid CCF field ? The assumption can simplify CPR definitions.</li></ul><p><span class="legacy-color-text-red2"><em><strong>[Michael]</strong></em> Yes, not nice - it would be preferable to have the register RO</span></p><p><span class="legacy-color-text-red2"><span class="legacy-color-text-orange2">[ MKÂ ] Agreed</span></span></p><ul><li>In DCE, does software management of credit counters apply only to credit counter that sits with the skid buffer or do we also need software credit management for snoop request credits such as MRD credits ? And will they need skid-buffers too ?</li></ul><p><span class="legacy-color-text-red2"><em><strong>[Michael]</strong></em>Â I don't think we need programmable Snoop/MRD credits - it is unlikely that these would be rebalanced between requestors.</span></p><p><span class="legacy-color-text-orange2">[ MKÂ ] MRD credits can be SW managed as they end up in a Skid buffer in DMI, it is up to implementationÂ to do this as software managed or leave as it is today. Snoop and Rbr credits are fixed as clarified in connectivity spec</span></p><p><br/></p><ul><li>This a question regarding the values that the &quot;CounterState&quot; field in CCR registers can take. When the programmed &quot;CreditLimit&quot; value is non-zero, it is quite clear when the &quot;CounterState&quot; needs to indicate empty, full, or negative states. But suppose <span class="legacy-color-text-red2">someone</span> programs &quot;CreditLimit&quot; to 0 causing the credit counter to go negative, in this case, once all credits are returned and the credit counter increments to zero, Is the &quot;CounterState&quot; now in empty (001) or full (100) state ? Or should we introduce a new state (101) for this case ?</li></ul><p><span class="legacy-color-text-red2"><em><strong>[Michael]</strong></em>Â I don't think 0 credits is a good idea, but I would give you the same answer as your bank teller: With 0 credits your account is empty, no need for a new state!</span></p><p><br/></p><ul><li>The Arch Spec mentions that the CreditLimit associated with sys DII must be initialized with 2 credits. Will this information regarding which one is a sys DII expected to come from Maestro ?</li></ul><p><span class="legacy-color-text-red2"><em><strong>[Michael]</strong></em>Â I don't know the exact mechanisms, but Maestro knows who is what based on the FUnit ID - maybe Khaleel has some more detailed knowledge - if not, either talk to Ben or Federico. I will also try to find out!</span></p><p><span class="legacy-color-text-orange2">Â [ MK ]The last DIi is always the SysDIIÂ </span></p><ul><li>Could you confirm the offset address for the CCR registers or where I might be able to find this information ?</li></ul><p><span class="legacy-color-text-red2"><em><strong>[</strong></em><em><strong>Mich</strong></em><em><strong>ae</strong></em><em><strong>l]</strong></em>Â I, thought this was specified in the spec? Will check! ... checked, the register address in the spec was not very specific &quot;0xblah&quot; â†’ I guess, I will confer with Khaleel about a good spot and we will update the spec <img class="emoticon emoticon-smile" data-emoji-id="1f642" data-emoji-shortname=":slight_smile:" data-emoji-fallback="ðŸ™‚" src="https://arterisip.atlassian.net/wiki/s/-672721829/6452/d621ad2a33e27b90ca05c475b216bfab745e08a2/_/images/icons/emoticons/smile.png" width="16" height="16" data-emoticon-name="smile" alt="(smile)" />Â </span></p><p><br/></p><p><span class="legacy-color-text-orange2">[ MK ] Pleas use starting at address 0xC00Â </span></p><ul><li><p>Boon mentioned to me that we would not have software credit management in dce for mrd. This creates a difficulty with the newly introduced user settable nMrdSkidBufSize which was supposed to set the total number of credit available for allocation by software for DCEs to send mrd request to the dmi.</p><p><br/></p><ol><li>Please confirm Â that we are indeed not doing software credit management of mrd requests in dce anymore.<span class="legacy-color-text-red2"><strong>Â [8-8-22 meeting decided that the software credit management will be implemented in DCE (present Akarsh, Boon, Darshan, MK, Michael, BenÂ ]</strong></span></li><li>I would then propose the following :</li><ol><li>We keep the DCE credit parameter as before.</li><li>For Dmi, instead of being a user settable parameter, nMrdSkidBufSize would become a derived value by maestro. Its value would be derived as follows : For each DCE connected to the DMI, add the number of MRD credit to nMrdSkidBufSize. Would we still want to have a RO register reporting its value? (FYI currently is is derived whithin the tachl.cpr, it does not take into account connectivities and I don't think it is a good idea to do it there anyway)</li><li>We keep the user settable nMrdSkidBufArb with the restriction that it must be smaller than the derived value for nMrdSkidBufSize.</li></ol></ol></li></ul><p><br/></p>