<p>Following assertions are recommended for each file </p><ol><li>X detection assertions for all interface signals (should be in the assertions file)</li><li>Encoding (one hot, gray code etc) assertions.</li><li>Overflow / underflow assertions (for counters, FIFOs and queues etc)</li><li>Illegal signal combination assertions. </li><li>Any functional assertions that will help in quick and easy debug.</li></ol><p>It is recommended that all the assertions be written in the included assertion file, but if the designer is confident that the assertion will not change i.e. get tightened or relaxed then he/she can write it with the RTL code itself.</p><p><br/></p><div style=""><div class="highlighter-context page view"><div class="_1bsb1osq _19pkidpf _2hwx1wug _otyridpf _18u01wug"><div class="css-1kvvrlw e4p5jys0"><div class="page view"><div class="wiki-content"><h1 id="RTLAssertionMethodology-AssertFormattingandGuidelines">Assert Formatting and Guidelines</h1><p><br/></p><p>Currently verilator fails when you enable asserts, thus you must include the following params when running any tests. </p><p>-pof 4                                   &lt;== This will tell the simulation to proceed on verilator fail. </p><p>-rto \{\\\&quot;assertOn\\\&quot;:true} &lt;== This will pass the global parameter to every TACHL module. </p><p><br/></p><p>Example: </p><p>runsim -c maestro_4x4_axi_axi_firewall_12Feb21c_tmp6_json -t axi4_multi_beat_incr_wr_rd_firewall -pof 4 -rto \{\\\&quot;assertOn\\\&quot;:true}</p><p><br/></p><p>1) All asserts must be conditionally made based on the assertOn parameter. The top of every file should have the following. assertOn doesnt need to be passed from block to block</p><div><div class="syntaxhighlighter sh-confluence nogutter  js"><div class="table-wrap"><table style="text-align: left;" border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="code confluenceTd"><div style="text-align: left;" class="container" title="Hint: double-click to select code"><div style="text-align: left;" class="line number1 index0 alt2"><code style="text-align: left;" class="js plain">u.paramDefault(</code><code style="text-align: left;" class="js string">'assertOn'</code><code style="text-align: left;" class="js plain">,<span> </span></code><code style="text-align: left;" class="js string">'boolean'</code><code style="text-align: left;" class="js plain">,<span> </span></code><code style="text-align: left;" class="js keyword">false</code><code style="text-align: left;" class="js plain">);</code></div><div style="text-align: left;" class="line number2 index1 alt1"><code style="text-align: left;" class="js plain">...</code></div><div style="text-align: left;" class="line number3 index2 alt2"><code style="text-align: left;" class="js keyword">var</code><span> </span><code style="text-align: left;" class="js plain">assertOn  = u.getParam(</code><code style="text-align: left;" class="js string">'assertOn'</code><code style="text-align: left;" class="js plain">);</code></div></div></td></tr></tbody></table></div></div></div><p><br/></p><p>2) All asserts must have a comment above them in the following format:</p><div><div class="syntaxhighlighter sh-confluence nogutter  js"><div class="table-wrap"><table style="text-align: left;" border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="code confluenceTd"><div style="text-align: left;" class="container" title="Hint: double-click to select code"><div style="text-align: left;" class="line number1 index0 alt2"><code style="text-align: left;" class="js comments">/*</code></div><div style="text-align: left;" class="line number2 index1 alt1"><code style="text-align: left;" class="js comments">[@CoverProperty,@Assert] &lt;Name of Assert/Cover Property&gt; : &lt;Description of Assert/Cover Property&gt;</code></div><div style="text-align: left;" class="line number3 index2 alt2"><code style="text-align: left;" class="js comments">*/</code></div></div></td></tr></tbody></table></div></div></div><p>For example for this cover property:</p><div><div class="syntaxhighlighter sh-confluence nogutter  js"><div class="table-wrap"><table style="text-align: left;" border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="code confluenceTd"><div style="text-align: left;" class="container" title="Hint: double-click to select code"><div style="text-align: left;" class="line number1 index0 alt2"><code style="text-align: left;" class="js plain">property assert_cap_max;</code></div><div style="text-align: left;" class="line number2 index1 alt1"><code style="text-align: left;" class="js spaces">       </code><code style="text-align: left;" class="js plain">@(posedge a_clk) disable iff (~a_reset_n) (in_qos_prime_lp_\=j=\ &gt; qm\=j=);</code></div><div style="text-align: left;" class="line number3 index2 alt2"><code style="text-align: left;" class="js plain">endproperty</code></div><div style="text-align: left;" class="line number4 index3 alt1"> </div><div style="text-align: left;" class="line number5 index4 alt2"><code style="text-align: left;" class="js plain">COVER_ASSERT_CAP_MAX_\=j=\ : cover property (assert_cap_max);</code></div></div></td></tr></tbody></table></div></div></div><p>It would be formatted:</p><div><div class="syntaxhighlighter sh-confluence nogutter  js"><div class="table-wrap"><table style="text-align: left;" border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="code confluenceTd"><div style="text-align: left;" class="container" title="Hint: double-click to select code"><div style="text-align: left;" class="line number1 index0 alt2"><code style="text-align: left;" class="js plain">\js<span> </span></code><code style="text-align: left;" class="js keyword">if</code><span> </span><code style="text-align: left;" class="js plain">(assertOn) {</code></div><div style="text-align: left;" class="line number2 index1 alt1"><code style="text-align: left;" class="js spaces">     <span> </span></code><code style="text-align: left;" class="js comments">/*</code></div><div style="text-align: left;" class="line number3 index2 alt2"><code style="text-align: left;" class="js spaces">      <span> </span></code><code style="text-align: left;" class="js comments">@CoverProperty COVER_ASSERT_CAP_MAX_\=j=\ : This will be covered if the QoS has to be clipped to the max QoS value.</code></div><div style="text-align: left;" class="line number4 index3 alt1"><code style="text-align: left;" class="js spaces">     <span> </span></code><code style="text-align: left;" class="js comments">*/</code></div><div style="text-align: left;" class="line number5 index4 alt2"> </div><div style="text-align: left;" class="line number6 index5 alt1"><code style="text-align: left;" class="js spaces">      </code><code style="text-align: left;" class="js plain">property assert_cap_max;</code></div><div style="text-align: left;" class="line number7 index6 alt2"><code style="text-align: left;" class="js spaces">         </code><code style="text-align: left;" class="js plain">@(posedge a_clk) disable iff (~a_reset_n) (in_qos_prime_lp_\=j=\ &gt; qm\=j=);</code></div><div style="text-align: left;" class="line number8 index7 alt1"><code style="text-align: left;" class="js spaces">      </code><code style="text-align: left;" class="js plain">endproperty</code></div><div style="text-align: left;" class="line number9 index8 alt2"> </div><div style="text-align: left;" class="line number10 index9 alt1"><code style="text-align: left;" class="js spaces">      </code><code style="text-align: left;" class="js plain">COVER_ASSERT_CAP_MAX_\=j=\ : cover property (assert_cap_max);</code></div><div style="text-align: left;" class="line number11 index10 alt2"><code style="text-align: left;" class="js plain">\js }</code></div></div></td></tr></tbody></table></div></div></div><p>or for this assert:</p><div><div class="syntaxhighlighter sh-confluence nogutter  js"><div class="table-wrap"><table style="text-align: left;" border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="code confluenceTd"><div style="text-align: left;" class="container" title="Hint: double-click to select code"><div style="text-align: left;" class="line number1 index0 alt2"><code style="text-align: left;" class="js plain">\js<span> </span></code><code style="text-align: left;" class="js keyword">if</code><span> </span><code style="text-align: left;" class="js plain">(enableQosMap) {</code></div><div style="text-align: left;" class="line number2 index1 alt1"><code style="text-align: left;" class="js spaces">    </code><code style="text-align: left;" class="js plain">property assert_min_gt_max;</code></div><div style="text-align: left;" class="line number3 index2 alt2"><code style="text-align: left;" class="js spaces">       </code><code style="text-align: left;" class="js plain">@(posedge a_clk) disable iff (~a_reset_n)  (qn_\=j=\ &lt;= qm\=j=\);</code></div><div style="text-align: left;" class="line number4 index3 alt1"><code style="text-align: left;" class="js spaces">    </code><code style="text-align: left;" class="js plain">endproperty</code></div><div style="text-align: left;" class="line number5 index4 alt2"> </div><div style="text-align: left;" class="line number6 index5 alt1"><code style="text-align: left;" class="js spaces">    </code><code style="text-align: left;" class="js plain">ASSERT_MIN_GT_MAX_\=j=\ : assert property (assert_min_gt_max)<span> </span></code><code style="text-align: left;" class="js keyword">else</code><span> </span><code style="text-align: left;" class="js plain">$error(</code><code style="text-align: left;" class="js string">&quot;Min QoS Value Larger than Max QoS value for Queue &quot;</code><span> </span><code style="text-align: left;" class="js plain">+ \=j=\);</code></div><div style="text-align: left;" class="line number7 index6 alt2"><code style="text-align: left;" class="js plain">\js }</code></div></div></td></tr></tbody></table></div></div></div><p>It would be formatted:</p><div><div class="syntaxhighlighter sh-confluence nogutter  js"><div class="table-wrap"><table style="text-align: left;" border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="code confluenceTd"><div style="text-align: left;" class="container" title="Hint: double-click to select code"><div style="text-align: left;" class="line number1 index0 alt2"><code style="text-align: left;" class="js plain">\js<span> </span></code><code style="text-align: left;" class="js keyword">if</code><span> </span><code style="text-align: left;" class="js plain">(assertOn) {</code></div><div style="text-align: left;" class="line number2 index1 alt1"><code style="text-align: left;" class="js spaces">  </code><code style="text-align: left;" class="js plain">\js<span> </span></code><code style="text-align: left;" class="js keyword">if</code><span> </span><code style="text-align: left;" class="js plain">(enableQosMap) {</code></div><div style="text-align: left;" class="line number3 index2 alt2"><code style="text-align: left;" class="js spaces">     <span> </span></code><code style="text-align: left;" class="js comments">/*</code></div><div style="text-align: left;" class="line number4 index3 alt1"><code style="text-align: left;" class="js spaces">      <span> </span></code><code style="text-align: left;" class="js comments">@Assert ASSERT_MIN_GT_MAX_\=j=\ : This will assert if the the registers are configured so that the min QoS is larger than the max QoS.</code></div><div style="text-align: left;" class="line number5 index4 alt2"><code style="text-align: left;" class="js spaces">     <span> </span></code><code style="text-align: left;" class="js comments">*/</code></div><div style="text-align: left;" class="line number6 index5 alt1"> </div><div style="text-align: left;" class="line number7 index6 alt2"><code style="text-align: left;" class="js spaces">      </code><code style="text-align: left;" class="js plain">property assert_min_gt_max;</code></div><div style="text-align: left;" class="line number8 index7 alt1"><code style="text-align: left;" class="js spaces">         </code><code style="text-align: left;" class="js plain">@(posedge a_clk) disable iff (~a_reset_n)  (qn_\=j=\ &lt;= qm\=j=\);</code></div><div style="text-align: left;" class="line number9 index8 alt2"><code style="text-align: left;" class="js spaces">      </code><code style="text-align: left;" class="js plain">endproperty</code></div><div style="text-align: left;" class="line number10 index9 alt1"> </div><div style="text-align: left;" class="line number11 index10 alt2"><code style="text-align: left;" class="js spaces">      </code><code style="text-align: left;" class="js plain">ASSERT_MIN_GT_MAX_\=j=\ : assert property (assert_min_gt_max)<span> </span></code><code style="text-align: left;" class="js keyword">else</code><span> </span><code style="text-align: left;" class="js plain">$error(</code><code style="text-align: left;" class="js string">&quot;Min QoS Value Larger than Max QoS value for Queue &quot;</code><span> </span><code style="text-align: left;" class="js plain">+ \=j=\);</code></div><div style="text-align: left;" class="line number12 index11 alt1"><code style="text-align: left;" class="js spaces">   </code><code style="text-align: left;" class="js plain">\js }</code></div><div style="text-align: left;" class="line number13 index12 alt2"><code style="text-align: left;" class="js plain">\js }</code></div></div></td></tr></tbody></table></div></div></div><p class="auto-cursor-target">Assert example #2. </p><div><div class="syntaxhighlighter sh-confluence nogutter  js"><div class="table-wrap"><table style="text-align: left;" border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="code confluenceTd"><div style="text-align: left;" class="container" title="Hint: double-click to select code"><div style="text-align: left;" class="line number1 index0 alt2"><code style="text-align: left;" class="js plain">\jsbegin</code></div><div style="text-align: left;" class="line number2 index1 alt1"><code style="text-align: left;" class="js comments">/* istanbul ignore if */</code></div><div style="text-align: left;" class="line number3 index2 alt2"><code style="text-align: left;" class="js keyword">if</code><span> </span><code style="text-align: left;" class="js plain">(assertOn) { \jsend</code></div><div style="text-align: left;" class="line number4 index3 alt1"><code style="text-align: left;" class="js spaces">    </code><code style="text-align: left;" class="js comments">/*</code></div><div style="text-align: left;" class="line number5 index4 alt2"><code style="text-align: left;" class="js spaces">     </code><code style="text-align: left;" class="js comments">@Assert ASSERT_ERR_SELECT_ONE_HOT : This will assert if context_error_sel is not one-hot or zero when error_valid is asserted.</code></div><div style="text-align: left;" class="line number6 index5 alt1"><code style="text-align: left;" class="js spaces">    </code><code style="text-align: left;" class="js comments">*/</code></div><div style="text-align: left;" class="line number7 index6 alt2"><code style="text-align: left;" class="js spaces">    </code><code style="text-align: left;" class="js plain">ASSERT_ERR_SELECT_ONE_HOT: assert property (@(posedge clk) disable iff (~reset_n) !(error_valid &amp;&amp; !$onehot(context_error_sel)) )</code></div><div style="text-align: left;" class="line number8 index7 alt1"><code style="text-align: left;" class="js spaces">        </code><code style="text-align: left;" class="js keyword">else</code><span> </span><code style="text-align: left;" class="js plain">begin $error(</code><code style="text-align: left;" class="js string">&quot;CTL_TARG_nodeId_\=nodeId=\:Error response select is not one-hot during error !&quot;</code><code style="text-align: left;" class="js plain">);</code><span> </span><code style="text-align: left;" class="js preprocessor">#100 $finish; end</code></div><div style="text-align: left;" class="line number9 index8 alt2"><code style="text-align: left;" class="js plain">\jsbegin</code></div><div style="text-align: left;" class="line number10 index9 alt1"><code style="text-align: left;" class="js plain">} \jsend</code></div></div></td></tr></tbody></table></div></div></div><p class="auto-cursor-target">3) Asserts can be grouped together:</p><p class="auto-cursor-target">For example this:</p><div><div class="syntaxhighlighter sh-confluence nogutter  js"><div class="table-wrap"><table style="text-align: left;" border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="code confluenceTd"><div style="text-align: left;" class="container" title="Hint: double-click to select code"><div style="text-align: left;" class="line number1 index0 alt2"><code style="text-align: left;" class="js plain">COVER_ASSERT_CAP_MAX_\=j=\ : cover property ( @(posedge a_clk) (in_qos_prime_lp_\=j=\ &gt; qm\=j=\) );</code></div><div style="text-align: left;" class="line number2 index1 alt1"><code style="text-align: left;" class="js plain">COVER_ASSERT_CAP_MIN_\=j=\ : cover property ( @(posedge a_clk) (in_qos_prime_lp_\=j=\ &lt; qn\=j=\) );</code></div></div></td></tr></tbody></table></div></div></div><p class="auto-cursor-target">Could be formatted like this:</p><div><div class="syntaxhighlighter sh-confluence nogutter  js"><div class="table-wrap"><table style="text-align: left;" border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="code confluenceTd"><div style="text-align: left;" class="container" title="Hint: double-click to select code"><div style="text-align: left;" class="line number1 index0 alt2"><code style="text-align: left;" class="js plain">\js<span> </span></code><code style="text-align: left;" class="js keyword">if</code><span> </span><code style="text-align: left;" class="js plain">(assertOn) {</code></div><div style="text-align: left;" class="line number2 index1 alt1"><code style="text-align: left;" class="js spaces">  </code><code style="text-align: left;" class="js comments">/*</code></div><div style="text-align: left;" class="line number3 index2 alt2"><code style="text-align: left;" class="js spaces">   <span> </span></code><code style="text-align: left;" class="js comments">@CoverProperty COVER_ASSERT_CAP_MAX_\=j=\ : This will be covered if the QoS has to be clipped to the max QoS value.</code></div><div style="text-align: left;" class="line number4 index3 alt1"><code style="text-align: left;" class="js spaces">   <span> </span></code><code style="text-align: left;" class="js comments">@CoverProperty COVER_ASSERT_CAP_MIN_\=j=\ : This will be covered if the QoS has to be clipped to the min QoS value.</code></div><div style="text-align: left;" class="line number5 index4 alt2"><code style="text-align: left;" class="js spaces">  </code><code style="text-align: left;" class="js comments">*/</code></div><div style="text-align: left;" class="line number6 index5 alt1"> </div><div style="text-align: left;" class="line number7 index6 alt2"><code style="text-align: left;" class="js spaces">  </code><code style="text-align: left;" class="js plain">property assert_cap_max;</code></div><div style="text-align: left;" class="line number8 index7 alt1"><code style="text-align: left;" class="js spaces">         </code><code style="text-align: left;" class="js plain">@(posedge a_clk) disable iff (~a_reset_n) (in_qos_prime_lp_\=j=\ &gt; qm\=j=\) ;</code></div><div style="text-align: left;" class="line number9 index8 alt2"><code style="text-align: left;" class="js spaces">  </code><code style="text-align: left;" class="js plain">endproperty</code></div><div style="text-align: left;" class="line number10 index9 alt1"> </div><div style="text-align: left;" class="line number11 index10 alt2"><code style="text-align: left;" class="js spaces">  </code><code style="text-align: left;" class="js plain">property assert_cap_min;</code></div><div style="text-align: left;" class="line number12 index11 alt1"><code style="text-align: left;" class="js spaces">         </code><code style="text-align: left;" class="js plain">@(posedge a_clk) disable iff (~a_reset_n) (in_qos_prime_lp_\=j=\ &gt; qm\=j=\) ;</code></div><div style="text-align: left;" class="line number13 index12 alt2"><code style="text-align: left;" class="js spaces">  </code><code style="text-align: left;" class="js plain">endproperty</code></div><div style="text-align: left;" class="line number14 index13 alt1"> </div><div style="text-align: left;" class="line number15 index14 alt2"><code style="text-align: left;" class="js spaces">  </code><code style="text-align: left;" class="js plain">COVER_ASSERT_CAP_MAX_\=j=\ : cover property (assert_cap_max);</code></div><div style="text-align: left;" class="line number16 index15 alt1"><code style="text-align: left;" class="js spaces">  </code><code style="text-align: left;" class="js plain">COVER_ASSERT_CAP_MIN_\=j=\ : cover property (assert_cap_min);</code></div><div style="text-align: left;" class="line number17 index16 alt2"><code style="text-align: left;" class="js plain">\js }</code></div></div></td></tr></tbody></table></div></div></div></div></div></div></div></div></div><div style="" class="_19pkys9h _2hwx1wug _otyr1ylp _18u01wug _1bsb1osq _p12fukw8"><div class=" css-iucoak-container"><div class="labels__control css-106if8i-control"><div class="labels__value-container labels__value-container--is-multi css-f9obad"><div class="css-yr9yzn" /><div class="_syaz9sh9"><div class="_1e0c1txw _4cvr1h6o"><span>Add label</span></div></div></div></div></div></div><div style="" class="end-of-page-rec-wrapper"><div class="_1e0c1txw _2lx21bp4 _1bah1h6o _n3tdgktf _19pk1wug _2hwx1wug _otyr1wug _18u01wug _1bsb1osq _p12fukw8" /></div><p><br/></p><p><br/></p><p><br/></p>