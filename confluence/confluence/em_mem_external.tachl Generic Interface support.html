<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">\jsbegin

u.paramDefault(&#39;interfaces&#39;, &#39;object&#39;, {});

var memoryType      = u.getParam(&#39;memoryType&#39;);
var interfaces = u.getParam(&#39;interfaces&#39;);

var useGenericInterface = false;

if (interfaces.externalInterface != undefined) {
if(interfaces.externalInterface.name != &quot;&quot;) {
useGenericInterface = u.getParam(&quot;memoryType&quot;) === &quot;SYNOPSYS&quot;;
}
}

if (useGenericInterface) {
var interfaceFunc = new obj.userLib[interfaces.externalInterface.interface];
var externalInterface = interfaceFunc.getSignals(interfaces.externalInterface.params);
var externalInterfaceBundle = interfaceFunc.getSignalsBundle(interfaces.externalInterface.params);
var externalInterfaceName = interfaces.externalInterface.name;
var externalInterfaceDef = interfaces.externalInterface.synonyms;
}

if (u.getParam(&quot;memoryType&quot;) === &quot;SYNOPSYS&quot;) {
    if (useGenericInterface) {
         obj.lib.interface(externalInterfaceName, &#39;master&#39; , externalInterface);
    } else {
      if (nSignals &gt; 0) {
         utilFunctions.defineMasterPortsFromInterface(rtlPrefixString + &#39;_&#39;, signals, obj.lib.port);
      }
    }
}

\jsend

module \=u.getModuleName()=\ (\=u.getPorts(&#39;\n    &#39;)=\);

\jsbegin
// Generic Interface
if(useGenericInterface) {
  var external_ports = [];
  var externalInterface = {&quot;name&quot; : &quot;&quot;, &quot;signals&quot;:{}};
  \jsend
  \=bundleFunctions.explodeSyn(externalInterfaceName, externalInterfaceDef, &#39;wire&#39;, obj.lib.bundle)=\
  \jsbegin
  externalInterface[&#39;signals&#39;] = bundleFunctions.synToBundle(externalInterfaceDef,&quot;both&quot;);
  externalInterface[&#39;name&#39;]    = externalInterfaceName;
 }


\jsbegin
if (u.getParam(&quot;memoryType&quot;) === &quot;SYNOPSYS&quot;) {
\jsend
    \jsbegin
    if (u.getParam(&quot;ports&quot;) === &quot;sp&quot;) {
    \jsend
wire \=mem_name=\__CLK;
wire [\=u.getParam(&#39;width&#39;)-1=\:0] \=mem_name=\__D;
wire [\=w_log2Addr-1=\:0] \=mem_name=\__ADR;
wire \=mem_name=\__WE;
wire \=mem_name=\__ME;
wire [\=u.getParam(&#39;width&#39;)-1=\:0] \=mem_name=\__Q;
                \jsbegin
                if (u.getParam(&quot;bitEnable&quot;)) {
                \jsend
wire [\=u.getParam(&#39;width&#39;)-1=\:0] \=mem_name=\__WEM;
                \jsbegin
                }
                \jsend
    \jsbegin
    }
    \jsend
    \jsbegin
    /* istanbul ignore if */
    if (u.getParam(&quot;ports&quot;) === &quot;tp&quot;) {
    \jsend
wire \=mem_name=\__CLKA;
wire \=mem_name=\__CLKB;
wire [\=u.getParam(&#39;width&#39;)-1=\:0] \=mem_name=\__DA;
wire [\=w_log2Addr-1=\:0] \=mem_name=\__ADRA;
wire [\=w_log2Addr-1=\:0] \=mem_name=\__ADRB;
wire \=mem_name=\__WEA;
wire \=mem_name=\__MEA;
wire \=mem_name=\__MEB;
wire [\=u.getParam(&#39;width&#39;)-1=\:0] \=mem_name=\__QB;
                \jsbegin
                if (u.getParam(&quot;bitEnable&quot;)) {
                \jsend
wire [\=u.getParam(&#39;width&#39;)-1=\:0] \=mem_name=\__WEMA;
                \jsbegin
                }
                \jsend
    \jsbegin
    }
    \jsend

\jsbegin
if (u.getParam(&#39;memoryType&#39;) === &#39;SYNOPSYS&#39;) {
        var moduleInterfaces = [];

        if (useGenericInterface) {
          moduleInterfaces[0] = {
            modulePrefix  :  externalInterface.name,
            localPrefix   :  externalInterface.name,
            interface     :  externalInterface.signals
          } ;
        }

        var moduleName = u.getParam(&#39;rtlPrefixString&#39;) + &#39;_&#39; + u.getParam(&#39;modulePrefix&#39;);
        var externalMemParam = {
            useMemWrapperDoutFlop : u.getParam(&#39;useMemWrapperDoutFlop&#39;),
            memoryType            : u.getParam(&#39;memoryType&#39;),
            signals               : signals,
            rtlPrefixString       : rtlPrefixString,
            sverilog              : u.getParam(&#39;sverilog&#39;),
            eccBlocks             : u.getParam(&#39;memEccBlocks&#39;),
            useGenericInterface   : useGenericInterface,
            externalInterface     : externalInterface,
            ports                 : u.getParam(&#39;ports&#39;),
            bit_en                : u.getParam(&#39;bitEnable&#39;),
            width                 : u.getParam(&#39;width&#39;),
            depth                 : u.getParam(&#39;depth&#39;)
        };
        var instance_ports = {
        };
        if (u.getParam(&quot;ports&quot;) === &quot;sp&quot;) {
            instance_ports[&#39;CLK&#39;] = mem_name + &#39;__CLK&#39;;
            instance_ports[&#39;D&#39;]   = mem_name + &#39;__D&#39;;
            instance_ports[&#39;ADR&#39;] = mem_name + &#39;__ADR&#39;;
            instance_ports[&#39;WE&#39;]  = mem_name + &#39;__WE&#39;;
            instance_ports[&#39;ME&#39;]  = mem_name + &#39;__ME&#39;;
            instance_ports[&#39;Q&#39;]   = mem_name + &#39;__Q&#39;;
                if (u.getParam(&quot;bitEnable&quot;)) {
            instance_ports[&#39;WEM&#39;] = mem_name + &#39;__WEM&#39;;
                }
        }

        /* istanbul ignore if */
        if (u.getParam(&quot;ports&quot;) === &quot;tp&quot;) {
            instance_ports[&#39;CLKA&#39;] = mem_name + &#39;__CLKA&#39;;
            instance_ports[&#39;CLKB&#39;] = mem_name + &#39;__CLKB&#39;;
            instance_ports[&#39;DA&#39;]   = mem_name + &#39;__DA&#39;;
            instance_ports[&#39;ADRA&#39;] = mem_name + &#39;__ADRA&#39;;
            instance_ports[&#39;ADRB&#39;] = mem_name + &#39;__ADRB&#39;;
            instance_ports[&#39;WEA&#39;]  = mem_name + &#39;__WEA&#39;;
            instance_ports[&#39;MEA&#39;]  = mem_name + &#39;__MEA&#39;;
            instance_ports[&#39;MEB&#39;]  = mem_name + &#39;__MEB&#39;;
            instance_ports[&#39;QB&#39;]   = mem_name + &#39;__QB&#39;;
                if (u.getParam(&quot;bitEnable&quot;)) {
            instance_ports[&#39;WEMA&#39;] = mem_name + &#39;__WEMA&#39;;
                }
        }
        for (var signal in signals) {
            instance_ports[signal] = mem_name + &#39;__&#39; + signal;
        }
\jsend
        \=u.instance({
            instanceName: &#39;external_mem_inst&#39;,
            moduleName: rtlPrefixString + &#39;_&#39; + &#39;external_mem&#39;,
            tachlName: &#39;external_mem&#39;,
            params : externalMemParam,
            interfaces : moduleInterfaces,
            verilogParams: {},
            ports: instance_ports,
            portsDelimiter: &#39;\n    &#39;
        })=\
\jsbegin
}
\jsend


\jsbegin
}
\jsend

endmodule


</pre>
</div></div><p><br/></p>