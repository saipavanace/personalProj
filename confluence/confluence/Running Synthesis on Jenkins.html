<p><style>[data-colorid=ui3f2h1thl]{color:#333333} html[data-color-mode=dark] [data-colorid=ui3f2h1thl]{color:#cccccc}[data-colorid=bpyjzm6eba]{color:#333333} html[data-color-mode=dark] [data-colorid=bpyjzm6eba]{color:#cccccc}</style>Linus/Unix Environment used either bash or tcsh shell.</p><p>Note: bash shell gets killed when run sourceme script sometimes.</p><p>So, preferable is tcsh shell.</p><p><br /></p><p>When creating work space in scratch for the first time (use <strong>cd</strong> instead of <strong>mkdir</strong>) with user ID.</p><ul><li><strong>&gt; cd /scratch/smusini</strong></li></ul><p><br /></p><p>Make sure to use tcsh shell</p><ul><li><strong>&gt; exec tcsh</strong></li></ul><p><br /></p><p>Create synthesis run dir with customer_&lt;date&gt;_&lt;config&gt;</p><p>In this case, run_config1</p><ul><li><strong>&gt; mkdir dmi_runs/run_config1</strong></li></ul><p><br /></p><p>Run <strong>concerto</strong> setup command to branch master and clones files.</p><p>This command works both in bash and tcsh shell the same way.</p><ul><li>run_config1<strong>&gt; /engr/dev/tools/script/setup_concerto</strong></li></ul><p><br /></p><p>The result of the concerto command will look like this.</p><p><br /></p><p>drwxr-xr-x&nbsp; 4 smusini employees&nbsp;&nbsp; 12 Apr&nbsp; 4 17:34 hw-ccp</p><p>drwxr-xr-x&nbsp; 9 smusini employees&nbsp;&nbsp; 15 Apr&nbsp; 4 17:34 hw-lib</p><p>drwxr-xr-x&nbsp; 9 smusini employees&nbsp;&nbsp; 17 Apr&nbsp; 4 17:34 hw-sym</p><p>drwxr-xr-x 27 smusini employees&nbsp;&nbsp; 32 Apr&nbsp; 4 17:34 hw-test-projects</p><p>lrwxrwxrwx&nbsp; 1 smusini employees&nbsp;&nbsp;&nbsp; 6 Apr&nbsp; 4 17:34 concerto -&gt; hw-ncr</p><p>lrwxrwxrwx&nbsp; 1 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:34 scripts -&gt; hw-scripts</p><p>lrwxrwxrwx&nbsp; 1 smusini employees&nbsp;&nbsp; 16 Apr&nbsp; 4 17:34 test_projects -&gt; hw-test-projects</p><p>drwxr-xr-x&nbsp; 7 smusini employees&nbsp;&nbsp; 43 Apr&nbsp; 4 17:34 hw-scripts</p><p>drwxr-xr-x 11 smusini employees&nbsp;&nbsp; 24 Apr&nbsp; 4 17:35<strong> hw-ncr</strong></p><p>-rw-r--r--&nbsp; 1 smusini employees 3035 Apr&nbsp; 4 17:35 <strong>SOURCEME</strong></p><p>-rw-r--r--&nbsp; 1 smusini employees 3197 Apr&nbsp; 4 17:35<strong> SOURCEME.csh</strong></p><p><br /></p><p>Run SOURCEME script to branch NCORE3 hardware from git repository</p><p>Since this is tcsh shell use *.csh script to source</p><ul><li>run_config1<strong>&gt; source SOURCEME.csh ncore3.0.1</strong></li></ul><p><br /></p><p>Check NCORE branch is built or not. The WORK_TOP should point<strong> to hw-ncr </strong></p><ul><li>run_config1&gt;<strong> e</strong><strong>cho $WORK_TOP</strong><strong>&nbsp; </strong></li></ul><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Result: /scratch/smusini/debug/test/hw-ncr</p><p><br /></p><p>Run MAESTRO command with config to generate RTL files.</p><ul><li>run_config1&gt;<strong> maestro -c -s /home/ehoward/NxpConfigs.3.31/config1/hw_config_nxpauto.tcl</strong></li></ul><p><br /></p><p>Note: Make sure maestro is pointing to the latest Ncore3 production version.</p><ul><li>run_config1&gt;<strong> which maestro</strong></li></ul><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Result: /engr/dev/releases/maestro/build/<strong>Ncore3/maestro-product</strong>/stable/bin/maestro</p><p><br /></p><p>Maestro command creates <strong>output</strong> folder where in design specific RTL modules, memories and synthesis scripts exists.</p><p><br /></p><p>The output folder looks like this:</p><p>drwxr-xr-x 4 smusini employees&nbsp; 4 Apr&nbsp; 4 17:41 tb</p><p>drwxr-xr-x 5 smusini employees&nbsp; 5 Apr&nbsp; 4 17:41 <strong>synthesis</strong></p><p>drwxr-xr-x 2 smusini employees&nbsp; 2 Apr&nbsp; 4 17:41 simulation</p><p>drwxr-xr-x 2 smusini employees&nbsp; 2 Apr&nbsp; 4 17:41 setup</p><p>drwxr-xr-x 6 smusini employees&nbsp; 6 Apr&nbsp; 4 17:41 <strong>rtl</strong></p><p>drwxr-xr-x 4 smusini employees&nbsp; 4 Apr&nbsp; 4 17:41 models</p><p>drwxr-xr-x 2 smusini employees&nbsp; 4 Apr&nbsp; 4 17:41 IPXACT</p><p>drwxr-xr-x 5 smusini employees 10 Apr&nbsp; 4 17:41 debug</p><p>drwxr-xr-x 2 smusini employees 18 Apr&nbsp; 4 17:41 doc</p><p><br /></p><p>The output/rtl folder consists of design RTL files and memory models.</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp;&nbsp; 2 Apr&nbsp; 4 17:41 reports</p><p>drwxr-xr-x 4 smusini employees&nbsp;&nbsp;&nbsp; 4 Apr&nbsp; 4 17:41 models</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp;&nbsp; 8 Apr&nbsp; 4 17:41 placeholders</p><p>drwxr-xr-x 2 smusini employees 3029 Apr&nbsp; 4 17:41 design</p><p><br /></p><p>The inferred/generated memories are in output/rtl/models/memories.</p><p>The flow is expecting to have this memories folder in the same directory where output directory exists.</p><p>So, we need to manually copy them for now.</p><p><br /></p><p>Copy generated SRAMs from rtl folder to output folder. These are flop based and need manually modified.</p><ul><li>run1_config1&gt; <strong>cp -r&nbsp; output/rtl/models/memories&nbsp; .</strong></li></ul><p><br /></p><p>Note:&nbsp; Now you need to make a memory wrapper to change the .v files which are flop based to SRAM based using the sram those have already been generated.</p><p>Also copy SRAM .lib files folder into memories.</p><p><br /></p><p>The run_config1/memories folder now looks like this:</p><p><br /></p><p>&nbsp;rw-r--r-- 1 smusini employees 1425 Apr&nbsp; 1 16:03 DCE_EOS0_tagMem_external_mem_a.v</p><p>-rw-r--r-- 1 smusini employees 1467 Apr&nbsp; 1 16:10 DMI_dataMem_external_mem_a.v</p><p>-rw-r--r-- 1 smusini employees 1457 Apr&nbsp; 1 16:06 DMI_tagMem_external_mem_a.v</p><p>-rw-r--r-- 1 smusini employees 1045 Apr&nbsp; 1 16:58 DMI_wrDataMem_external_mem_a.v</p><p>-rw-r--r-- 1 smusini employees 1537 Apr&nbsp; 1 16:03 IOAIU_ottMem_external_mem_a.v</p><p>-rw-r--r-- 1 smusini employees 1220 Apr&nbsp; 1 16:03 IOAIU_ottMem_external_mem_b.v</p><p><strong>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 19 Apr&nbsp; 1 16:03 libraries_ssgn</strong></p><p>-rw-r--r-- 1 smusini employees&nbsp; 181 Apr&nbsp; 1 16:03 memories.flist</p><p>-rw-r--r-- 1 smusini employees 5108 Apr&nbsp; 1 16:03 sasrls0g4l1p1024x46m4b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5213 Apr&nbsp; 1 16:03 sasrls0g4l1p1024x88m4b1w1c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5110 Apr&nbsp; 1 16:03 sasrls0g4l1p160x137m4b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5108 Apr&nbsp; 1 16:03 sasrls0g4l1p32x150m2b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5104 Apr&nbsp; 1 16:03 sasrls0g4l1p32x81m4b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5108 Apr&nbsp; 1 16:03 sasrls0g4l1p40x154m2b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5106 Apr&nbsp; 1 16:03 sasrls0g4l1p512x47m4b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5108 Apr&nbsp; 1 16:03 sasrls0g4l1p64x154m2b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5108 Apr&nbsp; 1 16:03 sasrls0g4l1p80x266m2b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5219 Apr&nbsp; 1 16:03 sassls0g4l1p2048x112m8b1w1c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5111 Apr&nbsp; 1 16:03 sassls0g4l1p2048x45m16b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5214 Apr&nbsp; 1 16:03 sassls0g4l1p2048x86m8b1w1c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5111 Apr&nbsp; 1 16:03 sassls0g4l1p4096x67m16b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p>-rw-r--r-- 1 smusini employees 5111 Apr&nbsp; 1 16:03 sassls0g4l1p4096x69m16b1w0c1p0d0l0rm3sdrw00_bus_wrapper.v</p><p><br /></p><p>The output/synthesis folder consists of synopsys and cadense specfic scripts. Currently, our focus is synopsys.</p><p><br /></p><p>The output/synthesis/synopsys/scripts folder contains Makefile and all modules with their json, dc tcl files.</p><p><br /></p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 aiu_top_a</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 config_dii_a</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 dce_a</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 dce_b</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 dii_top_a</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 dii_top_b</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 dmi_a</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 dve_a</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 fsc_a</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 gen_wrapper</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 grb_a</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 ioaiu_top_a</p><p>drwxr-xr-x 2 smusini employees&nbsp;&nbsp; 10 Apr&nbsp; 4 17:41 ioaiu_top_b</p><p>-rw-r--r-- 1 smusini employees 3572 Apr&nbsp; 4 17:41 Makefile</p><p><br /></p><p>The <strong>output/synthesis/synopsys/scripts/&lt;module</strong>&gt;</p><p>-rw-r--r-- 1 smusini employees&nbsp;&nbsp; 405 Apr&nbsp; 4 17:41 dc_config.json</p><p>-rw-r--r-- 1 smusini employees 53218 Apr&nbsp; 4 17:41 dc_procs.tcl</p><p>-rw-r--r-- 1 smusini employees&nbsp; 2141 Apr&nbsp; 4 17:41 dc_setup.tcl</p><p>-rw-r--r-- 1 smusini employees&nbsp; 6704 Apr&nbsp; 4 17:41 dc.tcl</p><p>-rw-r--r-- 1 smusini employees 26091 Apr&nbsp; 4 17:41 dmi_a.read_design.tcl</p><p>-rw-r--r-- 1 smusini employees 29764 Apr&nbsp; 4 17:41 dmi_a.sdc</p><p>-rw-r--r-- 1 smusini employees&nbsp; 7241 Apr&nbsp; 4 17:41 json_read.tcl</p><p>-rw-r--r-- 1 smusini employees&nbsp; 8772 Apr&nbsp; 4 17:41 json_tcl.tcl</p><p><br /></p><p>At this stage we need to run ARIA to update the DC tcls to pickup memories from the copied location (i.e, run_config1/memories) and other synthesis options that were updated in the ARIA script.</p><p><br /></p><p>Update the ARIA json file with correct settings (if required).</p><ul><li>gvim /home/smusini/Aria/run_aria_ncore3_dc_topo.js</li></ul><p><br /></p><p>&nbsp;Running ARIA to generate updated dc.tcl files.</p><ul><li>run_config1&gt; <strong>node /home/smusini/Aria/run_aria_ncore3_dc_topo.js</strong></li></ul><p><br /></p><p><strong>Note:</strong> If you want to run check_only to make sure they are no RTL link issues, update dc.tcls with zero wireload mode.</p><p>when run ARIA with zero_wireload, dc tcls are generated in non-topo mode to run elaborate and link the design to check any unresolve references and failures.</p><ul><li>run_config1&gt; <strong>node /home/smusini/Aria/run_aria_ncore3_zero_wireload.js</strong></li></ul><p>## In above ARIA file, you have a checkOnly parameter; this should be changed to 1 to run in zero wireload mode.</p><p><br /></p><p>Update Makefile to launch synthesis.</p><p>Make a copy of the Makfile in output/synthesis/synopsys/scripts (in case you would need it) and update the makefile as follows :</p><p><br /></p><ul><li>run_config1<strong>&gt; cd output/synthesis/synopsys/scripts</strong></li><li><strong>cp Makefile <a class="external-link" href="http://Makefile.org" rel="nofollow">Makefile.org</a></strong></li><li><strong>gvim Makefile</strong></li></ul><p><br /></p><p>Leave in the subDesignDdcs block only the module you want to synthetize.</p><p>Remove all copy ddc file lines in runtop section. Also, remove all other blocks and keep only block to synthesize.</p><p><br /></p><p>The final Makefile should look like this:</p><p>runtop: $(subDesignDdcs)</p><p>mkdir -p gen_wrapper;\</p><p>cd gen_wrapper;\</p><p>mkdir -p outputs;\</p><p><br /></p><p>../dmi_a/outputs/dmi_a.gate_level.ddc:</p><p><br /></p><p>mkdir -p dmi_a;\</p><p><br /></p><p>cd dmi_a;\</p><p>dc_shell-t -64bit -topo -f $(scriptDir)/dmi_a/dc.tcl -output_log_file dmi_a.dc.log;</p><p><br /></p><p>Copy placeholder.v files into design folder as shown below.</p><p><br /></p><ul><li>run_config1<strong>&gt; cp -rp output/rtl/placehoder/*.v&nbsp;&nbsp;&nbsp; --&gt; output/rtl/design/</strong></li></ul><p><br /></p><p>Finally, create a tar file to upload into Jenkins server.</p><p><br /></p><ul><li>run_config1<strong>&gt; tar -cvf run_config1.tar&nbsp; run_config1/ </strong></li></ul><p><br /></p><p>For Reference, please look at this testcase:&nbsp;<em><strong>/scratch/smusini/dmi_runs/run_config1</strong></em></p><p><br /></p><p>Now, submit the synthesis job on Jerkins by uploading the tar file @&nbsp; <a class="external-link" href="http://jenkins.arteris.com:8080/job/TSMC_Synthesis" rel="nofollow">http://jenkins.arteris.com:8080/job/TSMC_Synthesis</a></p><p><img src="https://arterisip.atlassian.net/wiki/plugins/servlet/confluence/placeholder/error?i18nKey=editor.placeholder.broken.image&amp;locale=en_US&amp;version=2" title="Missing required attribute: {http://atlassian.com/resource/identifier}value" class="transform-error" data-encoded-xml="%3Cac%3Aimage+ac%3Aheight%3D%22400%22%3E%3Cri%3Aurl+%2F%3E%3C%2Fac%3Aimage%3E" /></p><p><br /></p><p><br /></p><ul><li>On Jerkins page, click Build with Parameters to point the tar bal.</li><li><p>Add tar file relative path and select PROJ_TYPE to be<span> Ncore3</span>. Then click build.</p></li></ul><p><img src="https://arterisip.atlassian.net/wiki/plugins/servlet/confluence/placeholder/error?i18nKey=editor.placeholder.broken.image&amp;locale=en_US&amp;version=2" title="Missing required attribute: {http://atlassian.com/resource/identifier}value" class="transform-error" data-encoded-xml="%3Cac%3Aimage+ac%3Aheight%3D%22400%22%3E%3Cri%3Aurl+%2F%3E%3C%2Fac%3Aimage%3E" /></p><p>&nbsp; &nbsp;</p><ul><li>Once it is launched, the build history shows the run status.</li></ul><p>&nbsp; &nbsp;<img src="https://arterisip.atlassian.net/wiki/plugins/servlet/confluence/placeholder/error?i18nKey=editor.placeholder.broken.image&amp;locale=en_US&amp;version=2" title="Missing required attribute: {http://atlassian.com/resource/identifier}value" class="transform-error" data-encoded-xml="%3Cac%3Aimage+ac%3Aheight%3D%22615%22+ac%3Awidth%3D%22343%22%3E%3Cri%3Aurl+%2F%3E%3C%2Fac%3Aimage%3E" /></p><p><br /></p><p>&nbsp; <em><strong>The run will be launched in SULA server.</strong></em></p><p style="margin-left: 0.375in;"><em><strong><span data-colorid="bpyjzm6eba">Running as SYSTEM<br />Building remotely on </span><a class="external-link" href="http://jenkins.arteris.com:8080/computer/sula" rel="nofollow">sula</a><span data-colorid="ui3f2h1thl"> (tsmc) in workspace /home/ladmin/workspace/TSMC_Synthesis@3</span></strong></em></p><p>&nbsp; &nbsp; &nbsp;</p><p><br /></p><p><br /></p><p><br /></p><p><br /></p>