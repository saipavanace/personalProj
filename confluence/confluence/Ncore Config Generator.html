<h1 id="NcoreConfigGenerator-Createaregressarea:">Create a regress area:</h1><p>(Need to try this in an Ncore area to see what happens)</p><h2 id="NcoreConfigGenerator-SymphonyInstructions:">Symphony Instructions:</h2><p style="margin-left: 30.0px;"><a class="external-link" href="https://confluence.arteris.com/pages/viewpage.action?pageId=9111861" rel="nofollow">One for All Simulation - Regression Tool - &quot;runsim&quot;</a></p><p>Create and environmental variable that points at the top of the symphony pulled repository</p><p style="margin-left: 30.0px;">setenv SYM_TOP $WORK_TOP/..</p><p>Goto the Ncore_config area:</p><p style="margin-left: 30.0px;">cd $SYM_TOP/dv/tb/top/Ncore_config</p><h2 id="NcoreConfigGenerator-NcoreInstructions:">Ncore Instructions:</h2><p style="margin-left: 30.0px;">(Khaleel insert instructions here)</p><h2 id="NcoreConfigGenerator-CommonInstructions:">Common Instructions:</h2><p>Run the script called create_fabric.js. If there's a error in it's command line options it gives directions:</p><pre>[jcodd@mondavi Ncore_config]$ ./create_config.js <br/>ERROR - /home/jcodd/work/regress/hw/dv/tb/top/Ncore_config/create_config.js: Missing required options.<br/>/home/jcodd/work/regress/hw/dv/tb/top/Ncore_config/create_config.js Usage -axi axiFile_path -apb apbFile_path -off offFile_path -cs cacheSize -p pktStyle -n name &lt;-h&gt;<br/> axiFile_path: Required. Path to InterfaceAXI JSON parameters file.<br/> apbFile_path: Required. Path to InterfaceAPB JSON parameters file.<br/> offFile_path: Required. Path to address offsets array JSON parameters file.<br/> cacheSize: Required. Cache size in bytes.<br/> pktStyle: Required. Packet Style of ATP link: parallel, serial or fixed.<br/> name: Required. Name to prefix on all created stuff<br/> -h: Optional. Prints out this message</pre><pre>address offsets JSON format:<br/> [<br/> &quot;36'b0&quot;, string // 4k address offset of apb port 0<br/> &quot;36'b1&quot;, string // 4k address offset of apb port 1<br/> &quot;36'b2&quot;: string // 4k address offset of apb port 2<br/> ]</pre><div>There are example files for both smiFile_path and idFile_path:</div><div>apb_params.json</div><div>axi_params.json</div><div> </div><div>So a full run with all the bells and whistles:</div><div><pre>[jcodd@mondavi Ncore_config]$ ./create_config.js -axi axi_params.json -apb apb_params.json -off offsets.json -cs 64 -p parallel -n con <br/>Bus width: 107<br/>max_beats: 16<br/>header_width: 68<br/>max_header_field_width: 8<br/>data_beat_multiplier: 2<br/>data_beat_width: 39<br/>min_data_beat_width_F: 19<br/>min_data_beat_width_C: 1<br/>min_data_width: 16<br/>number_data_beats: 16<br/>null bits to total bits: 0.5957943925233645<br/>data bits to beat bits: 0.3644859813084112<br/>Bus width: 70<br/>max_beats: 16<br/>header_width: 28<br/>max_header_field_width: 6<br/>data_beat_multiplier: 2<br/>data_beat_width: 42<br/>min_data_beat_width_F: 19<br/>min_data_beat_width_C: 4<br/>min_data_width: 16<br/>number_data_beats: 16<br/>null bits to total bits: 0.375<br/>data bits to beat bits: 0.6</pre></div><pre><span style="font-family: Arial , sans-serif;">This creates a bunch of JSON files all prepended with yellow_ and it creates two link packet def whose object names are con_req and con_resp and sticks them in director cpr:</span></pre><pre>[jcodd@mondavi Ncore_config]$ ls con_*<br/>con_apb.json con_atui_axi.json con_axi.json con_req_atp.json con_req_basePkt.json con_req_sw.json con_resp_atp.json con_resp_basePkt.json con_resp_sw.json<br/>[jcodd@mondavi Ncore_config]$ ls cpr<br/>con_req.packet.cpr con_resp.packet.cpr</pre><p>There's a sh script called run_fabric.sh that will do a TACHL compile:</p><pre>./run_config $1 $2 $3<br/>  $1 = JSON file to build<br/>  $2 = top TACHL file for $1<br/>  $3 = output directory to dump verilog into</pre><p>For top gen_wrapper:</p><pre class="wiki-content">[jcodd@mondavi Ncore_config]$ ./run_config con_config.json gen_wrapper.tachl config</pre><p>Once you have the TACHL compile working, it's time to run verilator and clean up you errors:</p><pre>[jcodd@mondavi config]$ verilator --lint-only gen_wrapper.v -I. --error-limit 0 -Wall -Wno-UNUSED</pre><p>And after you've got a clean verilator run, it's time to fire up vsim and do a compile:</p><pre>[jcodd@mondavi config]$ vsim &amp;</pre><p>From within vim:</p><pre>vlog -reportprogress 300 -work work *.v<br/>vopt +acc dut -o dut_opt<br/>vsim dut_opt</pre><p> Fix any errors you run into during these step.</p><p> </p>