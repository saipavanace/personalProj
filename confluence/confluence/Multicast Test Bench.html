<h1 id="MulticastTestBench-MulticastBenchAXI:">Multicast Bench AXI:</h1><h2 id="MulticastTestBench-Instructions:">Instructions:</h2><p>The topology is shown below:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/16155921/multicast_bench.svg?api=v2"></span></p><p>Create an area:</p><p style="margin-left: 30.0px;"><a class="external-link" href="https://confluence.arteris.com/pages/viewpage.action?pageId=9111861" rel="nofollow">One for All Simulation - Regression Tool - &quot;runsim&quot;</a></p><p>Goto Firewall Generator area:</p><p style="margin-left: 30.0px;">cd $WORK_TOP/hw/dv/tb/top/Multicast</p><p>Run the script called create_multi:</p><p style="margin-left: 30.0px;">./create_multi_biPath.js -c config_biPath.json</p><p>To get usage, type the command without options:</p><pre>[jcodd@cline Multicast]$ ./create_multi_biPath.js ERROR - /scratch3/jcodd/TACHL/regress/hw/dv/tb/top/Multicast/create_multi_biPath.js: Missing required options.<br/>/scratch3/jcodd/TACHL/regress/hw/dv/tb/top/Multicast/create_multi_biPath.js Usage -c cfgFile_path &lt;-h&gt;<br/> cfgFile_path: Required. Path to config file.<br/> -h: Optional. Prints out this message</pre><pre>config file JSON format:<br/> {<br/> &quot;axiParams&quot;: &quot;file_path&quot;, // path to AXI param file<br/> &quot;apbParams&quot;: &quot;file_path&quot;, // path to APB param file<br/> &quot;offsetFile&quot;: &quot;file_path&quot;, // path to address offset file<br/> &quot;name&quot;: &quot;name&quot;, // Name to prepend on all generated crud.<br/> &quot;numVc&quot;: integer, // Number of VCs.<br/> &quot;numPri&quot;: integer, // Number of priorities<br/> &quot;wData&quot;: integer, // Width of data in bytes on ATP links<br/> &quot;arbType&quot;: &quot;arb_rr1&quot;, // arb type to use everywhere.<br/> &quot;pktStyle&quot;: string // packet type, parallel or serial.<br/> &quot;assertOn&quot;: boolean, // True = Turn on asserts<br/> &quot;pktSize&quot;: integer, // Number of beats buffered in mulitcast block<br/> &quot;createCSR&quot;: boolean, // write a CSR object into attribute file<br/> &quot;maskField&quot;: string, // packet field and bits for mask. Ex: H_multi_mask[3:0]<br/> &quot;numOutStanding&quot;: integer // number of outstanding broadcasts supported by context.<br/> }</pre><pre>address offsets JSON format:<br/> [<br/> &quot;32'd0&quot;, string // address offset port 0<br/> &quot;32'd1&quot;, string // address offset port 1<br/> &quot;32'd2&quot;: string // address offset port 2<br/> ]</pre><div><p>Run the script to generate the verilog called run_multi:</p><p style="margin-left: 30.0px;">./run_multi multi_top.json gen_wrapper.tachl multi</p><p>Goto rtl directory and run verilator</p><p style="margin-left: 30.0px;">cd multi<br/>verilator --lint-only gen_wrapper.v -I. --error-limit 0 -Wall -Wno-UNUSED</p><p>Once you have ventilator clean, start of vsim</p><p style="margin-left: 30.0px;">vsim&amp;</p><p>In vsim type the following commands:</p><p style="margin-left: 30.0px;">vlog -reportprogress 300 -work work /home/jcodd/work/regress/hw/dv/tb/top/firewall/*.v</p><p style="margin-left: 30.0px;">vopt +acc gen_wrapper -o gen_wrap_opt</p><p style="margin-left: 30.0px;">vsim gen_wrap_opt</p><p> </p><h1 id="MulticastTestBench-OLDInstructions:">OLD Instructions:</h1><p>Create an area:</p><p style="margin-left: 30.0px;"><a class="external-link" href="https://confluence.arteris.com/pages/viewpage.action?pageId=9111861" rel="nofollow">One for All Simulation - Regression Tool - &quot;runsim&quot;</a></p><p>Goto Firewall Generator area:</p><p style="margin-left: 30.0px;">cd $WORK_TOP/hw/dv/tb/top/Multicast</p><p>Run the script called create_multi:</p><p style="margin-left: 30.0px;">./create_multi.js -c config.json</p><p>To get usage, type the command without options:</p><pre>[jcodd@mondavi Multicast]$ ./create_multi.js <br/>ERROR - /home/jcodd/work/regress/hw/dv/tb/top/Multicast/create_multi.js: Missing required options.<br/>/home/jcodd/work/regress/hw/dv/tb/top/Multicast/create_multi.js Usage -c cfgFile_path &lt;-h&gt;<br/>    cfgFile_path: Required. Path to config file.<br/>    -h: Optional. Prints out this message</pre><pre>    config file JSON format:<br/>        {<br/>         &quot;offsetFile&quot; : &quot;file_path&quot;, // path to address offset file<br/>         &quot;name&quot; : &quot;name&quot;, // Name to prepend on all generated crud.<br/>         &quot;numVc&quot; : integer, // Number of VCs.<br/>         &quot;numPri&quot; : integer, // Number of priorities<br/>         &quot;wData&quot; : integer, // Width of data in bytes on ATP links<br/>         &quot;arbType&quot; : &quot;arb_rr1&quot;, // arb type to use everywhere.<br/>         &quot;pktStyle&quot; : &quot;parallel or serial&quot; // packet type to use everywhere.<br/>        }</pre><pre>address offsets JSON format:<br/>    [<br/>     &quot;32'd0&quot;, string // address offset port 0<br/>     &quot;32'd1&quot;, string // address offset port 1<br/>     &quot;32'd2&quot;: string // address offset port 2<br/>    ]</pre><p>Run the script to generate the verilog called run_multi:</p><p style="margin-left: 30.0px;">./run_multi multi_atp_network.json gen_wrapper.tachl fire</p><p>Goto rtl directory and run verilator</p><p style="margin-left: 30.0px;">cd fire<br/>verilator --lint-only gen_wrapper.v -I. --error-limit 0 -Wall -Wno-UNUSED</p><p>Once you have ventilator clean, start of vsim</p><p style="margin-left: 30.0px;">vsim&amp;</p><p>In vsim type the following commands:</p><p style="margin-left: 30.0px;">vlog -reportprogress 300 -work work /home/jcodd/work/regress/hw/dv/tb/top/firewall/*.v</p><p style="margin-left: 30.0px;">vopt +acc dut -o dut_opt</p><p style="margin-left: 30.0px;">vsim dut_opt</p><p>Add the signals you want to observe and the</p><p style="margin-left: 30.0px;">run 1000</p></div>