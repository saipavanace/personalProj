<p><style>[data-colorid=lwe4281nss]{color:#ff5630} html[data-color-mode=dark] [data-colorid=lwe4281nss]{color:#cf2600}</style>#1.  Populate and create your own workarea. </p><p><span data-colorid="lwe4281nss">NOTE: Currently we are seeing an issue where tool optimizations are providing incorrect expression coverage. So we have added a VOPT parameter that needs to be passed through runsim in order to provide accurate expression coverage numbers. &ldquo;+acc=n&rdquo; is what needs to be passed through.</span></p><p>#2.  Kickoff coverage and Formal&rsquo;s covercheck from the runsim command line: </p><p>This command will do two steps. </p><ol start="1"><li><p>Run all tests with the label &lsquo;regr_cov&rsquo; for &lt;num&gt; iterations and merge their usdb databases together. </p></li><li><p>Run Formal &lsquo;covercheck&rsquo; tool for 45 minutes and merge/apply the exclusions to create one merged usdb file. [-cx &lt;num&gt; == runtime in minutes]</p></li></ol><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">runsim -e &lt;block_name&gt; -c &lt;config_name&gt; -l regr_cov -v UVM_NONE -i &lt;num&gt; -vo &quot;+acc=n&quot; -g -c_cov -f_cov -cx 45</pre>
</div></div><p>Final exclusions for covercheck tool running for 45 mins will be located at: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">$WORK_TOP/regression/&lt;timestamp&gt;/debug/&lt;block_name&gt;/&lt;config_name&gt;/coverage/merged_&lt;config_name&gt;_exclusion.do</pre>
</div></div><p>Final merged USDB file with regression results and covercheck exclusions for 45 mins will be located at: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">$WORK_TOP/regression/&lt;timestamp&gt;/debug/&lt;block_name&gt;/&lt;config_name&gt;/coverage/merged_&lt;block_name&gt;_&lt;config_name&gt;.usdb</pre>
</div></div><p /><p>DMI example: (runs 10 iterations of regression tests &amp; covercheck for 45mins)</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">runsim -e dmi -c config8 -l regr_cov -v UVM_NONE -i 10 -vo &quot;+acc=n&quot; -g -c_cov -f_cov -cx 45
Resulting files located at:
$WORK_TOP/regression/&lt;timestamp&gt;/debug/dmi/config8/coverage/merged_config8_exclusion.do
$WORK_TOP/regression/&lt;timestamp&gt;/debug/dmi/config8/coverage/merged_dmi_config8.usdb</pre>
</div></div><p /><p>#3.  Now you must run the &lsquo;find_pat&rsquo; script in order to obtain a valid RTL exclusion dofile based on RTL json waiver files. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">node $WORK_TOP/../hw-lib/js/find_pat.js -i $WORK_TOP/regression/&lt;timestamp&gt;/debug/dmi/config8/rtl -p $WORK_TOP/rtl/dmi/exclusions/dmi_config8_waiver.json -o $WORK_TOP/rtl/dmi/exclusions/dmi_config8_waiver.do -tp /tb_top/dut -tb dmi_a</pre>
</div></div><p /><p>#4.  Apply the generated RTL dofile generated in Step 3 above to the merged USDB file generated in Step 2 &amp; create html reports.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">vsim -c -viewcov $WORK_TOP/regression/&lt;timestamp&gt;/debug/dmi/config8/coverage/merged_dmi_config8.usdb -do 'do rtl/dmi/exclusions/dmi_config8_waiver.do; coverage save merged_config8_with_exclusions_45mins_rtl.ucdb; quit -f'

vcover report -html -annotate -details -assert -cvg -directive -code scef -output ~/public_html/dmiCodeCov/config8/html_dir merged_config8_with_exclusions_45mins_rtl.ucdb
</pre>
</div></div><p /><p>The following link provides more information on using runsim for code coverage &amp; provides examples to run some of the code coverage commands directly via node commands. </p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16159829/Runsim+--+Code+Coverage+Functional+Coverage+Formal+Exclusions" data-linked-resource-id="16159829" data-linked-resource-version="6" data-linked-resource-type="page">Runsim -- Code Coverage, Functional Coverage &amp; Formal Exclusions</a> </p>