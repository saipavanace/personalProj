<p> </p><ol><li>How do I get files sent by Synopsys through FTP ?<ol><li><p>Please use the following steps to receive files from Synopsys: </p><ol><li><p>ftp <a class="external-link" href="http://ftp-na.synopsys.com" rel="nofollow">ftp-na.synopsys.com</a> . Please note ftp is installed on chandon</p></li><li><p>Customer Solvnet username and password should be used </p></li><li>binary</li><li><p>cd /pub/outgoing directory</p></li><li><p>get &quot;Filename provided by Synopsys&quot;</p></li><li><p>gpg --batch --yes --passphrase 'passphrase' -o 'output.tar.gz' --decrypt 'input.gpg' . Command used to decrypt the file</p></li><li>tar -xzvf &quot;Your filename &quot;<br/><br/></li></ol></li></ol></li><li>How do I setup my PA environment and debug failures ?<ol><li>Source pctenv.sh scripts<ol><li>The script is checked-in as part of the angelo_repo/scripts folder</li></ol></li><li>Create a folder ~/snps_bl/ and copy the ARTERIS_NCORE_BL folder to this directory.</li></ol><ol><li style="list-style-type: none;background-image: none;"><ol><li>Pctenv script will setup the CWR_ARTERIS_NCORE_BL path to this folder.</li><li>If this is the first time you are running this setup please also setup CWR_ARTERIS_NCORE_BL variable in the ~/workarea/cwr.lib file.</li><li>ARTERIS_NCORE_BL is the library folder that will be provided by Synopsys and every time we get a new release we should replace this folder.</li></ol></li><li>Create a folder ~/work/deploy and copy the pa folder to this directory</li></ol><ol><li style="list-style-type: none;background-image: none;"><ol><li>PA folder has all the header files and the library .so file</li></ol></li><li>Setup CONDUCTOR_HOME to folder where you copied the design folder.</li><li>Once the setup is ready run the following command</li></ol><ol><li style="list-style-type: none;background-image: none;"><ol><li>Pct</li><li>Create a new project</li><li>Please note the pct command should be called from the folder that has the Design folder.</li></ol></li><li>Once the design is brought up go to   </li></ol><ol><li style="list-style-type: none;background-image: none;"><ol><li>External Definition -&gt;  Arteris -&gt; ARTERIS_NCORE_BL</li><li>Create BL framework by clicking the bus symbol from the GUI</li><li>Right Click BL design and go to  BL WIZARD -&gt; Complete with generic component</li><li>Go to the BL setting option and generate the design</li><li>Once the design is compiled and build open the design in VP explorer</li></ol></li><li>To connect VP explorer to eclipse</li></ol><ol><li style="list-style-type: none;background-image: none;"><ol><li>Source scripts/eclipse.sh</li><li>Start the simulation from VP explorer. Simulation will break at initial crunch.</li><li>Go to eclipse and from the GUI attach the vpx id to eclipse. </li></ol></li></ol></li><li>How do I generate STL file from RTL vcd trace ?<ol><li>To generate STL file from VCD we use a utility provided by Synopsys in their GFRBM IP. </li><li>vcd2stl_converter utility is located at /engr/dev/tools/synopsys/PA/M-2017.06/SLS/linux/IP/GFRBM/SystemC/bin</li><li>Sample Command to generate STL file using this utility for NCBU<ol><li><p>./vcd2stl_converter --cwr_nosession --printIdleCmds /home/muffadal/work/angelo_repo/angelo/verif/sys/tests/stl_config/axi_config_ncb.csv /home/muffadal/work/rel_v2x_branch/hw/debug/psys/delivery15/run/concerto_inhouse_ace_test/ncbu.vcd</p></li></ol></li><li>Sample Command to generate STL file using this utility for AIU <ol><li><p>./vcd2stl_converter --cwr_nosession --printIdleCmds /home/muffadal/work/angelo_repo/angelo/verif/sys/tests/stl_config/axi_config_aiu.csv /home/muffadal/work/rel_v2x_branch/hw/debug/psys/delivery15/run/concerto_inhouse_ace_test/aiu.vcd</p></li></ol></li></ol></li><li>How do I generate RTL waveforms so I can compare it with Perf Model ?<ol><li>Checkout NCore v2.X using the below command :<ol><li><p>/engr/dev/tools/script/setup_hw_branch -h release/v2.X</p></li></ol></li><li>Cd workspace/hw<ol><li><p> Set CONCERTO_TOP variable to point to your workspace path</p></li><li><p>For eg : Setenv CONCERTO_TOP /home/muffadal/work/hw</p></li></ol></li><li>To generate RTL from the APF use the following command:<ol><li><p>node $CONCERTO_TOP/dv/scripts/rsim.js -e psys -q -a -m -c -r -d FULL_SYS_TB,INHOUSE_ACE_BFM,PSEUDO_SYS_TB,SFI_DELAY_DISABLE,INHOUSE_OCP_VIP -n fsys1Config_new -F /home/muffadal/work/angelo_repo/angelo/verif/sys/design_1x1_bl/fsys_config1.apf</p></li></ol></li><li>To Simulate the RTL and run traffic :<ol><li><p>node /home/muffadal/work/rel_v2x_branch/hw/dv/scripts/rsim.js -e psys -q -t concerto_inhouse_ace_test -n delivery15 -p +aiu_scb_en=1,+dce_scb_en=1,+dmi_scb_en=    0,+dirm_scb_en=1,+UVM_MAX_QUIT_COUNT=1,+UVM_VERBOSITY=UVM_NONE,+k_timeout=5000000,+en_cpp_checker,+force_reset_values=1,+focused_rd_test,+ntb_random_seed=29224    3,+en_dump,+inject_random_csr_seq=0,+aiu0_k_num_read_req=0,+aiu0_k_num_write_req=0,+aiu1_k_num_read_req=1,+aiu1_k_num_write_req=0,+no_bfm_delays,+en_dump</p></li><li><p>Inorder to control the number of read/write from AIU and NCBU you can change the knobs provided in step5 i.e k_num_read_req</p></li></ol></li></ol></li><li>How do I run NCB testbench ?<ol><li>NCB has a list of test that can be used to qualify the functionality of the block.  The testbench is self contained and doesn't need any SystemC includes.  Since our source code has SystemC in some of the common headers the testbench needs some massaging to make it work in the cmake build flow. I am documenting the steps here <ol><li>ENABLE_TB option in angelo/CMakeLists.txt  line 65</li><li>Since C++ is only enabled on 4.8.5 gcc try to compile the code on gr6-3 </li><li>We need to source Synopsys environment variables to set all environment variables needed to run Synopsys libraries with our code. However, this will also point our CMAKE_CXX_COMPILER to the Synopsys gcc version which 5.2.0.</li><li><p>Comment line 5 in angelo/CMakeLists.txt. To ensure that we use the gcc on our machine, use the following line instead of Line 5 in angelo/CMakeLists.txt: set(CMAKE_CXX_COMPILER /usr/bin/g++);</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: diff; gutter: false; theme: Emacs" data-theme="Emacs">Here is an example of change in CMakeLists.txt 



git diff CMakeLists.txt
diff --git a/CMakeLists.txt b/CMakeLists.txt
index d43901f..8ca583a 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -2,7 +2,7 @@
 ## Copyright 2017 ArterisIP                                                   ##
 ## ========================================================================== ##

-set(CMAKE_CXX_COMPILER $ENV{SNPS_VP_HOME}/common/bin/g++)
+#set(CMAKE_CXX_COMPILER $ENV{SNPS_VP_HOME}/common/bin/g++)
 set(CMAKE_POSITION_INDEPENDENT_CODE ON)

 project(angelo)
@@ -62,7 +62,7 @@ add_subdirectory(third_party)

 add_subdirectory(pa)

-option(ENABLE_TB &quot;Enable Verif for building TB&quot; OFF)
+option(ENABLE_TB &quot;Enable Verif for building TB&quot; ON)
 if(ENABLE_TB)
   add_subdirectory(verif)
 endif()</pre>
</div></div></li><li><p>Remove all calls to AngeloConfigManger in ncbu.cpp file and set the value to 0. Note: Calls to AngeloConfigManager are made for methods that need computation of IDs that are generated based on memory map in CMIs and DCE. These ID values are hard coded to 0 to remove dependencies on other NCore units.  </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: diff; gutter: false; theme: Emacs" data-theme="Emacs">Here is a change in ncbu.cpp


git diff pa/ncb/ncbu.cpp
diff --git a/pa/ncb/ncbu.cpp b/pa/ncb/ncbu.cpp
index a9157cf..ae21ab6 100644
--- a/pa/ncb/ncbu.cpp
+++ b/pa/ncb/ncbu.cpp
@@ -407,8 +407,9 @@ bool ncbu::process_sfi_slv_req(){
                     m_sfi_dtwreq_pkt.set_sfi_length(63); 

                     m_sfi_dtwreq_pkt.set_sfi_slvid(
-                        common::AngeloConfigManager::addr_to_dmi_slvid(
-                        m_ott[ott_id].sfi_address)
+                        //common::AngeloConfigManager::addr_to_dmi_slvid(
+                        //m_ott[ott_id].sfi_address)
+                        0
                     ); 
                     const UI32_t dtw_idx = m_sfi_pool-&gt;allocate_one();
                     (*m_sfi_pool)[dtw_idx] = m_sfi_dtwreq_pkt;
@@ -427,8 +428,9 @@ bool ncbu::process_sfi_slv_req(){
                     m_dtw_pkt.set_msg_type(Concerto_msg::DtwDataDty); 

                     m_dtw_pkt.set_sfi_slvid(
-                        common::AngeloConfigManager::addr_to_dmi_slvid(
-                        m_ott[ott_id].sfi_address)
+                        //common::AngeloConfigManager::addr_to_dmi_slvid(
+                        //m_ott[ott_id].sfi_address)
+                        0
                     ); 

                     m_dtw_pkt.set_ext_payload(
@@ -555,8 +557,9 @@ bool ncbu::process_sfi_slv_req(){
                     }
                     m_sfi_dtwreq_pkt.set_sfi_length(63); 
                     m_sfi_dtwreq_pkt.set_sfi_slvid(
-                        common::AngeloConfigManager::addr_to_dmi_slvid(
-                        m_ott[ott_id].sfi_address)
+                        //common::AngeloConfigManager::addr_to_dmi_slvid(
+                        //m_ott[ott_id].sfi_address)
+                        0
                     ); 

                     m_sfi_dtwreq_pkt.set_predecessor_id(
@@ -792,8 +795,8 @@ void ncbu::setup_sfi_cmd_pkt(const Axi_phit&amp; axi_pkt,Sfi_phit&amp; sfi_pkt,UI32_t id
         sfi_pkt.set_aiu_transid(id);
         sfi_pkt.set_sfi_transid(id);

-        const common::id_t dce_slvid =
-        common::AngeloConfigManager::addr_to_dce_slvid(axi_pkt.get_axaddr());
+        const common::id_t dce_slvid = 1;
+        //common::AngeloConfigManager::addr_to_dce_slvid(axi_pkt.get_axaddr());
         sfi_pkt.set_sfi_slvid(dce_slvid);
         sfi_pkt.set_predecessor_id(axi_pkt.get_predecessor_id());
     }else if(is_axi_wrreq(axi_pkt)){
@@ -826,8 +829,8 @@ void ncbu::setup_sfi_cmd_pkt(const Axi_phit&amp; axi_pkt,Sfi_phit&amp; sfi_pkt,UI32_t id
         sfi_pkt.set_sfi_transid(id);


-        const common::id_t dce_slvid =
-        common::AngeloConfigManager::addr_to_dce_slvid(axi_pkt.get_axaddr());
+        const common::id_t dce_slvid = 1;
+        //common::AngeloConfigManager::addr_to_dce_slvid(axi_pkt.get_axaddr());
         sfi_pkt.set_sfi_slvid(dce_slvid);
         sfi_pkt.set_predecessor_id(axi_pkt.get_predecessor_id());
     }</pre>
</div></div></li><li><p>Remove #include &lt;systemc&gt; and sc_core::sc_time_stamp() from NCoreCommon.hh</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Emacs" data-theme="Emacs">Here is a change in NCoreCommon.hh


git diff pa/NCoreCommon.hh
diff --git a/pa/NCoreCommon.hh b/pa/NCoreCommon.hh
index ca06176..537f8f8 100644
--- a/pa/NCoreCommon.hh
+++ b/pa/NCoreCommon.hh
@@ -8,7 +8,7 @@
 #include &lt;iomanip&gt;
 #include &lt;sstream&gt;
 #include &lt;vector&gt;
-#include &lt;systemc&gt;
+//#include &lt;systemc&gt;
 #include &lt;cassert&gt;
 #include &quot;eqml/eqml.hpp&quot;

@@ -309,7 +309,7 @@ struct Log {
     *state_.os
         //&lt;&lt; std::dec
        // &lt;&lt; &quot;[&quot; &lt;&lt; get_timestamp() &lt;&lt; &quot;] &quot;
-       &lt;&lt; &quot;@&quot; &lt;&lt; sc_core::sc_time_stamp() &lt;&lt; &quot; {&quot; &lt;&lt; to_string(l) &lt;&lt; &quot;} &quot; ;
+       &lt;&lt; &quot;@&quot; &lt;&lt; /*sc_core::sc_time_stamp() &lt;&lt;*/ &quot; {&quot; &lt;&lt; to_string(l) &lt;&lt; &quot;} &quot; ;
     common_helper(std::forward&lt;T&gt;(args)...);
   }</pre>
</div></div></li><li><p>Edit the get_timestampe() function in NCoreCommon.cc to return 0. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Emacs" data-theme="Emacs">Here is a change in NCoreCommon.cc
git diff pa/NCoreCommon.cc
diff --git a/pa/NCoreCommon.cc b/pa/NCoreCommon.cc
index 24bbe84..779c7f5 100644
--- a/pa/NCoreCommon.cc
+++ b/pa/NCoreCommon.cc
@@ -24,7 +24,7 @@ std::ostream &amp; operator&lt;&lt;(std::ostream &amp; os, const DceProbes &amp; p) {
 }

 uint64_t get_timestamp() {
-  return sc_core::sc_time_stamp().value();
+  return 0;
 }</pre>
</div></div></li><li>This should bring the testbench alive again <img class="emoticon emoticon-smile" data-emoji-id="1f642" data-emoji-shortname=":slight_smile:" data-emoji-fallback="🙂" src="https://arterisip.atlassian.net/wiki/s/-672721829/6452/d621ad2a33e27b90ca05c475b216bfab745e08a2/_/images/icons/emoticons/smile.png" width="16" height="16" data-emoticon-name="smile" alt="(smile)" /></li><li><p>The build only works on gr6-3. To build the testbench, in Angelo ( as your present working directory): </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Emacs" data-theme="Emacs">cd build
cmake -DCMAKE_BUILD_TYPE=Debug ..
make -j</pre>
</div></div></li><li><p>To run the ncb tests: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Emacs" data-theme="Emacs">cd build/verif/ncb
 
./ncbuEqmlTb

    OR

./ncbuEqmlTb &gt; out.log
 vi out.log</pre>
</div></div></li><li><p>To add more tests, in your angelo/verif/ncb/ncbuEqmlTb.cpp, insert new line in addition to  the following:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: cpp; gutter: false; theme: Emacs" data-theme="Emacs">//Test 7 Rd/Write txn
    testPtr = new SimpleTest{&quot;RdWrTxnTest&quot;,
        &quot;/home/muffadal/work/angelo_repo/angelo/pa/ncb/logs/rd_wr_trace.txt&quot;
    };
    test_vec.push_back(testPtr);</pre>
</div></div></li></ol></li></ol></li></ol><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p>