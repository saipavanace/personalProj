<p>The parameter coverage tool takes in &quot;path_rtl&quot; files which hold parameters and their values. It goes through those files and searches within them for other file paths containing parameter/value pairings.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1150" src="https://arterisip.atlassian.net/wiki/download/attachments/16171437/image2019-12-17%2019:2:58.png?api=v2"></span></p><p>Currently, the tool takes in input files or a directory of files from the &quot;path_rtl&quot; in the runsim testlists.</p><p>It requires an output directory to dump out generated files. </p><p>It takes in a <u>parameter values file</u> which is currently required. This can be a file name that does not actually exist. If it does not exist, the tool can generate it and save it as the provided name.</p><p>It takes in a <u>coverage values file</u> which is currently required. This can be a file name that does not actually exist. If it does not exist, the tool can generate it and save it as the provided name.</p><p>It takes in a <u>parameter coverage file</u> which should be the requested name to save the parameter coverage results in. This file will be dumped in the provided output directory. </p><p>Sample command: parameterCoverage.js -i $WORK_TOP/../rtl/ctl_top/bringup/ctl_top_1x4.json,$WORK_TOP/../rtl/ctl_top/bringup/ctl_top_1x1_split.json,$WORK_TOP/../rtl/ctl_top/bringup/ctl_top_1x4_strip_split.json -o . -p param_values_top_ctl.json -c top_ctl_coverage_reference.json -f parameterCoverage_top_ctl</p><p>Generates:</p><ul><li>excludedParameters.json</li><li>excludedParamsReference.json</li><li>param_values_top_ctl.json</li><li>top_ctl_coverage_reference.json</li><li>parameterCoverage_top_ctl.json</li><li>parameterCoverage.html</li></ul><h2 id="CopyofParameterCoverageTool-ParameterValuesFile"><u>Parameter Values File</u></h2><p>A user can provide an existing <strong>parameter values</strong> JSON file which contains all previously found parameters and their values. This will allow merging parameter coverage between different runs. If the parameter values JSON file does not exist, the tool can generate a new one. The tool goes through the input files and appends found parameters to the file. The format of this file is as follows.</p><p>{</p><p>    &quot;<em>parameter_name</em>&quot; : {</p><p>        &quot;<strong>total</strong>&quot; : {</p><p>            &quot;<strong>values</strong>&quot; : {&quot;<em>sample_value&quot;</em> : <em>num_times_found</em>},</p><p>            &quot;<strong>coverage</strong>&quot; : <strong>&quot;0.0&quot;</strong></p><p>        },</p><p>        &quot;<strong>hierarchies</strong>&quot; : {</p><p>             &quot;<em>route_to_parameter&quot;</em> : {</p><p>                &quot;<strong>values</strong>&quot; : {&quot;<em>sample_value&quot;</em> : <em>num_times_found</em>}, </p><p>                &quot;<strong>coverage</strong>&quot; :<strong> &quot;0.0&quot;</strong></p><p>             }</p><p>        }</p><p>}</p><p>This allows us to track all of the found values associated with the parameter by placing them in the total section. For exact reference of where the parameter value was found, the tool saves the route to the parameter in the hierarchies section. For example, if the input file contains: </p><p>{</p><p>    &quot;interfaces&quot; : {</p><p>         &quot;slaveInterfaces&quot; : [</p><p>             {&quot;<strong>name</strong>&quot; : &quot;a_&quot;}</p><p>         ]</p><p>    }</p><p>}</p><p>The hierarchy/route_to_parameter will be &quot;interfaces.slaveInterfaces.[].<strong>name</strong>&quot; with a value of &quot;a_&quot;.</p><h2 id="CopyofParameterCoverageTool-CoverageValuesReferenceFile"><u>Coverage Values Reference File</u></h2><p>The user can provide a reference JSON file which contains all possible values for a parameter. This file is used to calculate the parameter coverage. If the file does not exist, the tool can generate a file using all found parameters from the parameters value file (above) that was generated. If this is the case, the &quot;total&quot; coverage for all parameters in the run will result in 100%. The format of this file is as follows.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="1" class="confluenceTh">Sample Reference File</th><th colspan="1" class="confluenceTh">Notes</th></tr><tr><td class="confluenceTd"><p>{</p><p>    &quot;<em>parameter1&quot;</em>: {</p><p>        &quot;<strong>allStrs</strong>&quot;: [&quot;<em>val1</em>&quot;, &quot;<em>val2</em>&quot;, &quot;<em>val3</em>&quot;]</p><p>    },</p><p>    &quot;<em>parameter2&quot;</em>: {</p><p>        &quot;<strong>allInts</strong>&quot;: [<em>4</em>, <em>6</em>, <em>8</em>] </p><p>    },</p><p>    &quot;<em>parameter3&quot;</em>: {</p><p>        &quot;<strong>allInts</strong>&quot;: [{<strong>&quot;min&quot;</strong>: <em>4</em>, <strong>&quot;max&quot;</strong>: <em>8</em>}] </p><p>    }, </p><p>    &quot;<em>parameter4&quot;</em>: {</p><p>        &quot;<strong>allInts</strong>&quot;: [{<span><strong>&quot;min&quot;</strong>: <em>4</em>, <strong>&quot;max&quot;</strong>: <em>8</em></span>, &quot;<strong>diff</strong><strong>&quot;</strong>: <em>2</em>}] </p><p>    },</p><p>&quot;<em>parameter5&quot;</em>: {</p><p>        &quot;<strong>allInts</strong>&quot;: [{<strong>&quot;min&quot;</strong>: <em>4</em>, <strong>&quot;max&quot;</strong>: <em>32</em>, &quot;<strong>ratio&quot;</strong>: <em>2</em>}] </p><p>    },</p><p>    &quot;<em>parameter6&quot;</em>: {</p><p>        &quot;<strong>allInts</strong>&quot;: [<em>1</em>, <em>2</em>, <em>3</em>, {<span><strong>&quot;min&quot;</strong>: <em>4</em>, <strong>&quot;max&quot;</strong>: <em>8</em></span>, <strong>&quot;diff&quot;</strong>: <em>2</em>}, <em>25</em>]</p><p>    }</p><p>}</p></td><td class="confluenceTd"><p> </p><p><em>Use </em><em>&quot;<strong>allStrs</strong>&quot; to set all possible <u>string</u> values for a parameter.</em></p><p><em><br/></em></p><p><em><br/></em></p><p><em><em>Use &quot;<strong>allInts</strong>&quot; for all possible <u>integer</u> values available for a parameter.</em></em></p><p><em><em><br/></em></em></p><p><em><em><br/></em></em></p><p><em><em><em>Provide a <strong>{&quot;min&quot; : #, &quot;max&quot;: #} </strong> pairing within curly brackets to specify a range. </em></em></em></p><p><span class="legacy-color-text-red2"><em><em><em>Consists of values: [4, 5, 6, 7, 8]. </em></em></em></span></p><p> </p><p><em><em><em>Provide a <strong>diff </strong>for a min-max pairing as the common difference between integers in the arithmetic sequence.</em></em></em></p><p><span class="legacy-color-text-red2"><em><em><em>Consists of values: [4, 6, 8]</em></em></em></span></p><p><em><em><em><br/></em></em></em></p><p><em><em><em>Provide a <strong>ratio </strong>for a min-max pairing as the common ratio to multiply by in the geometric sequence.</em></em></em></p><p><span class="legacy-color-text-red2"><em><em><em>Consists of values: [4, 8, 16, 32]</em></em></em></span></p><p><em><em><em><br/></em></em></em></p><p><em><em><em><em>You can mix specific values with a range. </em></em></em></em></p><p><span class="legacy-color-text-red2"><em><em><em><em>Consists of values: [1, 2, 3, 4, 6, 8, 25]</em></em></em></em></span></p></td></tr></tbody></table></div><p>*When the tool generates the coverage reference file, it stores all found values in the corresponding &quot;allStrs&quot; or &quot;allInts&quot;.</p><h2 id="CopyofParameterCoverageTool-ParameterCoverageCalculation"><u>Parameter Coverage Calculation</u></h2><p>The tool utilizes both of the above files in order to determine the coverage percent. It goes through the found parameters values file that was generated. For each parameter, it determines the coverage percent for the <em>total</em> values as well as for each separate <em>hierarchies</em> values. The coverage is determined by looking at the unique values found and dividing them by the total possible values. The coverage is collected in the exact format as the Parameters Values File above, but with the correct coverage percent. The resulting coverage is then saved in a parameter coverage JSON file. </p><p>The parameter coverage is <strong>only</strong> applied to parameters present in the Coverage Values Reference File. If there are any found parameters that were not present in the reference file, the tool generates an excludedParameters.json file containing the excluded parameters and their values in the same format as the Parameters Values File. It also generates a reference file for the excluded parameters as excludedParamsReference.json.</p><h2 id="CopyofParameterCoverageTool-DisplayingtheParameterCoverage"><u>Displaying the Parameter Coverage</u></h2><p>Since the tool is a command line tool, it utilizes the npm tool &quot;table&quot; to display the coverage. The coverage is displayed as follows.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="902" src="https://arterisip.atlassian.net/wiki/download/attachments/16171437/image2019-12-17%2018:54:42.png?api=v2"></span></p><p>The tool also generates an html table and saves it as ParameterCoverage.html .</p><p>The html table contains a search bar which does a generic search throughout the table and displays rows containing the input. It also contains a dropdown menu to filter for a certain parameter. The coverage is displayed as follows.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/16171437/image2019-12-19%2017:15:7.png?api=v2"></span></p><p> </p>