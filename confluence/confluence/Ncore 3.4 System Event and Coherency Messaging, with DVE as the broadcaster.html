<p>See</p><p><s>Rev 0.54 <a rel="nofollow">Ncore SysCmd Architecture Specification_06032022.pdf</a></s></p><p>Rev 0.55 Ncore SysCmd Architecture Specification_06082022.pdf <a class="external-link" href="https://confluence.arteris.com/display/ENGR/Arch+Ncore+3.4+Docs?preview=/30510577/42536840/Ncore%20SysCmd%20Architecture%20Specification_06082022.pdf" rel="nofollow">Arch Ncore 3.4 Docs - Engineering - Confluence (arteris.com)</a> </p><p><a class="external-link" href="https://confluence.arteris.com/display/ENGR/Ncore+system+network+connectivity+and+mapping" rel="nofollow">Ncore system network connectivity and mapping - Engineering - Confluence (arteris.com)</a></p><p><br/></p><p>Summary of changes with respect to Ncore 3.2:</p><p>(1)</p><p>Sys.Event Sender and EventIn interface are added to CHI-AIU, ACE-AIU, ACELite-AIU, ACELiteE-AIU for them to send Sys.Event request messages to DVE.</p><p>Sys.Event Broadcaster is added to DVE.</p><p>DVE broadcasts a received Sys.Event message from an AIU to other AIUs that have Sys.Event Receiver.</p><p>DVE will wait till the completion of a broadcast - all requests sent and all responses received - before issuing the Sys.Event response message back to the AIU that sent the Sys.Event request message.</p><p>The input queue of the Sys.Event Broadcaster is sized with a depth of nAiusWithEventSender.</p><p>(2)</p><p>The input queue of the Sys.Event Receiver in an AIU is sized with a depth of nAiuConnectedDces + nAiusWithEventSender - 1; </p><p>(3)</p><p><s>Sys.Event Receiver is removed from AXI-AIU with Proxy Cache.</s></p><p>(4)</p><p>SysCo pins are added to InterfaceACE.interface.cpr unconditionally.</p><p>Currently ACE-AIU, ACELite-AIU, ACELiteE-AIU instantiates InterfaqceACE.interface.cpr.</p><p>The agents connected to these AIUs, if they don't support the SysCo pins, they can tie off the SysCo pins.</p><p><br/></p><p>For Ncore 3.4 release, the legal combinations of the basic RTL building blocks is shown as below:</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 78.1648%;"><colgroup><col style="width: 33.5238%;"/><col style="width: 66.5046%;"/></colgroup><tbody><tr><th class="confluenceTh">Concerto Unit</th><th class="confluenceTh">Legal Combinations</th></tr><tr><td class="confluenceTd">CHI-AIU (DVM capable)</td><td class="confluenceTd"><p>Sys.Coh Sender, <span style="letter-spacing: 0.0px;">Sys.Event Receiver, </span>NEW: Sys.Event Sender</p></td></tr><tr><td class="confluenceTd">ACE-AIU (DVM capable)</td><td class="confluenceTd"><p>Sys.Coh Sender, <span>Sys.Event Receiver, </span>NEW: Sys.Event Sender</p></td></tr><tr><td class="confluenceTd">AXI-AIU with Proxy Cache (not DVM capable)</td><td class="confluenceTd"><p>Sys.Coh Sender<s>, <span>Sys.Event Receiver</span></s></p></td></tr><tr><td colspan="1" class="confluenceTd">AXI-AIU without Proxy Cache (not DVM capable)</td><td colspan="1" class="confluenceTd"><p>none</p></td></tr><tr><td colspan="1" class="confluenceTd">ACELite-AIU (can be DVM capable)</td><td colspan="1" class="confluenceTd"><p>Sys.Coh Sender, NEW: Sys.Event Sender</p></td></tr><tr><td colspan="1" class="confluenceTd">ACELiteE-AIU (can be DVM capable)</td><td colspan="1" class="confluenceTd"><p>Sys.Coh Sender, NEW: Sys.Event Sender</p></td></tr><tr><td colspan="1" class="confluenceTd">DCE</td><td colspan="1" class="confluenceTd">Sys.Coh Receiver + Sys.Event Sender (ExMon event whenever ExclusiveStore passes and resets the monitor)</td></tr><tr><td colspan="1" class="confluenceTd">DVE</td><td colspan="1" class="confluenceTd"><p>Sys.Coh Receiver, NEW: <s>Sys.Coh Broadcaster,</s> Sys.Event Broadcaster</p></td></tr><tr><td colspan="1" class="confluenceTd">DMI</td><td colspan="1" class="confluenceTd">none</td></tr><tr><td colspan="1" class="confluenceTd">DII</td><td colspan="1" class="confluenceTd">none</td></tr></tbody></table></div><p><br/></p><p><br/></p><p><strong>Maestro is expected to provide the following interface objects</strong>:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Concerto Unit</th><th class="confluenceTh">Interface Objects required from Maestro generated JSON file</th></tr><tr><td class="confluenceTd"><p>CHI-AIU</p></td><td class="confluenceTd"><p>Sys.Coh Sender:<s> interfaces.uSysDceIdInt,</s> interfaces.uSysDveIdInt</p><p>Sys.Event Receiver: interface.uEvtOutInt</p><p>NEW: Sys.Event Sender: interface.uEvtInInt</p></td></tr><tr><td colspan="1" class="confluenceTd">ACE-AIU</td><td colspan="1" class="confluenceTd"><p>Sys.Coh Sender: <s>interfaces.uSysDceIdInt,</s> interfaces.uSysDveIdInt</p><p>Sys.Event Receiver: interface.uEvtOutInt</p><p>NEW: Sys.Event Sender: interface.uEvtInInt</p></td></tr><tr><td class="confluenceTd">AXI-AIU with Proxy Cache</td><td class="confluenceTd"><p>Sys.Coh Sender: <s>interfaces.uSysDceIdInt,</s> interfaces.uSysDveIdInt</p><p>Sys.Event Receiver: none</p></td></tr><tr><td colspan="1" class="confluenceTd">AXI-AIU without Proxy Cache</td><td colspan="1" class="confluenceTd">none</td></tr><tr><td colspan="1" class="confluenceTd">ACELite-AIU</td><td colspan="1" class="confluenceTd"><p>SysCoh.Sender: interfaces.uSysDveIdInt</p><p>NEW: Sys.Event Sender: interfaces.uSysDveIdInt</p></td></tr><tr><td colspan="1" class="confluenceTd">ACELiteE-AIU</td><td colspan="1" class="confluenceTd"><p>SysCoh.Sender: interfaces.uSysDveIdInt</p><p>NEW: Sys.Event Sender: interfaces.uSysDveIdInt</p></td></tr><tr><td colspan="1" class="confluenceTd">DCE</td><td colspan="1" class="confluenceTd"><p>Sys.Coh Receiver: interfaces.uSysCaIdInt, interfaces.uSysCaNodeIdInt</p><p>Sys.Event Sender: interfaces.uSysDveIdInt (NOTE: Exmon event is internally generated)</p></td></tr><tr><td colspan="1" class="confluenceTd">DVE</td><td colspan="1" class="confluenceTd"><p>Sys.Coh Receiver: interfaces.uSysIdInt, interfaces.uSysNodeIdInt : DVM Agents</p><p><s>NEW: Sys.Coh Broadcaster: interfaces.uSysDceIdInt,</s></p><p><s>                     interfaces.uSysCaIdInt, interfaces.uSysCaNodeIdInt : Caching Agents</s></p><p>NEW: Sys.Event Broadcaster: interfaces.uSysAiuIdInt</p></td></tr><tr><td colspan="1" class="confluenceTd">DMI</td><td colspan="1" class="confluenceTd">none</td></tr><tr><td colspan="1" class="confluenceTd">DII</td><td colspan="1" class="confluenceTd">none</td></tr></tbody></table></div><p class="auto-cursor-target">(1)</p><p class="auto-cursor-target">When the DVE Broadcaster receives a message and broadcasts it to the targets, DVE only modifies the Target ID field, without changing the Initiator ID field.</p><p class="auto-cursor-target">This allows the receiver of the message knows the original sender of the message.<s> For example, DCE needs to know this to implement the Snoop Enable bits.</s></p><p class="auto-cursor-target">(2)</p><p class="auto-cursor-target"><s>The targets for the DVE Sys.Coh Broadcaster are all the DCEs in the system.</s></p><p class="auto-cursor-target">(3)</p><p class="auto-cursor-target">The targets for the DVE Sys.Evt Broadcaster are all the AIUs in the system that have Sys.Evt Receiver.</p><p class="auto-cursor-target">(4)</p><p class="auto-cursor-target"><s>DVE is not supposed to forward the Sys.Coh messages (Attach/Detach) from an AIU that is DVM agent only (not caching agent) to DCE, so DVE needs to know if the sender AIU is a caching agent or not.  Only Sys.Coh messages (Attach/Detach) from a caching agent AIU can be broadcasted to DCEs.</s></p><p class="auto-cursor-target">(5)</p><p class="auto-cursor-target">DVE Broadcaster must exclude the sender of the received message from the target list.</p><p class="auto-cursor-target">(6)</p><p class="auto-cursor-target"><s>When DVE receives a Sys.Coh messages (Attach/Detach) from a caching agent AIU, DVE blindly broadcasts it to all DCEs, irregardless of the caching agent AIU is connected to the DCEs or not.</s></p><p class="auto-cursor-target"><s>So the Snoop Enable register in a DCE would set the Snoop Enable bit for the caching agent AIU that is unconnected.</s></p><p class="auto-cursor-target"><s>So DCE must ignore the Snoop Enable bit for the unconnected caching agent AIU.</s></p><p class="auto-cursor-target"><s>DCE must always check the connectivity static tie-offs to check if a caching agent AIU is connected or not.</s></p><p class="auto-cursor-target"><s>DCE must not send SNPreq to an unconntected caching agent.</s></p><p class="auto-cursor-target">(7)</p><p class="auto-cursor-target">Khaleel confirms the Event Receiver is removed from AXI with Proxy Cache.</p><p class="auto-cursor-target">(8)</p><p class="auto-cursor-target">Khaleel confirms there is no need to differentiate between ACE5 and ACE (NOTE: only ACE5 supports SysCo pins) because ARM DSU provides the SysCo pins.</p><p class="auto-cursor-target">Khaleel confirms our customer can tie off the SysCo pins if their ACE interface is an ACE4 that does not support SysCo pins.</p><p class="auto-cursor-target">Khaleel confirms we can simply add SysCo pins to our hw-ncr/cpr/cpr/interface/InterfaceACE.interface.cpr without any ACE5 mode detection.</p><p class="auto-cursor-target">NOTE: Our existing CPR infrastructure does not have any encoding to indicate ACE5 for native interface type.</p>