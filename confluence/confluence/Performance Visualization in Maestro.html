<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Also see: <a class="createlink" href="/wiki/pages/createpage.action?spaceKey=ENGR&amp;title=Ncore3%20-%20Performance%20Modeling%20Documentation%20-%20Maestro%20Visualization&amp;linkCreation=true&amp;fromPageId=26345900">Ncore3 - Performance Modeling Documentation - Maestro Visualization</a> .</p></div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Not all machines on the network are configured to run Maestro. You can try for example:</p><p><code>ssh -X &lt;user&gt;@markham.arteris.com</code></p></div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>As the Performance Visualization feature still needs review before being shared with customers, you will need a Maestro debug license to access some of the steps below. This can be achieved with:</p><p><code>module load license/arteris</code></p><p>before launching Maestro.</p></div></div><p>To launch Maestro (bleeding edge build):</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">/engr/dev/releases/maestro/build/master/maestro-client/ci_release/bleeding_edge/bin/maestro &amp;</pre>
</div></div><p>Then, open a design. For example, you can download locally the test from </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">http://gitlab.arteris.com/maestro/maestro/-/tree/Ncore3.4/develop/tests/cases/test_tcl/demo_design_archsim</pre>
</div></div><p>In Maestro, <code>File -&gt; Open File</code> and point the dialog to the <code>demo_design_archsim.tcl</code> script just downloaded.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This script contains an <code>exit</code> directive at the end, which will close Maestro immediately after the script is sourced. For the purposed of this walkthrough, it is recommended to remove this line from the script. Alternatively, it is of course possible to relaunch Maestro afterwards and reopen the project from .mpf.</p></div></div><p>Then look for the &quot;Save and Execute&quot; button to tell Maestro to build the design according to the script.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/26345900/image-20220706-175438.png?api=v2"></span><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>As an alternative, it is also possible to open the .mpf of a pre-built project, and then use <code>Flow -&gt; Generate RTL</code> or proceed with the Flow Navigator or the Tasks widgt all the way until the Export phase.</p></div></div><p>The last instructions in the script direct Maestro to generate collaterals, so the file <code>demo_design_archsim/output/models/standalone/TLM/top.level.rtl.csr.json</code> will be left on disk by Maestro. This file contains a description of the design in JSON format, usable as an input to archsim, and is almost identical to the one that drives RTL generation from TACHL.</p><p>archsim takes as an input a <code>.scn</code> file, which is a text file with the path to this JSON and a few more configuration files, chiefly one or more stimulus <code>.stl</code> files. The <code>demo_design_archsim</code> test comes with a really simple stimulus file, unrepresentative of actual traffic, purely for pipecleaning.</p><p>Now to launch archsim:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">/engr/prerelease/ncore3_arch_sim/latest/bin/ncore3_archsim -s scenario.scn --final-stats --json-stats</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The <code>--final-stats</code> switch tells archsim to gather metrics at the end of the default simulation duration, and could be replaced with other directives to gather metrics over any desired time window.</p><p>The <code>--json-stats</code> switch tells archsim to dump the <code>stats.json</code> file that we need.</p></div></div><p>At the end of the execution of archsim, a <code>stats.json</code> file will be left on disk. This file, also in JSON format, contains the metrics that archsim has measured. This file can be opened in Maestro again by clicking the “Load Performance Data” button, and then choosing <code>stats.json</code> in the dialog that comes up:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/26345900/image-20220707-081026.png?api=v2"></span><p>Now, performance data is loaded into Maestro, but it is not visible by default. To see it as an overlay on the Topology Editor, go to any of the main networks of the design (<code>ndn1</code>, <code>ndn2</code> or <code>dn</code> tabs) and click on the “Display Performance” button:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/26345900/image-20220707-082123.png?api=v2"></span><p>This action has the effect of colorizing the topology with a color gradient of green-to-red. The colorization happens for clusters of metrics: “Credits and Buffer Utilization”, “Network Traffic”, “Cache Utilization”, or all of the above simultaneously. The color is picked based on the worst-case metric for the component; a single bottleneck will result in the whole component being shown in red.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Components which have no metric associated, at least for the selected cluster of metrics, will be shown in grey.</p></div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The GUI experience isn’t fully finished, so for some metrics, Maestro may not know yet whether “red” or “green” is appropriate. This is being worked on currently and should be fixed soon. In the meantime, such metrics may be ignored by the colorization algorithm or may yield the wrong color.</p></div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The “Display Performance” button is a toggle; clicking on it again will go back to topology editing mode, etc..</p></div></div><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" width="680" src="https://arterisip.atlassian.net/wiki/download/attachments/26345900/image-20220707-082540.png?api=v2"></span><p>Clicking on any component will open a separate dock, in this case in the bottom right of Maestro, to look in detail at its statistics. The displayed statistic can be changed with the dropdown. Also, hovering on a component will bring up a tooltip with all information about that object.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/26345900/image-20220707-084158.png?api=v2"></span><p>Some metrics are represented not as individual numbers, but as histograms:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/26345900/image-20220707-091237.png?api=v2"></span><p />