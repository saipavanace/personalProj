<h1 id="WidthAdaptersTestPlan-History">History</h1><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"> </th><th class="confluenceTh">Date</th><th class="confluenceTh">Owner</th><th class="confluenceTh">Comment</th></tr><tr><td class="confluenceTd">0.1</td><td class="confluenceTd">23-Feb-2018</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd">Initial version</td></tr><tr><td class="confluenceTd">0.2</td><td class="confluenceTd">02-Mar-2018</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd">Incorporate revisions from Darshan</td></tr><tr><td class="confluenceTd">1.0</td><td class="confluenceTd">05-Mar-2018</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd"><p>Revisions from review</p></td></tr><tr><td colspan="1" class="confluenceTd">1.1</td><td colspan="1" class="confluenceTd">30-Aug-2019</td><td colspan="1" class="confluenceTd">Andrew Brock</td><td colspan="1" class="confluenceTd">Revisions from review</td></tr></tbody></table></div><p style="text-align: left;"> </p><h1 id="WidthAdaptersTestPlan-ReviewHistory">Review History</h1><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"> </th><th class="confluenceTh">Date</th><th class="confluenceTh">Presenter</th><th class="confluenceTh">Attendees</th></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">05-Mar-2018</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd"><a class="confluence-userlink user-mention" data-account-id="624b3798699649006ae98ff8" href="https://arterisip.atlassian.net/wiki/people/624b3798699649006ae98ff8?ref=confluence" target="_blank" data-linked-resource-id="756836" data-linked-resource-version="1" data-linked-resource-type="userinfo" data-base-url="https://arterisip.atlassian.net/wiki">Darshan Alagud</a>, <a class="confluence-userlink user-mention" data-account-id="5ed63c82037d930c16bd8c73" href="https://arterisip.atlassian.net/wiki/people/5ed63c82037d930c16bd8c73?ref=confluence" target="_blank" data-linked-resource-id="327834" data-linked-resource-version="1" data-linked-resource-type="userinfo" data-base-url="https://arterisip.atlassian.net/wiki">Saad Zahid</a>, <a class="confluence-userlink user-mention" data-account-id="624b3704f813eb00692cb18c" href="https://arterisip.atlassian.net/wiki/people/624b3704f813eb00692cb18c?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">Shailendra Aulakh (Deactivated)</a></td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">30-Aug-2018</td><td class="confluenceTd">Andrew Brock</td><td class="confluenceTd"><a class="confluence-userlink user-mention" data-account-id="624b3798699649006ae98ff8" href="https://arterisip.atlassian.net/wiki/people/624b3798699649006ae98ff8?ref=confluence" target="_blank" data-linked-resource-id="756836" data-linked-resource-version="1" data-linked-resource-type="userinfo" data-base-url="https://arterisip.atlassian.net/wiki">Darshan Alagud</a>, <a class="confluence-userlink user-mention" data-account-id="5ed63c82037d930c16bd8c73" href="https://arterisip.atlassian.net/wiki/people/5ed63c82037d930c16bd8c73?ref=confluence" target="_blank" data-linked-resource-id="327834" data-linked-resource-version="1" data-linked-resource-type="userinfo" data-base-url="https://arterisip.atlassian.net/wiki">Saad Zahid</a>, <a class="confluence-userlink user-mention" data-account-id="624b37fc258562006fa692fa" href="https://arterisip.atlassian.net/wiki/people/624b37fc258562006fa692fa?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">John Coddington (Deactivated)</a>, <a class="confluence-userlink user-mention" data-account-id="624b37e8699649006ae9901f" href="https://arterisip.atlassian.net/wiki/people/624b37e8699649006ae9901f?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">Eric Taylor (Deactivated)</a>, <a class="confluence-userlink user-mention" data-account-id="624b38261da0e100713c9b4b" href="https://arterisip.atlassian.net/wiki/people/624b38261da0e100713c9b4b?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">Bill Chandler (Deactivated)</a>, <a class="confluence-userlink user-mention" data-account-id="624b374cad6b7e006aa7d803" href="https://arterisip.atlassian.net/wiki/people/624b374cad6b7e006aa7d803?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">Aniq Shahid (Deactivated)</a>, <a class="confluence-userlink user-mention" data-account-id="624b373df6a26900695fd0fc" href="https://arterisip.atlassian.net/wiki/people/624b373df6a26900695fd0fc?ref=confluence" target="_blank" data-base-url="https://arterisip.atlassian.net/wiki">Syed Shah (Deactivated)</a></td></tr><tr><td class="confluenceTd"> </td><td class="confluenceTd"> </td><td class="confluenceTd"> </td><td class="confluenceTd"> </td></tr></tbody></table></div><p> </p><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759724244277 {padding: 0px;}
div.rbtoc1759724244277 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759724244277 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759724244277'>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>1</span> <a href='#WidthAdaptersTestPlan-History'>History</a></li>
<li><span class='TOCOutline'>2</span> <a href='#WidthAdaptersTestPlan-ReviewHistory'>Review History</a></li>
<li><span class='TOCOutline'>3</span> <a href='#WidthAdaptersTestPlan-Introduction'>Introduction</a></li>
<li><span class='TOCOutline'>4</span> <a href='#WidthAdaptersTestPlan-TestbenchDescription'>Testbench Description</a></li>
<li><span class='TOCOutline'>5</span> <a href='#WidthAdaptersTestPlan-ConfigurationSpace'>Configuration Space</a>
<ul class='toc-indentation'>
<li><span class='TOCOutline'>5.1</span> <a href='#WidthAdaptersTestPlan-HeaderPaddingScenarios'>Header Padding Scenarios</a></li>
<li><span class='TOCOutline'>5.2</span> <a href='#WidthAdaptersTestPlan-CopyScenarios'>Copy Scenarios</a></li>
<li><span class='TOCOutline'>5.3</span> <a href='#WidthAdaptersTestPlan-BufferDepths'>Buffer Depths</a></li>
<li><span class='TOCOutline'>5.4</span> <a href='#WidthAdaptersTestPlan-TestConfigurations'>Test Configurations</a></li>
</ul>
</li>
</ul>
</div></p><h1 id="WidthAdaptersTestPlan-Introduction">Introduction</h1><p>The data width adapter family comprises 8 separate designs with shared elements: both wide-to-narrow and narrow-to-wide versions are possible of adapters both from and to either header parallel or header serial. Because these designs are being implemented separately, they must be verified separately as well, though common elements will exist in their testbenches.</p><h1 id="WidthAdaptersTestPlan-TestbenchDescription">Testbench Description</h1><p>A test driver will be written in Verilog to clock symbolic test packets out of and into registers holding a full packet on each side. These registers will be capable of holding an entire packet at once, allowing an equality comparison between equivalent fields. Note that due to the presence of clone fields this is not a 1:1 comparison. We will need to generate a separate assertion for each field in the output packet.</p><p>Verification of the AWFIFO block (and any other shared blocks) outside the context of the width adapter by LEC comparison to a functional model (and possibly assertions), depending on complexity, was considered. This would have allowed the AWFIFO to be black-boxed in the top-level assertions across the entire block. These top-level assertions will be useless as runtime assertions, because they will rely on the testbench framework, which won't exist at runtime. However, the AWFIFO complexity was sufficiently low to allow it to be whiteboxed.</p><h1 id="WidthAdaptersTestPlan-ConfigurationSpace">Configuration Space</h1><p>The narrower bus will always evenly divide into the wider bus. 8 appears to be the minimum practical bus width, due to header size constraints, so we will use 8 bits for the narrow bus and 16 bits for the wide bus in each of our 8 configurations. In addition to wide-to-narrow and narrow-to-wide configurations, we also test width-preserving parallel-to-serial and serial-to-parallel transformations.</p><p>We also make sure to hit all of the various output header padding and copy scenarios.</p><p>The HP field seems vestigial in the face of the linkHPIn and linkHPOut fields.</p><p>The packet data body will be 1 or 2 phits, with a distribution across parallel and serial modes. This is denoted by 'ONE' or 'TWO' in the table below.</p><h2 id="WidthAdaptersTestPlan-HeaderPaddingScenarios">Header Padding Scenarios</h2><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Scenario</th><th class="confluenceTh">Configuration</th><th colspan="1" class="confluenceTh">Considered</th></tr><tr><td class="confluenceTd">All in one phits, padding</td><td class="confluenceTd">SN2SW</td><td colspan="1" class="confluenceTd">Yes</td></tr><tr><td class="confluenceTd">All in one phits, exact</td><td class="confluenceTd">PN2SW</td><td colspan="1" class="confluenceTd">Yes</td></tr><tr><td class="confluenceTd">Multiple phits, padding</td><td class="confluenceTd">Fixed</td><td colspan="1" class="confluenceTd">No</td></tr><tr><td class="confluenceTd">Multiple phits, exact</td><td class="confluenceTd">Fixed</td><td colspan="1" class="confluenceTd">No</td></tr></tbody></table></div><h2 id="WidthAdaptersTestPlan-CopyScenarios">Copy Scenarios</h2><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Copy Type</th><th class="confluenceTh">Scenario</th></tr><tr><td class="confluenceTd">AND</td><td class="confluenceTd">PN2PW,SN2SW</td></tr><tr><td class="confluenceTd">OR</td><td class="confluenceTd">PN2PW,SN2SW</td></tr><tr><td class="confluenceTd">XOR</td><td class="confluenceTd">PN2PW,SN2PW</td></tr><tr><td colspan="1" class="confluenceTd">First</td><td colspan="1" class="confluenceTd">PN2PW,SN2SW</td></tr><tr><td colspan="1" class="confluenceTd">Last</td><td colspan="1" class="confluenceTd"><p>PN2PW,SN2SW</p></td></tr></tbody></table></div><p>All of these can be tested separately on various copy fields.</p><h2 id="WidthAdaptersTestPlan-BufferDepths">Buffer Depths</h2><p>In narrow-to-wide configurations, the DW adapter can buffer outgoing packets for a programmable period of time, to reduce bubbles. All applicable configurations will need to be cloned in order to have the parameter FIXME varied.</p><h2 id="WidthAdaptersTestPlan-TestConfigurations">Test Configurations</h2><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Field</th><th class="confluenceTh">PW2PN</th><th class="confluenceTh">PN2PW</th><th class="confluenceTh">SW2SN</th><th class="confluenceTh">SN2SW</th><th class="confluenceTh">SW2PN</th><th class="confluenceTh">SN2PW</th><th class="confluenceTh">PW2SN</th><th class="confluenceTh">PN2SW</th><th colspan="1" class="confluenceTh">P2S</th><th colspan="1" class="confluenceTh">S2P</th></tr><tr><td class="confluenceTd">linkWidthIn</td><td class="confluenceTd">16</td><td class="confluenceTd">8</td><td class="confluenceTd">16</td><td class="confluenceTd">8</td><td class="confluenceTd">16</td><td class="confluenceTd">8</td><td class="confluenceTd">32</td><td class="confluenceTd">8</td><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd">8</td></tr><tr><td class="confluenceTd">linkWidthOut</td><td class="confluenceTd">8</td><td class="confluenceTd">32</td><td class="confluenceTd">8</td><td class="confluenceTd">16</td><td class="confluenceTd">8</td><td class="confluenceTd">16</td><td class="confluenceTd">8</td><td class="confluenceTd">16</td><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd">8</td></tr><tr><td class="confluenceTd">linkHPIn</td><td class="confluenceTd">1</td><td class="confluenceTd">1</td><td class="confluenceTd">0</td><td class="confluenceTd">0</td><td class="confluenceTd">0</td><td class="confluenceTd">0</td><td class="confluenceTd">1</td><td class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td></tr><tr><td class="confluenceTd">linkHPOut</td><td class="confluenceTd">1</td><td class="confluenceTd">1</td><td class="confluenceTd">0</td><td class="confluenceTd">0</td><td class="confluenceTd">1</td><td class="confluenceTd">1</td><td class="confluenceTd">0</td><td class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td></tr><tr><td class="confluenceTd">wPktHdrIn</td><td class="confluenceTd">8</td><td class="confluenceTd">8</td><td class="confluenceTd">16</td><td class="confluenceTd">12</td><td class="confluenceTd">8</td><td class="confluenceTd">8</td><td class="confluenceTd">12</td><td class="confluenceTd">16</td><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd">8</td></tr><tr><td class="confluenceTd">wPktHdrOut</td><td class="confluenceTd">8</td><td class="confluenceTd">8</td><td class="confluenceTd">16</td><td class="confluenceTd">12</td><td class="confluenceTd">8</td><td class="confluenceTd">8</td><td class="confluenceTd">12</td><td class="confluenceTd">16</td><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd">8</td></tr><tr><td class="confluenceTd">wPktNDPLen</td><td colspan="10" style="text-align: center;" class="confluenceTd">0</td></tr><tr><td class="confluenceTd">wPktNDP</td><td colspan="10" style="text-align: center;" class="confluenceTd">0</td></tr><tr><td class="confluenceTd">wFieldX_i</td><td class="confluenceTd"><p>TWO</p></td><td class="confluenceTd">ONE</td><td class="confluenceTd">ONE</td><td class="confluenceTd">TWO</td><td class="confluenceTd">ONE</td><td class="confluenceTd">TWO</td><td class="confluenceTd">TWO</td><td class="confluenceTd">ONE</td><td colspan="1" class="confluenceTd">TWO</td><td colspan="1" class="confluenceTd">TWO</td></tr><tr><td class="confluenceTd">MF</td><td class="confluenceTd">N/A</td><td class="confluenceTd">AND</td><td class="confluenceTd">N/A</td><td class="confluenceTd">OR</td><td class="confluenceTd">N/A</td><td class="confluenceTd">XOR</td><td class="confluenceTd">N/A</td><td class="confluenceTd">OR</td><td colspan="1" class="confluenceTd">N/A</td><td colspan="1" class="confluenceTd">N/A</td></tr></tbody></table></div>