<style type='text/css'>/*<![CDATA[*/
div.rbtoc1759725174780 {padding: 0px;}
div.rbtoc1759725174780 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759725174780 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759725174780'>
<ul class='toc-indentation'>
<li><a href='#MaintenanceOperation-Overview'>Overview</a></li>
<li><a href='#MaintenanceOperation-DirectedTestcase'>Directed Testcase</a></li>
<li><a href='#MaintenanceOperation-FunctionalCoverage'>Functional Coverage</a></li>
<li><a href='#MaintenanceOperation-Configs'>Configs</a></li>
</ul>
</div><h3 id="MaintenanceOperation-Overview">Overview</h3><p>Maintenance operations are used to initialize the caching structures and manage them using cache maintenance operations</p><p><strong>Reference Documents</strong></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/208666703/Ncore+3.6+IO-AIU+Micro-Architecture+Specification" rel="nofollow">Ncore+3.6+IO-AIU+Micro-Architecture</a> </p><h3 id="MaintenanceOperation-DirectedTestcase">Directed Testcase</h3><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="7b871c40-a6c4-44d3-a77a-f9efc328b6cb" class="confluenceTable"><colgroup><col style="width: 88.0px;"/><col style="width: 219.0px;"/><col style="width: 97.0px;"/><col style="width: 113.0px;"/><col style="width: 48.0px;"/><col style="width: 54.0px;"/><col style="width: 48.0px;"/><col style="width: 93.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>testcase Name </strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong> Scenario </strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Ref Doc</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Hash Tag</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Priority</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Implemented </strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Status </strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Remarks </strong></p></th></tr><tr><td class="confluenceTd"><p>flush_by_addr</p></td><td class="confluenceTd"><p>sequence:ioaiu_csr_flush_by_addr_seq</p><ul><li><p>wait for cache to be filled up. Pick a random address:(m_addr,m_ns) from the cache_model → m_ncbu_cache_q</p></li><li><p>poll XAIUPCMAR.MntOpActv until it reads 0</p></li><li><p>program XAIUPCMLR0/LR1 registers with the m_addr,m_ns</p></li></ul><p>wr_data (LR0) = m_addr &gt;&gt; offset; <br/><em>[offset = wCacheLineOffset]</em></p><p>wr_data (LR1) = m_addr &gt;&gt; (32+offset)<br/><em>Note - LR1 is only set when (wAddr-wCacheLineOffset) &gt; 32</em></p><ul><li><p>program XAIUPCMCR with OpCode=6 (flush_by_addr)  </p></li></ul><p>wr_data = {9'h0,m_ns,22'h6};</p><ul><li><p>poll XAIUPCMAR.MntOpActv until it reads 0</p></li></ul></td><td rowspan="5" class="confluenceTd"><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/208666703/Ncore+3.6+IO-AIU+Micro-Architecture+Specification" rel="nofollow">IOAIU U-Arch spec [3.6 release]</a></p><p>12.2 Maintenance Operations</p><p /></td><td class="confluenceTd"><p>#Test.IOAIU.MaintOp.FlushByAddr</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p>RTL Bug:</p><p>

    

            



<style>
    .jira-issue {
        padding: 0 0 0 2px;
        line-height: 20px;
    }

    .jira-issue img {
        padding-right: 5px;
    }
    .jira-issue .aui-lozenge {
        line-height: 18px;
        vertical-align: top;
    }

    .jira-issue .icon {
        background-position: left center;
        background-repeat: no-repeat;
        display: inline-block;
        font-size: 0;
        max-height: 16px;
        text-align: left;
        text-indent: -9999em;
        vertical-align: text-bottom;
    }
</style>

    <span class="confluence-jim-macro jira-issue" data-jira-key="CONC-9792"  data-client-id="SINGLE_bfb5209b-5e34-3655-9c0b-93d8d0d4bec5_298745857_624b3807a629c30068a79f50" >
                <a href="https://arterisip.atlassian.net/browse/CONC-9792" class="jira-issue-key"><span class="aui-icon aui-icon-wait issue-placeholder"></span>CONC-9792</a>
                    -
            <span class="summary">Getting issue details...</span>
                                    <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-default issue-placeholder">STATUS</span>
            </span>
 </p></td></tr><tr><td class="confluenceTd"><p>flush_by_addr_range</p></td><td class="confluenceTd"><p>sequence:ioaiu_csr_flush_by_addr_range_seq</p><ul><li><p>wait for cache size to be non-zero.</p></li><li><p>Pick a random address:(m_addr,m_ns) from the cache_model → m_ncbu_cache_q</p></li><li><p>poll XAIUPCMAR.MntOpActv until it reads 0</p></li><li><p>program XAIUPCMLR0/LR1 registers with the m_addr,m_ns</p></li></ul><p>maddr = maddr - (maddr%64)</p><p>wr_data (LR0) = m_addr - (maddr%64);</p><p>wr_data (LR1) = m_addr &gt;&gt; (32)</p><ul><li><p>Calculate Range between 1 to Size of cache such that upper address falls into the memregion boundaries.</p></li><li><p>program XAIUPCMCR with OpCode=7 (flush address range)</p></li></ul><p>wr_data = {9'h0,m_ns,22'h7};</p><ul><li><p>poll XAIUPCMAR.MntOpActv until it reads 0</p></li></ul></td><td class="confluenceTd"><p>#Test.IOAIU.MaintOp.FlushByAddrRange</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>flush_by_index_way</p></td><td class="confluenceTd"><p>sequence:ioaiu_csr_flush_by_index_way_seq</p><ul><li><p>wait for cache size to be non-zero.</p></li><li><p>Pick a random Set &amp; Way:(m_nSets,m_nWays) from the cache_model → m_ncbu_cache_q</p></li><li><p>poll XAIUPCMAR.MntOpActv until it reads 0</p></li><li><p>program XAIUPCMLR0.MntSet with m_nSets</p></li><li><p>program XAIUPCMLR0.MntWay with m_nWays</p></li><li><p>program XAIUPCMCR with OpCode=5 (flush entry at set &amp; way)<br/>wr_data = 'h5;</p></li><li><p>poll XAIUPCMAR.MntOpActv until it reads 0</p></li></ul></td><td class="confluenceTd"><p>#Test.IOAIU.MaintOp.FlushByIndexWay</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>flush_by_index_way_range</p></td><td class="confluenceTd"><p>sequence:ioaiu_csr_flush_by_index_way_range_seq</p><ul><li><p>wait for cache size to be non-zero</p></li><li><p>Pick a random Set &amp; Way:(m_nSets,m_nWays) from the cache_model → m_ncbu_cache_q</p></li><li><p>poll XAIUPCMAR.MntOpActv until it reads 0</p></li><li><p>program XAIUPCMLR0.MntSet with m_nSets</p></li><li><p>program XAIUPCMLR0.MntWay with 0 (As range will be multiple of number of ways, the ways will be set to 0, to flush whole index/set)</p></li><li><p>program XAIUPCMLR0.MntRange with Multiple of  m_nWays.</p></li><li><p>program XAIUPCMCR with OpCode=8 (flush set way range)<br/>wr_data = 'h8;</p></li><li><p>poll XAIUPCMAR.MntOpActv until it reads 0</p></li></ul></td><td class="confluenceTd"><p>#Test.IOAIU.MaintOp.FlushByIndexWayRange</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>flush_all_entries</p></td><td class="confluenceTd"><p>sequence:ioaiu_csr_flush_all_seq</p><ul><li><p>check for IO cache to be not empty.</p></li><li><p>poll XAIUPCMAR.MntOpActv until it reads 0</p></li><li><p>program XAIUPCMCR with OpCode=4 (flush all entries)</p></li><li><p>poll XAIUPCMAR.MntOpActv again for it to assert (1) so that operation is active and then deassert (0)</p></li><li><p>Final check the IO cache is empty (flushed out)</p></li></ul></td><td class="confluenceTd"><p>#Test.IOAIU.MaintOp.FlushAllEntries</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>flush_random_all_type</p></td><td class="confluenceTd"><p>sequence: ioaiu_csr_run_all_type_flush_seq</p><p>circles through all types of maintenance ops sequences</p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>#Test.IOAIU.MaintOp.FlushAllType</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h3 id="MaintenanceOperation-FunctionalCoverage">Functional Coverage</h3><div class="table-wrap"><table data-table-width="1800" data-layout="default" data-local-id="3e62c4f0-c88d-4e48-beca-629018f41d51" class="confluenceTable"><colgroup><col style="width: 126.0px;"/><col style="width: 153.0px;"/><col style="width: 81.0px;"/><col style="width: 70.0px;"/><col style="width: 55.0px;"/><col style="width: 52.0px;"/><col style="width: 88.0px;"/><col style="width: 135.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Scenario</strong></p></th><th class="confluenceTh"><p><strong>Ref Doc</strong></p></th><th class="confluenceTh"><p><strong>Hash Tag</strong></p></th><th class="confluenceTh"><p><strong>Where</strong></p></th><th class="confluenceTh"><p><strong>Priority</strong></p></th><th class="confluenceTh"><p><strong>Implemented</strong></p></th><th class="confluenceTh"><p><strong>Status</strong></p></th><th class="confluenceTh"><p><strong>Remarks</strong></p></th></tr><tr><td class="confluenceTd"><p>Cover all maintenance opcode on<br/>XAIUPCMCR</p></td><td class="confluenceTd"><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/208666703/Ncore+3.6+IO-AIU+Micro-Architecture+Specification" rel="nofollow">IOAIU U-Arch spec [3.6 release]</a></p><p>12.2 Maintenance Operations Table 29</p></td><td class="confluenceTd"><p>#Cover.IOAIU.MaintOp.XAIUPCMCROpCodes</p></td><td class="confluenceTd"><p>ioaiu_coverage.svh</p></td><td class="confluenceTd"><p>Low</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p>flush data should be equal to e cache-model data.</p></td><td class="confluenceTd"><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/208666703/Ncore+3.6+IO-AIU+Micro-Architecture+Specification" rel="nofollow">IOAIU U-Arch spec [3.6 release]</a></p><p>12.2 Maintenance Operations</p></td><td class="confluenceTd"><p>#Check.IOAIU.CCP.EvictData<br/>#Check.IOAIU.DTW.EvictData<br/>#Check.IOAIU.DTW.EvictDataBe<br/> #Check.Evict.Count<br/></p></td><td class="confluenceTd"><p>ioaiu_scoreboard.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h3 id="MaintenanceOperation-Configs">Configs</h3><div class="table-wrap"><table data-table-width="1749" data-layout="default" data-local-id="ac091ba5-33b4-4b93-85cd-a9e801f6d2b9" class="confluenceTable"><colgroup><col style="width: 1749.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>ioc</p></td></tr><tr><td class="confluenceTd"><p>ioc_4c</p></td></tr></tbody></table></div>