<p /><h2 id="NetworkOptimization(RBUpdates)-Overview:">Overview:</h2><p>RB (Request Buffer) is a form of asset management used by the DCE to arbitrate data sent from AIU to DMI. This test plan addresses the modification in RBR (RB Reservation) protocol to optimize the network. </p><p>Few key things about this change:</p><ol start="1"><li><p>The following are de-featured:</p><ol start="1"><li><p>RBU’s </p></li><li><p>RBReq of type release (RL = 2’b10)</p></li></ol></li><li><p>A new GID bit field is introduced as the MSB of the RBID field. </p></li><li><p>A RB is considered usable until a RBRsp is triggered based on these cases: </p><ol start="1"><li><p>RB Release: DCE decides that a particular RBID will not receive intervention data and sends a RBReq on the same RBID while toggling the GID.</p></li><li><p>Intervention Data: DMI receives a DtwReq and utilizes the RB to process the write.</p></li></ol></li></ol><h2 id="NetworkOptimization(RBUpdates)-Configuration:">Configuration:</h2><p>Changes are universal to all configurations and existing tests because they’re protocol level and will be inherently tested.</p><h2 id="NetworkOptimization(RBUpdates)-Stimulus:">Stimulus:</h2><p>Model RB release and intervention data to the DMI. </p><p>Randomize between RB releases, writes and back-to-back cases.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/279216135/image-20230711-194344.png?api=v2"></span><p>Two primary points of delay control include the SMI interface through which the RBRs and writes are transferred and the native AXI interface from the DMI to memory. </p><p>SMI delays are modeled at the interface and AXI delays are modeled by the VIP. </p><p>Delays will be distributed, a specific test with coherent writes will target long delays to test the system at limit.</p><p>Corner Cases:</p><ul><li><p>All RBID in flight and in use either through backpressure from AXI I/F or reserving DTW dispatch.</p></li></ul><ul><li><p>Trigger release when all RBID in flight.</p></li></ul><ul><li><p>Only populate the buffer with 2 DTW intervention requests </p></li></ul><ul><li><p>Overflow the RB Response FIFO: Use the entire buffer for release scenario</p><ul><li><p>fill → empty (release only). </p></li><li><p>fill → empty (DTW only).</p></li><li><p>fill → empty (Primary/Secondary DTWs only).</p></li></ul></li></ul><h2 id="NetworkOptimization(RBUpdates)-Checks:">Checks:</h2><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="e7c182db-9ba1-4b3f-9d15-ca3af5475463" class="confluenceTable"><colgroup><col style="width: 204.0px;"/><col style="width: 207.0px;"/><col style="width: 117.0px;"/><col style="width: 110.0px;"/><col style="width: 122.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Scenario</strong></p></th><th class="confluenceTh"><p><strong>HashTag</strong></p></th><th class="confluenceTh"><p><strong>Where</strong></p></th><th class="confluenceTh"><p><strong>Done</strong></p></th><th class="confluenceTh"><p><strong>Status</strong></p></th></tr><tr><td class="confluenceTd"><p>RBID servicing an intervention data should never be reused until released by RBRsp from DMI.</p></td><td class="confluenceTd"><p>#Check.DMI.Concerto.v3.6.RBAliveforWrites</p></td><td class="confluenceTd"><p>dmi_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>GID should toggle on the same RBID only on an internal release.</p></td><td class="confluenceTd"><p>#Check.DMI.Concerto.v3.6.RBAliveforRelease</p></td><td class="confluenceTd"><p>dmi_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>WTT should hold unique GID,RBID</p></td><td class="confluenceTd"><p>#Check.DMI.Concerto.v3.6.UniqueRBID</p></td><td class="confluenceTd"><p>dmi_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p /><p /></td></tr><tr><td class="confluenceTd"><p>RBRsp is triggered when (GID → !GID) occurs for every RB</p></td><td class="confluenceTd"><p>#Check.DMI.Concerto.v3.6.EnforceRelease</p></td><td class="confluenceTd"><p>dmi_scoreboard.svh</p></td><td class="confluenceTd"><p>Y</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h2 id="NetworkOptimization(RBUpdates)-Coverage:">Coverage:</h2><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="3b73573b-1b7f-4a38-b8fa-3e646ec5803c" class="confluenceTable"><colgroup><col style="width: 162.0px;"/><col style="width: 142.0px;"/><col style="width: 152.0px;"/><col style="width: 152.0px;"/><col style="width: 152.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Scenario</strong></p></th><th class="confluenceTh"><p><strong>HashTag</strong></p></th><th class="confluenceTh"><p><strong>Where</strong></p></th><th class="confluenceTh"><p><strong>Done</strong></p></th><th class="confluenceTh"><p><strong>Status</strong></p></th></tr><tr><td class="confluenceTd"><p>Both GIDs on all RBIDs are being used</p></td><td class="confluenceTd"><p>#Cover.DMI.Concerto.v3.6.RBusage</p></td><td class="confluenceTd"><p>dmi_coverage.sv</p></td><td class="confluenceTd"><p>N</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div>