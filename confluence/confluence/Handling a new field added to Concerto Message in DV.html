<p><style>[data-colorid=lobqd8pk6k]{color:#4c9aff} html[data-color-mode=dark] [data-colorid=lobqd8pk6k]{color:#004eb3}[data-colorid=fa55ch4pkf]{color:#4c9aff} html[data-color-mode=dark] [data-colorid=fa55ch4pkf]{color:#004eb3}[data-colorid=h1392n5qhf]{color:#4c9aff} html[data-color-mode=dark] [data-colorid=h1392n5qhf]{color:#004eb3}[data-colorid=xa3dg27hcb]{color:#ff5630} html[data-color-mode=dark] [data-colorid=xa3dg27hcb]{color:#cf2600}[data-colorid=k1vmplbs92]{color:#4c9aff} html[data-color-mode=dark] [data-colorid=k1vmplbs92]{color:#004eb3}[data-colorid=mqrhsnj598]{color:#4c9aff} html[data-color-mode=dark] [data-colorid=mqrhsnj598]{color:#004eb3}[data-colorid=hkhfq69t5r]{color:#4c9aff} html[data-color-mode=dark] [data-colorid=hkhfq69t5r]{color:#004eb3}[data-colorid=ba8lb656uw]{color:#4c9aff} html[data-color-mode=dark] [data-colorid=ba8lb656uw]{color:#004eb3}</style>When a new field gets added to a Concerto Message (example: RBRRsp, STRReq, etc&hellip;), then the DV shall do the following to ensure the changes reflect in their environment:-</p><ol start="1"><li><p><strong>Find the relevant Concerto Message</strong></p><ol start="1"><li><p>Open the file: <span data-colorid="mqrhsnj598">$WORK_TOP/cpr/concMsg/ConcMsgBody</span><span data-colorid="xa3dg27hcb">&lt;updated_msg&gt;</span><span data-colorid="lobqd8pk6k">.packet.cpr</span> and get the following information:-</p></li><li><p>new field name</p></li><li><p>ordering of the fielding in the body of the message, which help top know the bit position indirectly (used in step-3)</p></li></ol></li><li><p><strong>Update <span data-colorid="k1vmplbs92">$WORK_TOP/cpr/tachl/dv_sys.tachl.cpr</span></strong></p><ol start="1"><li><p>dv_sys.tachl.cpr has the following structure</p><ol start="1"><li><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">dv_sys
   |-&gt; tachl
          |-&gt; WidthsParam
          |-&gt; PhysicalParam
          |-&gt; TransportParam
          |-&gt; ConcertoParam
          |-&gt; NdpParam
          |-&gt; HeaderParam
          |-&gt; BodyParam
          |-&gt; CmStatusParam
          |-&gt; Mpf1Param
          |-&gt; Mpf2Param
          |-&gt; DpParam
          |-&gt; DataParam
          |-&gt; AuxParam</pre>
</div></div></li></ol></li><li><p>Choose the section to which a new filed is getting added and under that add the new field in line with the existing entries. You can find relevant information in the file mentioned in the file in step-1</p><ol start="1"><li><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Example: In 3.6, RBRRsp got a new field RBGen, which is shown in $WORK_TOP/cpr/concMsg/ConcMsgBodyRBRRsp.packet.cpr as follows

        {
          &quot;name&quot;: &quot;ConcMsgBodyRBRRsp&quot;,
          &quot;packet&quot;: [
            {
              &quot;name&quot;: &quot;ConcMsgBodyRBRRsp&quot;,
              &quot;packets&quot;: [
                {
                  &quot;name&quot;: &quot;m_prot&quot;,
                  &quot;type&quot;: &quot;&quot;,
                  &quot;width&quot;: &quot;(params.wMProt == undefined) ? 0 : params.wMProt&quot;,
                  &quot;mf&quot;: &quot;&quot;,
                  &quot;excludable&quot;: true,
                  &quot;payload&quot;: 0
                },
                {
                  &quot;name&quot;: &quot;cm_status&quot;,
                  &quot;type&quot;: &quot;&quot;,
                  &quot;width&quot;: &quot;params.wCmStatus&quot;,
                  &quot;mf&quot;: &quot;&quot;,
                  &quot;excludable&quot;: false,
                  &quot;payload&quot;: 0
                },
                {
                  &quot;name&quot;: &quot;r_message_id&quot;,
                  &quot;type&quot;: &quot;&quot;,
                  &quot;width&quot;: &quot;params.wMsgId&quot;,
                  &quot;mf&quot;: &quot;&quot;,
                  &quot;excludable&quot;: false,
                  &quot;payload&quot;: 0
                },
                {
                  &quot;name&quot;: &quot;tm&quot;,
                  &quot;type&quot;: &quot;&quot;,
                  &quot;width&quot;: &quot;params.wTM&quot;,
                  &quot;mf&quot;: &quot;&quot;,
                  &quot;excludable&quot;: false,
                  &quot;payload&quot;: 0
                },
                        {
                  &quot;name&quot;: &quot;RBGen&quot;,
                  &quot;type&quot;: &quot;&quot;,
                  &quot;width&quot;: &quot;params.wRBGen&quot;,
                  &quot;mf&quot;: &quot;&quot;,
                  &quot;excludable&quot;: false,
                  &quot;payload&quot;: 0
                }
              ]
            }
          ]
        }

The above file states the RBRRsp has RBGen as the LSB field. Now in the dv_sys.tachl.cpr file, within BodyParams section, the following is added

        {
          &quot;parameterName&quot;: &quot;wRBGen&quot;,
          &quot;type&quot;: &quot;integer&quot;,
          &quot;parameterType&quot;: &quot;architecture&quot;,
          &quot;formula&quot;: &quot;return system.concertocparams.wRBGen&quot;
        },</pre>
</div></div></li></ol></li></ol></li><li><p><strong>Update <span data-colorid="fa55ch4pkf">$WORK_TOP/hw-ncr/dv/scripts/formatParamUtilities.js</span></strong></p><ol start="1"><li><p>smiObj</p><ol start="1"><li><p>Go to the section where smiObj structure is getting updated with NDP Body elements. You can find this by looking for another NDP body element like RBID, etc&hellip;</p></li><li><p>Add an entry for the new field using the information acquired from step-1 and aligning with the existing syntax in this section</p></li></ol></li><li><p>smiMsgObj</p><ol start="1"><li><p>Go the the section there smiMsgObj for the updated Concerto Message exists</p></li><li><p>Update this section with the LSB and MSB information for the new field. This update just defines the parameter name that is used in DV work and it gets the value from the system configuration</p></li></ol></li></ol></li><li><p>Refresh RTL</p><ol start="1"><li><p>Once the above updates are done, don't forget to run refresh_rtl script as that creates the local maestro image with the new field for DV to consume</p><ol start="1"><li><p><span data-colorid="h1392n5qhf">$WORK_TOP/dv/scripts/refresh_rtl</span></p></li><li><p>CSH shell users run: <span data-colorid="hkhfq69t5r">source $WORK_TOP/SOURCEME_image.tcsh</span></p></li><li><p>Bash shell users run: <span data-colorid="ba8lb656uw">source $WORK_TOP/SOURCEME_image</span></p></li></ol></li></ol></li></ol><p />