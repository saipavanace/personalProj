<p><style>[data-colorid=j6wd88p434]{color:#5e6c84} html[data-color-mode=dark] [data-colorid=j6wd88p434]{color:#7b89a1}[data-colorid=peoon90gub]{color:#5e6c84} html[data-color-mode=dark] [data-colorid=peoon90gub]{color:#7b89a1}</style><span style="letter-spacing: 0.0px;">

    
    

</span></p><div class="plugin_attachments_container">
    <div class="plugin_attachments_table_container">
        <fieldset class="hidden">
            <input type="hidden" class="plugin_attachments_macro_render_param" name="pageId" value="16165771" />
            <input type="hidden" class="plugin_attachments_macro_render_param" name="totalPages" value="1" />
            <input type="hidden" name="deleteConfirmMessage" value="Are you sure you want to send the attached file " to="" the="" only="" a="" space="" administrator="" can="" undo="" this="" />
                                                 <input type="hidden" class="plugin_attachments_macro_render_param" name="patterns" value="*.docx" />
                                                                    <input type="hidden" name="outputType" value="email" />
        </fieldset>
                






    


<table class="attachments aui" data-sort-by="date" data-sort-order="" data-tablesorter-headers="{&quot;0&quot;: {&quot;sorter&quot;: false}}">
        <tbody><tr class="header-row">
        <th class="expand-column attachment-summary-toggle">&nbsp;</th>
        <th class="filename-column">
            File
        </th>
        <th class="modified-column">
            Modified
        </th>
    </tr>

        
    </tbody><tbody>
                    
                                
            <tr id="attachment-212107301" class="attachment-row" data-attachment-id="212107301">

                <td class="attachment-summary-toggle">
                    <span class="icon icon-section-closed" title="Show more info" role="button" aria-expanded="false" />

                                        <div class="attachment-summary attachment-summary-212107301 hidden attachment-details-wrapper" data-attachment-id="212107301" data-attachment-filename="SystemC+Performance+Modeling_19APR2023-review.docx">

                        
                                                <p class="attachment-labels">Labels</p>
                        
<div class="labels-section-content content-column" entityid="212107301" entitytype="attachment">
	<div class="labels-content">
		
    
    <ul class="label-list  has-pen">
            <li class="no-labels-message">
            No labels
        </li>
                <li class="labels-edit-container">
            <a aria-describedby="attach-212107301" href="#" class="show-labels-editor" title="Edit Labels" role="button">
                <span class="aui-icon aui-icon-small aui-iconfont-edit-small">Edit Labels</span>
            </a>
        </li>
        </ul>
    </div>
</div>
                                                    <div class="attachment-history-wrapper" />
                        
                                                    <div class="attachment-buttons">
                                                                        <a class="aui-button previewAttachmentLink" data-filename="SystemC+Performance+Modeling_19APR2023-review.docx" data-file-src="/wiki/download/attachments/16165771/SystemC%2BPerformance%2BModeling_19APR2023-review.docx?api=v2" data-linked-resource-default-alias="SystemC+Performance+Modeling_19APR2023-review.docx" data-mime-type="application/vnd.openxmlformats-officedocument.wordprocessingml.document" data-linked-resource-container-id="16165771" data-linked-resource-id="212107301" role="button">Preview</a>
                                
                                                                                                                                                                                    
                                    <a class="aui-button webitem system-present-webitem ap-dialog ap-plugin-key-de.kontextwork.goedit ap-module-key-goedit-webitem-attachment-key ap-link-webitem" href="/plugins/servlet/ac/de.kontextwork.goedit/de.kontextwork.goedit__goedit-webitem-attachment-key?page.id=16165771&amp;space.key=ENGR&amp;content.version=12&amp;page.type=page&amp;page.title=SystemC%20Performance%20Modeling&amp;attachment.id=212107301&amp;space.id=16154737&amp;content.type=page&amp;page.version=12&amp;content.id=16165771&amp;attachment.mediaType=application%2Fvnd.openxmlformats-officedocument.wordprocessingml.document&amp;attachment.name=SystemC%2BPerformance%2BModeling_19APR2023-review.docx&amp;user.isExternalCollaborator=false">Edit attachment</a>
                                                                                                                                                                                                                            
                                    <a class="aui-button " href="/wiki/download/attachments/16165771/SystemC%2BPerformance%2BModeling_19APR2023-review.docx?version=1" data-file-src="/download/attachments/16165771/SystemC%2BPerformance%2BModeling_19APR2023-review.docx?version=1" data-linked-resource-container-id="16165771" data-linked-resource-default-alias="SystemC%2BPerformance%2BModeling_19APR2023-review.docx" data-linked-resource-id="212107301" data-linked-resource-type="attachment" role="button">View</a>
                                                                                                                                                                                                                                                                
                                    <a class="aui-button editAttachmentLink" href="/wiki/pages/editattachment.action?pageId=16165771&amp;fileName=SystemC%2BPerformance%2BModeling_19APR2023-review.docx&amp;isFromPageView=true" role="button">Properties</a>
                                                                                                                                                                                                                            
                                    <a class="aui-button removeAttachmentLink" href="/wiki/pages/confirmattachmentremoval.action?pageId=16165771&amp;fileName=SystemC%2BPerformance%2BModeling_19APR2023-review.docx" role="button">Delete</a>
                                                            </div>
                                            </div>

                </td>

                <td class="filename-column">
                    <p>
                        

    


<span class="aui-icon content-type-attachment-word" title="Microsoft Word Document" role="img">Microsoft Word Document</span>                                                    <a class="filename" href="/wiki/download/attachments/16165771/SystemC%2BPerformance%2BModeling_19APR2023-review.docx?api=v2" title="Download" data-filename="SystemC+Performance+Modeling_19APR2023-review.docx" data-type="application/vnd.openxmlformats-officedocument.wordprocessingml.document" data-linked-resource-container-id="16165771">
                                SystemC+Performance+Modeling_19APR2023-review.docx
                            </a>
                        
                                                                        
                                            </p>
                </td>

                <td class="attachment-created modified-column" data-sort-value="1681940264388">
                                        <span>Apr 19, 2023</span>
                    <span>by</span>
                                        <a href="/wiki/people/624b381e258562006fa6931d" class="url fn confluence-userlink" data-account-id="624b381e258562006fa6931d">Robert Williams</a>
                            </td>
            </tr>
                        </tbody>
</table>


    </div>
    <div class="plugin_attachments_upload_container">
                                <div class="attachments-table-drop-zone">
                                <li class="drop-zone-text">
                    <div class="drop-zone-image" />
                    <span>Drag and drop to upload or <a class="aui-button aui-button-link browse-files">browse for files</a></span>
                    <img src="/wiki/images/icons/wait.gif" class="plugin_attachments_dropzone_uploadwaiticon" />
                </li>
                <form method="POST" class="plugin_attachments_uploadform aui hidden" action="/wiki/pages/plugins/attachments/doattachfile.action?pageId=16165771" enctype="multipart/form-data">
                    <input type="hidden" name="atl_token" value="a63a397948af077d5b8039a29eeb571937009bc9" />
                    <div class="field-group">
                        <label>Upload file</label>
                        <input type="file" name="file_0" size="30" />
                    </div>
                    <div class="field-group">
                        <label>File description</label>
                        <input type="text" class="blank-search text" name="comment_0" size="20" placeholder="Comment" />
                        <input type="hidden" name="labels" value="$macroParams.labels" />
                    </div>
                    <div class="field-group">
                        <input type="submit" class="submit aui-button" name="confirm" value="Upload" />
                    </div>
                    <iframe class="plugin_attachments_uploadiframe hidden" name="KbXUQvJTy6kisNJDUgzeZd72xJ6uIJlpzIqukl15Rgf03XagQp94aONpI0jDyDFn" src="" />
                </form>
            </div>
            </div>

    <div>
            </div>
</div>

<p /><p><br /></p><h2 id="SystemCPerformanceModeling-NOTE:Thefollowinghasbeendeprecatedbutiskeptasreference.UsetheWorddocumentaboveforreview/distribution."><strong><span style="letter-spacing: 0.0px;">NOTE: The following has been deprecated but is kept as reference. Use the Word document above for review/distribution.</span></strong></h2><p><br /></p><p><span style="letter-spacing: 0.0px;">The Ncore 3 IP configuration tooling (Maestro software) can generate SystemC TLM models that are Approximately Timed (AT), for performance modeling. To speed up runtime, only features in the design which impact performance are modeled. This allows for architectural analysis of workloads in a much more reasonable time than RTL.</span></p><p>The AT model is designed to be run standalone (ncore3_achsim), or it can be integrated into a larger systems including PlatformArchitect generated designs.</p><p>The model is instrumented to provide statistics during runtime and a summary at the end regarding,</p><ul><li>Bandwidth and latency</li><li>cache hit, miss, and eviction rates</li><li>credit usage</li><li>resource usage, such as transaction table occupancy</li><li>directory and victim buffer usage</li></ul><h2 id="SystemCPerformanceModeling-8.1UsingNcore3PerformanceModels"><strong>8.1&nbsp;&nbsp; Using Ncore 3 Performance Models</strong></h2><p>The use of the Ncore performance model flows through the following steps as shown in Figure 1.</p><ol><li><strong> </strong>Configure Ncore in Maestro to design the network, calculate proper parameters, and write out a configuration</li><li><strong> </strong>Run Workload Scenario: Use the model executable (ncore3_archsim) with the necessary configuration files to run a set of workloads as described below</li><li><strong> </strong>Analyze Traces: Use scv_analyzer to report statistics on the traces. Compare resulting performance against expectations</li><li><strong> </strong>Return to Maestro: If goals are not achieved, then return to Maestro to adjust parameters.</li></ol><p><strong>Figure1. Ncore User Flow</strong></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/16165771/100005_001.jpg?api=v2" /></span></p><p><br /></p><p><strong>NOTE:</strong> Some open source tools like SCViewer and Dash can be used to analyze the Ncore 3 Model results efficiently. For details on how to install and use those tools please contact your Arteris application support.</p><p><br /></p><h3 id="SystemCPerformanceModeling-8.1.1FeatureSupport">8.1.1 Feature Support</h3><p><br />The features supported in the models are listed in table 1:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col /></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Feature Supported in SystemC Models</strong></p></td></tr><tr><td class="confluenceTd"><p>Configurable number of fully-coherent ACE-Lite Agents</p></td></tr><tr><td class="confluenceTd"><p>Configurable number of fully-coherent CHI Agents</p></td></tr><tr><td class="confluenceTd"><p>Configurable number of ACE Agents</p></td></tr><tr><td class="confluenceTd"><p>Configurable number of AXI4 Agents</p></td></tr><tr><td class="confluenceTd"><p>Configurable number of memory slaves</p></td></tr><tr><td class="confluenceTd"><p>Configurable number of IO slaves</p></td></tr><tr><td class="confluenceTd"><p>Proxy Caches optionally configured in AXI4 Agents</p></td></tr><tr><td colspan="1" class="confluenceTd">Proxy Cache configurable replacement policy NRU/PLRU (NCore 3.6 onwards, beta implementation in NCore 3.4)</td></tr><tr><td colspan="1" class="confluenceTd">Proxy Cache Index hashing&nbsp;(NCore 3.6 onwards, beta implementation in NCore 3.4)</td></tr><tr><td class="confluenceTd"><p>Storage memory cache</p></td></tr><tr><td class="confluenceTd"><p>Non-coherent transactions</p></td></tr><tr><td class="confluenceTd"><p>Configurable by size</p></td></tr><tr><td class="confluenceTd"><p>Configurable by entry information</p></td></tr><tr><td class="confluenceTd"><p>Configurable by organization</p></td></tr><tr><td class="confluenceTd"><p>Configurable by agent assignment</p></td></tr><tr><td class="confluenceTd"><p>QoS</p></td></tr><tr><td colspan="1" class="confluenceTd">QoS reservation (NCore 3.4 onwards)</td></tr><tr><td colspan="1" class="confluenceTd">Software Credit Management (NCore 3.4 onwards)</td></tr><tr><td colspan="1" class="confluenceTd">Multiple Configurable snoop filters (NCore 3.4 onwards)</td></tr><tr><td class="confluenceTd"><p><strong>The following features are NOT supported in the SystemC models</strong></p></td></tr><tr><td class="confluenceTd"><p>Ncore Resilience Package</p></td></tr><tr><td class="confluenceTd"><p>DVM</p></td></tr><tr><td class="confluenceTd"><p>Atomic and Stash Transactions</p></td></tr><tr><td class="confluenceTd"><p>Barrier Transactions</p></td></tr><tr><td class="confluenceTd"><p>Data Accuracy</p></td></tr></tbody></table></div><p><br /></p><p>The descriptions and constraints of the parameters are specified in the Ncore 3 user guide. Refer to the Ncore 3 User guide.</p><p><br /></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: -0.006em;">8.1.2&nbsp; &nbsp;Ncore Parameters Affecting Performance Models</span></p><p>The following table lists the parameters that affect the performance model.</p><p><strong><em>Ncore Parameters effecting performance model</em></strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col /></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Parameters</strong></p></td></tr><tr><td class="confluenceTd"><p><strong><em>Transport Solution</em></strong></p></td></tr><tr><td class="confluenceTd"><p><strong><em>Non-coherent Agent Interface Unit</em></strong></p></td></tr><tr><td class="confluenceTd"><p>Number of credits per DCE</p></td></tr><tr><td class="confluenceTd"><p>Number of credits per DMI</p></td></tr><tr><td class="confluenceTd"><p>Outstanding transaction table entries</p></td></tr><tr><td class="confluenceTd"><p>Snoop transaction table entries</p></td></tr><tr><td class="confluenceTd"><p>Enable proxy cache</p></td></tr><tr><td class="confluenceTd"><p>Number of sets</p></td></tr><tr><td class="confluenceTd"><p>Number of ways</p></td></tr><tr><td class="confluenceTd"><p>Primary set select bits</p></td></tr><tr><td class="confluenceTd"><p>Snoop filter assignment (only for AXI4 with proxy cache enabled)</p></td></tr><tr><td class="confluenceTd"><p>QoS Enable</p></td></tr><tr><td class="confluenceTd"><p>QoS Map</p></td></tr><tr><td class="confluenceTd"><p>QoS Event Threshold</p></td></tr><tr><td class="confluenceTd"><p><strong><em>Coherent Agent Interface Unit</em></strong></p></td></tr><tr><td class="confluenceTd"><p>Outstanding transaction table entries</p></td></tr><tr><td class="confluenceTd"><p>Snoop transaction table entries</p></td></tr><tr><td class="confluenceTd"><p>Number of credits per DCE</p></td></tr><tr><td class="confluenceTd"><p>Number of credits per DMI</p></td></tr><tr><td class="confluenceTd"><p>Snoop filter assignment</p></td></tr><tr><td class="confluenceTd"><p>QoS Enable</p></td></tr><tr><td class="confluenceTd"><p>QoS Map</p></td></tr><tr><td class="confluenceTd"><p><strong><em>Distributed Coherency Engine</em></strong></p></td></tr><tr><td class="confluenceTd"><p>Number of active coherent transactions</p></td></tr><tr><td class="confluenceTd"><p>Number of DCE write request buffer credits</p></td></tr><tr><td class="confluenceTd"><p>Number of snoop credits</p></td></tr><tr><td class="confluenceTd"><p>Number of memory read credits</p></td></tr><tr><td class="confluenceTd"><p>Victim buffer entries</p></td></tr><tr><td class="confluenceTd"><p>Number of skid buffer entries</p></td></tr><tr><td class="confluenceTd"><p>Number of sets</p></td></tr><tr><td class="confluenceTd"><p>Number of ways</p></td></tr><tr><td class="confluenceTd"><p>Primary set select bits</p></td></tr><tr><td class="confluenceTd"><p><strong><em>Distributed Memory Interface</em></strong></p></td></tr><tr><td class="confluenceTd"><p>Enable system memory cache</p></td></tr><tr><td class="confluenceTd"><p>Number of sets</p></td></tr><tr><td class="confluenceTd"><p>Number of ways</p></td></tr><tr><td class="confluenceTd"><p>Number of tag banks</p></td></tr><tr><td class="confluenceTd"><p>Number of data banks</p></td></tr><tr><td class="confluenceTd"><p>Data bank select bits</p></td></tr><tr><td class="confluenceTd"><p>Tag bank select bits</p></td></tr><tr><td class="confluenceTd"><p>Primary set select bits</p></td></tr><tr><td class="confluenceTd"><p>Replacement Policy</p></td></tr><tr><td class="confluenceTd"><p>Number of outstanding read transactions</p></td></tr><tr><td class="confluenceTd"><p>Number of outstanding write transactions</p></td></tr><tr><td class="confluenceTd"><p>Number of DMI write buffers</p></td></tr><tr><td class="confluenceTd"><p>QoS Enable</p></td></tr><tr><td class="confluenceTd"><p>QoS Map</p></td></tr><tr><td class="confluenceTd"><p>QoS Event Threshold</p></td></tr></tbody></table></div><p class="auto-cursor-target"><strong><span style="font-size: 20.0px;letter-spacing: -0.008em;">8.2&nbsp;&nbsp;&nbsp; Running Model with Testbench (ncore3_archsim)<br /></span></strong></p><h3 id="SystemCPerformanceModeling-8.2.1TestbenchOverview">8.2.1&nbsp;&nbsp; Testbench Overview</h3><p>The testbench for the model is generated based on the configuration output from Maestro. A generalized block diagram of the model with testbench is shown in <a href="#_bookmark34" rel="nofollow">Figure </a>2 Model Testbench Diagram. The testbench components are CHI drivers, AXI/ACE drivers, and AXI slaves. The exact number and configuration is adjusted based on the configuration in Maestro. Some addition configuration options are described below.</p><p><span style="letter-spacing: 0.0px;">The CHI driver receives transactions from a choice of input formats (described below), converts them to a CHI transaction, and sends the transaction to a CHI AIU. Similarly, the AXI/ACE driver receives transactions from a choice of input formats and converts them to either an AXI or an ACE transaction. The AXI slave is a simplified memory model with programmable delays for the response latency and spacing.</span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: -0.006em;">8.2.2&nbsp;&nbsp; Running a Test</span></p><p>Running a test requires specifying the design configuration from Maestro and workload for each AIU in a scenario file. Next the model executable with the scenario file on the command line has to be called. For example, the contents of test1.scn to run workloads on one coherent AIU and one non-coherent AIU on a Maestro generated configuration can be:</p><pre>  maestro-config=../../top.cjson<br />  input-file=caiu0:../../prf/bringup/ncore3_rdch_rand1k.prf <br />  input-file=ncaiu0:../../prf/bringup/ncore3_rdch_rand1k.prf where,</pre><p>top.cjson is a maestro generated configuration ncore3_rdch_rand1k.prf is a traffic profile to run on each aiu The command to run this scenario test1.scn is :</p><pre>  ncore3_archsim --scenario-file test1.scn</pre><p>where ncore3_archsim is the model executable which is located in the Ncore3 installation area.</p><p>Several sample tests are given in ${NCORE3_MODEL_DIR}/*/regress, from traces running 16 simple transactions to profiles running 1K random transactions.</p><p>For all the available command line options run:</p><p>ncore3_archsim -h<br /><br />The ouptut list the available options and their default values.</p><p><br /></p><p><strong>Figure2. Model Testbench Diagram</strong></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/16165771/100054_004.jpg?api=v2" /></span></p><h3 id="SystemCPerformanceModeling-8.2.1InputStimulus">8.2.1&nbsp;&nbsp; Input Stimulus</h3><p>There can be a different stimulus file defined for each AIU in the system. Input stimulus to drive the system can be specified in one of two methods. The first method is to use Socket Transaction Language, or STL. The second method is a traffic profile format, or PRF file. Both STL and PRF files use drivers in the testbench to convert inputs to TLM transactions.</p><p><br /></p><p><strong><em><span data-colorid="j6wd88p434" style="letter-spacing: 0.0px;">STL File</span></em></strong></p><p><span style="letter-spacing: 0.0px;">If using the STL trace files, the testbench will read the input file <span>and create transactions for the applicable driver</span> for AXI, ACE, or CHI type TLM transactions.</span></p><p><span style="letter-spacing: 0.0px;">The STL file format is based on a definition used the in the Synopsys&reg; Platform Architect&trade; tool suite and the Synopsys DesignWare&reg; TLM Library. In this format, the key signals of each beat in a bus transaction are given exact values. The description of the transactions is specific to the configuration. Timing between transactions can be defined in fixed time, or delay between transactions.</span></p><p><span style="letter-spacing: 0.0px;">For example, the following lines define 2 burst read transactions in AXI4 that are separated by 30 cycles:</span></p><pre>   0(4, INCR) bread 0 CACHE:1 BUF:1 CACHE_WR_ALOC:1 CACHE_RD_ALOC:1 BURST_SIZE:16 <br />   idle 30<br />   1(4, INCR) bread 0x100000 CACHE:1 BUF:1 CACHE_WR_ALOC:1 CACHE_RD_ALOC:1 BURST_SIZE:16</pre><p>Arteris has extended the definition of AXI and ACE STL to enable CHI transactions to be defined to the CHI driver.</p><p><br /></p><p><em><strong><span data-colorid="peoon90gub">PRF File</span></strong></em></p><p>If using a PRF file, the testbench will read the traffic profiles and create transactions for the driver to convert to TLM transactions.</p><p><span style="letter-spacing: 0.0px;">The PRF file format is based on a set of features described in the ARM&reg; AMBA&reg; Adaptive Traffic Profiles Specification, Issue A, to cover the most common forms of traffic. The PRF format should follow the YAML syntax. In this format, the type of transaction is specified with an address range and options for random or sequential stepping. The traffic profile is general enough to apply to multiple configurations and protocols. More details can be found at </span><a class="external-link" href="https://github.com/Arteris-IP/tlm2-interfaces/blob/master/doc/yaml-atp/YAML_ATP_input_spec.pdf" rel="nofollow" style="letter-spacing: 0.0px;">https://github.com/Arteris-IP/tlm2-interfaces/blob/master/doc/yaml-atp/YAML_ATP_input_spec.pdf</a></p><p><span style="letter-spacing: 0.0px;">For example, the following lines define a series of 256 sequential coherent reads of cache line size, separated by 8 cycles.</span></p><pre>- profile: ch_read <br />type: ReadShared <br />count: 256<br /><br />address:<br />type: sequential <br />range:[0x000000, 0x4000]<br />timing:<br />  ARTV: 8</pre><p>The same PRF file can be used as an input to either a CHI, AXI or ACE agent interface&nbsp;<span style="letter-spacing: 0.0px;">unit.</span></p><h3 id="SystemCPerformanceModeling-8.2.3Testbenchconfiguration"><span style="letter-spacing: 0.0px;">8.2.3</span><span style="letter-spacing: 0.0px;">&nbsp;&nbsp; </span><span style="letter-spacing: 0.0px;">Testbench</span><span style="letter-spacing: 0.0px;"> configuration</span></h3><p><span style="letter-spacing: 0.0px;">All testbench elements have also configuration parameters. The user may run tests with the default values as shown above (no testbench configuration file provided to ncore3_archsim). </span></p><p><span style="letter-spacing: 0.0px;">But if the required the user can overwrite the default values for testbench configurations with custom values. This doesn't involve rerunning Maestro since the testbench elements are not defined in Maestro. For a template of available testbench parameters run:</span></p><p><br /></p><pre>&nbsp;&nbsp; ncore3_archsim --dump-config my -m top.level.rtl.csr.json</pre><p><br />This will output a file called 'my' which contains all available configuration parameters with their default parameters. The formating is<br />done using the JSON definitions in order to allow each script based prossessing of testbench configurations. The user may update the file in order to overwrite any of the default settings. But the JSON rules must be observed. <br />A JSON format error may result in strange errors when reading in such a non-JSON conform file. Note that it is possible to overwrite just some <br />parameters. Any parameter which is not overwritten will still operate with the default setting. <br />After preparing an updated configuration file the changed file can be loaded in a simulation by running:</p><pre><br /><br />&nbsp;&nbsp; ncore3_archsim -c my_modified -m top.level.rtl.csr.json<br /><br /></pre><p>Note that a lot of the parameters deal with the level of logging (information printed to stdout during simulation) and the tracing (SCV and VCD trace files). While logging and</p><p>tracing can be controlled instance by instance the normal usage model is to use the global settings from command line switches. This means the user may often ignore those settings.</p><p>Most likely important testbench paramter settings are regarding the timing behavior of memory targets and the input drivers. The testbench configuration file can contain just subsets of parameters. Parameters which are not defined use the default value.</p><p><br /></p><h4 id="SystemCPerformanceModeling-8.2.3.1parametersinTPUmodels">8.2.3.1 parameters in TPU models</h4><p>At level of driver:</p><p>use_tpu&nbsp; : Use TPU file input for this node (true/false)</p><p>filename : The TPU filename which is used to drive this node (string)</p><p>gen_stl&nbsp;&nbsp;&nbsp; : Set to true to generate STL file of the transactions generated by the specified TPU file (true/false)</p><p><br /></p><p>enableTracing : Enable tracing at this level (true/false)</p><p>log_level : &nbsp;Log level of the tracing for this level &nbsp;integer 0-7 (0=NONE,1=FATAL, 2=ERROR, 3=WARNING,4=INFO,5=DEBUG,6=TRACE,7=DBGTRACE)</p><p>Above 2 parameters can be enabled disabled and log level can be changed to master/pe/parser sublevel too</p><p><br /></p><p>pe sublevel has the following additional parameters:</p><p>data_interleaving: Set to true to enable data interleaving (true/false)</p><p>Timing parameters (artv,awtv,wbv,rbr,br,ba,rla) as defined in section 3.1 of<span>&nbsp;</span><a class="external-link" href="https://confluence.arteris.com/download/attachments/11703201/IHI0082A_amba_adaptive_traffic_profiles_specification.pdf?version=2&amp;modificationDate=1562794197932&amp;api=v2" rel="nofollow">https://confluence.arteris.com/download/attachments/11703201/IHI0082A_amba_adaptive_traffic_profiles_specification.pdf?version=2&amp;modificationDate=1562794197932&amp;api=v2</a></p><p>enable_id_serializing: set to true to prevent reuse of ID till previous transaction with same id is complete (true/false)</p><h4 id="SystemCPerformanceModeling-8.2.3.2parametersinmemorymodels">8.2.3.2 parameters in memory models</h4><p>max_outstanding_tx: Number of Transactions that can be outstanding at the same time</p><p>rd_bw_limit_byte_per_sec: Specify a positive real value which limits the read bytes per second serviced at this memory node</p><p>wr_bw_limit_byte_per_sec: Specify a positive real value which limits the writes bytes per second serviced at this memory node</p><p>rd_data_interleaving: Set to true to enable read data interleaving (true/false)</p><p>wr_data_accept_delay: Set to number of cycles to wait before responding acceptance of write data (WDATA) &amp; address(AW) signal</p><p>rd_addr_accept_delay: Set to number of cycles to wait before responding acceptance of read address (AW) signal</p><p>rd_data_beat_delay: Set to number of cycles to wait between read data beats</p><p>rd_resp_delay: Set to number of cycles to wait before read response is sent (memory latency)</p><p>wr_resp_delay: Set to number of cycles to wait before write response is sent (memory latency)</p><p>enableTracing: Set to true to log memory accesses (true/false)</p><p>log_level : &nbsp;Log level of the tracing &nbsp;integer 0-7 (0=NONE,1=FATAL, 2=ERROR, 3=WARNING,4=INFO,5=DEBUG,6=TRACE,7=DBGTRACE)</p><h4 id="SystemCPerformanceModeling-8.2.3.3parametersinNcoremodel">8.2.3.3 parameters in Ncore model</h4><p>Most Ncore model parameters are specified by the Maestro generated JSON file, but the testbench JSON contains options to enable/disable logging and tracing per instance.</p><p><br /></p><h3 id="SystemCPerformanceModeling-8.2.4CSRconfiguration"><span>8.2.4</span><span> &nbsp; </span><span>CSR</span><span> configuration</span></h3><p><span>This file defined the memory map and parameters which are configured at run time in real hardware, and are not fixed at design time. Please note that the model works on the snapshot of these parameter values at startup and does not support dynamically changing these at run time.</span></p><p><span>Examples are:</span></p><ul><li><span>Memory map and interleaving for DMI/DII</span></li><li><span>Enable updates to DCE (NCore 3.4)</span></li><li><span>Memory map Non coherent&nbsp;attribute (NCore 3.4)</span></li><li><span>Software Credit Values&nbsp;<span>(NCore 3.4)</span></span></li><li><span>QoS Threshold value for high priority&nbsp;transactions&nbsp;<span>(NCore 3.4)</span></span></li><li><span>QoS Number of WTT entries reserved in DMI for high priority&nbsp;transactions&nbsp;<span>(NCore 3.4)</span></span></li><li><span><span>QoS Number of RTT entries reserved in DMI for high priority&nbsp;transactions&nbsp;<span>(NCore 3.4)</span></span></span></li></ul><p>It is recommended to dump out a default CSR config based on maestro input via the following command and then configure it based on expected software setting.&nbsp;</p><p>bin/ncore3_archsim -m &lt;Maestro JSON&gt; --dump-csr-config &lt;CSR CONFIG FILE NAME&gt;</p><p><br /></p><p><br /></p><p><strong><span style="font-size: 20.0px;letter-spacing: -0.008em;">8.3&nbsp;&nbsp;&nbsp; Exporting the Model for user integration <br /></span></strong></p><p>An additional method for driving stimulus to the AIUs is to remove the test bench drivers and directly connect the interfaces to the model itself. This involves using the ncore3_archsim to generate a wrapper header file, and then using the TLM interfaces to drive traffic to the model.</p><p><span style="letter-spacing: 0.0px;">The transactor interfaces are defined according to IEEE Std 1666 TLM-2.0 Language Reference Manual. Protocol specific extensions have been defined. The extension definitions can be found as part of the open source repository : <a class="external-link" href="https://github.com/Arteris-IP/tlm2-interfaces" rel="nofollow">https://github.com/Arteris-IP/tlm2-interfaces</a></span></p><p><br /></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: -0.006em;">8.3.1&nbsp;&nbsp; Generate Wrapper Header</span></p><p>The Ncore installation comes with a program to generate a wrapper header file from the maestro configuration file, as follows:<span style="letter-spacing: 0.0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></p><p><span style="letter-spacing: 0.0px;">gen_wrapper --jsonfilename top.cjson</span></p><p>This wrapper can be used to connect user cores to the Ncore model for integration into customer environments. It creates a *.h file in the current directory which defines the TLM sockets that can be connected to drive stimulus directly to the model.</p><p><br /></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: -0.006em;">8.3.2&nbsp;&nbsp; SystemC TLM Interfaces for AXI</span></p><p>The AXI TLM library consists of Protocol definition, Protocol FSM and engines, and Transaction recording.</p><p><span style="letter-spacing: 0.0px;">This interface library is available publicly under the terms of the Apache License, Version 2.0, at </span><u style="letter-spacing: 0.0px;"><a class="external-link" href="https://github.com/Arteris-IP/tlm2-interfaces" rel="nofollow">https://github.com/Arteris-IP/tlm2-interfaces</a></u><span style="letter-spacing: 0.0px;">.</span></p><p><em><strong><span style="letter-spacing: -0.003em;">Protocol Definition</span></strong></em></p><p>The protocol definition defines the TLM2.0 generic payload extensions used for modeling AXI3, AXI4, ACE, and CHI transactions. It also defines the protocol phases used for non-blocking, approximate timed transactions, set of initiator and target socket.</p><p><span style="letter-spacing: 0.0px;">It is implemented according to the AXI-TLM specification.</span></p><p><em><strong><span style="letter-spacing: -0.003em;">Protocol FSM and Engines</span></strong></em></p><p>These engines implement the non-blocking protocol for the initiator and the target sockets. The finite state machine can be reused in various implementations. The library features a simple_master and a slave_master unit as a reference implementation. These units can be used as building blocks or functional units as well as verification components.</p><p><em><strong><span style="letter-spacing: -0.003em;">Transaction Recording</span></strong></em></p><p>The transaction recording is based on the AccelleraTM SystemC Verification Library (SCV) transaction recording. This allows traceability of transactions into a database for later analysis and visualization. For transaction traceability, communication including all time points and associated data is recorded. The recording also features transaction links which allows easy analysis of related transactions.</p><p><br /></p>