<h3 id="AXISingle-SwitchNXMconfigurationwithFirewalladapters-BlockDiagram">Block Diagram</h3><p>Refer this link for block-diagram: <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16171536/Firewall+Adapter+Testplan+Native+layer+level" data-linked-resource-id="16171536" data-linked-resource-version="3" data-linked-resource-type="page">Firewall Adapter Testplan (Native layer level)</a></p><h3 id="AXISingle-SwitchNXMconfigurationwithFirewalladapters-Stepstogeneratethedesign">Steps to generate the design</h3><ol><li>cd $WORK_TOP/tb/top/firewall_axi_single_switch</li><li>./create_firewall_axi_single_switch.js -c config_firewall_axi_single_switch.json (or any config file of choice. This creates all the design JSONs in the current directory. firewall_axi_1x2_top_rtl.json is the DUT (gen_wrapper) JSON.)</li><li>./gen_rtl_firewall_axi_single_switch  (This runs the tachl command to generate RTL in a folder called 'rtl')</li><li>cd rtl</li><li>verilator --lint-only ./gen_wrapper.v -I. --error-limit 0 -Wall -Wno-UNUSED -Werror-UNDRIVEN (Run verilator checks)</li><li>cd $WORK_TOP/tb/top/firewall_axi_single_switch</li><li>$WORK_TOP/../js/merge_csr.js -r rtl -o top.csr (This merges all the individual blocks CSRs found in the *.attr files into a single CSR file, top.csr for whole design)</li></ol><p> </p><h3 id="AXISingle-SwitchNXMconfigurationwithFirewalladapters-Abouttheconfigurationfile">About the configuration file</h3><p>You can create other configuration files using config_firewall_axi_single_switch.json as a template. Here are some of the important parameters that can be used to control the design generation:</p><ol><li>name: This string is attached as a prefix to all the JSON files created.</li><li>pktStyle: This controls the ATP packet style. It can take one of the following three values: 'serial', 'parallel', fixed'.</li><li>wData: The width of ATP link in bits. Ensure that this is always lesser than or equal to the width of AXI data buses.</li><li>numInits: This sets the number of initiators (N) in the design.</li><li>numTargs: This sets the number of targets (M) in the design.</li><li>maxOutRd: This sets the number of entries in the context for read requests. maxOutRd+maxOutWr = number of allocation events = number of deallocation events = number of latency timers in the Stats block.</li><li>maxOutWr: This sets the number of entries in the context for write requests. maxOutRd+maxOutWr = number of allocation events = number of deallocation events = number of latency timers in the Stats block.</li><li>All parameters of firewall adapter.</li></ol>