<p>See also <a class="external-link" href="https://jira.arteris.com/browse/MAES-4598" rel="nofollow">[MAES-4598] Adding connectivity information into InterfaceSysUnitId tieoffs - Jira (arteris.com)</a></p><p>See also <a class="external-link" href="https://confluence.arteris.com/pages/viewpage.action?spaceKey=ENGR&amp;title=Arch+Ncore+3.4+Docs" rel="nofollow">Arch Ncore 3.4 Docs - Engineering - Confluence (arteris.com)</a></p><p>See also <a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceSysUnitId.interface.cpr+Use+Cases" rel="nofollow">InterfaceSysUnitId.interface.cpr Use Cases - Engineering - Confluence (arteris.com)</a></p><p><br/></p><p>See also <a class="external-link" href="https://confluence.arteris.com/display/ENGR/Ncore+3.4+System+Connectivity+example+for+a+two-way+interleaved+system" rel="nofollow">Ncore 3.4 System Connectivity example for a two-way interleaved system - Engineering - Confluence (arteris.com)</a></p><p>See also <a class="external-link" href="https://confluence.arteris.com/pages/viewpage.action?spaceKey=ENGR&amp;title=Ncore+3.4+System+Connectivity+Architecture+Spec+0.83+Interleaved+System+Example" rel="nofollow">Ncore 3.4 System Connectivity Architecture Spec 0.83 Interleaved System Example - Engineering - Confluence (arteris.com)</a></p><p>See also <a class="external-link" href="https://confluence.arteris.com/display/ENGR/Ncore+3.4+System+Connectivity+example+for+hexDceDmiRbOffset" rel="nofollow">Ncore 3.4 System Connectivity example for hexDceDmiRbOffset - Engineering - Confluence (arteris.com)</a></p><p><br/></p><p><br/></p><p>The information presented below is from RTL point of view.</p><p><br/></p><p>(1)<strong>AIU to DCE Connectivity</strong></p><p><br/></p><p>AIU is given an FUnitId array for all DCEs in the system.  For example, DCE_FUnitId_Array = [5, 6].  The index of the array is the NUnitId.</p><p><br/></p><p>AIU is given an Connectivity array for all DCEs. For example, DCE_Connectivity_Array = [1, 1]. The index of the array is the NUnitId.</p><p><br/></p><p>The number of entries in both the arrays must match each other.</p><p><br/></p><p>For an agent’s request address, AIU calculates the DCE_NUnitId = set_select( dce_PriSubDiagAddrBits, address).</p><p><br/></p><p>AIU looks up its DCE_Connectivity_Array using the DCE_NUnitId as the index.</p><p><br/></p><p>If the lookup results is 0, then AIU asserts the “unconnected_dce_access” error (logs it and generates an interrupt, when enabled) and terminates the agent’s request transaction.</p><p><br/></p><p><br/></p><p>(2)<strong>AIU to DMI Connectivity</strong></p><p><br/></p><p>AIU is given an FUnitId array for all DMIs in the system. For example, DMI_FUnitId_Array = [7, 8, 9].  The index of the array is the NUnitId.</p><p><br/></p><p>AIU is given an Connectivity array for all DMIs. For example, DMI_Connectivity_Array = [1, 1, 1]. The index of the array is the NUnitId.</p><p><br/></p><p>The number of entries in both the arrays must match each other.</p><p><br/></p><p>For an agent’s request address, AIU calculates the DMI_NUnitId = f( GPRARs, GPRBARs, AMIGR, AMIFR, BRAR, BRBAR, NRSBAR).</p><p><br/></p><p>AIU looks up its DMI_Connectivity_Array using the DMI_NUnitId as the index.</p><p><br/></p><p>If the lookup results is 0, then AIU asserts the “unconnected_dmi_access” error (logs it and generates an interrupt, when enabled) and terminates the agent’s request transaction.</p><p><br/></p><p>(3)<strong>AIU to DII Connectivity</strong></p><p><br/></p><p>AIU is given an FUnitId array for all DIIs in the system. For example, DMI_FUnitId_Array = [10, 11].  The index of the array is the NUnitId.</p><p><br/></p><p>AIU is given an Connectivity array for all DIIs. For example, DMI_Connectivity_Array = [1, 1]. The index of the array is the NUnitId.</p><p><br/></p><p>The number of entries in both the arrays must match each other.</p><p><br/></p><p>For an agent’s request address, AIU calculates the DII_NUnitId = f(GPRARs, GPRBARs, BRAR, BRBAR, NRSBAR).</p><p><br/></p><p>AIU looks up its DII_Connectivity_Array using the DII_NUnitId as the index.</p><p><br/></p><p>If the lookup results is 0, then AIU asserts the “unconnected_dii_access” error (logs it and generates an interrupt, when enabled) and terminates the agent’s request transaction.</p><p><br/></p><p><br/></p><p>(4)<strong>DCE to DMI Connectivity</strong></p><p><br/></p><p>DCE is given an FUnitId array for all DMIs in the system.  For example, DMI_FUnitId_Array = [7, 8, 9].  The index of the array is the NUnitId.</p><p><br/></p><p>DCE is given an Connectivity array for all DMIs. For example, DMI_Connectivity_Array = [1, 1, 1]. The index of the array is the NUnitId.</p><p><br/></p><p>The number of entries in both the arrays must match each other.</p><p><br/></p><p>For a Recall address, DCE calculates the DMI_NUnitId = f( GPRARs, GPRBARs, AMIGR, AMIFR, BRAR, BRBAR, NRSBAR).</p><p><br/></p><p>DCE looks up its DMI_Connectivity_Array using the DMI_NUnitId as the index.</p><p><br/></p><p>If the lookup results is 0, then DCE asserts the “unconnected_dmi_access” error (logs it and generates an interrupt, when enabled).</p><p><br/></p><p>NOTE: Currently DCE does not terminate the Recall in case of “unconnected_dmi_access” error.</p><p>NOTE: Currently DCE does not terminate other address map errors such as “hit_none”, “hit_multi”. DCE simply logs it and generates an interrupt, when enabled.</p><p>NOTE: We may want to fix this to avoid system hang in case the Recall snoop to the snooping AIU carries an unconnected DMI’s FUnitId, and the snooping AIU issues a DTW to an unconnected DMI.</p><p><br/></p><p>P/S:</p><p>The InterfaceSysUnitId.interface.cpr file for Ncore 3.4 is now added with a field called “connectivity”.</p><p>So, there are two fields in the InterfaceSysUnitId :</p><p>-“f_unit_id” which carries an array of f_unit_id</p><p>-“connectivity” which carries an array of connection bit.</p>