<p /><p /><h3 id="Ncore3.6DIIOrderingTests&amp;Checks:-ReadvsRead(RDvsRD)"> Read vs Read (RD vs RD)</h3><p><strong>Conditions Checked:</strong></p><ul><li><p>Both are non coherant reads.</p></li><li><p>Both are not of smi_none order type</p></li></ul><p><strong>Why:</strong></p><ul><li><p>Ensure that the previous read is fully completed before issuing a new one..</p></li></ul><p><strong>It is Safe If:</strong></p><ul><li><p>Older read has completed (Looking at time seen on interface).</p></li><li><p>They share the same ARID (part of same group).</p></li></ul><h3 id="Ncore3.6DIIOrderingTests&amp;Checks:-2.ReadvsWrite(RDvsWR)"> 2. Read vs Write (RD vs WR)</h3><p><strong>Conditions Checked:</strong></p><ul><li><p>New transaction is a read; old is a write.</p></li><li><p>Either both are write ordered to the same cacheline or neither is.</p></li></ul><p><strong>Why:</strong></p><ul><li><p>Reads must wait for pending writes to complete.</p></li></ul><p><strong>Safe If:</strong></p><ul><li><p>Write response is received before the read address is seen.</p></li><li><p>Or the write failed due to EX_FAIL.</p></li></ul><h3 id="Ncore3.6DIIOrderingTests&amp;Checks:-3.WritevsWrite(WRvsWR)">3. Write vs Write (WR vs WR)</h3><p><strong>Conditions Checked:</strong></p><ul><li><p>Both are write transactions.</p></li><li><p>Must follow strict ordering if:</p><ul><li><p>Both have <code>SMI_ORDER_WRITE</code>.</p></li><li><p>Same cacheline.</p></li><li><p>Same source ID.</p></li><li><p>Same AXI ID (AWID).</p></li></ul></li></ul><p><strong>Why:</strong></p><ul><li><p>Preserve write ordering within the same context.</p></li></ul><p><strong>Safe If:</strong></p><ul><li><p>Writes are to different addresses or sources.</p></li><li><p>Old write has completed.</p></li></ul><h3 id="Ncore3.6DIIOrderingTests&amp;Checks:-4.WritevsRead(WRvsRD)">4. Write vs Read (WR vs RD)</h3><p><strong>Conditions Checked:</strong></p><ul><li><p>New transaction is a write; old is a read.</p></li><li><p>Either:</p><ul><li><p>Both are endpoint ordered.</p></li><li><p>Or write is request ordered and both touch the same cacheline.</p></li></ul></li></ul><p><strong>Why:</strong></p><ul><li><p>Write should not bypass an incomplete read to the same target.</p></li></ul><p><strong>Safe If:</strong></p><ul><li><p>Read completed before write seen.</p></li></ul><p /><div class="table-wrap"><table data-table-width="760" data-layout="center" data-local-id="e036a139-8755-4908-bc70-06cc2beb21e7" class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><strong>Tests</strong></p></th><th class="confluenceTh"><p><strong>Purpose</strong></p></th></tr><tr><td class="confluenceTd"><p>rd_request </p></td><td class="confluenceTd"><p>Consecutive rd all request ordering</p></td></tr><tr><td class="confluenceTd"><p>rw</p></td><td class="confluenceTd"><p>1k rw mixed ordering</p></td></tr><tr><td class="confluenceTd"><p>wr_request</p></td><td class="confluenceTd"><p>Consecutive wr all request ordering</p></td></tr><tr><td class="confluenceTd"><p>rw_endpoint_cov</p></td><td class="confluenceTd"><p>Consecutive rd wr all endpoint ordering</p></td></tr><tr><td class="confluenceTd"><p>rw_none_endpoint</p></td><td class="confluenceTd"><p>1k rw endpoint + unordered</p></td></tr><tr><td class="confluenceTd"><p>wr_endpoint_noreuse</p></td><td class="confluenceTd"><p>Consecutive wr all endpoint ordering no addr reuse</p></td></tr><tr><td class="confluenceTd"><p>rd_endpoint_noreuse</p></td><td class="confluenceTd"><p>Consecutive rd all endpoint ordering no addr reuse</p></td></tr><tr><td class="confluenceTd"><p>test_order_write_order_none</p></td><td class="confluenceTd"><p>Send rd/wr with write ordered and no ordering.</p></td></tr><tr><td class="confluenceTd"><p>test_order_write</p></td><td class="confluenceTd"><p>Send rd/wr with write ordered.</p></td></tr><tr><td class="confluenceTd"><p>rd_none</p></td><td class="confluenceTd"><p>Send consecutive rd  no order, addr reuse</p></td></tr><tr><td class="confluenceTd"><p>eo_multiple_read_test</p></td><td class="confluenceTd"><p>Send limited read EO traffic, same initiator, same EO addr range. Checks for rd_vs_rd scenario too.</p></td></tr><tr><td class="confluenceTd"><p>eo_multiple_read_test_2</p></td><td class="confluenceTd"><p>Send higher read EO traffic, same initiator, same EO addr range. Checks for rd_vs_rd scenario too.</p></td></tr><tr><td class="confluenceTd"><p>eo_multiple_write_test</p></td><td class="confluenceTd"><p>Send limited write EO traffic, same initiator, same EO addr range. Checks for wr_vs_wr also.</p></td></tr><tr><td class="confluenceTd"><p>eo_multiple_write_test_2</p></td><td class="confluenceTd"><p>Send higher write EO traffic, same initiator, same EO addr range. Checks for wr_vs_wr also.</p></td></tr><tr><td class="confluenceTd"><p>eo_ordered_write_stress</p></td><td class="confluenceTd"><p>Only EO ordered write, min AW-chnl delay, VZ=1, ST=1. </p></td></tr><tr><td class="confluenceTd"><p>write_ord_rw_same_address_test</p></td><td class="confluenceTd"><p>Read/Write txns which are Write ordered and send to same address.</p></td></tr><tr><td class="confluenceTd"><p>ro_multiple_write_test</p></td><td class="confluenceTd"><p>Only request ordered writes, VZ=1, ST=1, Same initiator, No AW chnl delay, some same/diff address. Check for wr_vs_wr also.</p></td></tr><tr><td class="confluenceTd"><p>ro_multiple_write_read_test</p></td><td class="confluenceTd"><p>Only request ordered writes/reads, VZ=1, ST=1, Same initiator, No AW chnl delay, some same/diff addres. Checks for rd_vs_wr, wr_vs_rd, rd_vs_rd, wr_vs_wr also.</p></td></tr></tbody></table></div><p /><p /><p /><ol start="2"><li><p><strong>The different types of ordering checks in the TB are-</strong> </p></li></ol><p /><div class="table-wrap"><table data-table-width="1800" data-layout="full-width" data-local-id="46e90a98-94bf-4006-bbdc-3da727e41680" class="confluenceTable"><colgroup><col style="width: 365.0px;"/><col style="width: 314.0px;"/><col style="width: 120.0px;"/><col style="width: 102.0px;"/><col style="width: 61.0px;"/><col style="width: 67.0px;"/><col style="width: 240.0px;"/><col style="width: 171.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Scenario</p></th><th class="confluenceTh"><p>Hashtag</p></th><th class="confluenceTh"><p>Where</p></th><th class="confluenceTh"><p>Implemented</p></th><th class="confluenceTh"><p>Status</p></th><th class="confluenceTh"><p>Priority</p></th><th class="confluenceTh"><p>Ref Doc</p></th><th class="confluenceTh"><p>Remarks</p></th></tr><tr><td class="confluenceTd"><p>Check and cover :  RO vs RO</p><p>Order should be guaranteed if (txn.cmd.order == REQUEST)</p><p>&amp; (outstanding_txn.cmd.order == REQUEST)</p><p>&amp; same(cmd.smi_src_unit_id)</p><p>&amp; same(cmd.cacheline())</p></td><td class="confluenceTd"><p>#Check.DII.Order_req_with_req_outstanding</p><p>#Cover.DII.Order_req_with_req_outstanding</p></td><td class="confluenceTd"><p>dii_txn.svh</p><p>dii_coverage.svh</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Ncore 3.2 DII Micro Architecture Specification</p><p>section 7.2</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Check and cover : OR vs EO</p><p>Order should be guaranteed if (txn.cmd.order == REQUEST)</p><p>&amp; (outstanding_txn.cmd.order == Endpoint)</p><p>&amp; same(cmd.smi_src_unit_id)</p><p>&amp; same(cmd.cacheline())</p></td><td class="confluenceTd"><p>#Check.DII.Order_req_with_ep_outstanding</p><p>#Cover.DII.Order_req_with_ep_outstanding</p><p /></td><td class="confluenceTd"><p>dii_txn.svh</p><p>dii_coverage.svh</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p>Medium</p></td><td class="confluenceTd"><p>Ncore 3.2 DII Micro Architecture Specification</p><p>section 7.2</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Check and cover : EO vs RO</p><p>Order should be guaranteed if (txn.cmd.order == Endpoint)</p><p>&amp; (outstanding_txn.cmd.order == REQUEST)</p><p>&amp; same(cmd.smi_src_unit_id)</p><p>&amp; same(cmd.cacheline())</p></td><td class="confluenceTd"><p /><p>#Cover.DII.Order_ep_with_req_outstanding</p></td><td class="confluenceTd"><p /><p>dii_coverage.svh</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Ncore 3.2 DII Micro Architecture Specification</p><p>section 7.2</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Check and cover : EO vs EO</p><p>Order should be guaranteed if (txn.cmd.order == Endpoint)</p><p>&amp; (outstanding_txn.cmd.order == Endpoint)</p><p>&amp; same(cmd.smi_src_unit_id)</p><p>&amp; same(Endpoint)</p></td><td class="confluenceTd"><p>#Check.DII.Order_ep_with_ep_outstanding</p><p>#Cover.DII.Order_ep_with_ep_outstanding</p></td><td class="confluenceTd"><p>dii_txn.svh</p><p>dii_coverage.svh</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Ncore 3.2 DII Micro Architecture Specification</p><p>section 7.2</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Check that all writes with write order (OR=01) from same initiator will be put in order </p></td><td class="confluenceTd"><p>#Check.DII.Order_write</p><p /></td><td class="confluenceTd"><p>dii_txn.svh</p><p /></td><td class="confluenceTd"><p>Done</p><p /></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Ncore 3.2 DII Micro Architecture Specification</p><p>section 7.2</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Check that all writes with EO or RO from same initiator are in order, regardless address  </p></td><td class="confluenceTd"><p>#Check.DII.Order_wr_obs</p><p>#Cover.DII.Order_wr_obs</p></td><td class="confluenceTd"><p>dii_txn.svh</p><p>dii_coverage.svh</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Ncore 3.2 DII Micro Architecture Specification</p><p>section 7.2</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div>