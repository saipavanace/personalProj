<p>This page is for questions that arise during Ncore Perfmon development and verification. Below are the list of such questions:</p><p><br/></p><ul style="list-style-type: square;"><li>Currently counter modes allow 3 modes: Normal count, AND, XOR. All 3 modes requires operating on 2 events. If the customer was only interested in observing 1 event and choosing it to cause the Performance counter to count, how can he do this ? Are we going to tie-off one of the event inputs to always-high or always-low ? Or should we add a fourth mode which allows the first event to pass as is ?</li></ul><p>Answer: We will tie-off event 0 to logic 0. And customer can program the second event to choose event 0 and first event as any other event of his choice. Default Normal mode in this case would use event First only to count or accumulate events. </p><p><br/></p><p><br/></p><ul style="list-style-type: square;"><li>Is the &quot;Min stall period&quot; feature only relevant for stall events and single-bit events ? In other words, should the value programmed in &quot;Min Stall period&quot; field be simply ignored for multi-bit events ?</li></ul><p>Answer: Yes. &quot;Min stall period&quot; applies only to single-bit events and will have no effect on multi-bit accumulation and status events.</p><p><br/></p><ul style="list-style-type: square;"><li>Does the &quot;Min stall period&quot; value apply for both count events (first and second) or would we need separate fields one for each ?</li></ul><p>Answer: Yes. No need to specify min stall periods separately for each event.</p><p><br/></p><p><br/></p><ul style="list-style-type: square;"><li>If the active OTT-entries event is only going to be used to perform Low-pass filtering on it, can we prepare separate registers for this and perhaps other status events (interleaved data) ? The SSR field in that case needs to be modified so that the 01 (Capture upper 63:32 bit value of count) option is removed. The Counter Control, Min stall period, Second event select could all be removed.</li></ul><p>Answer: We will keep status events such as Active OTT-entries, interleaved-data in the current table. And potentially allow any Perf Counter to do filtering or saturation on such events. Microarchitecture can bring them in as separate interfaces in order to make the multiplexing logic inside the Ncore Perfmon independent of the event mapping table for different units. All the other fields in the control register will be ignored or have no effect on status events.</p><p><br/></p><p><br/></p><ul style="list-style-type: square;"><li><p>max/saturation value: is it maximum value of received events values (like number of OTT entries) (before going throw counting mode and accumulation)? or is it maximum value after accumulation? as there is no decrementing, this register looks useless as we will have all the time maximum value in the 2 registers CNTVR and CNTSR (set to capture upper value of 63:31).</p></li></ul><p>Answer: there is no counting for this it is an instantaneous value, SSR will just contain max saturation value.  </p><p><br/></p><ul style="list-style-type: square;"><li>multibits signals counting:<ul style="list-style-type: square;"><li>is and/XOR is done bit to bit even if events are having different sizes? please confirm.</li><li>for normal counting mode, it's a classic counting like 4+5 = 9? please confirm</li></ul></li></ul><p>Answer: AND/XOR applies to single bit event, correct on normal mode</p><p><br/></p><ul style="list-style-type: square;"><li>what is exactly the &quot;interleaved dat event&quot;? for example, if transaction0 data is interleaving with transaction1 and transaction1 is interleaving with transaction2, we should count 3 (as 3 transactions are getting interleaved even if the interleaving is taking place only 2 times trans0_with_trans1 and trans1_with_trans2)</li></ul><p>Answer: we count it as 2 </p><p><br/></p><ul style="list-style-type: square;"><li>Agent Event counter : increment the counter whenever a new transaction is sent/received in Native Agent interface? is that correct?</li></ul><p>Answer: yes (SysEventTrans)</p><p><br/></p><ul style="list-style-type: square;"><li>NOC Event counter : increment the counter whenever a new transaction is sent/received in all SMI interfaces? is that correct?</li></ul><p>Answer: yes (SysEventTrans)</p><p><br/></p><ul style="list-style-type: square;"><li>Div 16 counter : could you calrify what is this event?</li></ul><p>Answer: Div by 16 counter for the clock rate </p><p><br/></p><ul style="list-style-type: square;"><li>is Rollover/Overflow is based on 32 bits counting or 64 bits? 64</li></ul><p>Answer: Depends on the configuration of the perf counter. if in 64 bit mode than it will rollover at 64 bits  </p><p><br/></p><ul style="list-style-type: square;"><li><p>No decrementing action is specified in the counter so it's not clear why to use the LPF? for the OTT entries, even if the number could decrease, the value in the accumulation register will increase all the time as it's accumulation!!</p></li></ul><p>Answer: Yes Dec not needed as OTT depth is instantaneous value. </p><p><br/></p><ul style="list-style-type: square;"><li><p>is Proxy/SMC Cache events will be included in IOAIU/DMI Perf Monitor or will they have their own Perf Monitor?</p></li></ul><p>Answer: Included </p><ul style="list-style-type: square;"><li>is Perf Monitors registers will be captured by Trace&amp;Debug mecanism in 3.2?</li></ul><p>Answer: No</p><ul style="list-style-type: square;"><li><p>Captured SMI packets: is it corresponding to all SMI packets received in all SMI ports of the Unit?</p></li></ul><p>Answer: refer to debug and trace micro arch </p><ul style="list-style-type: square;"><li><p>Dropped SMI packets: what are the conditions to consider that a Packet is dropped? (wrong message type, error in cm_status...?)</p></li></ul><p>Answer: refer to debug and trace micro arch </p><ul style="list-style-type: square;"><li>Cache replay (Proxy/SMC Cache) : plesae clarify what is about this event?</li></ul><p>Answer: Replay on Cache look up, Micro arch detail  </p><ul style="list-style-type: square;"><li><p>Cache fill stall (Proxy/SMC Cache) : plesae clarify what is about this event?</p></li></ul><p>Answer:  Cache till stall, not sure what details you are looking for, Micro arch detail  </p><ul style="list-style-type: square;"><li><p>Cache read stall (Proxy/SMC Cache) : plesae clarify what is about this event?</p></li><li><p>Cache write stall (Proxy/SMC Cache) : plesae clarify what is about this event?</p></li><li>Number of system visible Txn (DMI) : is it all received SMI transactions with VZ = 1? please confirm.</li></ul><p>Answer: yes</p><ul style="list-style-type: square;"><li>Snoop rsp Owner transfer : plesae clarify what is about this event??</li></ul><p>Answer: When snoop response says there is a owner ship transfer </p><ul style="list-style-type: square;"><li>Snoop rsp miss : this event indicated that the snoop reports a miss from the snooped Unit? to be confirmed.</li></ul><p>Answer: When snoop response says there is a miss or agent is in invalid state while SF shows the agent has the line</p><ul style="list-style-type: square;"><li>for Agent/Noc event counting events, could you confirm if counting should be done as specified in below schematic:</li><li><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="https://arterisip.atlassian.net/wiki/download/attachments/16163952/image2021-9-14_17-52-57.png?api=v2"></span></li></ul><p>Answer: One count per Request, we are not counting the protocol. </p><ul style="list-style-type: square;"><li><p>if count_clear = 1, are the 2 registers &quot;CNTVR and CNTSR&quot; cleared (independently of SSR count value) or just CNTVR ?</p></li></ul><p>Answer: Clear both VR and SR</p><p><br/></p><p><br/></p><ul><li>DMI/PROXY events: Cache no ways allocate.<ol><li>When ways partitioning is active for example with 2 ways for 1AIU agents &amp; others ways for others agents. If the others ways are totally full and the 2 ways are free for the agent AIU, Should we consider there are no ways to allocate?</li><li>it seems that in the current DMI scoreboard, if we try to allocate a way and all the way are &quot;busy&quot; , we get an error &amp; the simulation stop. So, Did you want rise a &quot;cache no ways to allocate&quot; when we access to the last way?<br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="107" src="https://arterisip.atlassian.net/wiki/download/attachments/16163952/image2021-9-16_22-38-10.png?api=v2"></span></li><li>At P2 if nack is asserted, same request can get replayed/recycled multiple times and might have all ways busy. Should this be considered as multiple events?</li></ol></li></ul><p>Answer: No ways to allocate is when for a particular transaction the allocate attribute can not be hornered and the transaction is not hornered. reasoning due to way partitioning is don't care </p><ul><li>DMI Address collision: to clarified in the DMI case: Collision between the address popped from the RTT or WTT  and the address popped  from the skid buffers ? or the address received in the skid buffers.</li></ul><p>Answer: Both </p><p>    =&gt; New question:  Have Address collision a relationship with hazard ? Therefore, we have collision wiht RAW,WAW,WAR but not in case of RAR ?</p><p><br/></p><p>Answer: Yes</p><p><br/></p><ul style="list-style-type: square;"><li>FOR DCE SNOOP RESPONSE MISS: can we consider that we have a miss if CMStatus.RV = 0 ?</li></ul><p>Answer: No, It may have done a transfer. RV just says that it is keeping a copy. We should measure this only for Snoops to owner. </p><p><br/></p><ul style="list-style-type: square;"><li>FOR Snoop rsp Owner transfer : the event is trigged when CMStatus.DT[1] = 1 and CMStatus.DC = 1. Is that correct?</li></ul><p>Answer: yes.</p><p><br/></p><ul><li>  Because the overflow interrupt needs to go out as a correctable error interrupt, will this interrupt have any ErrType defined for it and log any info in the Error registers ?</li></ul><p>Answer: yes, in  DCECNTCRx Overflow status register</p><div class="table-wrap"><table border="0" cellpadding="0" cellspacing="0" class="confluenceTable"><colgroup><col style="width: 48.0pt;" span="2" width="64"/> </colgroup><tbody><tr height="20"><td width="64" height="20" class="confluenceTd"><br/></td><td width="64" class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><p><br/></p><p><br/></p>