<h1 id="Ncore3.xResiliencyMicroarchitecture-RevisionNotes">Revision Notes</h1><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Revision</th><th class="confluenceTh">Notes</th><th class="confluenceTh">Reviser</th></tr><tr><td class="confluenceTd">v0.1</td><td class="confluenceTd">Initial Structure and Top-Level Diagram</td><td class="confluenceTd">Eric Taylor</td></tr><tr><td class="confluenceTd">v0.91</td><td class="confluenceTd">Added and Updated Information</td><td class="confluenceTd">Eric Taylor</td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr></tbody></table></div><h1 id="Ncore3.xResiliencyMicroarchitecture-TableofContents">Table of Contents</h1><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759723258108 {padding: 0px;}
div.rbtoc1759723258108 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759723258108 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759723258108'>
<ul class='toc-indentation'>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-RevisionNotes'>Revision Notes</a></li>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-TableofContents'>Table of Contents</a></li>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-Description'>Description</a></li>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-TopLevelDescription'>Top Level Description</a></li>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-BuildingBlocks'>Building Blocks</a>
<ul class='toc-indentation'>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-FunctionalSafetyController'>Functional Safety Controller</a></li>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-FaultChecker'>Fault Checker</a></li>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-InputDelay'>Input Delay</a></li>
</ul>
</li>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-CorrectableErrorThreshold'>Correctable Error Threshold</a></li>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-Memories'>Memories</a></li>
<li><a href='#Ncore3.xResiliencyMicroarchitecture-ClockandReset'>Clock and Reset</a></li>
</ul>
</div></p><p><br/></p><h1 id="Ncore3.xResiliencyMicroarchitecture-Description">Description</h1><p>This document is to outline the overall microarchitectural implementation of the Resiliency feature over all units. The purpose of resiliency is to provide protection of internal logic to satisfy ASIL-D requirements.</p><ul><li>Protection is provided through<br/>   - Unit duplication with 1 to 4 cycle delay <br/>   - Native interface protection via place holder <br/>   - Transport protection on SMI interface, this can be either parity or ECC (SECDEC) <br/>   - SRAM structures will use parity or ECC (SECDEC) for address and data </li></ul><h1 id="Ncore3.xResiliencyMicroarchitecture-TopLevelDescription">Top Level Description</h1><p><br/></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/16154762/image2023-5-10_11-8-9.png?api=v2"></span></p><p>Figure 1. Example Single Unit Diagram</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/16154762/image2023-5-10_11-4-45.png?api=v2"></span></p><p>Figure 2. Example System Diagram</p><h1 id="Ncore3.xResiliencyMicroarchitecture-BuildingBlocks">Building Blocks</h1><h2 id="Ncore3.xResiliencyMicroarchitecture-FunctionalSafetyController">Functional Safety Controller</h2><p>The functional Safety Controller has two operations.</p><ol><li>Performs BIST Functionality over the Fault Checkers</li><li>Accumulates the InterfaceFault interfaces into a single master InterfaceFault</li></ol><p>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164024/Ncore+3.0+FSC+Micro-Architecture+Specification" data-linked-resource-id="16164024" data-linked-resource-version="1" data-linked-resource-type="page">Ncore 3.0 FSC Micro-Architecture Specification</a> for more detail.</p><h2 id="Ncore3.xResiliencyMicroarchitecture-FaultChecker">Fault Checker</h2><p>The fault checker takes in four interfaces.</p><ol><li>The functional outputs.</li><li>The delayed outputs.</li><li>The functional U<span class="inline-comment-marker" data-ref="4c116191-9760-4960-887f-74ab4bd8e242">CERR/CERR</span> signals.</li><li>The delayed UCERR/CERR signals.</li></ol><p>and then drives an InterfaceFault to the safety controller.</p><p>Note that irq_c &amp; irq_uc are intentionally excluded from the functional output/delayed output since CERR/ERR interface already covered the cases.</p><p>See <a href="https://arterisip.atlassian.net/wiki/spaces/OP/pages/16777888/fault_checker" data-linked-resource-id="16777888" data-linked-resource-version="12" data-linked-resource-type="page">fault_checker</a> for more information on how this block accumulates these signals and drives InterfaceFault.</p><h2 id="Ncore3.xResiliencyMicroarchitecture-InputDelay">Input Delay</h2><p>An input delay unit is a simple unit which delays all inputs to the block by a parameterizable amount of cycles. This is used to drive the delayed unit. </p><p>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164381/checker_delay" data-linked-resource-id="16164381" data-linked-resource-version="3" data-linked-resource-type="page">checker_delay</a> for more detail.</p><h1 id="Ncore3.xResiliencyMicroarchitecture-CorrectableErrorThreshold">Correctable Error Threshold</h1><p>Each block will have a register controlling its correctable error threshold specifically for reporting to the FSC. (Each block may also have a register for a correctable error interrupt threshold).</p><p>This value is driven to the Fault Checker. In addition, this value must be part of the interfaces that are checked by the fault checker. </p><p>The fault checker uses this value to count correctable errors before it asserts a cerr_over_thresh signal to the FSC.</p><h1 id="Ncore3.xResiliencyMicroarchitecture-Memories">Memories</h1><p>An Ncore unit might have external memories. If this is the case it will instantiate it inside the top wrapper and not within the unit itself. The signaling to the memories will be included in the fault checker inputs like all other signals. The signaling from the memories will be delayed and driven to the delayed unit like all other inputs. </p><h1 id="Ncore3.xResiliencyMicroarchitecture-ClockandReset">Clock and Reset</h1><p>The tables below describe the clock and reset connections in different configurations.</p><p>clk: input clock</p><p>check_clk: input clock from fault interface</p><p>reset_n: input reset</p><p>reset_n_delay: reset_n delayed by the delay unit</p><p><br/></p><p>1.UnitDuplication = 0</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p><strong>Clock</strong></p></td><td class="confluenceTd"><p><strong>Reset</strong></p></td></tr><tr><td class="confluenceTd"><p><strong>Function Unit</strong></p></td><td class="confluenceTd"><p>clk</p></td><td class="confluenceTd"><p>reset_n</p></td></tr><tr><td class="confluenceTd"><p><strong>Fault Checker</strong></p></td><td class="confluenceTd"><p>clk</p></td><td class="confluenceTd"><p>reset_n</p></td></tr></tbody></table></div><p><br/></p><p>2.UnitDuplication = 1</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><td class="confluenceTd"><p><strong> </strong></p></td><td class="confluenceTd"><p><strong>Clock</strong></p></td><td class="confluenceTd"><p><strong>Reset</strong></p></td></tr><tr><td class="confluenceTd"><p><strong>Function Unit</strong></p></td><td class="confluenceTd"><p>clk</p></td><td class="confluenceTd"><p>reset_n</p></td></tr><tr><td class="confluenceTd"><p><strong>Duplicate Unit</strong></p></td><td class="confluenceTd"><p>check_clk</p></td><td class="confluenceTd"><p>reset_n_delay</p></td></tr><tr><td class="confluenceTd"><p><strong>Fault Checker</strong></p></td><td class="confluenceTd"><p>clk</p></td><td class="confluenceTd"><p>reset_n</p></td></tr><tr><td class="confluenceTd"><p><strong>Delay Unit</strong></p></td><td class="confluenceTd"><p>clk</p></td><td class="confluenceTd"><p>reset_n</p></td></tr></tbody></table></div><p><br/></p><p>If UnitDuplication = 1 reset_n_delay will be connected to fault checker as a separate port.</p><p>If UnitDuplication = 0, the port will be tied to high. </p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p>