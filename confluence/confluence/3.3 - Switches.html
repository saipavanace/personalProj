<p>Broadly speaking, there are three styles of switches provided in Symphony:</p><ol><li>FT (flow through)</li><li>Buffered (contains buffers along the data path)</li><li> VC (Virtual Channel Switches, either FT or Buffered)</li></ol><p>Flow through switches are worm hole switches that provide no buffering or pipelining at all in the switch. The switch arbitrats amongst the various inputs to an output. When a packet wins arbitration, the arbiter locks on that packet until the packet is completely transferred.</p><p>Buffered switches are switches that at a minimum, buffer at the input of the switch but can also buffer in various places along the data path inside the switch depending on throughput and timing requirements. </p><p>VCs can be enabled on flow through as well as buffered switches. Although flow through VC aware switches can only be used when the output port arbiter is a priority arbiter. VC enabled switches use two level hierarchical arbiter for each output port. Each arbiter can be configured with any one of the arbitration schemes supported by Symphony. The arbitration schemes supported are: </p><h3 id="id-3.3-Switches-ThearbiterstylesprovidedbySymphonyare">The arbiter styles provided by Symphony are</h3><ol><li>Round Robin Last Win Lowest Priority (RR1)</li><li>Round Robin Rotating Priority (RR2)</li><li>Priority RR1</li><li>Priority RR2</li><li>Weighted Round Robin RR1</li><li>Weighted Round Robin RR2</li><li>Priority FIFO</li></ol><p>The difference between the first two RR algorithms is that in (2) the round robin order is fixed while in (1) it is not and depends on the last port serviced. The PRR scheduler services the input ports based on the priority of the packet. The packet has two fields that deal with priority and QoS value. The arbiter services ports with same priority in a round robin decipline. </p><p>The next two styles (Weighted Round Robin RR1 and Weighted Round Robin RR2) assign weights to each input port and use a normal Round Robin arbiter in conjunction with filtering based on weights to determine if a port wins or not.</p><p>Priority FIFO uses a FIFO in conjunction with priority of the packet to determine which input port wins. Within a priority, the first packet to request a switch wins. Between priorities, the highest priority wins.</p><p>There are two style of locking for an arbiter:</p><ol><li>Lock on Valid</li><li>Lock on Ready</li></ol><p>In the ATP interface there are two signals, valid and ready. For Lock on Valid the arbiter locks when valid goes high at the start of a packet. For Lock on Ready, the arbiter locks when both valid and ready are high at the start of a packet. Locks are released when valid and ready or both high at the end of a packet.</p><h3 id="id-3.3-Switches-DifferencesinMasterArbiters">Differences in Master Arbiters</h3><p>The things that Master Arbiters are arbitrating between are VCs and not input ports, so for their use case you take the above descriptions and replace the words input ports with VCs.</p><p>Master Arbiters do not lock, but they have something called soft locking that can be enabled. When they soft lock, they give preference to VCs that have previous won the arbiter.</p><h3 id="id-3.3-Switches-VCsandflowthroughswitches">VCs and flow through switches</h3><p>When you have VCs and flow through switches, you must buffer between switches. This prevents deadlock scenarios that can happen. Buffers are a separate component in Symphony but the easiest thing to do is use a buffered switch.</p><h3 id="id-3.3-Switches-SwitchPrimitivesinSymphony">Switch Primitives in Symphony</h3><p>There are two switch primitives in Symphony:</p><ol><li>VC flow through switch</li><li>VC buffered switch</li></ol><p>To get a simple flow through switch, the switch is configured with a single VC. The same for a simple buffered switch. A VC buffered switch is actually built out of other Symphony blocks: the VC flow through switch and the pipe adapter.</p><h3 id="id-3.3-Switches-Parameters">Parameters</h3><p>The only three parameters that a customer control on a switch are:</p><ol><li>vcArbType</li><li>masterArbType</li><li>weights (used when one or both of the arbitration types is weighted round robin)</li></ol><p>All other parameters are derived by Maestro.</p><h3 id="id-3.3-Switches-Configuration">Configuration</h3><p>In the present version of Symphony the switch as no configuration register.</p>