<h3 id="id-1.Nxpconfiguration-basictest-NxpConfigurationDetailhttps://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16165408/Nxp+Configuration+Detail"><style>[data-colorid=cu1lnjqfqf]{color:#42526e} html[data-color-mode=dark] [data-colorid=cu1lnjqfqf]{color:#91a1bd}[data-colorid=t2r0w9ynu4]{color:#42526e} html[data-color-mode=dark] [data-colorid=t2r0w9ynu4]{color:#91a1bd}[data-colorid=ko4x3u4jwb]{color:#42526e} html[data-color-mode=dark] [data-colorid=ko4x3u4jwb]{color:#91a1bd}[data-colorid=rf4q6eypjt]{color:#42526e} html[data-color-mode=dark] [data-colorid=rf4q6eypjt]{color:#91a1bd}[data-colorid=iljy219fnv]{color:#42526e} html[data-color-mode=dark] [data-colorid=iljy219fnv]{color:#91a1bd}[data-colorid=mk972jh43l]{color:#006644} html[data-color-mode=dark] [data-colorid=mk972jh43l]{color:#99ffdd}</style><strong><u><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16165408/Nxp+Configuration+Detail" data-linked-resource-id="16165408" data-linked-resource-version="10" data-linked-resource-type="page">Nxp Configuration Detail</a></u></strong></h3><p>The perf test consists of three parts:&nbsp;</p><p>(1) Standalone test: To understand basic behavior of the NoC before activating concurrent initiators</p><p>(2) Concurrent test: measure the stats while increasing number of initiators</p><p>(3) QoS test:: testing customer targeted scenario with enabling QoS</p><p>(4) Others: Testing the effect of various configuration</p><p>&nbsp; &nbsp;Different data width</p><p>&nbsp; &nbsp;QoS disable effect</p><h3 id="id-1.Nxpconfiguration-basictest-(1)Standalonetest:Generatingtrafficfromoneinitiator"><strong><u>(1) Standalone test: Generating traffic from one initiator&nbsp;</u><span>&nbsp;</span>&nbsp;</strong></h3><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 72.5967%;"><colgroup><col style="width: 22.3962%;" /><col style="width: 27.043%;" /><col style="width: 50.5826%;" /></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Test List</p></th><th style="text-align: left;" class="confluenceTh"><p>Test Description</p></th><th style="text-align: left;" class="confluenceTh"><p>Summary</p></th></tr></thead><tbody><tr><td style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16165296/Test1-1+Empty+Pipe+Latency" data-linked-resource-id="16165296" data-linked-resource-version="25" data-linked-resource-type="page">Test1-1: Empty Pipe Latency</a></td><td style="text-align: left;" class="confluenceTd"><p>Measuring empty pipe latency for representative transaction type&nbsp;</p><p><br /></p><p>Cache hit case also, and break down SMC latency</p></td><td style="text-align: left;" class="confluenceTd"><p><u><strong>CAIU0 test</strong></u></p><p>ReadOnce empty pipe latency: 41 cycles (cache miss)</p><p><u><strong>NCAIU0 test</strong></u></p><p>ReadOnce empty pipe latency: 47 cycles&nbsp;(cache miss)</p><p><strong><u>Comparison</u></strong></p><p>Latency increased for 6 cycles compared to Beta 3.&nbsp;</p></td></tr><tr><td style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16165266/Test1-2+Back+to+Back+test+for+all+the+transaction+types" data-linked-resource-id="16165266" data-linked-resource-version="18" data-linked-resource-type="page">Test1-2: Back to Back test, for all the transaction types</a></td><td style="text-align: left;" class="confluenceTd">CAIU0 and NCAIU1 fully loaded test without enabling cache.&nbsp;</td><td style="text-align: left;" class="confluenceTd"><div class="content-wrapper"><p><strong><u>CAIU0 to DMI path</u></strong></p><ul><li>For the coherent transaction type, read path shows 98% and write path shows 74% utilization</li></ul><p><strong><u>NAIU0 to DMI path</u></strong></p><ul><li>Shows full utilization for all the transactions.&nbsp;</li></ul><p><a class="external-link" href="https://arterisip.atlassian.net/browse/CONC-8291" rel="nofollow" style="text-decoration: none;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image icon confluence-external-resource" src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" data-image-src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" loading="lazy" /></span>CONC-8291</a><span>&nbsp;</span>-<span>&nbsp;</span><span class="summary">[Perf-Test1] beta 2 vs. beta 3 performance comparison</span><span>&nbsp;</span><span data-colorid="iljy219fnv" style="text-decoration: none;" class="aui-lozenge aui-lozenge-subtle aui-lozenge-default jira-macro-single-issue-export-pdf">OPEN</span></p><p><a class="external-link" href="https://arterisip.atlassian.net/browse/CONC-8293" rel="nofollow" style="text-decoration: none;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image icon confluence-external-resource" src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" data-image-src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" loading="lazy" /></span>CONC-8293</a><span>&nbsp;</span>-<span>&nbsp;</span><span class="summary">[Perf] Test 1 - difference between qos enable vs not enable case</span><span>&nbsp;</span><span data-colorid="ko4x3u4jwb" style="text-decoration: none;" class="aui-lozenge aui-lozenge-subtle aui-lozenge-default jira-macro-single-issue-export-pdf">OPEN</span></p><p><a class="external-link" href="https://arterisip.atlassian.net/browse/CONC-8292" rel="nofollow" style="text-decoration: line-through;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image icon confluence-external-resource" src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" data-image-src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" loading="lazy" /></span>CONC-8292</a><span>&nbsp;</span>-<span>&nbsp;</span><span class="summary">[Perf] Test1 - difference between unloaded and fully loaded latency</span><span>&nbsp;</span><span data-colorid="mk972jh43l" style="text-decoration: none;" class="aui-lozenge aui-lozenge-subtle aui-lozenge-success jira-macro-single-issue-export-pdf">RESOLVED</span></p></div></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16165262/Test1-3+CAIU+NCAIU+to+DMI+path+is+tested+with+scenario" data-linked-resource-id="16165262" data-linked-resource-version="8" data-linked-resource-type="page">Test1-3 CAIU/NCAIU to DMI path is tested with scenario</a></td><td colspan="1" style="text-align: left;" class="confluenceTd">Standalone test with scenario. Focused on DMI path.</td><td colspan="1" style="text-align: left;" class="confluenceTd"><p><u><strong>Observation</strong></u></p><ul><li>CAIU0 path doesn&rsquo;t meet the expected BW by 10%, mainly from the credit of the DCE RBID.</li></ul><p><u><strong>Comparison</strong></u></p><ul><li>Overall, Nov-4 RTL shows similar BW with slightly better latency.&nbsp;</li></ul></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16165278/Test1-4+NCAIU+to+DII+path+is+tested+with+scenario" data-linked-resource-id="16165278" data-linked-resource-version="8" data-linked-resource-type="page">Test1-4 NCAIU to DII path is tested with scenario</a></td><td colspan="1" style="text-align: left;" class="confluenceTd">Standalone test with scenario. Focused on DII path.</td><td colspan="1" style="text-align: left;" class="confluenceTd"><div class="content-wrapper"><p><strong> </strong><strong><u>Observation</u></strong></p><ul><li>Shows around 5.8GB/s for device type transaction&nbsp;<ul><li>RTT in DII is main bottleneck.</li></ul></li><li>Shows around 16.8 ~ 16.9GB/s for Non-device type transaction<ul><li>NCAIU to DII credit is main bottleneck&nbsp;</li></ul></li><li>Compared to the beta 3, do not see meaningful performance changes.</li></ul><p><u><strong>Comparison</strong></u></p><ul><li>Compared to the beta 3, do not see meaningful performance changes.</li><li>

    

            



<style>
    .jira-issue {
        padding: 0 0 0 2px;
        line-height: 20px;
    }

    .jira-issue img {
        padding-right: 5px;
    }
    .jira-issue .aui-lozenge {
        line-height: 18px;
        vertical-align: top;
    }

    .jira-issue .icon {
        background-position: left center;
        background-repeat: no-repeat;
        display: inline-block;
        font-size: 0;
        max-height: 16px;
        text-align: left;
        text-indent: -9999em;
        vertical-align: text-bottom;
    }
</style>

    <span class="confluence-jim-macro jira-issue" data-jira-key="CONC-8529">
                <a href="https://arterisip.atlassian.net/browse/CONC-8529?src=confmacro" class="jira-issue-key">CONC-8529</a>
                            </span>
</li></ul></div></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16165318/Test1-5+Cacheable+traffic+test+from+CAIU" data-linked-resource-id="16165318" data-linked-resource-version="8" data-linked-resource-type="page">Test1-5 Cacheable traffic test from CAIU</a></td><td colspan="1" style="text-align: left;" class="confluenceTd">CAIU traffic fully loaded test with cache enabled traffic. Tested hit, miss, and miss/eviction case separately.&nbsp;</td><td colspan="1" style="text-align: left;" class="confluenceTd"><div class="content-wrapper"><p><u><strong>Observation</strong></u></p><ul><li>Read shows 100% utilization, but write utilization shows 74.4% and 61.5% with Evict.</li><li>When the performance drop case, RBID of the DCE shows the short of the credit.</li></ul><p><u><strong>Comparison</strong></u></p><ul><li>Newly updated RTL shows 2% write performance degradation&nbsp;</li></ul><p><a class="external-link" href="https://arterisip.atlassian.net/browse/CONC-8326" rel="nofollow" style="text-decoration: none;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image icon confluence-external-resource" src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" data-image-src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" loading="lazy" /></span>CONC-8326</a><span>&nbsp;</span>-<span>&nbsp;</span><span class="summary">[Perf] Test 1-4 Cache hit performance lower than expectation</span><span>&nbsp;</span><span data-colorid="cu1lnjqfqf" style="text-decoration: none;" class="aui-lozenge aui-lozenge-subtle aui-lozenge-default jira-macro-single-issue-export-pdf">OPEN</span></p></div></td></tr></tbody></table></div><p><br /></p><h3 id="id-1.Nxpconfiguration-basictest-(2)Concurrenttest:Basictestwithinitiatingmultiplemasters"><u><strong>(2) Concurrent test: Basic test with initiating multiple masters</strong></u></h3><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 72.7072%;"><colgroup><col style="width: 22.134%;" /><col style="width: 27.0019%;" /><col style="width: 50.8859%;" /></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Test List</p></th><th colspan="1" class="confluenceTh">Test description</th><th style="text-align: left;" class="confluenceTh"><p>Summary</p></th></tr></thead><tbody><tr><td style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16165304/Test1-6+Snoop+filter+basic+stress+test" data-linked-resource-id="16165304" data-linked-resource-version="8" data-linked-resource-type="page">Test1-6: Snoop filter basic stress test</a></td><td colspan="1" class="confluenceTd"><span class="legacy-color-text-blue3">The purpose of this test is to increase snoop traffic gradually and see the latency/BW impact in the system</span></td><td style="text-align: left;" class="confluenceTd"><p><u><strong>Observation</strong></u></p><ul><li>Maximum achievable snoop BW is 53.26%, because of the <strong>RB and MRD</strong> credit limit of the DCE.</li><li>If we insert more snoop traffic, it only increases the latency. Again NCAIU 1 shows worse latency.</li><li>Can get almost 95% of the BW when adding more traffic targeting DMI.</li></ul><p><strong><u>Comparison</u></strong></p><ul><li>Observing around 2% of performance degradation compared to beta 3, when coherent traffic is fully loaded.</li></ul></td></tr><tr><td style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164777/Test1-7+Write+Concurrent+Test" data-linked-resource-id="16164777" data-linked-resource-version="11" data-linked-resource-type="page">Test1-7 Write Concurrent Test</a></td><td colspan="1" class="confluenceTd"><p>The purpose of this test is to increase write traffic gradually and see the latency/BW impact in the system.&nbsp;</p></td><td style="text-align: left;" class="confluenceTd"><div class="content-wrapper"><p><u><strong>Observation</strong></u></p><ul><li>For WNSP, Utilization drops around <strong>25%</strong> when three ncaiu0, 1, and 2 is enabled.</li><li>For WLU, maximum BW is 75% regardless of the increase of the traffic. (<strong>Cannot make 100% BW</strong>)</li><li>NCAIU1 shows much higher latency then other initiators. In worst case it shows 500 cycle latency. Moreover, it shows similar BW number with other initiators.</li><li>The main bottleneck is DCE<span>&nbsp;</span><strong>RB</strong></li></ul><p><strong><u>Comparison</u></strong></p><ul><li>When compared to beta 3 RTL, non-coherent traffic (Case 1 and Case 2) does not have any perf degradation, and coherent case (Case3, 4 and 5) is observing 0.7~3% BW degradation.</li></ul><p><u><strong>Outstanding JIRA</strong></u></p><p><a class="external-link" href="https://arterisip.atlassian.net/browse/CONC-8351" rel="nofollow" style="text-decoration: none;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image icon confluence-external-resource" src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" data-image-src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" loading="lazy" /></span>CONC-8351</a><span>&nbsp;</span>-<span>&nbsp;</span><span class="summary">[Perf] Test1-7 Write concurrent test</span><span>&nbsp;</span><span data-colorid="t2r0w9ynu4" style="text-decoration: none;" class="aui-lozenge aui-lozenge-subtle aui-lozenge-default jira-macro-single-issue-export-pdf">OPEN</span></p></div></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164770/Test1-8+Read+Concurrent+Test" data-linked-resource-id="16164770" data-linked-resource-version="11" data-linked-resource-type="page">Test1-8 Read Concurrent Test</a></td><td colspan="1" class="confluenceTd">The purpose of this test is to increase read traffic gradually and see the latency/BW impact in the system. Observing CCMP level latency in addition to resource/credit stats. From the stats we can see where the bottleneck is.</td><td colspan="1" style="text-align: left;" class="confluenceTd"><div class="content-wrapper"><p><u><strong>Observation</strong></u></p><ul><li>Utilization drops around <strong>25%</strong> when three NCAIUs (0, 1, and 2) are enabled.</li><li>NCAIU1 shows much higher latency then other initiators. SMI level latency is identical with other NCIUs.</li><li>DCE consumes around 140 cycles</li><li>The main bottleneck is<strong> DCE MRD</strong> credit.</li></ul><p><u><strong>Comparison</strong></u></p><ul><li>BW degraded 2% only when the system cannot achieve full BW compare to Beta 3 RTL (using 11/04 RTL)&nbsp;</li></ul><p><u><strong>Outstanding JIRA</strong></u></p><ul><li><a class="external-link" href="https://arterisip.atlassian.net/browse/CONC-8369" rel="nofollow" style="text-decoration: none;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image icon confluence-external-resource" src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" data-image-src="https://arterisip.atlassian.net/secure/viewavatar?size=xsmall&amp;avatarId=10718&amp;avatarType=issuetype" loading="lazy" /></span>CONC-8369</a><span>&nbsp;</span>-<span>&nbsp;</span><span class="summary">[Perf] Read performance degradation when third initiator is inserted</span><span>&nbsp;</span><span data-colorid="rf4q6eypjt" style="text-decoration: none;" class="aui-lozenge aui-lozenge-subtle aui-lozenge-default jira-macro-single-issue-export-pdf">OPEN</span></li></ul></div></td></tr></tbody></table></div><p><br /></p><h3 id="id-1.Nxpconfiguration-basictest-(3)QoSTest:"><u><strong>(3) QoS Test:&nbsp;</strong></u></h3><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 72.6521%;"><colgroup><col style="width: 22.1115%;" /><col style="width: 27.1522%;" /><col style="width: 50.7242%;" /></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Test List</p></th><th style="text-align: left;" class="confluenceTh"><p>Test Description</p></th><th style="text-align: left;" class="confluenceTh"><p>Summary</p></th></tr></thead><tbody><tr><td style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16165324/Test2-1+QoS+pcie+ncaiu+focused+scenario" data-linked-resource-id="16165324" data-linked-resource-version="25" data-linked-resource-type="page">Test2-1 QoS pcie ncaiu focused scenario</a></td><td style="text-align: left;" class="confluenceTd">PCIe scenario, not including CPU traffic</td><td style="text-align: left;" class="confluenceTd"><p><strong><u>Read intensive case</u></strong></p><ul><li>Utilization: observing almost 100% utilization from saturation point.</li><li>Resource status: The credit/resource is stable except DCE <strong>MRD</strong> credit.&nbsp;DCE MRD credit shows bottleneck.</li><li>Transaction with the higher QOS value shows better latency numbers.<ul><li>In this experiment, around <strong>11~14%</strong> of the improvement is shown.</li></ul></li></ul><p><strong><u>Write intensive case</u></strong></p><ul><li>Utilization: observing overall 95~99% utilization.</li><li>Resource status: The credit/resource is stable except DCE <strong>RB</strong> credit.&nbsp;</li><li><strong>Not</strong> showing meaningful latency differences when applied difference QoS values.&nbsp;</li></ul></td></tr><tr><td style="text-align: left;" class="confluenceTd"><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164760/Test2-2+QoS+pcie+scenario+-+CAIU+included" data-linked-resource-id="16164760" data-linked-resource-version="19" data-linked-resource-type="page">Test2-2 QoS pcie scenario - CAIU included</a></td><td style="text-align: left;" class="confluenceTd"><p>PCIe scenario, including CPU traffic</p></td><td style="text-align: left;" class="confluenceTd"><p><strong><u>Read intensive case</u></strong></p><ul><li>Utilization is lower than write case. Showing around 42GB/s.</li><li>Resource status: The credit/resource is stable except DCE <strong>MRD</strong> credit. DCE MRD credit shows bottleneck.</li><li>Transaction with higher QOS value shows better latency numbers.<ul><li>The traffic with higher qos value shows around&nbsp;<strong>20%</strong> of the latency improvement</li></ul></li></ul><p><strong><u>Write intensive case</u></strong></p><ul><li>Utilization is slightly higher than read case. Showing around 43GB/s.</li><li>Resource status: The credit/resource is stable except DCE <strong>RB</strong> credit. DCE MRD credit shows bottleneck.</li><li>CAIU0 shows better latency number (CAIU is measuring latency read/write together).</li><li>Write latency shows differences but not as dramatic as read cases.</li></ul><p>In all the cases, DCE credits are not well balanced need to know the reason. Might be env issue (generated traffic balancing?)&nbsp;</p></td></tr></tbody></table></div><p><br /></p><p><br /></p><p><br /></p>