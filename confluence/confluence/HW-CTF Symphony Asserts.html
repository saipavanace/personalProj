<h1 id="HW-CTFSymphonyAsserts-CurrentAssertsinTACHLBlocks">Current Asserts in TACHL Blocks</h1><p>
<style>
    .html-viewer-unsafe-html-content {
        display: none;
    }

    .html-viewer-content {
        height: 650px;
        width: 100%;
        position: relative;
    }

    .html-viewer-iframe {
        height: inherit;
        width: inherit;
        border: none;
    }

    .html-viewer-tab-bar { /* The button group */
        width: max-content;
    }

    .html-viewer-tab-bar button {
        background-color: #F6F6F6; /* Light grey background */
        border: 1px solid #D0D0D0; /* Dark grey border */
        color: #525252; /* Dark grey text */
        padding: 5px 12px;
        cursor: pointer;
        float: left;
        overflow: auto;
        letter-spacing: 0.75px; /* Allows for letters to be clear and readable when bolded */
        height: 32px;
    }

    .html-viewer-tab-bar button:not(:nth-last-of-type(1)) {
        border-right: none; /* Prevents double borders */
    }

    .html-viewer-tab-bar button:hover {
        background-color: #FFFFFF !important;
        color: #0E6232 !important; /* Black text */
        text-shadow: -0.5px 0 black, 0.5px 0 #0E6232 !important; /* Black bolded text */
    }

    .html-viewer-scroller { /* The scrollbar */
        width: 100%;
        overflow-x: auto;
    }
</style>

<div class="office-container">
            <img src="https://api.media.atlassian.com/file/32b88cc3-1388-40ab-beb9-dfaee71ca956/image?token=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiI3NWE4Y2IwYS1hMGYyLTQwZDktYTQ2Ny1mNzA2NzhiZTQzMGQiLCJhY2Nlc3MiOnsidXJuOmZpbGVzdG9yZTpmaWxlOjMyYjg4Y2MzLTEzODgtNDBhYi1iZWI5LWRmYWVlNzFjYTk1NiI6WyJyZWFkIl19LCJleHAiOjE3NTk3MjYzNzAsIm5iZiI6MTc1OTcyMzM3MCwiYWFJZCI6IjYyNGIzODA3YTYyOWMzMDA2OGE3OWY1MCJ9.ccl2V80xEnNHLzc-LVH619qIdwuoW7ju0ZAnZtNmW3Q&client=75a8cb0a-a0f2-40d9-a467-f70678be430d&name=asserts.xlsx" />
    </div>
</p><h1 id="HW-CTFSymphonyAsserts-AssertFormattingandGuidelines">Assert Formatting and Guidelines</h1><p><br/></p><p>Currently verilator fails when you enable asserts, thus you must include the following params when running any tests. </p><p>-pof 4                                   &lt;== This will tell the simulation to proceed on verilator fail. </p><p>-rto \{\\\&quot;assertOn\\\&quot;:true} &lt;== This will pass the global parameter to every TACHL module. </p><p><br/></p><p>Example: </p><p>runsim -c maestro_4x4_axi_axi_firewall_12Feb21c_tmp6_json -t axi4_multi_beat_incr_wr_rd_firewall -pof 4 -rto \{\\\&quot;assertOn\\\&quot;:true}</p><p><br/></p><p>1) All asserts must be conditionally made based on the assertOn parameter. The top of every file should have the following. assertOn doesnt need to be passed from block to block</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">u.paramDefault(&#39;assertOn&#39;, &#39;boolean&#39;, false);
...
var assertOn  = u.getParam(&#39;assertOn&#39;);</pre>
</div></div><p><br/></p><p>2) All asserts must have a comment above them in the following format:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">/*
[@CoverProperty,@Assert] &lt;Name of Assert/Cover Property&gt; : &lt;Description of Assert/Cover Property&gt;
*/</pre>
</div></div><p>For example for this cover property:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">property assert_cap_max;
       @(posedge a_clk) disable iff (~a_reset_n) (in_qos_prime_lp_\=j=\ &gt; qm\=j=);
endproperty

COVER_ASSERT_CAP_MAX_\=j=\ : cover property (assert_cap_max);</pre>
</div></div><p>It would be formatted:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">\js if (assertOn) {
      /*
       @CoverProperty COVER_ASSERT_CAP_MAX_\=j=\ : This will be covered if the QoS has to be clipped to the max QoS value.
      */

	  property assert_cap_max;
         @(posedge a_clk) disable iff (~a_reset_n) (in_qos_prime_lp_\=j=\ &gt; qm\=j=);
      endproperty

      COVER_ASSERT_CAP_MAX_\=j=\ : cover property (assert_cap_max);
\js }</pre>
</div></div><p>or for this assert:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">\js if (enableQosMap) {
	property assert_min_gt_max;
       @(posedge a_clk) disable iff (~a_reset_n)  (qn_\=j=\ &lt;= qm\=j=\);
    endproperty

    ASSERT_MIN_GT_MAX_\=j=\ : assert property (assert_min_gt_max) else $error(&quot;Min QoS Value Larger than Max QoS value for Queue &quot; + \=j=\);
\js }</pre>
</div></div><p>It would be formatted:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">\js if (assertOn) {
  \js if (enableQosMap) {
      /*
       @Assert ASSERT_MIN_GT_MAX_\=j=\ : This will assert if the the registers are configured so that the min QoS is larger than the max QoS.
      */

	  property assert_min_gt_max;
         @(posedge a_clk) disable iff (~a_reset_n)  (qn_\=j=\ &lt;= qm\=j=\);
      endproperty

      ASSERT_MIN_GT_MAX_\=j=\ : assert property (assert_min_gt_max) else $error(&quot;Min QoS Value Larger than Max QoS value for Queue &quot; + \=j=\);
   \js }
\js }</pre>
</div></div><p class="auto-cursor-target">Assert example #2. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">\jsbegin
/* istanbul ignore if */
if (assertOn) { \jsend
    /*
     @Assert ASSERT_ERR_SELECT_ONE_HOT : This will assert if context_error_sel is not one-hot or zero when error_valid is asserted. 
    */
    ASSERT_ERR_SELECT_ONE_HOT: assert property (@(posedge clk) disable iff (~reset_n) !(error_valid &amp;&amp; !$onehot(context_error_sel)) )
        else begin $error(&quot;CTL_TARG_nodeId_\=nodeId=\:Error response select is not one-hot during error !&quot;); #100 $finish; end
\jsbegin
} \jsend
</pre>
</div></div><p class="auto-cursor-target">3) Asserts can be grouped together:</p><p class="auto-cursor-target">For example this:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">COVER_ASSERT_CAP_MAX_\=j=\ : cover property ( @(posedge a_clk) (in_qos_prime_lp_\=j=\ &gt; qm\=j=\) );
COVER_ASSERT_CAP_MIN_\=j=\ : cover property ( @(posedge a_clk) (in_qos_prime_lp_\=j=\ &lt; qn\=j=\) );</pre>
</div></div><p class="auto-cursor-target">Could be formatted like this:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">\js if (assertOn) {
  /*
    @CoverProperty COVER_ASSERT_CAP_MAX_\=j=\ : This will be covered if the QoS has to be clipped to the max QoS value.
    @CoverProperty COVER_ASSERT_CAP_MIN_\=j=\ : This will be covered if the QoS has to be clipped to the min QoS value.
  */

  property assert_cap_max;
         @(posedge a_clk) disable iff (~a_reset_n) (in_qos_prime_lp_\=j=\ &gt; qm\=j=\) ;
  endproperty

  property assert_cap_min;
         @(posedge a_clk) disable iff (~a_reset_n) (in_qos_prime_lp_\=j=\ &gt; qm\=j=\) ;
  endproperty

  COVER_ASSERT_CAP_MAX_\=j=\ : cover property (assert_cap_max);
  COVER_ASSERT_CAP_MIN_\=j=\ : cover property (assert_cap_min);
\js }</pre>
</div></div>