<h1 id="MigratingNcore3.2to3.4-TipstoMigratingNcore3.2Designsto3.4">Tips to Migrating Ncore 3.2 Designs to 3.4</h1><p>This document will provide information on how to migrate your design from Ncore 3.2 to 3.4 using the GUI and command line. Your design may come in one of two forms: tcl or mpf file. A section for each form is shown below.</p><p /><h2 id="MigratingNcore3.2to3.4-NewInNcore3.4">New In Ncore 3.4</h2><p> </p><p>Below are changes in the different states of design creation.</p><div class="table-wrap"><table data-layout="default" data-local-id="43d33ef3-f715-4566-bde5-863a61839d2c" class="confluenceTable"><colgroup><col style="width: 188.0px;"/><col style="width: 572.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Task State</strong></p></td><td class="confluenceTd"><p><strong>Changes in Ncore 3.4</strong></p></td></tr><tr><td class="confluenceTd"><p><code>SoC Specification/Domains</code></p></td><td class="confluenceTd"><p><code>No change.</code></p></td></tr><tr><td class="confluenceTd"><p><code>SoC Specification/Safety</code></p></td><td class="confluenceTd"><p><code>New state to specify safety configuration such as ASIL level.</code></p><p><code>config resilienceEnabled duplicationEnabled memoryProtectionType resiliencyProtectionType</code></p><p><code>NO_ASIL      false             false           NONE   (settable)     NONE (settable)</code></p><p><code>ASIL_A       true              false           PARITY (settable)     PARITY (settable)</code></p><p><code>ASIL_B       true              true            PARITY (settable)     PARITY (settable)</code></p><p><code>ASIL_D       true              true            SECDED                SECDED</code></p></td></tr><tr><td class="confluenceTd"><p><code>System Assembly/Sockets</code></p></td><td class="confluenceTd"><p><code>Must create config access socket (&quot;debug_apb&quot; port)</code></p><p><code>Set number of DCEs in subsystem's NcoreSetting.</code></p></td></tr><tr><td class="confluenceTd"><p><code>System Assembly/Memory Map</code></p></td><td class="confluenceTd"><p><code>No change.</code></p></td></tr><tr><td class="confluenceTd"><p><code>System Assembly/Communication</code></p></td><td class="confluenceTd"><p><code>New state to trim the connections between sockets.</code></p></td></tr><tr><td class="confluenceTd"><p><code>Structural Design/Topology Structure</code></p></td><td class="confluenceTd"><p><code>Topology parameters: resilienceEnabled, duplicationEnabled, memoryProtectionType, and resiliencyProtectionType have been moved to Safety state.</code></p><p><code>AIU parameter: hasProxyCache is not needed.</code></p></td></tr><tr><td class="confluenceTd"><p><code>Mapping/Mapper</code></p></td><td class="confluenceTd"><p><code>No change.</code></p></td></tr><tr><td class="confluenceTd"><p><code>Refinement/Topology Detail)</code></p></td><td class="confluenceTd"><p><code>No change.</code></p></td></tr><tr><td class="confluenceTd"><p><code>Export/Export</code></p></td><td class="confluenceTd"><p><code>No change.</code></p></td></tr></tbody></table></div><p> </p><p /><h2 id="MigratingNcore3.2to3.4-MigratingTheMpfFileUsingtheGUI">Migrating The Mpf File Using the GUI</h2><p> </p><p>After importing the design, maestro will put the design in the “System Assembly / Sockets” state, if the design has gone past this state. In the “Task View”, click on “Move forward to …” to advance to the next state until to the desired state. Fix any issues to move forward to the next state.</p><p>If there is any missing routes in the “Structural Design / Topology Structure” state, the user must provide the routes. A simple GUI click “Preparing it for Manual Editing” on the network to use the existing switches to create the missing routes. The user should verify that the routes are automatically created as desired. The user should also click on “Insert Adapters” to ensure all the necessary adapters are created.</p><p /><h2 id="MigratingNcore3.2to3.4-MigratingTheMpfFileUsingtheCommandLine">Migrating The Mpf File Using the Command Line</h2><p> </p><p>After importing the design, maestro will put the design in the “System Assembly / Sockets” state. You will need to advance the state before generating RTL. That can be done via the tcl command “<code>run_task -name move_to_next_state</code>&quot;. Fix any issues before moving forward to the next state.</p><p>After advancing the state three times, maestro should be at “Structural Design / Topology Structure” state. The tcl command to query the current state is “<code>get_current_state</code>&quot;.</p><h3 id="MigratingNcore3.2to3.4-AddMissingRoutes">Add Missing Routes</h3><p>Then the design should run checks to validate the design. If routes, are missing, the user must add them. The tcl commands are:</p><p><code>set networks [get_objects -type network -parent $topology]</code></p><p><code>foreach netw $networks {</code></p><p><code>  connect_network -name $netw</code></p><p><code>}</code></p><p> </p><p>If the design encounters the following error:</p><p>Error: [ADM-4310] &lt;project/chip/system/subsystem/topology/ncore_debug_atu, project/chip/system/subsystem/topology/ncore_debug_atu&gt; This NonCoherentNetworkInterface has no power ports. Please run the Insert Power Management automation.</p><p> </p><p>The tcl commands to run the power management automation:</p><p><code>set chip [get_objects -parent root -type chip]</code></p><p><code>set topology [get_objects -parent $chip -type topology]</code></p><p><code>run_generator -topology $topology -name power</code></p><p> </p><p>If the design encounters the error:</p><p>Error: [ADM-4640] &lt;project/chip/system/subsystem&gt; At least one Socket of type EXTERNAL_DEBUG is mandatory. Please create one, for example with the &quot;create_config_access_socket&quot; Task.</p><p>The design needs to insert an external_debug socket into the design. The following Tcl commands should be inserted just before the memory map is created. Depending on how the script was written, use of one of the following,</p><div class="table-wrap"><table data-layout="default" data-local-id="e5774142-5cd5-42e1-9726-84c5109cffad" class="confluenceTable"><colgroup><col style="width: 134.0px;"/><col style="width: 626.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>Script Type</p></td><td class="confluenceTd"><p>New debug_apb tcl commands</p></td></tr><tr><td class="confluenceTd"><p>GUI</p></td><td class="confluenceTd"><p><code>run_task -name create_config_access_socket</code></p></td></tr><tr><td class="confluenceTd"><p>Tcllib</p></td><td class="confluenceTd"><p><code>Socket::create_debug_apb_socket -subsystem $subsystem -name &quot;debug_apb&quot; -clock $default_clock</code></p></td></tr><tr><td class="confluenceTd"><p>Tcllib with callback procs</p></td><td class="confluenceTd"><p><code>Socket::set_debugApbSocketClock $subsystem [CsrNetwork::get_clock]</code></p></td></tr><tr><td class="confluenceTd"><p>Native tcl commands</p></td><td class="confluenceTd"><p><code>set debug_sock [create_object -parent $subsystem -type socket -name &quot;debug_apb&quot;]</code></p><p><code>set_attribute -object $debug_sock -name &quot;socketFunction&quot; -value &quot;EXTERNAL_DEBUG&quot;</code></p><p><code>update_object -name $debug_sock -bind $default_clock -type domain</code></p></td></tr></tbody></table></div><p> </p><p>If the design encounters the error:</p><p>Error: [ADM-4310] &lt;project/chip/system/subsystem/topology/ncore_debug_atu, project/chip/system/subsystem/topology/ncore_debug_atu&gt; This NonCoherentNetworkInterface has no power ports. Please run the Insert Power Management automation.</p><p> </p><p><code>set chip [get_objects -parent root -type chip]</code></p><p><code>set topology [get_objects -parent $chip -type topology]</code></p><p><code>run_generator -topology $topology -name power</code></p><p> </p><p>Finally to ensure all the width and clock adapters are inserted, the tcl command is “<code>run_generator -topology $topology -name adapters</code>&quot;.</p><p>To verify the design is ready, the GUI provides “Run Checker”. The tcl command is “<code>run_checker</code>&quot;.</p><p>If there is no errors, the design is ready for mapping.</p><p /><h2 id="MigratingNcore3.2to3.4-MigratingTheTclFile">Migrating The Tcl File</h2><p> </p><p>Parameters that are obsolete in Ncore3.4. Some may have a replacement parameter.</p><div class="table-wrap"><table data-layout="default" data-local-id="9c013aea-d1a2-4c9a-8f79-071f5bb4b1db" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><strong>Ncore 3.2</strong></p></td><td class="confluenceTd"><p><strong>Ncore 3.4</strong></p></td></tr><tr><td class="confluenceTd"><p>Object: topology Parameter: memoryProtectionType</p></td><td class="confluenceTd"><p>After creating clocks.</p><p>Object: safety manager. Parameter: memoryProtectionType</p></td></tr><tr><td class="confluenceTd"><p>Object: socket Parameter: params/eAc</p></td><td class="confluenceTd"><p>Object: socket. Parameter: params/enableDVM</p></td></tr><tr><td class="confluenceTd"><p>DmiInterleaving::set_groups_MemorySet</p><p>DmiInterleaving::set_groups_MemorySet0</p><p>DmiInterleaving::set_groups_MemorySet1</p></td><td class="confluenceTd"><p>Interleaving::set_initiator_group</p><p>Interleaving::set_groups_MemorySet0</p><p>Interleaving::set_groups_MemorySet1</p></td></tr><tr><td class="confluenceTd"><p>Object: topology. Parameter: dceInterleavingPrimaryBits ?</p></td><td class="confluenceTd"><p>Object: memory_map. Parameter: dceInterleavingBits ?</p></td></tr><tr><td class="confluenceTd"><p>DmiInterleaving::create_function</p><p>DmiInterleaving::set_PrimaryBits</p></td><td class="confluenceTd"><p>Interleaving::create_function</p><p>Interleaving::set_PrimaryBits</p></td></tr><tr><td class="confluenceTd"><p>Dce::set_nDmiMrdCredits</p><p>Object: dce. Parameter: nDmiMrdCredits</p></td><td class="confluenceTd"><p>obsolete</p></td></tr><tr><td class="confluenceTd"><p>Object: caiu, ncaiu</p><p>Parameter: nDceCmdCredits</p><p>Parameter: nDmiCmdCredits</p><p>Parameter: nDiiCmdCredits</p></td><td class="confluenceTd"><p>obsolete</p></td></tr><tr><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Object: safety_configuration. Parameter: safetyConfig</p></td></tr><tr><td class="confluenceTd"><p>Object: topology. Parameter: memoryProtectionType</p></td><td class="confluenceTd"><p>Object: safety_configuration. Parameter: memoryProtectionType</p></td></tr><tr><td class="confluenceTd"><p>Object: topology. Parameter: duplicationEnabled</p></td><td class="confluenceTd"><p>Object: safety_configuration. Parameter: duplicationEnabled</p></td></tr><tr><td class="confluenceTd"><p>Object: topology. Parameter: resiliencyProtectionType</p></td><td class="confluenceTd"><p>Object: safety_configuration. Parameter: resiliencyProtectionType</p></td></tr><tr><td class="confluenceTd"><p> </p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p>Object: subsystem/NcoreSettings. Parameter: dceCount</p></td><td class="confluenceTd"><p>n/a</p></td></tr><tr><td class="confluenceTd"><p>Object: switch Parameter: portDataWidth</p></td><td class="confluenceTd"><p>obsolete</p></td></tr><tr><td class="confluenceTd"><p>Object: ncaiu. Parameter: nonCoherentMode</p></td><td class="confluenceTd"><p>obsolete</p></td></tr><tr><td class="confluenceTd"><p>n/a</p></td><td class="confluenceTd"><p>Object: dmi</p><p>Parameter: nCMDSkidBufSize, nCMDSkidBufArb, nMrdSkidBufArb, nMrdSkidBufArb</p></td></tr><tr><td class="confluenceTd"><p>Object: clock_subdomain. Parameter unitClockGating</p></td><td class="confluenceTd"><p>Object: clock_region. Parameter: unitClockGating</p></td></tr><tr><td class="confluenceTd"><p> </p></td><td class="confluenceTd"><p> </p></td></tr></tbody></table></div><h2 id="MigratingNcore3.2to3.4-"> </h2><p /><h1 id="MigratingNcore3.2to3.4-TclCommandsDifferencesBetweenNcore3.2and3.4">Tcl Commands Differences Between Ncore 3.2 and 3.4</h1><p> </p><div class="table-wrap"><table data-layout="default" data-local-id="95bb3a78-1210-4947-8316-fae0c31b37d4" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><strong>#### Ncore 3.2 Version ####</strong></p><p> </p><p>create_project -name simple -path . -license_token Arteris/Dev</p><p> </p><p>run_task -name initialize_design -choice ncore</p><p> </p><p>run_task -name partition_into_domains</p><p>rename_object -name project/default_chip -new_name chip</p><p>rename_object -name project/chip/default_power_region -new_name pwrRegion</p><p>rename_object -name project/chip/pwrRegion/default_power_domain -new_name pwrDomain</p><p>rename_object -name project/chip/default_clock_region -new_name clkRegion</p><p>rename_object -name project/chip/clkRegion/default_clock_domain -new_name clkDomain</p><p>rename_object -name project/chip/clkRegion/clkDomain/default_clock_sub_domain -new_name clkSubdomain</p><p>run_task -name move_to_next_state</p><p> </p><p> </p><p>#########################</p><p>#### Creating clocks ####</p><p>#########################</p><p> </p><p>set chip      [get_objects -parent project -type chip]</p><p>set clkRegion [get_objects -parent $chip -type clock_region]</p><p>set clkDomain [get_objects -parent $clkRegin -type clock_domain]</p><p>set clkSubdomain [get_objects -parent $clkDomain -type clock_subdomain]</p><p>set default_clock $clkSubdomain</p><p>set system    [get_objects -parent $chip -type system]</p><p>set subsystem [get_objects -parent $system -type subsystem]</p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p>#########################</p><p>#### Creating sockets ####</p><p>#########################</p><p> </p><p>run_task -name create_initiator_socket</p><p>rename_object -name $subsystem/default_initiator_socket -new_name sk0</p><p> </p><p>clone_socket -name $subsystem/sk0</p><p>rename_object -name $subsystem/sk0_0 -new_name sk1</p><p> </p><p>clone_socket -name $subsystem/sk1</p><p>rename_object -name $subsystem/sk1_0 -new_name sk2</p><p> </p><p>set_attribute -object $subsystem/sk2 -name protocolType -value AXI4</p><p>set_attribute -object $subsystem/sk2 -name params/wAddr -value 48</p><p> </p><p>rename_object -name $subsystem/sk0 -new_name aiu0</p><p>rename_object -name $subsystem/sk1 -new_name aiu1</p><p>rename_object -name $subsystem/sk2 -new_name aiu2</p><p> </p><p>run_task -name create_memory_socket</p><p>rename_object -name $subsystem/default_memory_socket -new_name dmi0</p><p> </p><p>run_task -name create_peripheral_socket</p><p>rename_object -name $subsystem/default_peripheral_socket -new_name dii0</p><p> </p><p> </p><p> </p><p> </p><p> </p><p>run_task -name move_to_next_state</p><p> </p><p>#############################</p><p>#### Creating memory map ####</p><p>#############################</p><p> </p><p>set memory_map $subsystem/default_memory_map</p><p>run_task -name create_memory_map</p><p>run_task -name create_memory_set</p><p>run_task -name create_dynamic_memory_group_default_memory_set</p><p> </p><p>rename_object -name $memory_map/default_memory_set -new_name mset</p><p>rename_object -name $memory_map/mset/default_dynamic_memory_group -new_name mgroup</p><p> </p><p>run_task -name create_boot_region</p><p>rename_object -name $memory_map/default_boot_region -new_name bootRegion</p><p> </p><p>run_task -name create_configuration_region</p><p>rename_object -name $memory_map/default_configuration_region -new_name configRegion</p><p> </p><p>run_task -name move_to_next_state</p><p> </p><p /><p>###########################</p><p>#### Creating topology ####</p><p>###########################</p><p> </p><p>run_task -name initialize_solution -choice three_ctrl_one_data</p><p>set topology [get_objects -parent $chip -type topology]</p><p> </p><p> </p><p> </p><p> </p><p>run_generator -topology $topology -clock $default_clock -name interface_units -params [list directories 1]</p><p>set_attribute -object $topology/aiu2_sk_0/aiu2 -name hasProxyCache -value true</p><p>set_attribute -object $topology/dmi0_sk_0/dmi0 -name hasSysMemCache -value true</p><p>set_attribute -object $topology -name memoryProtectionType -value PARITY</p><p> </p><p>set_attribute -object $topology/aiu2_sk_0/aiu2 -name hasProxyCache -value true</p><p>set_attribute -object $topology/dmi0_sk_0/dmi0 -name hasSysMemCache -value true</p><p>set_attribute -object $topology -name resilienceEnabled -value true</p><p> </p><p>set_attribute -object $topology -name duplicationEnabled -value true</p><p> </p><p>###############################</p><p>#### Creating Snoop Filter ####</p><p>###############################</p><p> </p><p>set sf0 [create_object -type snoop_filter -name sf0 -parent $topology]</p><p>set_attribute -object $sf0 -name nWays -value 4</p><p>set_attribute -object $sf0 -name nSets -value 64</p><p>set_attribute -object $sf0/sf0_TagMem_way_0 -name memoryType -value FLOP</p><p>set_attribute -object $sf0/sf0_TagMem_way_1 -name memoryType -value FLOP</p><p>set_attribute -object $sf0/sf0_TagMem_way_2 -name memoryType -value FLOP</p><p>set_attribute -object $sf0/sf0_TagMem_way_3 -name memoryType -value FLOP</p><p>set_attribute -object $sf0 -name aPrimaryBits -value_list [list 8 9 10 11 12 13]</p><p>update_object -name $topology/aiu0_sk_0/aiu0 -bind $sf0 -type snoopFilter</p><p>update_object -name $topology/aiu1_sk_0/aiu1 -bind $sf0 -type snoopFilter</p><p>update_object -name $topology/aiu2_sk_0/aiu2 -bind $sf0 -type snoopFilter</p><p> </p><p>#########################</p><p>#### Creating Routes ####</p><p>#########################</p><p> </p><p>set networks [get_objects -parent $topology -type network]</p><p>foreach netw $networks {</p><p>  connect_network -name $netw</p><p>}</p><p> </p><p>#############################</p><p>#### Calling Automations ####</p><p>#############################</p><p> </p><p>run_generator -topology $topology -clock $default_clock -name interrupt</p><p>run_generator -topology $topology -clock $default_clock -name resiliency -params [list enableResilience true enableDuplication true]</p><p>run_generator -topology $topology -clock $default_clock -name csr</p><p>run_generator -topology $topology -name adapters</p><p> </p><p>map_design -name $subsystem/default_solution</p><p>run_task -name move_to_next_state</p><p>gen_collateral -file design.tgz  -server_log_file .maestro-server.log -export &quot;ip_xact rtl synthesis_scripts systemc_models testbench&quot;</p><p> </p></td><td class="confluenceTd"><p><strong>#### Ncore 3.4 Version ####</strong></p><p> </p><p>create_project -name simple -path . -license_token Arteris/Dev</p><p> </p><p>run_task -name initialize_design -choice ncore</p><p> </p><p>run_task -name partition_into_domains</p><p>rename_object -name project/default_chip -new_name chip</p><p>rename_object -name project/chip/default_power_region -new_name pwrRegion</p><p>rename_object -name project/chip/pwrRegion/default_power_domain -new_name pwrDomain</p><p>rename_object -name project/chip/default_clock_region -new_name clkRegion</p><p>rename_object -name project/chip/clkRegion/default_clock_domain -new_name clkDomain</p><p>rename_object -name project/chip/clkRegion/clkDomain/default_clock_sub_domain -new_name clkSubdomain</p><p>run_task -name move_to_next_state</p><p> </p><p> </p><p>#########################</p><p>#### Creating clocks ####</p><p>#########################</p><p> </p><p>set chip      [get_objects -parent project -type chip]</p><p>set clkRegion [get_objects -parent $chip -type clock_region]</p><p>set clkDomain [get_objects -parent $clkRegion -type clock_domain]</p><p>set clkSubdomain [get_objects -parent $clkDomain -type clock_subdomain]</p><p>set default_clock $clkSubdomain</p><p>set system    [get_objects -parent $chip -type system]</p><p>set subsystem [get_objects -parent $system -type subsystem]</p><p> </p><p>set_attribute -object $subsystem/safetyconfig  -name safetyConfig -value ASIL_B; # NEW Ncore3.4</p><p> </p><p>run_task -name move_to_next_state; # NEW Ncore3.4</p><p> </p><p> </p><p> </p><p>##########################</p><p>#### Creating sockets ####</p><p>##########################</p><p> </p><p>run_task -name create_initiator_socket</p><p>rename_object -name $subsystem/default_initiator_socket -new_name sk0</p><p> </p><p>clone_socket -name $subsystem/sk0</p><p>rename_object -name $subsystem/sk0_0 -new_name sk1</p><p> </p><p>clone_socket -name $subsystem/sk1</p><p>rename_object -name $subsystem/sk1_0 -new_name sk2</p><p> </p><p>set_attribute -object $subsystem/sk2 -name protocolType -value AXI4</p><p>set_attribute -object $subsystem/sk2 -name params/wAddr -value 48</p><p> </p><p>rename_object -name $subsystem/sk0 -new_name aiu0</p><p>rename_object -name $subsystem/sk1 -new_name aiu1</p><p>rename_object -name $subsystem/sk2 -new_name aiu2</p><p> </p><p>run_task -name create_memory_socket</p><p>rename_object -name $subsystem/default_memory_socket -new_name dmi0</p><p> </p><p>run_task -name create_peripheral_socket</p><p>rename_object -name $subsystem/default_peripheral_socket -new_name dii0</p><p> </p><p>set_attribute -object $subsystem/NcoreSettings -name dceCount -value 1; # NEW Ncore3.4</p><p> </p><p>run_task -name create_config_access_socket; # NEW Ncore3.4</p><p> </p><p>run_task -name move_to_next_state</p><p> </p><p>#############################</p><p>#### Creating memory map ####</p><p>#############################</p><p> </p><p>set memory_map $subsystem/default_memory_map</p><p>run_task -name create_memory_map</p><p>run_task -name create_memory_set</p><p>run_task -name create_dynamic_memory_group_default_memory_set</p><p> </p><p>rename_object -name $memory_map/default_memory_set -new_name mset</p><p>rename_object -name $memory_map/mset/default_dynamic_memory_group -new_name mgroup</p><p> </p><p>run_task -name create_boot_region</p><p>rename_object -name $memory_map/default_boot_region -new_name bootRegion</p><p> </p><p>run_task -name create_configuration_region</p><p>rename_object -name $memory_map/default_configuration_region -new_name configRegion</p><p> </p><p>run_task -name move_to_next_state</p><p>run_task -name move_to_next_state; #NEW Ncore3.4</p><p> </p><p>###########################</p><p>#### Creating topology ####</p><p>###########################</p><p> </p><p>run_task -name initialize_solution -choice three_ctrl_one_data</p><p>set topology [get_objects -parent $chip -type topology]</p><p> </p><p>#OBS Ncore3.4 run_generator -topology $topology -clock $default_clock -name interface_units -params [list directories 1]</p><p>run_generator -topology $topology -clock $default_clock -name interface_units; # NEW Ncore3.4</p><p>#OBS set_attribute -object $topology/aiu2_sk_0/aiu2 -name hasProxyCache -value true</p><p>set_attribute -object $topology/dmi0_sk_0/dmi0 -name hasSysMemCache -value true</p><p>#OBS Ncore3.4 set_attribute -object $topology -name memoryProtectionType -value PARITY</p><p>#OBS Ncore3.4 set_attribute -object $topology/aiu2_sk_0/aiu2 -name hasProxyCache -value true</p><p>set_attribute -object $topology/dmi0_sk_0/dmi0 -name hasSysMemCache -value true</p><p>#OBS Ncore3.4 set_attribute -object $topology -name resilienceEnabled -value true</p><p>#OBS Ncore3.4 set_attribute -object $topology -name duplicationEnabled -value true</p><p> </p><p /><p /><p /><p>###############################</p><p>#### Creating Snoop Filter ####</p><p>###############################</p><p> </p><p>set sf0 [create_object -type snoop_filter -name sf0 -parent $topology]</p><p>set_attribute -object $sf0 -name nWays -value 4</p><p>set_attribute -object $sf0 -name nSets -value 64</p><p>set_attribute -object $sf0/sf0_TagMem_way_0 -name memoryType -value FLOP</p><p>set_attribute -object $sf0/sf0_TagMem_way_1 -name memoryType -value FLOP</p><p>set_attribute -object $sf0/sf0_TagMem_way_2 -name memoryType -value FLOP</p><p>set_attribute -object $sf0/sf0_TagMem_way_3 -name memoryType -value FLOP</p><p>set_attribute -object $sf0 -name aPrimaryBits -value_list [list 8 9 10 11 12 13]</p><p>update_object -name $topology/aiu0_sk_0/aiu0 -bind $sf0 -type snoopFilter</p><p>update_object -name $topology/aiu1_sk_0/aiu1 -bind $sf0 -type snoopFilter</p><p>#OBS Ncore3.4 update_object -name $topology/aiu2_sk_0/aiu2 -bind $sf0 -type snoopFilter</p><p> </p><p>#########################</p><p>#### Creating Routes ####</p><p>#########################</p><p> </p><p>set networks [get_objects -parent $topology -type network]</p><p>foreach netw $networks {</p><p>  connect_network -name $netw</p><p>}</p><p> </p><p>#############################</p><p>#### Calling Automations ####</p><p>#############################</p><p> </p><p>run_generator -topology $topology -clock $default_clock -name interrupt</p><p>run_generator -topology $topology -clock $default_clock -name resiliency -params [list enableResilience true enableDuplication true]</p><p>run_generator -topology $topology -clock $default_clock -name csr</p><p>run_generator -topology $topology -name adapters</p><p> </p><p>map_design -name $subsystem/default_solution</p><p>run_task -name move_to_next_state</p><p>gen_collateral -file design.tgz  -server_log_file .maestro-server.log -export &quot;ip_xact rtl synthesis_scripts systemc_models testbench&quot;</p><p> </p></td></tr></tbody></table></div><p> </p><p /><h1 id="MigratingNcore3.2to3.4-UsefulTclCommands:">Useful Tcl Commands:</h1><p> </p><p># get the current state of maestro</p><p><code>get_current_state</code></p><p># move forward to the next state</p><p><code>run_task -name move_to_next_state</code></p><p># move backward to the previous state</p><p><code>run_task -name move_to_prev_state</code></p><p># get the name of the chip</p><p><code>set chip [get_objects -type chip -parent project]</code></p><p># get the name of the topology</p><p><code>set topology [get_objects -type topology -parent $chip]</code></p><p># get all the networks in an array.</p><p><code>set networks [get_objects -type network -parent $topology]</code></p><p># get first network in an array, index is 0.</p><p><code>set network1 [lindex $network0 0]</code></p><p># maestro’s states:</p><div class="table-wrap"><table data-layout="default" data-local-id="a06f2ee1-2ca1-4c74-8035-a3acfd011ef3" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p>S1_DOMAIN_DEFINITION</p></td><td class="confluenceTd"><p>SoC Specification / Domains</p></td></tr><tr><td class="confluenceTd"><p>S1_SAFETY_DEFINITION</p></td><td class="confluenceTd"><p>SoC Specification / Safety</p></td></tr><tr><td class="confluenceTd"><p>S2_SOCKET_DEFINITION</p></td><td class="confluenceTd"><p>System Assembly / Sockets</p></td></tr><tr><td class="confluenceTd"><p>S2_MEMORY_MAP_DEFINITION</p></td><td class="confluenceTd"><p>System Assembly / Memory Map</p></td></tr><tr><td class="confluenceTd"><p>S2_FLOW_DEFINITION</p></td><td class="confluenceTd"><p>System Assembly / Communication</p></td></tr><tr><td class="confluenceTd"><p>S3_STRUCTURAL_DESIGN</p></td><td class="confluenceTd"><p>Structural Design / Topology Structure</p></td></tr><tr><td class="confluenceTd"><p>S4_MAPPING</p></td><td class="confluenceTd"><p>Mapping / Mapper</p></td></tr><tr><td class="confluenceTd"><p>S5_DESIGN_REFINEMENT</p></td><td class="confluenceTd"><p>Refinement / Topology Details</p></td></tr><tr><td class="confluenceTd"><p>S6_EXPORT</p></td><td class="confluenceTd"><p>Export / Export</p></td></tr><tr><td class="confluenceTd"><p>ERROR</p></td><td class="confluenceTd"><p>Unknown / ERROR</p></td></tr></tbody></table></div><p> </p><p> </p>