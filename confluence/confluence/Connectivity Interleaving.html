<h2 id="ConnectivityInterleaving-IOAIUConnectivityFeature">IOAIU Connectivity Feature</h2><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759724820719 {padding: 0px;}
div.rbtoc1759724820719 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759724820719 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759724820719'>
<ul class='toc-indentation'>
<li><a href='#ConnectivityInterleaving-IOAIUConnectivityFeature'>IOAIU Connectivity Feature</a>
<ul class='toc-indentation'>
<li><a href='#ConnectivityInterleaving-Overview:'>Overview:</a>
<ul class='toc-indentation'>
<li><a href='#ConnectivityInterleaving-ReferenceDocument'>Reference Document</a></li>
</ul>
</li>
<li><a href='#ConnectivityInterleaving-Stimulus'>Stimulus</a></li>
<li><a href='#ConnectivityInterleaving-FunctionalChecks'>Functional Checks</a></li>
<li><a href='#ConnectivityInterleaving-FunctionalCoverage'>Functional Coverage</a></li>
<li><a href='#ConnectivityInterleaving-Configs'>Configs</a></li>
</ul>
</li>
</ul>
</div><h3 id="ConnectivityInterleaving-Overview:">Overview:</h3><p /><h5 id="ConnectivityInterleaving-ReferenceDocument">Reference Document</h5><p><a class="external-link" href="https://confluence.arteris.com/display/ENGR/Arch+Ncore+3.4+Docs?preview=/30510577/41386896/Ncore%20Connectivity%20Architecture%20Specification.pdf" rel="nofollow">Ncore Connectivity Architecture Specification</a></p><p><a class="external-link" href="https://confluence.arteris.com/display/ENGR/Arch+Ncore+3.4+Docs?preview=/30510577/41386918/Ncore%20Error%20Architecture%20Specification.pdf" rel="nofollow">Ncore Error Architecture Specification</a></p><p><a class="external-link" href="https://confluence.arteris.com/display/ENGR/Ncore+3.4+System+Connectivity+discussion" rel="nofollow">Ncore 3.4 System Connectivity discussion</a></p><p><a class="external-link" href="https://arteris-my.sharepoint.com/personal/boon_chuan_arteris_com/_layouts/15/onedrive.aspx?id=%2Fpersonal%2Fboon_chuan_arteris_com%2FDocuments%2FRecordings%2FNcore+3.4+System+Connectivity+discussion-20220328_090132-Meeting+Recording.mp4&amp;parent=%2Fpersonal%2Fboon_chuan_arteris_com%2FDocuments%2FRecordings&amp;ga=1&amp;isSPOFile=1" rel="nofollow">Ncore 3.4 System Connectivity discussion - Meeting Recording.mp4</a></p><p><a class="external-link" href="https://confluence.arteris.com/display/ENGR/Arch+Ncore+3.X+Docs?preview=/13438142/20742276/ConcertoCProtocolArch_0_90_NoCB.pdf" rel="nofollow">ConcertoCProtocolArch_0_90_NoCB.pdf</a></p><h3 id="ConnectivityInterleaving-Stimulus">Stimulus</h3><div class="table-wrap"><table data-layout="default" data-local-id="608c1a8e-c665-445e-8503-84e97dd080c6" class="confluenceTable"><colgroup><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 140.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Scenario</strong></p></th><th class="confluenceTh"><p><strong>Description</strong></p></th><th class="confluenceTh"><p><strong>Ref Doc</strong></p></th><th class="confluenceTh"><p><strong>Hash Tag</strong></p></th><th class="confluenceTh"><p><strong>TB Location</strong></p></th><th class="confluenceTh"><p><strong>Priority</strong></p></th><th class="confluenceTh"><p><strong>Implemented</strong></p></th><th class="confluenceTh"><p><strong>Status</strong></p></th><th class="confluenceTh"><p><strong>Remarks</strong></p></th><th class="confluenceTh"><p><strong>Testcase name</strong></p></th></tr><tr><td class="confluenceTd"><p>Unconnected DCE with coherent commands.</p></td><td class="confluenceTd"><ul><li><p>Randomize DCE connectivity input to AIU unit.</p></li><li><p>Set DecErrDetEn and DecErrIntEn to 1.</p></li><li><p>Issue coherent Reads/Write/Dataless/Atomic/StashOnce/DVM transactions to the Unconnected DCE.</p></li></ul></td><td rowspan="8" class="confluenceTd"><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p>Ncore Connectivity Architecture Specification </p><p /><p /><p>Ncore Error Architecture Specification</p><p>(1.2.3.2 Uncorrectable ErrorType and Info Table )</p><p /><p /></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.Connectivity.UnconnectedDce</p></td><td rowspan="8" class="confluenceTd"><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p>Test connectivity_test <br/>@ dv/common/lib_tb/connectivity/connectivity_test.sv</p><p /><p>&amp;</p><p>Sequence csr_connectivity_seq <br/>@ dv/ioaiu/tests/ioaiu_csr_seq_lib.svh</p><p /><p /><p /><p /><p /><p /></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>connectivity_dce_check_all_coh_cmd_type<br/>connectivity_dvm</p></td></tr><tr><td class="confluenceTd"><p>Unconnected DMI with non-coherent commands.</p><p /></td><td class="confluenceTd"><ul><li><p>Randomize DMI connectivity input to AIU unit.</p></li><li><p>Set DecErrDetEn and DecErrIntEn to 1.</p></li><li><p>Issue non-coherent Reads/Write/Dataless/Atomic transactions + StashOnce/DVM to the Unconnected DMI. </p></li></ul></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.Connectivity.UnconnectedDmi</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>connectivity_dmi_check_all_coh_cmd_type <br/>connectivity_dmi_check_all_non_coh_cmd_type<br/>connectivity_dvm</p></td></tr><tr><td class="confluenceTd"><p>Unconnected DII with non-coherent commands.</p></td><td class="confluenceTd"><ul><li><p>Randomize DII connectivity input to AIU unit.</p></li><li><p>Set DecErrDetEn and DecErrIntEn to 1.</p></li><li><p>Issue non-coherent Reads/Write/Dataless/Atomic transactions + stashOnce/DVM commands to the Unconnected DII.</p></li></ul></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.Connectivity.UnconnectedDii</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>connectivity_dii_check_non_coh_cmd_type<br/>connectivity_dvm</p></td></tr><tr><td class="confluenceTd"><p>Unconnected DCE/Unconnected DMI/Unconnected DII with coherent/non-coherent commands.</p></td><td class="confluenceTd"><ul><li><p>Randomize DMI, DCE and DII connectivity input to AIU unit (Assumption is DMI and DCE connectivity will be the same).</p></li><li><p>Set DecErrDetEn and DecErrIntEn to 1.</p></li><li><p>Issue both coherent/non-coherent Reads/Write/Dataless/Atomic/StashOnce/DVM transactions to the Unconnected DCE/DMI/DII. </p></li></ul></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.Connectivity.RandUnconnectedDceDmiDii</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>connectivity<br/>connectivity_write_txns <br/>connectivity_read_txns <br/>connectivity_atomic_txns <br/>connectivity_dataless <br/>connectivity_dvm </p><p /><p /><p>connectivity_addr_no_hit<br/>connectivity_addr_illegal_dii_txn</p></td></tr><tr><td class="confluenceTd"><p>SysCo Attach/Detach pin toggle with Unconnected DCE</p></td><td class="confluenceTd"><ul><li><p>Randomize DCE connectivity input to AIU unit.</p></li><li><p>Set DecErrDetEn and DecErrIntEn to 1. (Enable timeout)</p></li><li><p>Initiate SysCo Attach/Detach sequence by toggling the SysCo_Req pin.</p></li></ul></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.Connectivity.SysCoPinUnconnectedDce</p></td><td class="confluenceTd"><p>Medium</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>connectivity</p></td></tr><tr><td class="confluenceTd"><p>SysCo Attach/Detach through register with Unconnected DCE</p></td><td class="confluenceTd"><ul><li><p>Randomize DCE connectivity input to AIU unit.</p></li><li><p>Set DecErrDetEn and DecErrIntEn to 1.</p></li><li><p>Initiate SysCo Attach/Detach sequence by writing CAIUTCR.SysCoAttach register (1 to Attach/0 to Detach).</p></li></ul></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.Connectivity.SysCoRegisterUnconnectedDce</p></td><td class="confluenceTd"><p>Medium</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>connectivity</p></td></tr><tr><td class="confluenceTd"><p>Unconnected DCE/DMI/DII with coherent/non-coherent commands</p></td><td class="confluenceTd"><ul><li><p>Randomize DMI, DCE and DII connectivity input to AIU unit (Assumption is DMI and DCE connectivity will be the same).</p></li><li><p>Set DecErrDetEn and DecErrIntEn (only 00 &amp; 10)<br/>(no 01 - invalid).</p></li><li><p>Issue both coherent/non-coherent Reads/Write/Dataless/Atomic/StashOnce transactions to the Unconnected DCE/DMI/DII. </p></li></ul></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.Connectivity.ErrDetEnErrDetInt</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>connectivity<br/>connectivity_csr_dec_err_no_det_no_int <br/>connectivity_csr_dec_err_det_only <br/>connectivity_csr_dec_err_int_only</p></td></tr><tr><td class="confluenceTd"><p>AIU to AIU connection optimization</p></td><td class="confluenceTd"><ul><li><p>Set DecErrDetEn and DecErrIntEn to 1.</p></li><li><p>Test with Snoop transactions.</p></li><li><p>Generate snoops such that IO sends DtrReq to unconnected AIU and DtwReq to unconnected DMI. Cover all possible Snoop operations with both full and ptl SnpRespData. For cases with both DtrReq to AIU and DtwReq to DMI cover all combinations of AIU and DMI without connection.</p></li></ul></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.Connectivity.AiutoAiuOptimization</p></td><td class="confluenceTd"><p>Low</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p>connectivity</p></td></tr></tbody></table></div><h3 id="ConnectivityInterleaving-FunctionalChecks">Functional Checks</h3><div class="table-wrap"><table data-layout="default" data-local-id="d1b6445e-3552-4334-985e-c0675a87036a" class="confluenceTable"><colgroup><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 198.0px;"/><col style="width: 48.0px;"/><col style="width: 143.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 83.0px;"/><col style="width: 48.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Scenario</strong></p></th><th class="confluenceTh"><p><strong>Ref Doc</strong></p></th><th class="confluenceTh"><p><strong>Description</strong></p></th><th class="confluenceTh"><p><strong>Hash Tag</strong></p></th><th class="confluenceTh"><p><strong>TB Location</strong></p></th><th class="confluenceTh"><p><strong>Priority</strong></p></th><th class="confluenceTh"><p><strong>Implemented</strong></p></th><th class="confluenceTh"><p><strong>Status</strong></p></th><th class="confluenceTh"><p><strong>Remarks</strong></p></th></tr><tr><td class="confluenceTd"><p>No SMI activity.</p></td><td class="confluenceTd"><p>Ncore Connectivity Architecture Specification</p></td><td class="confluenceTd"><p>When IO req transaction is issued to unconnected DCE/DMI/DII ensure no SMI activity (Eg: CmdReq) occurs.</p></td><td class="confluenceTd"><p>#Check.IOAIU.v3.4.Connectivity.NoSMIActivity</p></td><td class="confluenceTd"><p>Test connectivity_test <br/>@ $WORK_TOP/dv/common/lib_tb/connectivity/connectivity_test.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Error logging and Interrupt when error detection and error interrupt is enabled.</p></td><td class="confluenceTd"><p>Ncore Connectivity Architecture Specification</p></td><td class="confluenceTd"><p>When IO req transaction is issued to unconnected DCE/DMI/DII ensure Error information is logged and interrupt is generated.</p><ul><li><p>Poll CAIUUESR_ErrVld to assert.</p></li><li><p>Compare <strong>ErrInfo</strong>. </p><ul><li><p>[3:0] – 4'b0100: Unconnected DMI unit access, 4’b0101: Unconnected DII unit access, 4’b0110: Unconnected DCE unit access.</p><ul><li><p>[4] – Command Type (Reserved for CHI-AIU &amp; DCE)</p></li></ul><ul><li><p>[5] – Reserved</p></li><li><p>[15:6] – Transaction ID/AXID (Reserved for DCE)</p></li></ul></li></ul></li><li><p>Compare <strong>ErrType Code = 0x7.</strong>  </p></li><li><p><strong>{CAIUUELR1.ErrAddr, CAIUUELR0.ErrWord, CAIUUELR0.ErrWay, CAIUUELR0.ErrEntry} = Transaction address</strong></p></li><li><p>Make sure <strong>IRQ_UC </strong>is asserted.</p></li></ul></td><td class="confluenceTd"><p>#Check.IOAIU.v3.4.Connectivity.ErrorLogging</p></td><td class="confluenceTd"><p>Sequence csr_connectivity_seq <br/>@ $WORK_TOP/dv/ioaiu/tests/ioaiu_csr_seq_lib.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>SysReq with unconnected DCE</p></td><td class="confluenceTd"><p>Ncore Connectivity Architecture Specification</p></td><td class="confluenceTd"><p>During SysCo attach or detach no SysReq should not be issued to unconnected DCE <strong>(Requires existing sysco scoreboard check update)</strong></p><p /><p /><p /></td><td class="confluenceTd"><p>#Check.IOAIU.v3.4.Connectivity.SysReq</p></td><td class="confluenceTd"><p>IOAIU Scoreboard <br/>@ dv/ioaiu/env/ioaiu_scoreboard.svh</p></td><td class="confluenceTd"><p>Medium</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Check for error type priority.</p></td><td class="confluenceTd"><p>Ncore Connectivity Architecture Specification</p></td><td class="confluenceTd"><p>When multiple error scenarios occur, make sure correct error is reported based on the priority described in section 1.6 of the Ncore Error Architecture Specification document.</p></td><td class="confluenceTd"><p>#Check.IOAIU.v3.4.Connectivity.ErrorPriority</p></td><td class="confluenceTd"><p>Function check_unmapped_add <br/>@ dv/common/lib_tb/addr_trans_mgr/ncore_config_info.svh</p><p>&amp;</p><p>Sequence csr_connectivity_seq <br/>@ dv/ioaiu/tests/ioaiu_csr_seq_lib.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h3 id="ConnectivityInterleaving-FunctionalCoverage">Functional Coverage</h3><div class="table-wrap"><table data-layout="default" data-local-id="02eee019-a9a3-444f-9d80-978e5b2e514a" class="confluenceTable"><colgroup><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 147.0px;"/><col style="width: 92.0px;"/><col style="width: 104.0px;"/><col style="width: 48.0px;"/><col style="width: 87.0px;"/><col style="width: 62.0px;"/><col style="width: 62.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Scenario</strong></p></th><th class="confluenceTh"><p><strong>Ref Doc</strong></p></th><th class="confluenceTh"><p><strong>Description</strong></p></th><th class="confluenceTh"><p><strong>Hash Tag</strong></p></th><th class="confluenceTh"><p><strong>TB Location</strong></p></th><th class="confluenceTh"><p><strong>Priority</strong></p></th><th class="confluenceTh"><p><strong>Implemented</strong></p></th><th class="confluenceTh"><p><strong>Status</strong></p></th><th class="confluenceTh"><p><strong>Remarks</strong></p></th></tr><tr><td class="confluenceTd"><p>All combination for Unconnected DCE / Unconnected DMI / Unconnected DII</p></td><td class="confluenceTd"><p>Ncore Connectivity Architecture Specification</p></td><td class="confluenceTd"><p>ensure all possible HexAiuDCEVec values are assigned to top level input signal</p><p>ensure all possible HexAiuDMIVec values are assigned to top level input signal</p><p>ensure all possible HexAiuDIIVec values are assigned to top level input signal</p></td><td class="confluenceTd"><p>#Cover.IOAIU.v3.4.Connectivity.UnconnectedDCEbin</p><p>#Cover.IOAIU.v3.4.Connectivity.UnconnectedDMIbin</p><p>#Cover.IOAIU.v3.4.Connectivity.UnconnectedDIIbin</p></td><td class="confluenceTd"><p>$WORK_TOP/dv/common/lib_tb/<br/>connectivity/connectivity_defines.svh</p><p>$WORK_TOP/dv/ioaiu/env/ioaiu_coverage.svh<br/></p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h3 id="ConnectivityInterleaving-Configs">Configs</h3><div class="table-wrap"><table data-layout="default" data-local-id="88c88aa2-0bae-41b5-957e-0a8893d96d82" class="confluenceTable"><colgroup><col style="width: 759.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>config1</p></td></tr><tr><td class="confluenceTd"><p>config3</p></td></tr><tr><td class="confluenceTd"><p>config_ace_small_ott</p></td></tr><tr><td class="confluenceTd"><p>hw_cfg_nxpauto</p></td></tr><tr><td class="confluenceTd"><p>hw_cfg_60_ioc_4c</p></td></tr><tr><td class="confluenceTd"><p>hw_cfg_meye_q7_ioc_4c</p></td></tr></tbody></table></div>