<style type='text/css'>/*<![CDATA[*/
div.rbtoc1759724820231 {padding: 0px;}
div.rbtoc1759724820231 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759724820231 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759724820231'>
<ul class='toc-indentation'>
<li><a href='#SoftwareCreditManagementandSkidBuffer-Overview'>Overview</a>
<ul class='toc-indentation'>
<li><a href='#SoftwareCreditManagementandSkidBuffer-ReferenceDocuments'>Reference Documents</a></li>
</ul>
</li>
<li><a href='#SoftwareCreditManagementandSkidBuffer-Stimulus'>Stimulus</a></li>
<li><a href='#SoftwareCreditManagementandSkidBuffer-FunctionalChecks'>Functional Checks</a></li>
<li><a href='#SoftwareCreditManagementandSkidBuffer-FunctionalCoverage'>Functional Coverage</a></li>
<li><a href='#SoftwareCreditManagementandSkidBuffer-DirectedTestcase'>Directed Testcase</a></li>
<li><a href='#SoftwareCreditManagementandSkidBuffer-Configs'>Configs</a></li>
</ul>
</div><h3 id="SoftwareCreditManagementandSkidBuffer-Overview">Overview</h3><p>The IOAIU implements the system-level Software Credit Management feature. This allows a configurable number of credits for each target the IOAIU is connected to : DII, DMI, and DCE. The number of credits can be configured through the XAIUCCR* registers &amp; the credit counter state is reflected according to the credits occupied. These registers are dedicated to each set of targets.</p><h5 id="SoftwareCreditManagementandSkidBuffer-ReferenceDocuments">Reference Documents</h5><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16160456/Arch+Ncore+3.4+Docs?preview=/16160456/58099034/Ncore%20SkidBuffer%20Architecture%20Specification_09302022.pdf" rel="nofollow">Ncore 3.4 - SkidBuffer Architecture Specification Release: 3.4.22, Rev: 0.58</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/38764600/Ncore+3.4_Split+skid+buffer+and+Software+credit+management+Micro-Architecture+Specification" data-linked-resource-id="38764600" data-linked-resource-version="4" data-linked-resource-type="page">Ncore 3.4 Split skid buffer and Software credit management Micro-Architecture Specification</a> </p><p><a href="https://arterisip.atlassian.net/wiki/download/attachments/16160456/Ncore%20Error%20Architecture%20Specification.pdf?version=6&amp;modificationDate=1662656236772&amp;cacheVersion=1&amp;api=v2" rel="nofollow">Ncore Error Architecture Specification.pdf</a></p><h3 id="SoftwareCreditManagementandSkidBuffer-Stimulus">Stimulus</h3><div class="table-wrap"><table data-layout="default" data-local-id="43a0a144-a4e3-4013-96d3-866a1b6da569" class="confluenceTable"><colgroup><col style="width: 48.0px;"/><col style="width: 185.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Scenario</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Description</strong></p></th><th class="confluenceTh"><p><strong>Constraint</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Ref Doc</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Hash Tag</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>TB location</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Priority</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Implemented</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Status</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Remarks</strong></p></th></tr><tr><td class="confluenceTd"><p>Basic bring up test</p></td><td class="confluenceTd"><ul><li><p>Program non-zero (minimum value 2) Credit Limit in the CCR for every target during the register initialization phase</p></li><li><p>Send commands to all targets (DMI/DCE/DII).</p></li><li><p>Test should finish without hanging and pass all the checks added in the scoreboard.</p></li></ul></td><td class="confluenceTd"><p>*CreditLimit &gt;= 2</p></td><td class="confluenceTd"><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16160456/Arch+Ncore+3.4+Docs?preview=/16160456/58099034/Ncore%20SkidBuffer%20Architecture%20Specification_09302022.pdf" rel="nofollow">Ncore 3.4 - SkidBuffer Architecture Specification</a>,<br/>Table 3.a</p></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.SCM.BringUp</p></td><td class="confluenceTd"><p>$WORK_TOP/dv/ioaiu/tests/ioaiu_csr_seq_lib.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Random credit (To hit all valid Counter state values)</p></td><td class="confluenceTd"><ul><li><p>Randomly program all targets to non-zero Credit Limit (2-31) in the CCR during the register initialization phase.</p></li><li><p>Send commands to all targets (DMI/DCE/DII).</p></li><li><p>During mid simulation change the credit limit value for all targets such that all possible counter state values (000, 001, 010, 100) are hit for every target. Tweak commands generated, issue back-to-back commands to all targets(DCE/DMI/DII) and back pressure on SMI interface as required to achieve all possible counter state values.</p></li><li><p>No dependency between different targets and activities should be performed in parallel.</p></li><li><p>Tests should finish without hanging and pass all the checks added in the scoreboard.</p></li></ul></td><td class="confluenceTd"><p>*CreditLimit &gt;= 2</p></td><td class="confluenceTd"><p>Ncore 3.4 - SkidBuffer Architecture Specification, Table 3.a &amp; Appendix C</p><p>Split skid buffer and Software credit management 3.4 Micro-Architecture Specification<br/>Version 0.1, June 2, 2023<br/>Section 3.2</p></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.SCM.RandomCredit</p></td><td class="confluenceTd"><p>$WORK_TOP/dv/ioaiu/tests/credit_sw_mgr_test.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h3 id="SoftwareCreditManagementandSkidBuffer-FunctionalChecks">Functional Checks</h3><div class="table-wrap"><table data-layout="default" data-local-id="885a1ad0-0519-4a0e-b30b-1bfa530dffe7" class="confluenceTable"><colgroup><col style="width: 48.0px;"/><col style="width: 115.0px;"/><col style="width: 126.0px;"/><col style="width: 61.0px;"/><col style="width: 126.0px;"/><col style="width: 140.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Scenario</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Ref Doc</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Description</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Hash Tag</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>TB Location</strong></p></th><th class="confluenceTh"><p><strong>Priority</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Implemented</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Status</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Remarks</strong></p></th></tr><tr><td class="confluenceTd"><p>Credit Limit check</p></td><td class="confluenceTd"><p>Ncore 3.4 - SkidBuffer Architecture Specification, Table 3.a &amp; Appendix C</p></td><td class="confluenceTd"><p>Check for every individual target such that the number of outstanding commands is never greater than value programmed in the credit limit field.</p></td><td class="confluenceTd"><p>#Check.IOAIU.v3.4.SCM.CreditLimit</p></td><td class="confluenceTd"><p>$WORK_TOP/dv/ioaiu/env/ioaiu_scoreboard.svh</p><p>$WORK_TOP/dv/ioaiu/ioaiu_scb_txn.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Start/End of Sim check</p></td><td class="confluenceTd"><p>Ncore 3.4 - SkidBuffer Architecture Specification, Table 3.a </p></td><td class="confluenceTd"><p>End of sim check (When there are no outstanding transactions).</p><p>For every target the Counter State register should be either Full or No connection.</p></td><td class="confluenceTd"><p>#Check.IOAIU.v3.4.SCM.StartEndOfSim</p></td><td class="confluenceTd"><p>$WORK_TOP/dv/ioaiu/env/ioaiu_scoreboard.svh</p><p>$WORK_TOP/dv/ioaiu/ioaiu_scb_txn.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Counter State check</p></td><td class="confluenceTd"><p>Ncore 3.4 - SkidBuffer Architecture Specification, Table 3.a </p></td><td class="confluenceTd"><p>See if is possible to have mechanism to validate the counter state register value on a continuous basis. If not create directed tests and check counter state register value at certain points.</p></td><td class="confluenceTd"><p>#Check.IOAIU.v3.4.SCM.CounterState</p></td><td class="confluenceTd"><p>$WORK_TOP/dv/ioaiu/env/ioaiu_scoreboard.svh</p><p>$WORK_TOP/dv/ioaiu/ioaiu_scb_txn.svh</p></td><td class="confluenceTd"><p>Low</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h3 id="SoftwareCreditManagementandSkidBuffer-FunctionalCoverage">Functional Coverage</h3><div class="table-wrap"><table data-layout="default" data-local-id="bf7900b2-09e9-4f46-baa2-a81ec05016cf" class="confluenceTable"><colgroup><col style="width: 48.0px;"/><col style="width: 108.0px;"/><col style="width: 147.0px;"/><col style="width: 48.0px;"/><col style="width: 77.0px;"/><col style="width: 140.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/><col style="width: 48.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Scenario</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Ref Doc</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Description</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Hash Tag</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>TB Location</strong></p></th><th class="confluenceTh"><p><strong>Priority</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Implemented</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Status</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Remarks</strong></p></th></tr><tr><td class="confluenceTd"><p>Credit Limit Bins</p></td><td class="confluenceTd"><p>Ncore 3.4 - SkidBuffer Architecture Specification, Table 3.a &amp; Appendix C</p></td><td class="confluenceTd"><p>Add bins to ensure all possible credit limit values (0 to 31) are programmed for each target.</p></td><td class="confluenceTd"><p>#Cover.IOAIU.v3.4.SCM.CreditLimitBin</p></td><td class="confluenceTd"><p>$WORK_TOP/dv/ioaiu/env/ioaiu_coverage.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>Counter State Bins</p></td><td class="confluenceTd"><p>Ncore 3.4 - SkidBuffer Architecture Specification, Table 3.a </p></td><td class="confluenceTd"><p>Add bins to ensure all possible Counter State values (000, 001, 010, 100, 110) and all valid counter State transitions are reached for each target.</p></td><td class="confluenceTd"><p>#Cover.IOAIU.v3.4.SCM.CounterStateBin</p></td><td class="confluenceTd"><p>$WORK_TOP/dv/ioaiu/env/ioaiu_coverage.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h3 id="SoftwareCreditManagementandSkidBuffer-DirectedTestcase">Directed Testcase</h3><div class="table-wrap"><table data-layout="default" data-local-id="70790f75-7171-4bf9-a8b4-9e6d889be2c7" class="confluenceTable"><colgroup><col style="width: 85.0px;"/><col style="width: 85.0px;"/><col style="width: 85.0px;"/><col style="width: 85.0px;"/><col style="width: 85.0px;"/><col style="width: 85.0px;"/><col style="width: 85.0px;"/><col style="width: 85.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>testcase Name </strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong> Scenario </strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Ref Doc</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Hash Tag</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Priority</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Implemented </strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Status </strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Remarks </strong></p></th></tr><tr><td class="confluenceTd"><p>scm_negative_state</p></td><td class="confluenceTd"><ul><li><p>Allocate a higher number of finite credits at the start of the simulation, and set a new credit limit lower than an original value on the fly.</p></li><li><p>This forces the counter state to go in a negative state and no further transactions are sent till the responses are received and the credit counter comes back to non zero value.</p></li><li><p>Additional delay would be required from the SMI side to make the transactions stay in ott_queue<br/>+CMDrsp_delayed_test</p></li></ul></td><td class="confluenceTd"><p>Ncore 3.4 - SkidBuffer Architecture Specification, Table 3.a &amp; Appendix C</p><p>Split skid buffer and Software credit management 3.4 Micro-Architecture Specification<br/>Version 0.1, June 2, 2023<br/>Section 3.2</p></td><td class="confluenceTd"><p>#Stimulus.IOAIU.v3.4.SCM.NegativeCounterStateDirectedTest</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>/Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h3 id="SoftwareCreditManagementandSkidBuffer-Configs">Configs</h3><div class="table-wrap"><table data-layout="default" data-local-id="02563572-14c8-4d3d-bdb1-a2d3813f1e07" class="confluenceTable"><colgroup><col style="width: 759.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>config1</p></td></tr><tr><td class="confluenceTd"><p>config3</p></td></tr><tr><td class="confluenceTd"><p>config_ace_small_ott</p></td></tr><tr><td class="confluenceTd"><p>hw_cfg_nxpauto</p></td></tr><tr><td class="confluenceTd"><p>hw_cfg_60_ioc_4c</p></td></tr><tr><td class="confluenceTd"><p>hw_cfg_meye_q7_ioc_4c</p></td></tr></tbody></table></div><p />