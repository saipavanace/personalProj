<p><br/>Please start with these:</p><h2 id="howtoncoreRAL-Generatencoreralfromcpr:">Generate ncore ral from cpr:</h2><p>----------------------------</p><p>--to generate ipxact in stitcher tree<br/><a class="external-link" href="https://maestrodev.arteris.com/sections/stitcher/" rel="nofollow" title="Follow link">https://maestrodev.arteris.com/sections/stitcher/</a><br/><a class="external-link" href="http://gitlab.arteris.com/maestro-dev/tools/stitcher/tree/master/test" rel="nofollow" title="Follow link">http://gitlab.arteris.com/maestro-dev/tools/stitcher/tree/master/test</a></p><p>-&gt; from root of git<br/>source SOURCEME<br/>git clone <a class="external-link" href="http://gitlab.arteris.com/maestro-dev/tools/stitcher" rel="nofollow" title="Follow link">http://gitlab.arteris.com/maestro-dev/tools/stitcher</a><br/>cd stitcher<br/>rm -r node_modules   #do this every time you pull new cpr<br/>npm install # creates node_modules and pulls in rtl jsons</p><p>-&gt; generate CSR as cpr <span class="error">[AJ]</span><br/>node bin/stitcher.js csr \<br/><span class="legacy-color-text-red2">-i node_modules/@arteris/hw-ncr/cpr/csr/dii.csr.cpr \ </span><br/>-j node_modules/@arteris/hw-ncr/rtl/dii/bringup/config_rtl_128b.json \<br/><span class="legacy-color-text-red2">-e HW_NCR_CSR=node_modules/@arteris/hw-ncr/cpr/csr/ \</span><br/>-o output</p><p>-&gt; generate CSR as ipxact <span class="error">[AJ]</span><br/>node bin/stitcher.js ipxact \<br/>-j output/config_rtl_128b.csr.json \<br/>-v library=ncore,rtlPrefixName=dii \<br/>-o output</p><p>-----------------------------<br/>--to generate and use RAL</p><p>-&gt; RAL classes - synopsys or <span class="error">[Questa ask Suman]</span><br/>the xml is the generated 2014 ipxact.</p><p>cd output<br/>$VCS_HOME/bin/ralgen -uvm -l sv -t ncore -o concerto_register_map -ipxact config_rtl_128b_2014.xml</p><p>-&gt; TODO create auto flow to checkout stitcher, gen model with correct object names, and place in dii dv dir<br/>Meanwhile copy <a class="external-link" href="http://concerto_register_map.sv" rel="nofollow">concerto_register_map.sv</a> to concerto/dv/dii/tb/</p><p>~&gt; uvm_adapter&lt;-&gt;apb_agent (ref ocp) <br/>see accellera uvm class reference</p><p>~&gt; run RAL builtin test seqs for reset, bitbash</p><p>-------------------------------</p><p>ref</p><p><a class="external-link" href="https://arterisip.atlassian.net/browse/CONC-4585" rel="nofollow">https://arterisip.atlassian.net/browse/CONC-4585</a></p><p> </p><h2 id="howtoncoreRAL-ncoreintegrationexample,withsomedescription">ncore integration example, with some description</h2><p>Thanks, Eric. I am using the ral_csr_base_seq.<br/>However, I am thinking of separate tests for CSR testing as different CSR test may have a different requirement (some may not require SMI/AXI sequences). I implemented CSR tests in CodaCache and some tests had different needs there.</p><p>Regards,<br/>Aman<br/>________________________________________<br/>From: Eric Weisman<br/>Sent: Wednesday, January 9, 2019 8:24:52 AM<br/>To: DV Campbell; Aman Khandelwal<br/>Subject: Template for csr tests <br/> <br/>Please use this structure while handwriting csr exercising seqs.<br/>it uses uvm ral methods to access fields in a reusable manner.<br/> <br/>.../common/lib_tb/<br/>ral_csr_base_seq.svh &lt;- provides standard field rw methods and messages. <br/> because uvm_reg_field.read/write doesn't behave like you would expect.<br/> <br/>In your test e.g. <br/>.../dv/dii/tests/<br/><a class="external-link" href="http://dii_csr_seq_lib.sv" rel="nofollow">dii_csr_seq_lib.sv</a> &lt;- library of handwritten csr seqs for this ip which descend from the base_seq<br/>dii_test.svh &lt;- single test has provisions to call all csr and smi seqs<br/>dvPkg.json , <a class="external-link" href="http://dii_test_lib_pkg.sv" rel="nofollow">dii_test_lib_pkg.sv</a> &lt;- include ../../common/lib_tb/ral_csr_base_seq.svh immediately after <a class="external-link" href="http://concerto_register_map.sv" rel="nofollow">concerto_register_map.sv</a></p><h2 id="howtoncoreRAL-Quickstartforworkingwithafterintegration"><br/>Quickstart for working with after integration</h2><p>Hi Sanket,<br/>I heard you would be taking on CSR bringup in DII (noncoherent io unit).<br/>That is proving that the apb connected Configuration and Status Registers actually do what they are supposed to.<br/>Infrastructure is already in place, so remains to bring up functional cases.</p><p>We start with test seqs from previous version dmi (coherent io unit with cache).<br/>Eliminate those which do not apply in dii (cache tests)<br/>Update reg names and access calls to new infra<br/>Add any tests needed to cover dii functionality [may not be any for csrs]</p><p>Please ask me questions and we can schedule any meetings at 9am IST with 1 day latency.</p><p><br/>DV Files <br/>concerto/dv/dii/tests/<br/>Dii test cases, old dmi cases are present and commented. – <a class="external-link" href="http://dii_ral_csr_seq.sv" rel="nofollow">dii_ral_csr_seq.sv</a><br/>From where csr seqs are called, have to hardcode seq names at the moment [grep TODO] - dii_base_test.svh<br/>Which Regs in DII - <a class="external-link" href="http://concerto_register_map.sv" rel="nofollow">concerto_register_map.sv</a></p><p><br/>Specs<br/>Note these files change from time to time. They are not completely static and are not controlled by milestones.</p><p>What does each reg do? – I have today’s checkout at /home/ericw/work_ncore/ericw_7/stitcher/node_modules/@arteris/specifications/concerto/dii/dii.csr.cpr<br/>This and linked comprise the root document. Concerto C protocol arch describes some regs purpose in greater detail. Ask Eric T if unclear (RTL owner) [I’m Eric W, DV owner]</p><p>Ncore arch – <a class="external-link" href="https://svn.arteris.com/engdocs/trunk/Sonata%20Project/Concerto%20Rev%20C%20-%20Working/Ncore3SysArch.pdf?view=log" rel="nofollow">https://svn.arteris.com/engdocs/trunk/Sonata%20Project/Concerto%20Rev%20C%20-%20Working/Ncore3SysArch.pdf?view=log</a><br/>Concerto C protocol arch – <a class="external-link" href="https://svn.arteris.com/engdocs/trunk/Sonata%20Project/Concerto%20Rev%20C%20-%20Working/ConcertoCProtocolArch.pdf?view=log" rel="nofollow">https://svn.arteris.com/engdocs/trunk/Sonata%20Project/Concerto%20Rev%20C%20-%20Working/ConcertoCProtocolArch.pdf?view=log</a><br/>Dii uarch – <a class="external-link" href="https://confluence.arteris.com/pages/viewpage.action?spaceKey=ENGR&amp;title=Ncore+3.0+DII+Micro+Architecture+Specification" rel="nofollow">https://confluence.arteris.com/pages/viewpage.action?spaceKey=ENGR&amp;title=Ncore+3.0+DII+Micro+Architecture+Specification</a></p>