<p>To get usage on any script, run the script with not options.</p><p>All these scripts are located in hw-lib/js.</p><p>Module hierarchy is different from JSON file hierarchy. JSON file hierarchy means the JSON object is spread over multiple files. Module hierarchy refers to the module hierarchy in the generated code.</p><h1 id="Gen_wrapperJSONhelpscripts-ScriptsthatmanipulateJSONfilehierarchy">Scripts that manipulate JSON file hierarchy</h1><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Script</th><th class="confluenceTh">Description</th><th colspan="1" class="confluenceTh">Usage</th></tr><tr><td class="confluenceTd">update_tb.js</td><td class="confluenceTd">externalizes rtl.json reference inside tb.json</td><td colspan="1" class="confluenceTd"><p><span>update_tb.js Usage -i infile_path -o outfile_path -p rtlPath&lt;-h&gt;</span></p><p><span>     infile_path:  Required. Path to input parameters file.</span></p><p><span>     outfile_path: Required. Path to output parameters file.</span></p><p><span>     rtlPath:      Required. Path to rtl.json file for test bench.</span></p><p><span>     -h:           Optional. Prints out this message</span></p></td></tr><tr><td class="confluenceTd">create_hierarchy.js</td><td class="confluenceTd">Takes a flat JSON file and creates JSON file hierarchy</td><td colspan="1" class="confluenceTd"><p><span>create_hierarchy.js Usage -o outdir_path -i infile_path &lt;-li -h&gt;</span></p><p><span>     infile_path:  Required. Path file to unflatten.</span></p><p><span>     outdir_path:  Required. Path to output parameters file.</span></p><p><span>     -li:          Optional. Do not create hierarchy for interfaces.</span></p><p><span>     -h:           Optional. Prints out this message</span></p></td></tr><tr><td class="confluenceTd">flatten_json.js</td><td class="confluenceTd">Takes a JSON file with JSON file hierarchy and flattens it into one file</td><td colspan="1" class="confluenceTd"><p><span>flatten_json.js Usage -i infile_path -o outfile_path &lt;-h&gt;</span></p><p><span>     infile_path:  Required. Path to input parameters file.</span></p><p><span>     outfile_path: Required. Path to output parameters file.</span></p><p><span>     -h:           Optional. Prints out this message</span></p></td></tr></tbody></table></div><p><br/></p><h1 id="Gen_wrapperJSONhelpscripts-ScriptsthatmanipulateJSONmodulehierarchy">Scripts that manipulate JSON module hierarchy</h1><p>All this scripts run flatten_json.js or it's equivalent as the first step.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Script</th><th class="confluenceTh">Description</th><th class="confluenceTh">Usage</th></tr><tr><td class="confluenceTd">flatten_hierarchy.js</td><td class="confluenceTd">Flattens the module hierarchy in a JSON file.</td><td class="confluenceTd"><p><span>flatten_hierarchy.js Usage -i infile_path -o outfile_path &lt;-h&gt;</span></p><p><span>     infile_path:  Required. Path to input parameters file.</span></p><p><span>     outfile_path: Required. Path to output parameters file.</span></p><p><span>     -h:           Optional. Prints out this message</span></p></td></tr><tr><td class="confluenceTd">split_async_blocks.js</td><td class="confluenceTd">Takes a JSON file that has been flattened with flatten_hierarchy.js<br/>and splits the async blocks in two.</td><td class="confluenceTd"><p><span>split_async_blocks.js Usage -i infile_path -o outfile_path &lt;-h&gt;</span></p><p><span>     infile_path:  Required. Path to input parameters file.</span></p><p><span>     outfile_path: Required. Path to output parameters file.</span></p><p><span>     -h:           Optional. Prints out this message</span></p></td></tr><tr><td class="confluenceTd">create_module_hierarchy.js</td><td class="confluenceTd">Takes a JSON that has been flattened with flatten_hierarchy.js<br/>and optionally had spit_async_blocks.js run on it and adds desired<br/>module hierarchy to it.</td><td class="confluenceTd"><p><span>create_module_hierarchy.js Usage -i infile_path -o outfile_path &lt;-h&gt;</span></p><p><span>     infile_path:  Required. Path to input parameters file.</span></p><p><span>     outfile_path: Required. Path to output parameters file.</span></p><p><span>     -h:           Optional. Prints out this message</span></p></td></tr><tr><td colspan="1" class="confluenceTd">get_sets.js</td><td colspan="1" class="confluenceTd">Reads in a JSON file and creates a sets.json file that reports <br/>the module hierarchy parameters for that JSON file. </td><td colspan="1" class="confluenceTd"><p><span>get_sets.js: Missing required options.</span></p><p><span>/scratch/jcodd/regress/hw-lib/js/get_sets.js Usage -i infile_path -o outfile_path &lt;-h&gt;</span></p><p><span>     infile_path:  Required. Path to input parameters file.</span></p><p><span>     outfile_path: Required. Path to output sets file.</span></p><p><span>     -h:           Optional. Prints out this message</span></p></td></tr><tr><td colspan="1" class="confluenceTd">set_sets.js</td><td colspan="1" class="confluenceTd">Reads in a JSON file and sets.json file and writes out a JSON file <br/>with the module hierarchy parameters defined in sets.json</td><td colspan="1" class="confluenceTd"><p><span>set_sets.js Usage -i infile_path -s sets_path -o outfile_path &lt;-h&gt;</span></p><p><span>     infile_path:  Required. Path to input parameters file.</span></p><p><span>     sets_path:    Required. Path to output sets file.</span></p><p><span>     outfile_path: Required. Path to output paramters file.</span></p><p><span>     -h:           Optional. Prints out this message</span></p></td></tr></tbody></table></div><h1 class="auto-cursor-target" id="Gen_wrapperJSONhelpscripts-Extensionstogen_wrapperparameterstocreatearbitrarymodulehierarchy">Extensions to gen_wrapper parameters to create arbitrary module hierarchy</h1><h2 id="Gen_wrapperJSONhelpscripts-Addsanewtoplevelparametercalledsets">Adds a new top level parameter called sets</h2><pre>sets = [{name: &quot;string&quot;, members: [array of strings]},{},{}]<br/><br/>Example:<br/>&quot;sets&quot;: [<br/>  {&quot;name&quot;: &quot;a&quot;, &quot;members&quot;: [&quot;b&quot;,&quot;c&quot;]},<br/>  {&quot;name&quot;: &quot;b&quot;, &quot;members&quot;: [&quot;d&quot;]},<br/>  {&quot;name&quot;: &quot;c&quot;, &quot;members&quot;: []},<br/>  {&quot;name&quot;: &quot;d&quot;, &quot;members&quot;: []}<br/>]</pre><h2 id="Gen_wrapperJSONhelpscripts-Addsa&quot;memberOf&quot;parametertoallinstances,assignsandtieOffsdescriptions">Adds a &quot;memberOf&quot; parameter to all instances, assigns and tieOffs descriptions</h2><pre>&quot;memberOf&quot; : &quot;string&quot;</pre><p>String must match one of the set names.</p><p>String can have format &quot;in_set_name,out_set_name&quot; for async blocks that can be split, but split_async_blocks.js script must be run for this to work.</p><h2 id="Gen_wrapperJSONhelpscripts-Formatofsets.json">Format of sets.json</h2><p>To aid in manual editing of JSON files to added module hierarchy in, the sets.json file can be used to greatly reduce effort</p><pre>{<br/>  &quot;sets&quot;: [<br/>    {&quot;name&quot;: &quot;a&quot;, &quot;members&quot;: []},<br/>    {&quot;name&quot;: &quot;b&quot;, &quot;members&quot;: []},<br/>    {&quot;name&quot;: &quot;c&quot;, &quot;members&quot;: []},<br/>    {&quot;name&quot;: &quot;d&quot;, &quot;members&quot;: []}<br/>  ],<br/>  &quot;wildcards&quot; :[<br/>    {&quot;pattern&quot;: &quot;atuI_&quot;, &quot;memberOf&quot; : &quot;a&quot;},<br/>    {&quot;pattern&quot;: &quot;atuT_&quot;, &quot;memberOf&quot; : &quot;b&quot;},<br/>    {&quot;pattern&quot;: &quot;csr_request_&quot;, &quot;memberOf&quot; : &quot;c&quot;},<br/>    {&quot;pattern&quot;: &quot;csr_response_&quot;, &quot;memberOf&quot; : &quot;d&quot;}<br/>  ],<br/>  &quot;blocks&quot;: {<br/>    &quot;csr_request_nw__req_aa&quot;: {<br/>      &quot;module&quot;: &quot;sym_async_adapter&quot;,<br/>      &quot;memberOf&quot;: &quot;c,d&quot;<br/>    },<br/>    &quot;csr_response_nw__rsp_ra&quot;: {<br/>      &quot;module&quot;: &quot;sym_rate_adapter&quot;,<br/>      &quot;memberOf&quot;: &quot;d,c&quot;<br/>    }<br/>  }<br/>}</pre><p>The sets have the same format as used in the gen_wrapper parameters.</p><p>The wildcards are applied in order, so the later wildcards have precedence over earlier wildcards. The string being matched is the instance name.</p><p>Blocks are applied after wildcards and precedence over wildcards. </p><p><br/></p><p><br/></p>