<p><style>[data-colorid=bqufuiylnz]{color:#9c0006} html[data-color-mode=dark] [data-colorid=bqufuiylnz]{color:#ff6369}[data-colorid=mojj9j09g0]{color:#9c0006} html[data-color-mode=dark] [data-colorid=mojj9j09g0]{color:#ff6369}</style><strong><u>Experimental</u></strong><strong><span style="text-decoration: underline;">&nbsp;</span></strong><strong><u>Environment</u></strong></p><ul><li>Only coherent traffic</li><li>CAIU is enabled. Read 512 transaction using RU before activating other initiators to make snoop traffic from NCAIUs.<ul><li>Snoop is targeting 25%.</li><li>Only 25% of the transactions within the range of the target addresses&nbsp;were loaded at cache warm up phase.</li></ul></li><li>Disabled starvation by assigning 0 threshold value at the register</li><li>Generated x2 BW from each initiators.&nbsp;</li></ul><p><span class="legacy-color-text-blue4"><strong><span style="text-decoration: underline;">Scenario 2-2: Read intensive test</span></strong></span></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><tbody><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>Address range</p></td><td class="confluenceTd"><p>QoS value</p></td><td class="confluenceTd"><p>Read/Write</p></td><td class="confluenceTd"><p>Total BW</p></td></tr><tr><td class="confluenceTd"><p>CAIU0</p></td><td class="confluenceTd"><p><br /></p></td><td rowspan="4" class="confluenceTd"><p>Sharing address, cache enabled</p><p><br /></p><p><br /></p><p><br /></p></td><td class="confluenceTd"><p>3: 100%</p></td><td class="confluenceTd"><p>RU: WU = 7:3</p></td><td class="confluenceTd"><p>20%</p></td></tr><tr><td class="confluenceTd"><p>NCAIU0</p></td><td class="confluenceTd"><p>PCIe</p></td><td class="confluenceTd"><p>0:80%</p><p>7:20%</p></td><td class="confluenceTd"><p>RO: WU = 7:3</p></td><td class="confluenceTd"><p>40%</p></td></tr><tr><td class="confluenceTd"><p>NCAIU2</p></td><td class="confluenceTd"><p>DMA</p></td><td class="confluenceTd"><p>0: 100%</p></td><td class="confluenceTd"><p>RO read only</p></td><td class="confluenceTd"><p>20%</p></td></tr><tr><td class="confluenceTd"><p>NCAIU3</p></td><td class="confluenceTd"><p>RTU-BB</p></td><td class="confluenceTd"><p>0:80%</p><p>7:20%</p></td><td class="confluenceTd"><p>RO read only</p></td><td class="confluenceTd"><p>20%</p></td></tr></tbody></table></div><p><br class="atl-forced-newline" /><strong><span style="text-decoration: underline;">1) Observation</span></strong></p><ul><li>Util could be more than 41.6 GB/s because<ul><li>Read/Write response at the zero-latency model operates separately.</li><li>Accessing DMI/CAIU(cache model) concurrently</li></ul></li><li>Resource status: The credit/resource is stable except DCE MRD credit. DCE MRD credit is bottleneck.</li><li>For the higher QOS value shows better latency numbers.<ul><li>The traffic with higher qos value shows 20% of the latency improvement.</li></ul></li></ul><p><strong><span style="text-decoration: underline;">2) Utilization</span></strong><br />System BW doesn't show difference between QoS enable and disable case. Lower than expected number. <br /><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="https://arterisip.atlassian.net/wiki/download/attachments/247366596/image2021-11-11_22-46-15.png?api=v2" /></span></p><p><strong><span style="text-decoration: underline;">3) Latency and BW</span></strong><br />The below table is the average read latency. Comparing all qos 0 case vs. QoS enabled Case.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="139" src="https://arterisip.atlassian.net/wiki/download/attachments/247366596/image2021-11-11_22-45-5.png?api=v2" /></span></p><p><br /></p><p><br class="atl-forced-newline" /><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="193" width="629" src="https://arterisip.atlassian.net/wiki/download/attachments/247366596/worddav3e1f0839ce45204034433556b9ffaa09.png?api=v2" /></span></p><p><strong><span style="text-decoration: underline;">4) Resource and credit values at saturating point</span></strong></p><ul><li>Selected representative value when the performance status becomes saturate. Median values</li></ul><p>CAIU / NCAIU (when QoS enabled)</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col /><col /><col /><col /><col /></colgroup><tbody><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>OTT</p></td><td class="confluenceTd"><p>DCE0</p></td><td class="confluenceTd"><p>DCE1</p></td><td class="confluenceTd"><p>DMI</p></td></tr><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>CAIU: 96 <br class="atl-forced-newline" />NCAIU: 32 <br class="atl-forced-newline" />NCAIU1: 96</p></td><td class="confluenceTd"><p>CAIU: 10 <br class="atl-forced-newline" />NCAIU: 6</p></td><td class="confluenceTd"><p>CAIU: 10 <br class="atl-forced-newline" />NCAIU: 6</p></td><td class="confluenceTd"><p>CAIU: 10 <br class="atl-forced-newline" />NCAIU: 6</p></td></tr><tr><td class="confluenceTd"><p>CAIU</p></td><td class="confluenceTd"><p>13</p></td><td class="confluenceTd"><p>8.764706</p></td><td class="confluenceTd"><p>7.397059</p></td><td class="confluenceTd"><p><br /></p></td></tr><tr><td class="confluenceTd"><p>NCAIU0</p></td><td class="confluenceTd"><p>30.80147</p></td><td class="confluenceTd"><p>4.769608</p></td><td class="confluenceTd"><p>2.438725</p></td><td class="confluenceTd"><p><br /></p></td></tr><tr><td class="confluenceTd"><p>NCAIU1</p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p><br /></p></td></tr><tr><td class="confluenceTd"><p>NCAIU2</p></td><td class="confluenceTd"><p>23.90196</p></td><td class="confluenceTd"><p>2.578431</p></td><td class="confluenceTd"><p>1.25</p></td><td class="confluenceTd"><p><br /></p></td></tr><tr><td class="confluenceTd"><p>NCAIU3</p></td><td class="confluenceTd"><p>13.39216</p></td><td class="confluenceTd"><p>2.588235</p></td><td class="confluenceTd"><p>1.276961</p></td><td class="confluenceTd"><p><br /></p></td></tr></tbody></table></div><p><br class="atl-forced-newline" />DCE0/DCE1(when QoS enabled)</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col /><col /><col /><col /><col /></colgroup><tbody><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>ATT</p></td><td class="confluenceTd"><p>MRD</p></td><td class="confluenceTd"><p>SNP</p></td><td class="confluenceTd"><p>RB</p></td></tr><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>36</p></td><td class="confluenceTd"><p><strong>6</strong></p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>8</p></td></tr><tr><td class="confluenceTd"><p>DCE 0 credit</p></td><td class="confluenceTd"><p>32.64461</p></td><td class="confluenceTd"><p><strong><span data-colorid="bqufuiylnz">5.784314</span></strong></p></td><td class="confluenceTd"><p>1.656863</p></td><td class="confluenceTd"><p>4</p></td></tr><tr><td class="confluenceTd"><p>DCE 1 credit</p></td><td class="confluenceTd"><p>33.66422</p></td><td class="confluenceTd"><p><strong><span data-colorid="mojj9j09g0">5.833333</span></strong></p></td><td class="confluenceTd"><p>0.980392</p></td><td class="confluenceTd"><p>2.384804</p></td></tr></tbody></table></div><p><br class="atl-forced-newline" /><span class="legacy-color-text-blue4"><strong><span style="text-decoration: underline;">Scenario 2-2: Write intensive test</span></strong></span></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><tbody><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>Address range</p></td><td class="confluenceTd"><p>QoS value</p></td><td class="confluenceTd"><p>Read/Write</p></td><td class="confluenceTd"><p>Total BW</p></td></tr><tr><td class="confluenceTd"><p>CAIU0</p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>Sharing address, cache enabled</p></td><td class="confluenceTd"><p>3: 100%</p></td><td class="confluenceTd"><p>RU: WU = 7:3</p></td><td class="confluenceTd"><p>20%</p></td></tr><tr><td class="confluenceTd"><p>NCAIU0</p></td><td class="confluenceTd"><p>PCIe</p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>0:80% 7:20%</p></td><td class="confluenceTd"><p>RO: WU = 7:3</p></td><td class="confluenceTd"><p>40%</p></td></tr><tr><td class="confluenceTd"><p>NCAIU2</p></td><td class="confluenceTd"><p>DMA</p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>0: 100%</p></td><td class="confluenceTd"><p>WU only</p></td><td class="confluenceTd"><p>20%</p></td></tr><tr><td class="confluenceTd"><p>NCAIU3</p></td><td class="confluenceTd"><p>RTU-BB</p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>0:80% 7:20%</p></td><td class="confluenceTd"><p>WU only</p></td><td class="confluenceTd"><p>20%</p></td></tr></tbody></table></div><p><br class="atl-forced-newline" /><strong><span style="text-decoration: underline;">1) Observation</span></strong></p><ul><li>Utilization is higher than read case. Showing around 43GB/s.</li><li>Resource status: The credit/resource is stable except DCE RB credit. DCE RB credit is causing bottleneck.</li><li>CAIU0 shows better latency number (CAIU is measuring latency read/write together).</li><li>Write latency shows differences but not as dramatic as read cases.</li></ul><p><strong><span style="text-decoration: underline;">2) Utilization</span></strong><br />System BW doesn't show difference between QoS enable and disable case. The total BW is higher than read case. <br /><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="209" width="349" src="https://arterisip.atlassian.net/wiki/download/attachments/247366596/worddavfe72bc4c001b92b8628e792311928186.png?api=v2" /></span></p><p><br /><strong><span style="text-decoration: underline;">3) Latency &amp; BW</span></strong><br />The below table is the average write latency. Comparing all qos 0 case vs. QoS enabled Case</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="203" src="https://arterisip.atlassian.net/wiki/download/attachments/247366596/image2021-11-12_11-32-20.png?api=v2" /></span></p><p><br class="atl-forced-newline" /><strong><span style="text-decoration: underline;">4) Resource and credit values at saturating point</span></strong></p><ul><li>Selected representative value when the performance status become saturate. Median values.</li><li>DCE traffic is not balanced well like the read case. Need to investigate more. All the address of the masters are linearly increasing.</li></ul><p>CAIU / NCAIU (when QoS enabled)</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col /><col /><col /><col /><col /></colgroup><tbody><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>OTT</p></td><td class="confluenceTd"><p>DCE0</p></td><td class="confluenceTd"><p>DCE1</p></td><td class="confluenceTd"><p>DMI</p></td></tr><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>CAIU: 96 <br class="atl-forced-newline" />NCAIU: 32 <br class="atl-forced-newline" />NCAIU1: 96</p></td><td class="confluenceTd"><p>CAIU: 10 <br class="atl-forced-newline" />NCAIU: 6</p></td><td class="confluenceTd"><p>CAIU: 10 <br class="atl-forced-newline" />NCAIU: 6</p></td><td class="confluenceTd"><p>CAIU: 10 <br class="atl-forced-newline" />NCAIU: 6</p></td></tr><tr><td class="confluenceTd"><p>CAIU</p></td><td class="confluenceTd"><p>11</p></td><td class="confluenceTd"><p>9.078283</p></td><td class="confluenceTd"><p>7.565657</p></td><td class="confluenceTd"><p><br /></p></td></tr><tr><td class="confluenceTd"><p>NCAIU0</p></td><td class="confluenceTd"><p>30.62374</p></td><td class="confluenceTd"><p>4.871212</p></td><td class="confluenceTd"><p>2.035354</p></td><td class="confluenceTd"><p><br /></p></td></tr><tr><td class="confluenceTd"><p>NCAIU1</p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p><br /></p></td></tr><tr><td class="confluenceTd"><p>NCAIU2</p></td><td class="confluenceTd"><p>21.95707</p></td><td class="confluenceTd"><p>2.621212</p></td><td class="confluenceTd"><p>1.093434</p></td><td class="confluenceTd"><p><br /></p></td></tr><tr><td class="confluenceTd"><p>NCAIU3</p></td><td class="confluenceTd"><p>12.03283</p></td><td class="confluenceTd"><p>2.44697</p></td><td class="confluenceTd"><p>1.070707</p></td><td class="confluenceTd"><p><br /></p></td></tr></tbody></table></div><p><br class="atl-forced-newline" />DCE0/DCE1(when QoS enabled)</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col /><col /><col /><col /><col /></colgroup><tbody><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>ATT</p></td><td class="confluenceTd"><p>MRD</p></td><td class="confluenceTd"><p>SNP</p></td><td class="confluenceTd"><p>RB</p></td></tr><tr><td class="confluenceTd"><p><br /></p></td><td class="confluenceTd"><p>36</p></td><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>8</p></td></tr><tr><td class="confluenceTd"><p>DCE 0 credit</p></td><td class="confluenceTd"><p>25.7298</p></td><td class="confluenceTd"><p>2.270202</p></td><td class="confluenceTd"><p>0.628788</p></td><td class="confluenceTd"><p><span class="legacy-color-text-orange1"><strong>7.583333</strong></span></p></td></tr><tr><td class="confluenceTd"><p>DCE 1 credit</p></td><td class="confluenceTd"><p>33.56818</p></td><td class="confluenceTd"><p>1.871212</p></td><td class="confluenceTd"><p>0.982323</p></td><td class="confluenceTd"><p><span class="legacy-color-text-orange1"><strong>7.737374</strong></span></p></td></tr></tbody></table></div><p><br /></p><p><span class="legacy-color-text-blue4"><strong><span style="text-decoration: underline;">Scenario 2-2: Read intensive test, comparison between QoS0 vs. disable QoS</span></strong></span></p><p><strong><u>Experimental</u></strong><strong><span style="text-decoration: underline;">&nbsp;</span></strong><strong><u>Environment</u></strong></p><ul><li><span style="letter-spacing: 0.0px;">In this test, compared performance between the simulation with all transaction with QoS value 0 and the configuration with &quot;qosEnabled&quot; = false.&nbsp;</span></li><li><span style="letter-spacing: 0.0px;">With the qosEnabled = false system configuration, axQoS signal is </span>disabled<span style="letter-spacing: 0.0px;">&nbsp;at ACE interface also.&nbsp;</span></li><li><span style="letter-spacing: 0.0px;">Using the RTL release at Nov 4th. </span></li></ul><p><br /></p><p><strong><span style="text-decoration: underline;">1) Observation</span></strong></p><ul><li>With the &quot;disable qos&quot;, observing 4% of the utilization improvement.&nbsp;</li><li>CAIU latency reduced 9%</li></ul><p><br /></p><p><strong><span style="text-decoration: underline;">2) Latency &amp; BW Differences</span></strong></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="126" src="https://arterisip.atlassian.net/wiki/download/attachments/247366596/image2021-11-12_12-34-36.png?api=v2" /></span><br /><br class="atl-forced-newline" /><a class="external-link" href="https://arteris-my.sharepoint.com/:x:/p/junie_um/EblkkeP7lppIs_lC2znw6AwB0iwSoEVP8o6W7FLYR0eMWA?e=mqtMtl" rel="nofollow">NCore_Perf_NXP_nxp_config_Test2_3.xlsx</a></p>