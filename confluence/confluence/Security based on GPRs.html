<style type='text/css'>/*<![CDATA[*/
div.rbtoc1759724821200 {padding: 0px;}
div.rbtoc1759724821200 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759724821200 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759724821200'>
<ul class='toc-indentation'>
<li><a href='#SecuritybasedonGPRs-Overview'>Overview</a></li>
<li><a href='#SecuritybasedonGPRs-StimulusDescription'>Stimulus Description</a></li>
<li><a href='#SecuritybasedonGPRs-FunctionalChecksandCoverage'>Functional Checks and Coverage</a></li>
<li><a href='#SecuritybasedonGPRs-DirectedTestcases'>Directed Testcases</a></li>
<li><a href='#SecuritybasedonGPRs-Configs/RandomTestcases'>Configs/Random Testcases</a></li>
</ul>
</div><h1 id="SecuritybasedonGPRs-Overview">Overview</h1><p><span class="inline-comment-marker" data-ref="d27198a9-b499-4481-8bbe-d8fdcf3de40a">The GPRAR register bits [7:6],</span> previously reserved, carry the NSX[1:0] field that describes the security level required to access this GPR address region.</p><ul><li><p>If a GPR address region is programmed for secured access (NSX[0]==0), then a non-secure access to the address region is treated as an address map error by the ioaiu.</p></li><li><p>If a GPR address region is programmed for non-secure access (NSX[0]==1), then neither a secure nor a non-secure access will result in an address map error due to security.</p></li></ul><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/60555500/image-20230530-213950.png?api=v2"></span><p /><p><strong>Reference Docs/Links</strong></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164545/Ncore+3.4_IOAIU+Micro-Architecture+Specification" data-linked-resource-id="16164545" data-linked-resource-version="8" data-linked-resource-type="page">IOAIU U-Arch spec [3.4 release]</a> <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164545/Ncore+3.4_IOAIU+Micro-Architecture+Specification?preview=%2F16164545%2F16177820%2FNcore+3.4+IOAIU+Micro+Architecture+Specification.docx" rel="nofollow">Ncore 3.4 IOAIU Micro Architecture Specification.docx</a></p><h1 id="SecuritybasedonGPRs-StimulusDescription">Stimulus Description</h1><p /><div class="table-wrap"><table data-layout="full-width" data-local-id="bf1a5f77-fa57-40a0-b613-8ed750ea4ee2" class="confluenceTable"><colgroup><col style="width: 194.0px;"/><col style="width: 128.0px;"/><col style="width: 146.0px;"/><col style="width: 140.0px;"/><col style="width: 146.0px;"/><col style="width: 146.0px;"/><col style="width: 146.0px;"/><col style="width: 146.0px;"/><col style="width: 146.0px;"/><col style="width: 146.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>Stimulus</strong></p></th><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>Description</strong></p></th><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>Constraint</strong></p></th><th class="confluenceTh"><p><strong>Reference Doc</strong></p></th><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>Hash-Tag</strong></p></th><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>TB Location</strong></p></th><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>Priority</strong></p></th><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>Implemented</strong></p></th><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>Status</strong></p></th><th data-highlight-colour="#f4f5f7" class="confluenceTh"><p><strong>Remarks</strong></p></th></tr><tr><td rowspan="2" class="confluenceTd"><p>Run random traffic from GPRAR address region,</p><p>with NS bit randomized</p></td><td rowspan="2" class="confluenceTd"><p>Any transaction that with NS=1 is terminated in IOAIU as a DECERR</p></td><td class="confluenceTd"><p>address inside { GPRAR address region}</p><p>plusarg:all_gpra_secure to program all GPRAs to have NSX[1:0]=0</p></td><td rowspan="6" class="confluenceTd"><p>Ncore 3.4 IOAIU Micro-Architecture Specification</p><p>Version 0.91, May 10, 2023</p><p>9.7 Ncore Security Extension</p><p>6.3.7.2     Non-secure handling</p><p /></td><td class="confluenceTd"><p>#Constraint.IOAIU.all_gpra_secure</p></td><td class="confluenceTd"><p>addr_trans_mgr.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>address inside { GPRAR address region}</p><p>plusarg:”random_gpra_secure” programs random GPRAs  to have NSX[1:0]=0 or NSX[1:0]=1</p></td><td class="confluenceTd"><p>#Constraint.IOAIU.random_gpra_secure</p></td><td class="confluenceTd"><p>addr_trans_mgr.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td rowspan="2" class="confluenceTd"><p>Run random traffic from NRS address region,</p><p>with NS bit randomized</p></td><td rowspan="2" class="confluenceTd"><p>Any transaction that with NS=1 or NS=0 is completed by IOAIU without an error</p></td><td class="confluenceTd"><p>address inside { NRS address region}</p><p>plusarg:all_gpra_secure to program all GPRAs to have NSX[1:0]=0</p><p>config has fnCsrAccess=1</p></td><td class="confluenceTd"><p>#Constraint.IOAIU.all_gpra_secure</p></td><td class="confluenceTd"><p>addr_trans_mgr.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>address inside { NRS address region}</p><p>plusarg:”random_gpra_secure” programs random GPRAs  to have NSX[1:0]=0 or NSX[1:0]=1</p><p>config has fnCsrAccess=1</p></td><td class="confluenceTd"><p>#Constraint.IOAIU.random_gpra_secure</p></td><td class="confluenceTd"><p>addr_trans_mgr.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td rowspan="2" class="confluenceTd"><p>Run random traffic from Boot address region,</p><p>with NS bit randomized</p></td><td rowspan="2" class="confluenceTd"><p>Any transaction that with NS=1 or NS=0 is completed by IOAIU without an error</p></td><td class="confluenceTd"><p>address inside { Boot address region}</p><p>plusarg:all_gpra_secure to program all GPRAs to have NSX[1:0]=0</p></td><td class="confluenceTd"><p>#Constraint.IOAIU.all_gpra_secure</p></td><td class="confluenceTd"><p>addr_trans_mgr.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>address inside { Boot address region}</p><p>plusarg:”random_gpra_secure” programs random GPRAs  to have NSX[1:0]=0 or NSX[1:0]=1</p></td><td class="confluenceTd"><p>#Constraint.IOAIU.random_gpra_secure</p></td><td class="confluenceTd"><p>addr_trans_mgr.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h1 id="SecuritybasedonGPRs-FunctionalChecksandCoverage">Functional Checks and Coverage</h1><p><strong>Reference Doc: </strong>(applies to entire table below)</p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164545/Ncore+3.4_IOAIU+Micro-Architecture+Specification" data-linked-resource-id="16164545" data-linked-resource-version="8" data-linked-resource-type="page">IOAIU U-Arch spec [3.4 release]</a> </p><p>Section 9.7 Ncore Security Extension</p><p>Section 6.3.7.2 Non-secure handling</p><div class="table-wrap"><table data-layout="full-width" data-local-id="0c8cd395-067e-4c3c-af60-5e3dd8169bd7" class="confluenceTable"><colgroup><col style="width: 336.0px;"/><col style="width: 140.0px;"/><col style="width: 261.0px;"/><col style="width: 122.0px;"/><col style="width: 65.0px;"/><col style="width: 209.0px;"/><col style="width: 164.0px;"/><col style="width: 187.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Scenario</strong></p></th><th class="confluenceTh"><p><strong>Reference Doc</strong></p></th><th class="confluenceTh"><p><strong>Hash-Tag</strong></p></th><th class="confluenceTh"><p><strong>TB Location </strong></p></th><th class="confluenceTh"><p><strong>Priority</strong></p></th><th class="confluenceTh"><p><strong>Implemented </strong></p></th><th class="confluenceTh"><p><strong>Status</strong></p></th><th class="confluenceTh"><p><strong>Remarks</strong></p></th></tr><tr><td class="confluenceTd"><p>Check that transaction with NS=1 if hits a region with NSX[1:0]=0 terminates within IOAIU and a DECERR is issued back on RRESP/BRESP</p></td><td rowspan="4" class="confluenceTd"><p>Ncore 3.4 IOAIU Micro-Architecture Specification</p><p>Version 0.91, May 10, 2023</p><p>9.7 Ncore Security Extension</p><p>6.3.7.2     Non-secure handling</p></td><td class="confluenceTd"><p>#Check.IOAIU.illegalNSAccess_Read_DECERR</p><p>#Check.IOAIU.illegalNSAccess_Write_DECERR</p></td><td class="confluenceTd"><p>ioaiu_scoreboard.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>cross txn_ns_bit (0,1) x NSX (0,1)</p><p>x address_region(GPRAR, NRS, Boot) for Read transaction </p><p>DECERR is returned only for this scenario: NS_1, NSX_0, GPRAR region</p></td><td class="confluenceTd"><p>#Cover.IOAIU.Security.Read</p></td><td class="confluenceTd"><p>ioaiu_coverage.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>cross txn_ns_bit (0,1) x NSX (0,1)</p><p>x address_region(GPRAR, NRS, Boot) for Write transaction </p><p>DECERR is returned only for this scenario: NS_1, NSX_0, GPRAR region</p></td><td class="confluenceTd"><p>#Cover.IOAIU.Security.Write</p></td><td class="confluenceTd"><p>ioaiu_coverage.svh</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>When DECERR is returned for illegalNSAccess, xUESR(uncorrectable error status register) is checked. </p><p>Poll For UESR.ErrVld=1</p><p>When UESR.ErrVld==1 check for the following-</p><p>UESR.ErrType=0x7 (DECERR)</p><p>UESR.ErrInfo.Type=4’b1000 (IllegalSecurityAccess)</p><p>UESR.ErrInfo.CommandType=Error transaction 1’b0(Read)/1’b1(Write)</p><p>UESR.ErrInfo.AXID = Error transaction AXID</p></td><td class="confluenceTd"><p>#Check.IOAIU.IllegalNSAccess_ErrorLogging</p></td><td class="confluenceTd"><p>ioaiu_csr_seq_lib.sv</p></td><td class="confluenceTd"><p>High</p></td><td class="confluenceTd"><p>Done</p></td><td class="confluenceTd"><p>Pass</p></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><h1 id="SecuritybasedonGPRs-DirectedTestcases">Directed Testcases</h1><p>Directed testcases will be added as we discover coverage holes. </p><p /><h1 id="SecuritybasedonGPRs-Configs/RandomTestcases">Configs/Random Testcases</h1><p>Below are the configs and testcases this feature will be exercised, and coverage collected/analyzed and closed. </p><div class="table-wrap"><table data-layout="wide" data-local-id="4df4c849-72c6-4e7d-866a-f10edbfa2cb9" class="confluenceTable"><colgroup><col style="width: 527.0px;"/><col style="width: 433.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Configs Name/Description</strong></p></th><th class="confluenceTh"><p><strong>Testcases Name/Description</strong></p></th></tr><tr><td class="confluenceTd"><p>hw_cfg_meye_q7_ioc_4c → 4-core Multi-port AXI4 w/proxyCache</p></td><td rowspan="4" class="confluenceTd"><p>random_traffic_all_gpra_secure → All GPRAs are marked secure</p><p>random_traffic_random_gpra_secure → Some GPRAs are marked secure and other non-secure based on random distribution</p></td></tr><tr><td class="confluenceTd"><p>hw_cfg_meye_q7_aux1_axi4_1c → Single-port AXI4 w/o proxyCache</p></td></tr><tr><td class="confluenceTd"><p>hw_cfg_meye_q7_cpu2_ace_1c → Single-port ACE</p></td></tr><tr><td class="confluenceTd"><p>hw_cfg_meye_q7_south1_ace_lite_1c → Single-port ACE-LITE</p></td></tr></tbody></table></div><p />