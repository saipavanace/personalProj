<h2 id="flm-Descriptions">Descriptions</h2><p>Free List Manager (FLM) module.</p><p>The FLM module is used to allocate resources.<br/><br/>The 'allocate' output interface is an ack/valid interface that provides an<br/>available one-hot index number when valid is asserted.<br/>When ack is asserted, it moves on to the next free index number.<br/>If no index numbers are available, then valid is deasserted.</p><p>The deallocate interface accepts multi-hot index numbers when valid is<br/>asserted, at which point the FLM returns the indexes to its pool of<br/>available resources.<br/>The deallocate interfaces never backpressure, and don't have a ready or ack<br/>signal.<br/><br/>The FLM ensures that once an index number has been provided on the allocate<br/>interface, it is not reused until it is returned to the FLM via the<br/>deallocate interface.<br/><br/>The FLM can have one or two deallocate interfaces to allow resources to be<br/>deallocated from different points in the design.<br/>These interface are independent: valid on any subset of the deallocate<br/>interfaces can be asserted on any clock cycle, and there are no throughput<br/>limitations.<br/><br/>The FLM can have one or two allocate interfaces.<br/>When there are two allocate interfaces, the FLM can provide new indices on<br/>both allocate interfaces on a given clock cycle.<br/><br/>The FLM does not support reserved entries. External logic can implement it<br/>by keep tracking of the number of outstanding entries allocated, and if it<br/>reaches a threshold number, then external logic is expected not to assert<br/>the allocate ack signal.<br/><br/>Internally, the FLM is implemented as a bit vector of available entries<br/>with a priority encoder per allocate port to select a free entry on any<br/>clock cycle.<br/><br/>To ease synthesis timing, Port 0 allocates from least significant bit,<br/>Port 1 allocates from most significant bit. As a result, Port 0 allocate<br/>output have the same propagation delay as Port 1 allocate output.<br/><br/><br/></p><h2 id="flm-jsParameters">js Parameters</h2><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Parameter</th><th class="confluenceTh">Type</th><th class="confluenceTh">Range of values</th><th class="confluenceTh">Default</th><th colspan="1" class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd">num_entries</td><td class="confluenceTd">int</td><td class="confluenceTd">2 .. 2^num_entries</td><td class="confluenceTd"> </td><td colspan="1" class="confluenceTd">the number of entries managed by the FLM </td></tr><tr><td colspan="1" class="confluenceTd">num_deallocate_interfaces</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">1..2</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">the number of deallocate interfaces</td></tr><tr><td colspan="1" class="confluenceTd">num_allocate_interfaces</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">1..2</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">the number of allocate interfaces</td></tr><tr><td colspan="1" class="confluenceTd">assertOn</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">0..1</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">enable emit of assertions</td></tr></tbody></table></div><h2 id="flm-VerilogParameters"><br/>Verilog Parameters </h2><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Parameter</th><th class="confluenceTh">Type</th><th class="confluenceTh">Range of values</th><th class="confluenceTh">Default</th><th colspan="1" class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd"> </td><td class="confluenceTd"> </td><td class="confluenceTd"> </td><td class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr></tbody></table></div><h2 id="flm-IOPorts"><br/>IO Ports</h2><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th style="text-align: center;" class="confluenceTh">Port</th><th style="text-align: center;" class="confluenceTh">Direction</th><th style="text-align: center;" class="confluenceTh">Width</th><th colspan="1" style="text-align: center;" class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd">clk</td><td style="text-align: left;" class="confluenceTd">Input</td><td style="text-align: left;" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">clock</td></tr><tr><td colspan="1" class="confluenceTd">reset_n</td><td colspan="1" style="text-align: left;" class="confluenceTd">Input</td><td colspan="1" style="text-align: left;" class="confluenceTd">1 (RstEn)</td><td colspan="1" class="confluenceTd">Active low async reset</td></tr><tr><td colspan="1" class="confluenceTd">allocate0</td><td colspan="1" style="text-align: left;" class="confluenceTd">output</td><td colspan="1" style="text-align: left;" class="confluenceTd">num_entries</td><td colspan="1" class="confluenceTd">Allocate bit vector, onehot0</td></tr><tr><td colspan="1" class="confluenceTd">allocate0_vld</td><td colspan="1" style="text-align: left;" class="confluenceTd">output</td><td colspan="1" style="text-align: left;" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Allocate valid</td></tr><tr><td colspan="1" class="confluenceTd">allocate0_ack</td><td colspan="1" style="text-align: left;" class="confluenceTd">input</td><td colspan="1" style="text-align: left;" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Allocate acknowledge</td></tr><tr><td colspan="1" class="confluenceTd">deallocate0</td><td colspan="1" style="text-align: left;" class="confluenceTd">input</td><td colspan="1" style="text-align: left;" class="confluenceTd">num_entries</td><td colspan="1" class="confluenceTd">Deallocate bit vector, multihot0</td></tr><tr><td colspan="1" class="confluenceTd">deallocate0_vld</td><td colspan="1" style="text-align: left;" class="confluenceTd">input</td><td colspan="1" style="text-align: left;" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Deallocate valid</td></tr></tbody></table></div><p> </p><p>if (u.getParam('num_allocate_interfaces') == 2) {</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th style="text-align: center;" class="confluenceTh">Port</th><th style="text-align: center;" class="confluenceTh">Direction</th><th style="text-align: center;" class="confluenceTh">Width</th><th colspan="1" style="text-align: center;" class="confluenceTh"><p>Description</p></th></tr><tr><td colspan="1" class="confluenceTd">allocate1</td><td colspan="1" class="confluenceTd">output</td><td colspan="1" class="confluenceTd">num_entries</td><td colspan="1" class="confluenceTd">Allocate bit vector, onehot0</td></tr><tr><td colspan="1" class="confluenceTd">allocate1_vld</td><td colspan="1" class="confluenceTd">output</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Allocate valid</td></tr><tr><td colspan="1" class="confluenceTd">allocate1_ack</td><td colspan="1" class="confluenceTd">input</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Allocate acknowledge</td></tr></tbody></table></div><p>}</p><p>if (u.getParam('num_deallocate_interfaces') == 2) {</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th style="text-align: center;" class="confluenceTh">Port</th><th style="text-align: center;" class="confluenceTh">Direction</th><th style="text-align: center;" class="confluenceTh">Width</th><th colspan="1" style="text-align: center;" class="confluenceTh"><p>Description</p></th></tr><tr><td colspan="1" class="confluenceTd">deallocate1</td><td colspan="1" class="confluenceTd">input</td><td colspan="1" class="confluenceTd">num_entries</td><td colspan="1" class="confluenceTd">Deallocate bit vector, multihot0</td></tr><tr><td colspan="1" class="confluenceTd">deallocate1_vld</td><td colspan="1" class="confluenceTd">input</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Deallocate valid</td></tr></tbody></table></div><p>}</p><p> </p>