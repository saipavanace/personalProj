<p>Detailed hardware specification can be found in chapter 16 - Errors and Interrupts of <a class="external-link" href="https://confluence.arteris.com/display/ENGR/Symphony+Architecture+Spec?preview=/4852256/10389368/Symphony_Arch_v0.95_R2.pdf" rel="nofollow">Symphony Architecture</a> document </p><p>Following is my understanding of implication of interrupt support on Maestro SW from conversation with John and Mokhtar on 9/4/2019</p><ol><li>Any leaf level element (unit) in Maestro hierarchy can send one interrupt signal, which eventually reaches our top level boundary and indicates that some abnormal event occurred within the instance - for ex parity error detected.<br/><br/></li><li>Maestro needs to automatically determine which elements can send interrupts by looking at element types and parameters. For ex Ncore units, ATUs and clock adapters can send interrupts, while switches can't.<br/><br/></li><li>In gen_wrapper json generated by Maestro unit level interrupt is transmitted from the unit through interface <a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceINT" rel="nofollow">InterfaceINT</a>, which will actually contain just one signal. If multiple interrupt types can occur within one unit, the accumulation must be done internally by the unit hardware and only one signal is sent outside<br/><br/></li><li><p>The details of event which caused an interrupt are stored in a register/s inside the unit. The outside software can access this data through APB interface. The exact action which user software can take while reacting to interrupt event is not defined<br/><br/></p></li><li>Outside the units interrupts are aggregated within the hierarchy where user put them as this indicates physical proximity intent. For ex if Ncore units U1,U2, and U3 are wrapped in a hierarchy X (which will become a gen_wrapper instance) X will contain an instance of <a class="external-link" href="https://confluence.arteris.com/display/ENGR/interrupt" rel="nofollow"> interrupt accumulator</a>. Accumulator receives interrupt signals from all the units in the hierarchy , and sends one interrupt signal (which is a simple OR of U1,U2 and U3) to the next level accumulator. Also it remembers in the internal register the source of the interrupts. For ex if accumulator received interrupt signals from A and C it stores '101' in the internal register which will help outside software to trace back to the source of the interrupt.<br/>Maestro doesn't need to care about details of the accumulator register, but  we expect it to dump some sort of a tree-like file which helps to associate next level accumulator with the register bit stored in accumulator of the level above. For ex if accumulator instance called Accumulator1 found in hier X receives interrupts signals from units U3,U2,U1 (order is important) we should dump <br/>X/Accumulator1: [ X/U3, X/U2, X/U1 ]<br/><br/></li><li>One accumulator can receive up to 32 interrupt signals from the level below. Thus if the number of units in the hierarchy which can send the interrupt is higher we will need to split it into groups thus creating a binary tree of accumulators inside the hierarchy    <br/><br/>Diagram below illustrates a contrived example of interrupt hierarchy<br/><img class="wysiwyg-unknown-macro" src="https://arterisip.atlassian.net/wiki/plugins/servlet/confluence/placeholder/unknown-macro?name=gliffy&amp;locale=en_US&amp;version=2" /><br/><br/>ANd this is a proposed dump from Maestro corresponding to the diagram</li></ol><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{&quot;Accumulator1&quot;:
  &quot;X/Accumulator1&quot;: [&quot;X/U3&quot;,&quot;X/U2&quot;,&quot;X/U1&quot;],
  &quot;Y/Accumulator1&quot;: [&quot;Y/U1&quot;,&quot;Y/U2&quot;, ... &quot;Y/U32&quot;],
  &quot;Y/Accumulator2&quot;: [
      &quot;Y/U33&quot;, 
      {&quot;Z/Accumulator1&quot;:[&quot;Y/Z/U34&quot;,&quot;Y/Z/U35&quot;]}
   ]
}  </pre>
</div></div><p> </p><p> </p><p>  </p>