<p><br/></p><p><br/></p><p><u><strong>STEPS FOR ADDING new hw_cfg to NCORE3_automatic dv phase1 generation flow:</strong></u></p><p>cd to new checkout area</p><p>source SOURCEME.csh ncore3.0.1</p><p>source /engr/dev/tools/mentor/VeloceVirtuaLAB_v20.2/VirtuaLAB_v20.2/env.csh</p><p><br/>STEP 1: Enter your current working directory and run command for vcs.log generation</p><p>If setting up a new config, add the new config name under the test in this file: $WORK_TOP/hw-ncr/dv/full_sys/tb/runsim_testlist.json</p><p>cd $WORK_TOP/dv/full_sys/</p><p>[full_sys]$ runsim -e fsys -c hw_cfg_* -t chiaiu_csr -s 01 -v UVM_HIGH</p><p>The generated vcs.log is in::: $WORK_TOP/debug/fsys/hw_cfg_*/run/concerto_fullsys_test_chiaiu_csr_0/vcs.log</p><p>NOTE 1: If you want to boot with chi then use chiaiu_csr test or if with ace then use ioaiu_csr test.<br/>NOTE 2: Here, hw_cfg_* represents respective config. For example, hw_cfg_3 ..</p><p><br/></p><p>STEP 2: Make local copy of perl scripts for ncore3 boot generation. This is one time per user only.</p><p>cp /scratch/dhalani/temp/script user_script</p><p>cd user_script</p><p>Copy the generated vcs.log to user_script directory and run the below cmd</p><p>[user_script]$ ./<a class="external-link" href="http://vcs2chicmd_128.pl" rel="nofollow">vcs2chicmd_128.pl</a> 0 vcs.log</p><p>It wil generate TBX_boot.cmd for ncore3.</p><p>NOTE 1: 128 is based on chi or ace data_width and <a class="external-link" href="http://vcs2chicmd_128.pl" rel="nofollow">vcs2chicmd_128.pl</a> is for chi or <a class="external-link" href="http://vcs2acecmd_128.pl" rel="nofollow">vcs2acecmd_128.pl</a> is for ace. <br/>NOTE 2: Here, user_script is path for respective user scratch area</p><p><br/></p><p>STEP 3: Copy generated TBX_boot.cmd in $WORK_TOP/emulation_t/tb/ <br/>i.e.: /TBX_chi0_boot_hw_cfg_3.cmd (sample boot_cmd for hw_cfg_3)</p><p>Grep GPA in vcs.log and append to new file as base_addr_hw_cfg_*.sv, pick the base address from the range for each zone.<br/>i.e.: <a class="external-link" href="http://base_addr_hw_cfg_3.sv" rel="nofollow">base_addr_hw_cfg_3.sv</a> (sample base_addr for hw_cfg_3)</p><p>Add the above two new files into dvPkg.json flow.</p><p>$WORK_TOP/emulation_t/tb/dvPkg.json</p><p><br/></p><p>STEP 4: Open <a class="external-link" href="http://hdl_top.sv" rel="nofollow">hdl_top.sv</a>, <a class="external-link" href="http://my_chi_traffic.sv" rel="nofollow">my_chi_traffic.sv</a>, <a class="external-link" href="http://my_axi_traffic.sv" rel="nofollow">my_axi_traffic.sv</a>, <a class="external-link" href="http://ncore_traffic.sv" rel="nofollow">ncore_traffic.sv</a> from $WORK_TOP/emulation_t/tb/</p><p>Add respective $test$plusargs to add new_hw_cfg into the flow.</p><p>Look at the below part for Reference:<br/>&gt;&gt;<a class="external-link" href="http://my_chi_traffic.sv" rel="nofollow">my_chi_traffic.sv</a><br/>if($test$plusargs(&quot;hw_cfg_3&quot;))<br/>`include &quot;./TBX_chi0_boot_hw_cfg_3.cmd&quot;</p><p>&gt;&gt;<a class="external-link" href="http://my_axi_traffic.sv" rel="nofollow">my_axi_traffic.sv</a>Â (If booting from ACE)<br/>if($test$plusargs(&quot;hw_cfg_3&quot;)) <br/>`include &quot;./TBX_ace0_boot_hw_cfg_3.cmd&quot;</p><p>&gt;&gt;<a class="external-link" href="http://ncore_traffic.sv" rel="nofollow">ncore_traffic.sv</a><br/>if($test$plusargs(&quot;hw_cfg_3&quot;)) <br/>`include &quot;./<a class="external-link" href="http://base_addr_hw_cfg_3.sv" rel="nofollow">base_addr_hw_cfg_3.sv</a>&quot; <br/><br/>&gt;&gt;<a class="external-link" href="http://hdl_top.sv" rel="nofollow">hdl_top.sv</a><br/>if($test$plusargs(&quot;hw_cfg_3&quot;))<br/>`include &quot;./<a class="external-link" href="http://base_addr_hw_cfg_3.sv" rel="nofollow">base_addr_hw_cfg_3.sv</a>&quot;</p><p><br/></p><p>STEP 5: cd $WORK_TOP</p><p><br/></p><p>STEP 6: Run the respective node cmd for new_hw_cfg<br/>Eg:: <br/>node $WORK_TOP/../scripts/qrsim.js -a -m -e emu_t -c -n hw_cfg_3 -d ASSERT_ON,INHOUSE_APB_VIP -y hw_config_03 -Z $WORK_TOP/../test_projects/ncore_v3.0_configs/fsys_config/hw_cfg_03<br/><br/>It will generate DV's files in $WORK_TOP/debug/emu_t/hw_cfg_3/dv/</p><p>Run the following simulation command from $WORK_TOP/emulation_t/ncore3_config</p><p>[ncore3_config]$ make HW_CFG=hw_cfg_3 myall</p><p>NOTE: Recommended to use hw_cfg_3 after -n switch at node and myall commands. Do not use hw_cfg_03 .</p><p>===============================================================END============================================================</p><p><br/></p>