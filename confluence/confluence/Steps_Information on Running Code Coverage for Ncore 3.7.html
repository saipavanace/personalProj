<p><style>[data-colorid=e5dz95e4qj]{color:#ff5630} html[data-color-mode=dark] [data-colorid=e5dz95e4qj]{color:#cf2600}</style>** Updated 02/06/2025 **</p><h3 id="Steps/InformationonRunningCodeCoverageforNcore3.7-#1.Populateandcreateyourownworkarea."><strong>#1</strong>. Populate and create your own workarea.</h3><h3 id="Steps/InformationonRunningCodeCoverageforNcore3.7-#2.Kickoffregressionsuiteforcodecoverageonaparticularconfigurationfromtherunsimcommandline:"><strong>#2</strong>. Kickoff regression suite for code coverage on a particular configuration from the runsim command line:</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">runsim -e &lt;block_name&gt; -c &lt;config_name&gt; -l regr_cov -v UVM_NONE -i &lt;num&gt; -g -exe 377,6F</pre>
</div></div><p>This command will: </p><ol start="1"><li><p>Run all tests with the label &lsquo;regr_cov&rsquo; for &lt;num&gt; iterations on that configuration (remove -i will use default iterations in tclist)</p></li><li><p>Removing -c will run all configs/tests with the label on that environment. </p></li><li><p>&lsquo;-exe 377,6F&rsquo; will enable Code Coverage with regressions</p></li><li><p>&lsquo;-exe 777,6F&rsquo; will enable Code Coverage &amp; run VCFormal with regressions</p></li><li><p>Merge individual tests' VDB databases together as merged database.</p></li></ol><p>Example DVE command: (Will run default iterations of each test without -i &lt;num&gt; &amp; Code Coverage Only)</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">runsim -e dve -c hw_config_resiliency_duplication_pma -l regr_cov -v UVM_NONE -g -exe 377,6F</pre>
</div></div><p /><h3 id="Steps/InformationonRunningCodeCoverageforNcore3.7-#3.ARunVC-statictoautomaticallygenerateanyunreachablecoverageonthemergeddatabasefromstep#2above.ThiswillyieldanotherVDBdatabase&amp;anexclusion&lt;filename>.elfile."><strong>#3.A </strong>Run VC-static to automatically generate any unreachable coverage on the merged database from step #2 above. This will yield another VDB database &amp; an exclusion &lt;filename&gt;.el file. </h3><p>Copy flist.f of regression run &amp; template tcl script into your work dir.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">cp $WORK_TOP/regression/&lt;timestamp&gt;/debug/dve/hw_config_resiliency_duplication_pma/coverage/../rtl/flist.f to your &lt;workDir&gt;
cp /home/jasonv/work/run_batch.tcl to your &lt;workDir&gt;</pre>
</div></div><p>Edit any areas in the run_batch.tcl script that contain &ldquo;REPLACE&rdquo; in the comments. This will include unit name, path to flist/reports, etc. </p><p>You can copy the top.flist file that is located in the regression rtl dir into your rundir and change the $PROJ_HOME &hellip;. with the proper link to load in verilog files.</p><p>run VCFormal on the command line. This will create an exclusion file &amp; merged VDB database file.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Environment variables should be automatically loaded if you built a 3.7 ENV. However if not issue:
(TCSH) setenv VC_STATIC_HOME /engr/eda/tools/synopsys/vc_static_vW-2024.09-SP1
setenv PATH &quot;$PATH&quot;:$VC_STATIC_HOME/bin

vcf -f run_batch.tcl</pre>
</div></div><p /><h3 id="Steps/InformationonRunningCodeCoverageforNcore3.7-#3.BRunVC-Static/Formalviarunsim.">#3.B Run VC-Static/Formal via runsim.</h3><p>The following method is easier and involves less manual updates. Unclear on if it works on 3.7 at the moment. TBC</p><p><strong><span data-colorid="e5dz95e4qj">*NOTE* If you did not run the original regression database, you must copy over the entire regression area to your area. </span></strong></p><p>This will kick off a VC-Static/Formal run only and place the results in:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">cd &lt;workDir&gt;
runsim -e &lt;block_name&gt; -t random -i 1 -c &lt;config_name&gt; -exe 400 -g -d $WORK_TOP/regression/&lt;timestamp&gt;</pre>
</div></div><p /><h3 id="Steps/InformationonRunningCodeCoverageforNcore3.7-#4UseDVEtooltoanalyzeandviewcoverageDBfile,writeexclusions,etc."><strong>#4</strong> Use DVE tool to analyze and view coverage DB file, write exclusions, etc.</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">dve -cov -covdir $WORK_TOP/regression/&lt;timestamp&gt;/debug/dve/hw_config_resiliency_duplication_pma/coverage/merged_dve_hw_config_resiliency_duplication_pma.vdb/</pre>
</div></div><p>One can also use the web browser to view HTML/text reports of collected code coverage if desired. Cannot write exclusions. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">firefox $WORK_TOP/regression/&lt;timestamp&gt;/debug/dve/hw_config_resiliency_duplication_pma/coverage/urgReport/dashboard.html &amp;
vi $WORK_TOP/regression/&lt;timestamp&gt;/debug/dve/hw_config_resiliency_duplication_pma/coverage/urgReport/dashboard.txt &amp;</pre>
</div></div><h3 id="Steps/InformationonRunningCodeCoverageforNcore3.7-#5EachdesignerwillexamineVDBdatabasefromstep#3andgenerate/createspecificRTLexclusionstoachievedesigngoalsfortherelease.Resultingexclusion&lt;filename>.elfilewillthenbesavedtohw-ncr/rtl/&lt;unit>/exclusions/"><strong>#5</strong> Each designer will examine VDB database from step #3 and generate/create specific RTL exclusions to achieve design goals for the release. Resulting exclusion &lt;filename&gt;.el file will then be saved to hw-ncr/rtl/&lt;unit&gt;/exclusions/</h3><p /><h3 id="Steps/InformationonRunningCodeCoverageforNcore3.7-#6Generateworkingdirectorytosavelatesthtmlurgreportdir,VDBdatabase&amp;anyexclusionfilestopublicdirtosaveforfutureanalysis."><strong>#6 Generate working directory to save latest html urg report dir, VDB database &amp; any exclusion files to public dir to save for future analysis. </strong></h3><p>This TBC since we want to place these results in some location for a particular release. Will update here with those details. </p><p>Example area:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">mkdir ~/public_html/ncore3.7/dveCodeCov/hw_config_resiliency_duplication_pma/</pre>
</div></div><p />