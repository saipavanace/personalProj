<div class="wiki-content"><style>[data-colorid=p18xnrbm3b]{color:#333333} html[data-color-mode=dark] [data-colorid=p18xnrbm3b]{color:#cccccc}[data-colorid=xg7prjdmri]{color:#333333} html[data-color-mode=dark] [data-colorid=xg7prjdmri]{color:#cccccc}</style><h1 id="protection_placeholder-SWVisible:"><strong>SW Visible:</strong></h1><p>no</p><h1 id="protection_placeholder-Parameters:"><strong>Parameters:</strong></h1><h2 id="protection_placeholder-Javascript:"><strong>Javascript:</strong></h2><pre>&nbsp;</pre><pre>{</pre><pre>  &quot;clkInterface&quot;                  : {interfaceDef},      // Clock Interface</pre><pre>  &quot;nativeInterface&quot;               : {interfaceDef},      // Native Interface which will be protected</pre><pre>  &quot;placeHolderDirection&quot;          : &quot;master&quot; or &quot;slave&quot;, // Direction of the native interface above</pre><pre>  &quot;useResiliency&quot;                 : 0 or 1,              // Enables the creation of fault outputs</pre><pre>  &quot;protectionEnable&quot;              : 0 or 1,              // Enables the creation of the user defined signal interface</pre><pre>  &quot;nativeIntfProtectionInterface&quot; : {interfaceDef}       // The user defined interface used for protection (Generated from InterfaceGeneric)</pre><p>}</p><pre><strong style="font-size: 24.0px;font-family: Arial , sans-serif;">I/O:</strong></pre><p>u.interface('', &quot;slave&quot; , clkInterface);</p><p>if((u.getParam('placeHolderDirection') == 'master'))<br />{<br />&nbsp; &nbsp; u.interface('in_',&quot;slave&quot;, nativeInterface);<br />&nbsp; &nbsp; u.interface('out_',&quot;master&quot;, nativeInterface);<br />}<br />else if ((u.getParam('placeHolderDirection') == 'slave'))<br />{<br />&nbsp; &nbsp; u.interface('in_',&quot;master&quot;, nativeInterface);<br />&nbsp; &nbsp; u.interface('out_',&quot;slave&quot;, nativeInterface);<br />}<br /> <br />if ( useResiliency )<br />{<br />&nbsp; &nbsp; u.port('output','interface_fault',1);<br />&nbsp; &nbsp; u.port('output','cerr_fault',1);<br />}</p><p>if ( protectionEnable )<br />{<br />&nbsp; &nbsp; u.interface(nativeIntfProtectionInterface.name,&quot;master&quot;,nativeIntfProtectionInterface.signals);<br />}</p><h1 id="protection_placeholder-Description:"><strong>Description:</strong></h1><p>This block is a shell which enables users of NCore to provide custom protection logic on an interface. The interface being protected is defined in nativeInterface and all protection related outputs are tied low in the TACHL.</p><p>In addition the user can define a custom interface to interact with this protection logic from the top level through an interface defined according to&nbsp;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a>. The block instantiating this unit will split up the InterfaceGeneric into its individual signals using the respective library functions and use the individual signals to interface with the protection_placeholder unit. An example of this is below.</p><h1 id="protection_placeholder-Implantationand:"><strong>Implantation</strong><strong>&nbsp;and <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a>:</strong></h1><p><strong><br /></strong></p><p>var placeholder_ports = [];</p><p>var placeholderProtectionInterface = {&quot;name&quot; : &quot;&quot;, &quot;signals&quot;:{}};</p><p>/<strong>/ Create Native Protection Interface by using built in synonym functions to extract the user signals from the Generic Interface. (see <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric </a>for more detail)</strong></p><p>if ( ResilienceInfo.<span data-colorid="xg7prjdmri" style="text-decoration: none;">enableNonCoherentProtection</span>) { \jsend<br />&nbsp; &nbsp; &nbsp;\=m.bundleFunctions.explodeSyn(placeInterfaceName, placeInterfaceDef, 'wire', obj.lib.bundle)=\&nbsp; \jsbegin&nbsp;<strong>// Assignment of user signals to generic in and out ports</strong><br /><strong>&nbsp;</strong> &nbsp; &nbsp;placeholderProtectionInterface['signals'] = m.bundleFunctions.synToBundle(placeInterfaceDef,&quot;both&quot;);&nbsp; &nbsp; &nbsp; &nbsp; <strong>&nbsp;// Create Interface Bundle from the synonyms</strong><br />}</p><p>// Create Resiliency Signals</p><p>if (useResiliency) {&nbsp; \jsend<br />&nbsp; wire placeholder_uce;<br />&nbsp; wire placeholder_ce;&nbsp; \jsbegin</p><p>&nbsp; placeholder_ports.interface_fault = 'placeholder_uce';<br />&nbsp; placeholder_ports.cerr_fault = 'placeholder_ce';<br />}</p><p><strong>// Create Interfaces that go into the placeholder</strong></p><p>var placeholder_interfaces = [];<br />dii_num = 0;</p><p>placeholder_interfaces[dii_num] = {<br />&nbsp; &nbsp; modulePrefix : '',<br />&nbsp; &nbsp; localPrefix : '',<br />&nbsp; &nbsp; interface : clkInterface<br /> };</p><p>dii_num++</p><p>if ( ResilienceInfo.enableNonCoherentProtection ) {<br />&nbsp; &nbsp; placeholder_interfaces[dii_num] = {<br />&nbsp; &nbsp; &nbsp; &nbsp; modulePrefix : '',<br />&nbsp; &nbsp; &nbsp; &nbsp; localPrefix : placeInterfaceName,<br />&nbsp; &nbsp; &nbsp; &nbsp; interface : m.bundleFunctions.synToBundle(placeInterfaceDef,&quot;both&quot;)<strong>&nbsp;// Using synonym function to get bundle of user signals</strong><br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; dii_num++<br />}</p><p>placeholder_interfaces[dii_num] = {<br />&nbsp; &nbsp; modulePrefix : 'in_',<br />&nbsp; &nbsp; localPrefix : 'axi_mst_placeholder_',<br />&nbsp; &nbsp; interface : AXI_Interface<br /> };</p><p>dii_num++</p><p>placeholder_interfaces[dii_num] = {<br />&nbsp; &nbsp; modulePrefix : 'out_',<br />&nbsp; &nbsp; localPrefix : 'axi_mst_',<br />&nbsp; &nbsp; interface : AXI_Interface<br /> };<br /> <br /> dii_num++ \jsend</p><p><strong>// Instance the placeholder</strong></p><p>\=obj.lib.instance({<br />&nbsp; &nbsp; instanceName: 'u_axiPlaceholder',<br />&nbsp; &nbsp; moduleName: 'protection_placeholder',<br />&nbsp; &nbsp; params: {<br />&nbsp; &nbsp; &nbsp; &nbsp; nativeInterface&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: AXI_Interface,<br />&nbsp; &nbsp; &nbsp; &nbsp; clkInterface&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : clkInterface,<br />&nbsp; &nbsp; &nbsp; &nbsp; placeHolderDirection&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: &quot;master&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; useResiliency&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : useResiliency,<br />&nbsp; &nbsp; &nbsp; &nbsp; protectionEnable&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: ResilienceInfo.<span data-colorid="p18xnrbm3b" style="text-decoration: none;">enableNonCoherentProtection</span>,<br />&nbsp; &nbsp; &nbsp; &nbsp; nativeIntfProtectionInterface : placeholderProtectionInterface<br />&nbsp; &nbsp; },<br />&nbsp; &nbsp; verilogParams : {},<br />&nbsp; &nbsp; interfaces : placeholder_interfaces,<br />&nbsp; &nbsp; ports : placeholder_ports,<br />&nbsp; &nbsp; portsDelimiter : '\n'<br />})=\</p><p><strong><br /></strong></p></div>