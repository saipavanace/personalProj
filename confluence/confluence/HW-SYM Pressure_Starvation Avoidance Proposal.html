<p>I propose the following changes to ATP interface. We add a signal called &quot;pressure&quot; that is a one hot version of priority that is encoded in the packet.</p><p>An Initiator ATU can raise pressure on it's ATP interface. If no pressure is required to be propagated, the initiator has two choices. Pressure is either all 0s or the equivalent to the priority for the beat of data being presented on the ATP interface. Pressure has no meaning if a there is no valid.</p><h1 id="HW-SYMPressure/StarvationAvoidanceProposal-Propagation:">Propagation:</h1><p>For propagation, VCs are not considered.</p><h2 id="HW-SYMPressure/StarvationAvoidanceProposal-Switches:">Switches:</h2><p>Pressure is propagated to the output port for packet beats that are not getting a ready to the port they are requesting. If multiple input ports are applying pressure to an output port, the output ports forwards the highest pressure.</p><h2 id="HW-SYMPressure/StarvationAvoidanceProposal-Buffers,PipeLines(ATPLayerStorage,notCommonLayerorNativeLayerstorage):">Buffers, PipeLines (ATP Layer Storage, not Common Layer or Native Layer storage):</h2><p>The pressure propagated is the highest of the pressure being presented at the input into the buffer stage or the highest priority of any packet or part of packet that is being held in the buffer stage.</p><h2 id="HW-SYMPressure/StarvationAvoidanceProposal-AsyncCrossings:">Async Crossings:</h2><p>Async crossing must behave in a manner similar to buffers and pipelines, but hand shaking must be used to change the value across the asynchronous interface. Async Interfaces for packets and pressure must be separate to allow pressure to flow forward across the interface if packets are blocked.</p><h1 id="HW-SYMPressure/StarvationAvoidanceProposal-InclusionofStarvationAvoidance:">Inclusion of Starvation Avoidance:</h1><p>Priority Switches can be configured to enable starvation avoidance. When a this is done, and extra bit is added to the pressure signal that represents the highest priority in the system. When a switch triggers starvation avoidance this bit gets asserted. It forwards pressures at the next lower priority, but this bit sticks asserted to the packet that caused the starvation avoidance and so acts like it's priority for the rest of it's traversal across the fabric.</p>