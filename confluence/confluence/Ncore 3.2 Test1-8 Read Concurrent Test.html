<p>The intention of this test is to increase read traffic gradually and see the latency/BW impact in the system. Observing CCMP level latency in addition to resource/credit stats. From the stats we can see where the bottleneck is. The below is scenario:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/></colgroup><tbody><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>NCAIU0</p></td><td class="confluenceTd"><p>NCAIU1</p></td><td class="confluenceTd"><p>NCAIU2</p></td><td class="confluenceTd"><p>NCAI3</p></td></tr><tr><td class="confluenceTd"><p>Sequence 1</p></td><td class="confluenceTd"><p>Enabled RO, Cache disabled</p></td><td class="confluenceTd"><p> Enabled RO, Cache disabled</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Sequence 2</p></td><td class="confluenceTd"><p> Enabled RO, Cache disabled</p></td><td class="confluenceTd"><p> Enabled RO, Cache disabled</p></td><td class="confluenceTd"><p>Enabled RO, Cache disabled</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Sequence 3</p></td><td class="confluenceTd"><p> Enabled RO, Cache disabled</p></td><td class="confluenceTd"><p> Enabled RO, Cache disabled</p></td><td class="confluenceTd"><p>Enabled RO, Cache disabled</p></td><td class="confluenceTd"><p> Enabled RO, Cache disabled</p></td></tr><tr><td class="confluenceTd"><p>Sequence 4</p></td><td class="confluenceTd"><p> Enabled RO, Cache enabled</p></td><td class="confluenceTd"><p> Enabled RO, Cache enabled</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Sequence 5</p></td><td class="confluenceTd"><p> Enabled RO, Cache enabled</p></td><td class="confluenceTd"><p> Enabled RO, Cache enabled</p></td><td class="confluenceTd"><p>Enabled RO, Cache enabled</p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><ul><li>Address increasing by cache line</li><li>Address increased by cache line, no overlap between NCAIUs</li><li>Back-to-back traffic</li><li>Zero latency at destination</li><li>All traffic is targeting DMI</li><li>All traffic is with QoS value 0</li></ul><p><strong><u>1) Observation</u></strong></p><ul><li>Utilization drops around 25% when three ncaiu0, 1, and 2 is enabled.</li><li>NCAIU1 shows much higher latency then other initiators, and the difference is only in NCAIU unit. SMI level latency is identical with other NCIUs.</li><li>DCE consumes around 140 cycles</li><li>The main bottleneck is DCE MRD credit</li><li>BW degraded with the updated RTL, only for sequence 5. </li></ul><p><strong><u>2) Utilization &amp; Latency</u></strong></p><p><strong><u><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="178" src="https://arterisip.atlassian.net/wiki/download/attachments/247366430/image2021-11-12_19-54-59.png?api=v2"></span></u></strong></p><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="https://arterisip.atlassian.net/wiki/download/attachments/247366430/image2021-11-7_12-26-54.png?api=v2"></span></p><p class="auto-cursor-target"><strong><u>3) Average Latency (NCAIU native interface and SMI interface)</u></strong></p><ul><li class="auto-cursor-target">The latency at the SMI interface are not different</li><li class="auto-cursor-target">NCAIU1 consumes extra latency, but achieving similar BW with other NCAIUs.</li></ul><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>NCAIU0</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>NCAIU1</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>NCAIU2</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>Native interface</p></td><td class="confluenceTd"><p>SMI interface</p></td><td class="confluenceTd"><p>Native interface</p></td><td class="confluenceTd"><p>SMI interface</p></td><td class="confluenceTd"><p>Native interface</p></td><td class="confluenceTd"><p>SMI interface</p></td></tr><tr><td class="confluenceTd"><p>Sequence 1</p></td><td class="confluenceTd"><p>141.911</p></td><td class="confluenceTd"><p>128.8182</p></td><td class="confluenceTd"><p>142.837</p></td><td class="confluenceTd"><p>130.1818</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Sequence 2</p></td><td class="confluenceTd"><p>251.092</p></td><td class="confluenceTd"><p>226.4211</p></td><td class="confluenceTd"><p>361.555</p></td><td class="confluenceTd"><p>220.8947</p></td><td class="confluenceTd"><p>250.941</p></td><td class="confluenceTd"><p>226.6842</p></td></tr><tr><td class="confluenceTd"><p>Sequence 3</p></td><td class="confluenceTd"><p>264.122</p></td><td class="confluenceTd"><p>184.8571</p></td><td class="confluenceTd"><p>394</p></td><td class="confluenceTd"><p>185.4286</p></td><td class="confluenceTd"><p>270.789</p></td><td class="confluenceTd"><p>232.5238</p></td></tr><tr><td class="confluenceTd"><p>Sequence 4</p></td><td class="confluenceTd"><p>140.078</p></td><td class="confluenceTd"><p>133.8182</p></td><td class="confluenceTd"><p>267.542</p></td><td class="confluenceTd"><p>123.8182</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>Sequence 5</p></td><td class="confluenceTd"><p>251.154</p></td><td class="confluenceTd"><p>352.65</p></td><td class="confluenceTd"><p>362.182</p></td><td class="confluenceTd"><p>222.55</p></td><td class="confluenceTd"><p>250.718</p></td><td class="confluenceTd"><p>221.75</p></td></tr></tbody></table></div><p><strong><u><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/247366430/image2021-11-7_12-28-14.png?api=v2"></span></u></strong></p><p><br/></p><p><br/></p><p><strong><u>5) Average Latency (DCE latency and DMI mrd latency)</u></strong></p><ul><li class="auto-cursor-target">Showing how much latency is being consumed by DCE, and DMIs. </li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/247366430/image2021-11-7_12-28-42.png?api=v2"></span></p><p><br/></p><p><strong><u>6) Resource and credit values at saturating point</u></strong></p><p><br/></p><p>Picked the resource value at sequence 2.</p><p>CAIU / NCAIU (when QoS enabled)</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 56.3169%;"><colgroup><col style="width: 8.89118%;"/><col style="width: 22.8363%;"/><col style="width: 20.552%;"/><col style="width: 19.0308%;"/><col style="width: 28.6739%;"/></colgroup><tbody><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>OTT</p></td><td class="confluenceTd"><p>DCE0</p></td><td class="confluenceTd"><p>DCE1</p></td><td class="confluenceTd"><p>DMI</p></td></tr><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>CAIU: 96</p><p>NCAIU: 32</p><p>NCAIU1: 96</p></td><td class="confluenceTd"><p>CAIU: 10</p><p>NCAIU: 6</p></td><td class="confluenceTd"><p>CAIU: 10</p><p>NCAIU: 6</p></td><td class="confluenceTd"><p>CAIU: 10</p><p>NCAIU: 6</p></td></tr><tr><td class="confluenceTd"><p>CAIU</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>NCAIU0</p></td><td class="confluenceTd"><p>29.85142</p></td><td class="confluenceTd"><p>4.683962</p></td><td class="confluenceTd"><p>4.648585</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>NCAIU1</p></td><td class="confluenceTd"><p><strong>45.12736</strong></p></td><td class="confluenceTd"><p>4.75</p></td><td class="confluenceTd"><p>4.752358</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>NCAIU2</p></td><td class="confluenceTd"><p>29.875</p></td><td class="confluenceTd"><p>4.646226</p></td><td class="confluenceTd"><p>4.712264</p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p>NCAIU3</p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p><br/></p></td></tr></tbody></table></div><p><br/></p><p>DCE0/DCE1(when QoS enabled)</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/></colgroup><tbody><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>ATT</p></td><td class="confluenceTd"><p>MRD</p></td><td class="confluenceTd"><p>SNP</p></td><td class="confluenceTd"><p>RB</p></td></tr><tr><td class="confluenceTd"><p><br/></p></td><td class="confluenceTd"><p>36</p></td><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>8</p></td></tr><tr><td class="confluenceTd"><p>DCE 0 credit</p></td><td class="confluenceTd"><p>33.81132</p></td><td class="confluenceTd"><p><strong>5.808962</strong></p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0.188679</p></td></tr><tr><td class="confluenceTd"><p>DCE 1 credit</p></td><td class="confluenceTd"><p>33.80896</p></td><td class="confluenceTd"><p><strong>5.811321</strong></p></td><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>0.191038</p></td></tr></tbody></table></div><p><br/></p><p><strong><u><a class="external-link" href="https://arteris-my.sharepoint.com/:x:/p/junie_um/EQCA013G2LJDkWtEl3nMccoBeqj7e82nK_hO-MAzZggqxw?e=6S3fN3" rel="nofollow">https://arteris-my.sharepoint.com/:x:/p/junie_um/EQCA013G2LJDkWtEl3nMccoBeqj7e82nK_hO-MAzZggqxw?e=6S3fN3</a></u></strong></p>