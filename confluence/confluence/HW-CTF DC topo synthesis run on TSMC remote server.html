<p><strong>New maestro flow instructions to generate latest RTL</strong></p><p>1) Create a new symphony workspace.<br/>mkdir &lt;workspace&gt;</p><p>cd &lt;workspace&gt;</p><p>/engr/dev/tools/script/setup_sym</p><p>source SOURCEME</p><p>2) Create local maestro image picking up local symphony components from your workspace. <strong>(When any new edits to hw-sym/hw-lib are pulled or edited, you must re-run these two commands)</strong></p><p>rm -rf $WORK_TOP/maestro_image; build_custom_product_image.js -hws $WORK_TOP/../../hw-sym -hwl $WORK_TOP/../../hw-lib -bd $WORK_TOP/maestro_image</p><p>setup_maestro --build_dir $WORK_TOP/maestro_image</p><p>3) Run maestro on desired config: Call this a unique dir name for running on the TSMC server. </p><p>cd $WORK_TOP</p><p>mkdir bronze_phase_three_atut_jasonv</p><p>cd bronze_phase_three_atut_jasonv</p><p>maestro -c -s $WORK_TOP/tcl_cfg/maestro_4x4/nl/bronze_phase_three.tcl</p><p>4) Run aria to generate synthesis script. <strong>(The new flow places a prefix at the front of every file now, thus you must copy over the run.js script below and add in the prefix based on your configuration). For example in my area I edited:  topDesign:'bronze_gen_wrapper',)</strong></p><p>cp /home/boon/run.js ~/</p><p>node ~/run.js</p><p>5) Make any edits to 'output/synthesis/synopsys/scripts/Makefile' to run topo synthesis only on a specific ATU/module, if desired. (For example: I only want to run the module 'bronze_atut_axi_a')</p><p>  a) Locate the variable &lt;subDesignDdcsru&gt; and <strong>remove</strong> all but the atut/module you want. (subDesignDdcs = ../bronze_atut_axi_a/outputs/bronze_atut_axi_a.gate_level.ddc)</p><p>  b) Locate the routine &lt;runtop&gt; and <strong>remove</strong> all unwanted modules and the dc_shell command. </p><p style="margin-left: 30.0px;">runtop: $(subDesignDdcs)<br/>mkdir -p bronze_gen_wrapper;\<br/>cd bronze_gen_wrapper;\<br/>mkdir -p outputs;\<br/>cp ../bronze_atut_axi_a/outputs/bronze_atut_axi_a.gate_level.ddc outputs ;\</p><p><br/></p><p>6) tar up work dir for tsmc. </p><p>cd ../</p><p>tar cvf bronze_phase_three_atut_jasonv.tar bronze_phase_three_atut_jasonv</p><p>7) Submit the tar file to Jenkins TSMC Synthesis to run synthesis; Select 'build with parameters' and select 'symphony' project. Provide the full path to the tar file above. </p><p><a class="external-link" href="http://jenkins.arteris.com:8080/job/TSMC_Synthesis/" rel="nofollow">http://jenkins.arteris.com:8080/job/TSMC_Synthesis/</a></p><p>8) When complete, copy over results tar file. </p><p>cp /scratch/jenkins/synthesis/out/bronze_phase_three_atut_jasonv_out.tar .</p><p>tar xvf bronze_phase_three_atut_jasonv_out.tar </p><p>Results are in: bronze_phase_three_atut_jasonv/output/synthesis/synopsys/top/*</p><p><br/></p><p><br/></p><p>old method</p><p><strong>Run Maestro to generate RTL</strong></p><p>mkdir sym_synth_4x4_512e_256e<br/>cd sym_synth_4x4_512e_256e<br/>cp $WORK_TOP/../rtl/lib/bringup/sym_synth_4x4_512e_256e/*.tcl .<br/>run_maestro -t run.tcl -sdj -mbn $MAES_BUILD -utd -hws $WORK_TOP/../ -g </p><p><br/></p><p><strong>Run Aria to generate the synthesis script that will be put in output/synthesis/synopsys/scripts</strong></p><p>node /home/boon/run.js</p><p><br/></p><p>This is the contents of the Aria script run.js :</p><p>var {genDcSynScript} = require('/engr/dev/releases/utils/aria/latest/aria-linux-x64/resources/app/index');<br/>genDcSynScript({<br/>topDesign:'gen_wrapper',<br/>cprInterfaceDirs: `${process.env.REPO_PATH}/assets/interface`,<br/>techNode: 'tsmc7',<br/>topoMode: true,<br/>incrementalOpt: true,<br/>clockUncertainty: 0.15,<br/>compileCommand: 'compile_ultra -spg -no_boundary_optimization -gate_clock',<br/>bottomUpSynthesis: true<br/>});</p><p><br/></p><p><strong>Create a tar file</strong></p><p>cd ..</p><p>tar cvf sym_synth_4x4_512e_256e.tar sym_synth_4x4_512e_256e</p><p><br/></p><p><strong>Submit the tar file to Jenkins TSMC Synthesis to run synthesis; see the link below to check the progress and to get back the synthesis results.</strong></p><p><a class="external-link" href="http://jenkins.arteris.com:8080/job/TSMC_Synthesis/" rel="nofollow">http://jenkins.arteris.com:8080/job/TSMC_Synthesis/</a></p><p><br/></p><p>The synthesis build on Jenkins runs the synthesis by calling the synthesis Makefile using this command line:</p><p><span class="legacy-color-text-blue3">cd output/synthesis/synopsys/top; make -j4 -f ../scripts/Makefile</span></p><p><br/></p><p><strong>**NOTE**: Maestro/Aria synthesis flow assumes:</strong><br/>output/synthesis/synopsys/scripts are the synthesis scripts directory <br/>output/synthesis/synopsys/top are the synthesis run directory</p><p>According to the Maestro/Aria flow, user is supposed to <br/>  cd output/synthesis/synopsys/top <br/>  make -f ../scripts/Makefile</p>