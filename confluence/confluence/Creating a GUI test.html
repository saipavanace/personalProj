<p>This page explains how to setup write and launch GUI based tests.</p><p>GUI based tests are configured to use either a virtual X server when running on a jenkins workflow or the standard X server whe running locally. You can also run tests using a local X window server.</p><h1 id="CreatingaGUItest-CreatingaGUItest">Creating a GUI test</h1><h2 id="CreatingaGUItest-CMakefile">CMake file</h2><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: Confluence" data-theme="Confluence">guiTest_create(NAME &lt;gui test name&gt;
            LIBS &lt;list of dependencies libs&gt;
            SRCS &lt;list of source files&gt;
            INCS &lt;list of include dir&gt;
)</pre>
</div></div><p>An example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">guiTest_create(NAME tst_gui_floorplan_create_edit_regions
            LIBS presentation
            SRCS src/t_floorplan_createedit_regions.cc
            INCS ${CMAKE_CURRENT_SOURCE_DIR}/../src/Topology
)</pre>
</div></div><h1 id="CreatingaGUItest-Launchingtestlocally">Launching test locally</h1><h3 id="CreatingaGUItest-Launchingonlyonetest">Launching only one test</h3><p>You can just launch binary test or, launch it with ctest :</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">ctest &lt;test name&gt;</pre>
</div></div><h3 id="CreatingaGUItest-LaunchingallGUItests">Launching all GUI tests</h3><p>Since all gui tests are labelled GUI, you can launch: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">ctest -L GUI</pre>
</div></div><p>This will launch all GUI tests.</p><h1 id="CreatingaGUItest-Howitworks">How it works</h1><p>GUI test needs to NOT be run in parallel with any other test.</p><p>Test command is launched using a bash script:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">guitest.sh &lt;binary file&gt;</pre>
</div></div><p>This script basically starts a X server (using Xvnc), then run the test forcing it using this particular display by <a class="external-link" href="https://askubuntu.com/a/432257" rel="nofollow">setting env variable DISPLAY</a>.</p><p /><p /><p />