<p>This is a JS class that can be found in the following path and file:<br/><strong>hw-lib/js/lib_utils.js</strong></p><h2 id="HW-SYMclassCreateRegCSRObj-BaseClass">Base Class</h2><p>None</p><h2 id="HW-SYMclassCreateRegCSRObj-Composition">Composition</h2><p>None</p><h2 id="HW-SYMclassCreateRegCSRObj-Purpose">Purpose</h2><p>This class was created to work with the <a class="external-link" href="https://confluence.arteris.com/display/ENGR/sym_apb_csr" rel="nofollow">sym_apb_csr</a> ( same as <a class="external-link" href="https://confluence.arteris.com/display/ENGR/apb_csr" rel="nofollow">apb_csr</a>) component. It effectively converts the register data-structures (entries in <em>registers</em> array in <a class="external-link" href="https://confluence.arteris.com/display/ENGR/csr" rel="nofollow">csr</a>) into an object that allows access to the original properties of each register, but is also augmented with methods to parse and extract useful data from the register data-structure.</p><p>The class is meant to be used both by the <a class="external-link" href="https://confluence.arteris.com/display/ENGR/apb_csr" rel="nofollow">apb_csr</a> component as well as any TACHL component that instantiates it.</p><h2 id="HW-SYMclassCreateRegCSRObj-Interface(Methods)">Interface (Methods)</h2><p>The class provides the following interface methods: </p><p><strong><em>constructor</em><em>(  register, width )</em></strong></p><p>This is the constructor function used to initialize the instance of the class. It accepts two arguments</p><ol><li>width - This is the width of the register in bits</li><li>register - This is an entry in the <em>registers</em> property in <a class="external-link" href="https://confluence.arteris.com/display/ENGR/csr" rel="nofollow">csr</a> space-blocks that describes a register</li></ol><p>The constructor ensures that methods can be accessed at same level as the highest-level of the register data-structure so that the object just appears to be the original register data-structure that it was initialized with only augmented with some methods.</p><p><br/></p><p><em><strong>numOfFlops( )</strong></em></p><p>This method returns the number of flops required to store the register data. This is not simply the sum of widths of all the fields in the register, because the <a class="external-link" href="https://confluence.arteris.com/display/ENGR/apb_csr" rel="nofollow">apb_csr</a> does not infer flops for read-only registers ( <em>hardware</em>: RO, <em>access</em>: RO). This sets the width of the <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163252/prot_reg" data-linked-resource-id="16163252" data-linked-resource-version="4" data-linked-resource-type="page">prot_reg</a> instance used per register.</p><p><br/></p><p><em><strong>getRstValPkd(  nonRO )</strong></em></p><p>The argument <em>nonRO</em> is a string and is optional. If it is skipped or set to &quot;nonRO&quot;, the method returns the reset value for all bits that infer flops (Read-only fields do not infer flops) and can hence be used to set the <em>rstVal</em> of the <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163252/prot_reg" data-linked-resource-id="16163252" data-linked-resource-version="4" data-linked-resource-type="page">prot_reg</a> instance in <a class="external-link" href="https://confluence.arteris.com/display/ENGR/apb_csr" rel="nofollow">apb_csr</a>. If the argument nonRO is set to &quot;RO&quot; instead, then the method returns the value of the read-only fields only if all such bits of the register were concatenated together. This is used to drive the read-only or RO bits of the register during a register-read operation.</p><p><br/></p><p><em><strong>unpackRegBits( wire</strong> <strong>)</strong></em></p><p>This method returns an array of bit slices of the input signal or wire (a string argument) which is assumed to the name of the <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163252/prot_reg" data-linked-resource-id="16163252" data-linked-resource-version="4" data-linked-resource-type="page">prot_reg</a> flop output. The array includes Verilog constant literals that are equal to the reset value for RO (<em>hardware</em>: RO, <em>access</em>: RO) bits in bit positions that are marked as RO. This is used to drive the read-data bus of <a class="external-link" href="https://confluence.arteris.com/display/ENGR/apb_csr" rel="nofollow">apb_csr</a>.</p><p><br/></p><p><em><strong>getPackedFmtIndex( index</strong> <strong>)</strong></em></p><p>This method maps the input bit-index argument into another bit-index (both integers in the range 0 to width of register), such that the new index maps to the bit position of the <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163252/prot_reg" data-linked-resource-id="16163252" data-linked-resource-version="4" data-linked-resource-type="page">prot_reg</a> flop output bits. The two indices may not be the same since read-only register-fields are ignored when creating flops using <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163252/prot_reg" data-linked-resource-id="16163252" data-linked-resource-version="4" data-linked-resource-type="page">prot_reg</a> for the register.</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p>