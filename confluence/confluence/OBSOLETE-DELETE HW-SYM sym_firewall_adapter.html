<h1 id="OBSOLETE-DELETEHW-SYMsym_firewall_adapter-module_name"><strong>module_name</strong></h1><p>sym_firewall_adapter</p><h1 id="OBSOLETE-DELETEHW-SYMsym_firewall_adapter-parameters">parameters</h1><h2 id="OBSOLETE-DELETEHW-SYMsym_firewall_adapter-java_script:">java_script:</h2><pre>{
	&quot;interfaces&quot; : </pre><pre>            {</pre><pre>             &quot;clkInterface&quot; : { &quot;name&quot; : &quot;a_string&quot;, &quot;signals&quot; : {InterfaceCLK}},</pre><pre>             &quot;cfgInterface&quot; : &quot;&quot; or { &quot;name&quot; : &quot;a_string&quot;, &quot;signals&quot; : {InterfaceAPB}},</pre><pre>             &quot;inInterface&quot; : {&quot;name&quot; : &quot;a_string&quot;, &quot;signals&quot; : {InterfaceATP}, &quot;pktDef&quot; : {packet: &quot;string&quot;}},</pre><pre>             &quot;outInterface&quot; : {&quot;name&quot; : &quot;a_string&quot;, &quot;signals&quot; : {InterfaceATP}, &quot;pktDef&quot; :{packet: &quot;string&quot;}},</pre><pre>             &quot;interruptInterface&quot; : &quot;&quot; or {&quot;name&quot; : &quot;a_string&quot;, &quot;signals&quot; : {InterfaceINT}, // Optional based on _SKIP_ parameter</pre><pre>             &quot;genericIoInterface&quot; : &quot;&quot; or {&quot;name&quot; : &quot;a_string&quot;, &quot;signals&quot; : {InterfaceGeneric}}, // Optional based on _SKIP_ parameter</pre><pre>             &quot;protectionInterface&quot; : {&quot;name&quot; : a_string, &quot;signals&quot; : {InterfacePROT}} // Optional based on _SKIP_ parameter</pre><pre>            },</pre><pre>        &quot;protectionStyle&quot; : <a class="external-link" href="https://confluence.arteris.com/display/ENGR/protectionStyle" rel="nofollow">protectionStyle</a>},</pre><pre>        &quot;simplePipe&quot; : true or false,   // If depth is greater than one, takes &quot;depth&quot; clocks to propagate from input to output if yes.</pre><pre>        &quot;addStage&quot; : true or false, // add an additional stage to sym_pipe in the sym_atp_depack.</pre><pre>        &quot;udvFieldArray&quot; : [an array of packet fields needed by firewall],</pre><pre>        &quot;udvLatency&quot; : an_integer, // 0 to N Number of clocks needed to assert error signals out of UDV module</pre><pre>        id : integer // ID of the firewall block; the value can be read out by software via a CSR register. CSR is always generated.</pre><pre class="page view">}</pre><h2 id="OBSOLETE-DELETEHW-SYMsym_firewall_adapter-verilog:"><strong>verilog:</strong></h2><p style="margin-left: 30.0px;">none.</p><h1 id="OBSOLETE-DELETEHW-SYMsym_firewall_adapter-I/O"><strong>I/O</strong></h1><pre>u.interface(clkInterface.name,'slave',clkInterface.signals);</pre><pre>u.interface(cfgInteface.name,'slave',cfgInteface.signals);</pre><pre>u.interface(inInterface.name,'master',inInterface.signals);</pre><pre>u.interface(outInterface.name,'master',outInterface.signals); </pre><pre>u.interface(interruptInterface.name,'master',interruptInterface.signals);</pre><pre>if (u.interface.genericIoInterface._SKIP_ !== true) {</pre><pre>  u.interface(genericIoInterface.name,'master',genericIoInterface.signals);</pre><pre>}</pre><pre>if (u.interface.protectionInterface._SKIP !== true) {<br/>  u.interface(<a class="external-link" href="http://protectioninterface.name/" rel="nofollow">protectionInterface.name</a>,'master',protectionInterface.signals);<br/>}</pre><pre><br/></pre><h1 id="OBSOLETE-DELETEHW-SYMsym_firewall_adapter-InterfacesUsed:"><strong>Interfaces Used:</strong></h1><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168894/InterfaceCLK" data-linked-resource-id="16168894" data-linked-resource-version="5" data-linked-resource-type="page">InterfaceCLK</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168579/InterfaceAPB" data-linked-resource-id="16168579" data-linked-resource-version="2" data-linked-resource-type="page">InterfaceAPB</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164453/HW-SYM+InterfaceATP" data-linked-resource-id="16164453" data-linked-resource-version="12" data-linked-resource-type="page">HW-SYM InterfaceATP</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16160508/InterfaceINT" data-linked-resource-id="16160508" data-linked-resource-version="3" data-linked-resource-type="page">InterfaceINT</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168667/InterfacePROT" data-linked-resource-id="16168667" data-linked-resource-version="16" data-linked-resource-type="page">InterfacePROT</a></p><p><br/></p><p><strong>Functions Used</strong></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16170167/HW-SYM+getFieldsFromPkt" data-linked-resource-id="16170167" data-linked-resource-version="2" data-linked-resource-type="page">HW-SYM getFieldsFromPkt</a></p><p><br/></p><h1 id="OBSOLETE-DELETEHW-SYMsym_firewall_adapter-ModulesUsed"><strong>Modules Used</strong></h1><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16170175/OBSOLETE-DELETE+HW-SYM+sym_atp_depack" data-linked-resource-id="16170175" data-linked-resource-version="7" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_atp_depack</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16166765/rdy_vld_pipe" data-linked-resource-id="16166765" data-linked-resource-version="33" data-linked-resource-type="page">rdy_vld_pipe</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163258/prot_mux" data-linked-resource-id="16163258" data-linked-resource-version="4" data-linked-resource-type="page">prot_mux</a></p><h1 id="OBSOLETE-DELETEHW-SYMsym_firewall_adapter-Description"><strong>Description</strong></h1><p>The fire wall has the block diagram shown below:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16168294/fireWall.svg?api=v2"></span></p><p>Fire walls are unidirectional adapters that sit between two ATP links that have the same definitions. The firewall is customized in the User Defined Verilog (UDV) block. The name of this UDV block is genericIoInterface name ended with &quot;udv&quot; (For example, if the genericIoInterface name is &quot;g_&quot;, then the name of this UDV block is &quot;g_udv&quot;.) The genericIoInteface is a set of inputs and outputs that are brought directly into the UDV module. The udvPacketFields are the fields in the packet that the UDV needs to determine if there is an error. The interruptInterface is whatever number of interrupts the user wants to generate. Interrupts out of the block are level interrupts, not edge interrupts, so a 2 wide clock pulse indicates two interrupts were fired. The error output asserts when ever UDV module detects a fire wall violation.</p><p>The UDV has the following I/O:</p><p>    input clk,</p><p>    input reset_n,</p><p>    output error,</p><p>    apbInterface,</p><p>    interruptInterface,</p><p>    genericIoInterface,</p><p>    input fields_valid,</p><p>    input [field1-1:0] field1</p><p>    input [field2-1:0] field2</p><p>    input [field3-1:0] field3</p><p>    input [field4-1:0] field4</p><p>    .</p><p>    .</p><p>    .</p><p><br/></p><p>Any field that is in the packet definition can be pulled into the fire wall. Software may limit the fields that a customer can see to do this. The fields_valid signal tells the UDV when the field inputs are valid. udvLatency tells the fire wall how many clocks after fields_valid asserts that the error signal will be valid.</p><p>The total latency through the firewall is the sum of the number of beats it takes to get all the data needed by the fire wall (which is determined by udvPacketFields), the udvLatency and plus 1 if there is a protection scheme on the ATP interface definition.</p><p>Any parameter that is set to &quot;&quot; is indicating that it is not needed.</p><p>If the UDV detects a file wall violation and asserts the error signal, The packet header will have the error bit asserted in the header and any protectionScheme that is defined will be used to re-protect the header. The field in the header the firewall changes to indicate and error is H_poison, which is always a 1 bit field, 0 indicating no error and 1 indicating an error.</p><p>In the default UDV file, there are three registers:</p><p><br/></p><p>ENABLE_reg: 1 bit. defaults 1'b0. When 1'b1, causes all packets passing through to be poisoned</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">offset</th><th class="confluenceTh">Register</th><th colspan="1" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">12'b0</td><td class="confluenceTd">ENABLE_reg</td><td colspan="1" class="confluenceTd">RW: 1 bit. Default 1'b0. When 1'b0, all packet clean. When 1'b1, all packets poisoned.</td></tr><tr><td class="confluenceTd">12'b4</td><td class="confluenceTd">INTERRUPT_reg</td><td colspan="1" class="confluenceTd">RW: 1 bit. Default 1'b0. When 1'b1, interrupt asserts, when 1'b0 interrupt de-asserts.</td></tr><tr><td class="confluenceTd">12'bFFFC</td><td class="confluenceTd">IDR</td><td colspan="1" class="confluenceTd">Read Only: ID of block</td></tr></tbody></table></div><p><br/></p><p><br/></p><p>NOTE: There is an ID register and a CSR is always generated.</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p>