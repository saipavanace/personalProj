<p><style>[data-colorid=zfc4vbl660]{color:#0747a6} html[data-color-mode=dark] [data-colorid=zfc4vbl660]{color:#5999f8}</style>This page describes the usage of generating multiple files per number of ports for IOAIU csr_seq access.</p><h3 id="Multi-portCSRaccessforIOAIU-UsageforDV&amp;buildtb.jsupdate-Problem:">Problem:</h3><p>The ioaiu_csr_seq_lib.sv file contains all the CSR access classes that define the default csr reset sequences and other feature-based CSR sequences. These csr accesses require hard coding of the CSR path. Since DV code generation only dumped one file and the SV infrastructure instantiated multiple times, each port&rsquo;s CSR access had to be declared and accessed using case statements.</p><h3 id="Multi-portCSRaccessforIOAIU-UsageforDV&amp;buildtb.jsupdate-Solution:">Solution:</h3><p>Added an ability in hw-scripts/buildTb.js script to physically generate multiple instances of the csr_seq_lib.sv files and pass in a custom DV parameter (multiPortCoreId) to these files. This param will help differentiate between the different cores/ports of a multiported IOAIU.</p><h3 id="Multi-portCSRaccessforIOAIU-UsageforDV&amp;buildtb.jsupdate-Parameter-obj.multiPortCoreId">Parameter - <span data-colorid="zfc4vbl660">obj.multiPortCoreId</span></h3><p>This parameter &lt;%=obj.multiPortCoreId%&gt; should be used inside ioaiu_csr_seq_lib.sv when accessing the coreId.<br />Refer following example:</p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="278" src="https://arterisip.atlassian.net/wiki/download/attachments/65799327/image-20221021-191112.png?api=v2" /></span><h3 id="Multi-portCSRaccessforIOAIU-UsageforDV&amp;buildtb.jsupdate-Usage:">Usage:</h3><p>2 places DV user will have to make changes:</p><ol><li><p>dvPkg.json - </p><ol><li><p>Need to add a new list called &ldquo;includeMultiFiles&rdquo;</p></li><li><p>Add the file whose multiple instances need to be generated. Make sure it&rsquo;s also present in the original &ldquo;includeFiles&rdquo; list as this is important to maintain the legacy flow.<br />Refer the following example screenshot where we declare ioaiu_csr_seq_lib.sv twice:</p><p /><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" width="489" src="https://arterisip.atlassian.net/wiki/download/attachments/65799327/image-20221021-183625.png?api=v2" /></span></li></ol></li><li><p>&lt;block&gt;_test_list.svh - </p><ol><li><p>This mechanism will add prefix core&lt;multiPortCoreId&gt;_&lt;filename&gt; to the generated file in the dv folder.  Refer the following edit:<br /></p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" width="489" src="https://arterisip.atlassian.net/wiki/download/attachments/65799327/image-20221021-185416.png?api=v2" /></span><p /></li></ol></li></ol><p>For a config with 4 ports (nNativeInterfacePorts = 4), there will be 4 copies of ioaiu_csr_seq_lib.sv file generated in the dv folder:<br />core0_ioaiu_csr_seq_lib.sv<br />core1_ioaiu_csr_seq_lib.sv<br />core2_ioaiu_csr_seq_lib.sv<br />core3_ioaiu_csr_seq_lib.sv</p><h2 id="Multi-portCSRaccessforIOAIU-UsageforDV&amp;buildtb.jsupdate-Note-Fornonmultiportedconfigs/itâ€™llalwaysdumpascore0_ioaiu_csr_seq_lib.sv"><em>Note - For non multi ported configs/ it&rsquo;ll always dump as core0_ioaiu_csr_seq_lib.sv</em></h2><h2 id="Multi-portCSRaccessforIOAIU-UsageforDV&amp;buildtb.jsupdate-buildTb.jschanges(Onlyifanotherrnewparameterneedstobeaddedinfuture)">buildTb.js changes (Only if another rnew parameter needs to be added in future)</h2><h3 id="Multi-portCSRaccessforIOAIU-UsageforDV&amp;buildtb.jsupdate-AddingnewDVparametertotheflow:">Adding new DV parameter to the flow:</h3><p />