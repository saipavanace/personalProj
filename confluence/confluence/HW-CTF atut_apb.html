<h1 id="HW-CTFatut_apb-RevisionNotes">Revision Notes</h1><div class="table-wrap"><table class="wrapped tablesorter tablesorter-default relative-table confluenceTable" style="width: 37.9408%;"><colgroup><col style="width: 6.74067%;"/></colgroup><colgroup><col style="width: 73.5743%;"/></colgroup><colgroup><col style="width: 10.8325%;"/></colgroup><colgroup><col style="width: 8.86638%;"/></colgroup><tbody><tr class="tablesorter-headerRow"><th style="text-align: left;" class="tablesorter-header sortableHeader tablesorter-headerUnSorted confluenceTh" scope="col"><div class="tablesorter-header-inner">Revision</div></th><th style="text-align: left;" class="tablesorter-header sortableHeader tablesorter-headerUnSorted confluenceTh" scope="col"><div class="tablesorter-header-inner">Notes</div></th><th style="text-align: left;" class="tablesorter-header sortableHeader tablesorter-headerUnSorted confluenceTh" scope="col"><div class="tablesorter-header-inner">Reviser</div></th><th class="tablesorter-header sortableHeader tablesorter-headerUnSorted confluenceTh" colspan="1">Date</th></tr><tr><td style="text-align: left;" class="confluenceTd">v0.9</td><td style="text-align: left;" class="confluenceTd"><p>Updates required for Ncore 3.7 and Tiling Feature.</p></td><td style="text-align: left;" class="confluenceTd"><p>Darshan Alagud</p></td><td colspan="1" class="confluenceTd"><time datetime="2024-10-23" class="date-past">23 Oct 2024</time> </td></tr><tr><td style="text-align: left;" class="confluenceTd">v1.0</td><td style="text-align: left;" class="confluenceTd">Adjust to release candidate version after Inspection &amp; fixed moved links.</td><td style="text-align: left;" class="confluenceTd"><p>Jason Villanueva</p></td><td colspan="1" class="confluenceTd"><time datetime="2025-02-19" class="date-past">19 Feb 2025</time> </td></tr></tbody></table></div><p><span><strong>module_name:</strong></span></p><p><span>atut_apb</span></p><p><strong><br/></strong></p><p><strong>parameters</strong></p><div class="page view"><div class="wiki-content"><h2 id="HW-CTFatut_apb-java_script:"><strong>java_script:</strong></h2><p><strong>// Top Level Parameters</strong></p><p>assertOn: &lt;true or false&gt;, // Enable SytemVerilog Assertions</p><p>nodeId: &lt;0 ...&gt; , // Node ID of the ATU</p><p>maxPduSz: &lt;4,8,16, ... 4096&gt; , // Maximum Data Size for a packet in bytes.</p><p>numPri: &lt;1,2, ...&gt;, // Number of Priorities used by the ATU</p><p>maxOutWr: &lt;1&gt; , // Maximum Number of Outstanding Write Transactions-</p><p>maxOutRd:  &lt;1&gt; ,  // Maximum Number of Outstanding Read Transactions</p><p>maxOutTotal: &lt;1&gt; , // Maximum Number of Outstanding Total Transactions</p><p>wDataMax: &lt;8,16, 32, 64, 128, 256, 512, 1024&gt; , // Maximum data width of initiator or target in the system (in bits)</p><p>wDataMin: &lt;8,16, 32, 64, 128, 256, 512, 1024&gt; , // Minimum data width of initiator or target in the system (in bits)</p><p>enPathLookup: &lt;true or false&gt;, // Enable Path Lookup in Packetizer (Used in ATU initiator to determine route field if there is no PAM table available. Set to &lt;false&gt; for ATU targets, since route for responses are determined by source ID.)</p><div><strong><br/></strong></div><div><strong>// Packetizer Parameters</strong></div><p>pathLut: [{</p><p>    targ_id : &lt;string&gt; // string used to represent an id, &quot;2'b01&quot; </p><p>    route : &lt;&quot;string&quot;&gt;  // string used to represent the resulting route, &quot;4'b1010&quot;</p><p>}, ...] , // array of objects</p><p><strong>// Native Parameters</strong></p><p>wApbSlvDec: &lt;0,1,2,3&gt;, // The width of the multi-slave decode. This represents the log2 width of how many possible slaves are at the target. Width of 3 == (2^3) slaves at this target.</p><p>apbSlvLut: {</p><p>   addr: &lt;string&gt; // String used to represent address, &quot;4'h0020&quot;</p><p>   chipSel: &lt;string&gt; // String used to represent APB chip select chosen, &quot;2'b01&quot;</p><p>} // Lookup Table used when Multi-Slaves are available at the target.</p><p><strong>// Timing Parameters</strong></p><p>pipeLevelApb: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>pipeLevelLut: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>pipeLevelSmi: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>pipeLevelAtp: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>pipeLevelExclMon: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>ctlPipeReq: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>ctlPipeResp: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>ctlPipeCtxt: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p><strong>// Arbitration Parameters</strong></p><p>pktArbType: &lt;&quot;arb_rr2&quot;,&quot;arb_wrr_rr1&quot;,&quot;arb_wrr_rr2&quot;,&quot;arb_pri_rr1&quot;,&quot;arb_pri_rr2&quot;,&quot;arb_fifo&quot;&gt;, // Arbitration types between VCs inside the packetizer.</p><p>pktArbWeights: [int, int, ...], // The length of the array in numVC. Each int has to be 1 or greater. // Weights of the VCs inside the packetizer.</p><p>depktArbType: &lt;arb_rr2,arb_wrr_rr1,arb_wrr_rr2,arb_pri_rr1,arb_pri_rr2,arb_fifo&gt;,   // Arbitration types between VCs inside the depacketizer.</p><p>depktArbWeights:  [int, int, ...], // The length of the array in numVC. Each int has to be 1 or greater. // Weights of the VCs inside the depacketizer.</p><p>ctlArbType: {</p><p>    master : &lt;&quot;arb_rr2&quot;,&quot;arb_wrr_rr1&quot;, ...&gt;</p><p>    vcs : [ &quot;string&quot;, &quot;string&quot; , ... ]  // Each String is an arb type</p><p>} // The arbiter types of the master and VC arbs for the queues inside the Common Layer</p><p>ctlArbWeights:  {</p><p>    master : &lt;1,2,3, ...&gt;</p><p>    vcs : [int, int, , ... ]  // Each String is an arb type</p><p>} // The arbiter weights of the master and VC arbs for the queues inside the Common Layer</p><p>mstrArbLock: &lt;true or false&gt; , // Indicates whether the arbiters will lock on a VC. </p><p>lckStyleVld: &lt;true or false&gt; ,  // Indicates whether the arbiters will lock on valid.</p><p><strong>// Protection Parameters</strong></p><p>ctlProtectionScheme: &lt;<a class="external-link" href="https://confluence.arteris.com/display/ENGR/protectionScheme" rel="nofollow">protectionScheme</a>&gt; ,  // Describes how the Common Layer Interface is Protected</p><p>stateProtectionStyle: &lt;<a class="external-link" href="https://confluence.arteris.com/display/ENGR/protectionStyle" rel="nofollow">protectionStyle</a>&gt; , // Describes how the flops are protected.</p><p>registerProtectionStyle: &lt;<a class="external-link" href="https://confluence.arteris.com/display/ENGR/protectionStyle" rel="nofollow">protectionStyle</a>&gt; , // Describes how the registers are protected.</p><p>memoryProtectionStyle: &lt;<a class="external-link" href="https://confluence.arteris.com/display/ENGR/protectionStyle" rel="nofollow">protectionStyle</a>&gt; , // Describes how the memories are protected.</p><p><strong>// User Field Parameters:</strong></p><p>nativeToCommon: <a class="external-link" href="https://confluence.arteris.com/display/ENGR/Generic+Assignment+Proposal" rel="nofollow">Generic Assignment Proposal</a></p><p>commonToNative: <a class="external-link" href="https://confluence.arteris.com/display/ENGR/Generic+Assignment+Proposal" rel="nofollow">Generic Assignment Proposal</a></p><p><strong>// Common Layer Parameters:</strong></p><p>fixedSupported: &lt;true or false&gt;, // Enable Fixed Transactions</p><p>incrSupported: &lt;true or false&gt;, // Enable Increment Transactions</p><p>wrapSupported: &lt;true or false&gt;, // Enable Wrap Transactions</p><p>narrowSupported: &lt;true or false&gt;, // Enable Narrow Transactions</p><p>readInterleaveSupported: &lt;true or false&gt;, // Enable Read Data Interleaving at Target</p><p>widthAdaptionSupported: &lt;true or false&gt;, // Enable Width Adaption (Must be used when width adapters are used within a system)</p><p>atomicsSupported:  &lt;true or false&gt;, // Enable Atomic Transactions</p><p>exclusivesSupported: &lt;true or false&gt;, // Enable Exclusive Transactions (Used only if slave connected to ATU target does not support exclusives and you want the ATU to support them.) </p><p>idCompMask:  {{wCtlId{1'b0}} to {{wCtlId{1'b1}} where only wSmiId bits are asserted, // integer, Mask used to indicate how the ID is compressed. Only unmasked bits (indicated by 1) will be used.</p><p>queueMap:  [&quot;string&quot;, &quot;string&quot;, &quot;string&quot; , ...] // An array of strings which determine which queue a transaction will go to. These strings are verilog conditions involving qos, vc, and type. Logic will be constructed so the conditions are checked right to left (queue 0 to nQueues). The left most condition will be the default and the condition will be effectively ignored.  </p><p>queueDepth: 0 to inf, // Depth of each Queue</p><p>vcMap: [int, int, ...], // Array of integers indicating which VC is assigned to each queue. Each entry in the array is assigned a queue</p><p>mapBaseAddr: 'string', // string representing the base address/offset of the target. &quot;16'hF000&quot; would be an example.</p><p>mapBaseMask: 'string', // string representing the base address/offset of the target. &quot;16'hF000&quot; would be an example.</p><p><strong>// Credit Manager Parameters</strong></p><p>crdMngrEn:  &lt;true or false&gt;, // boolean, Enable Credit management.</p><p>wCrdMngrReqCnt: [int, int, ...], // Array of integers indicating the request dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>wCrdMngrDataCnt: [int, int, ...], // Array of integers indicating the data dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>crdDataUnit: 1 to inf, // Data Credit Units, Has to be power of 2</p><p>wCrdMngrType: [int, int, ...],// Credit Message Type 0 - Shared or 1 Dedicated</p><p><strong>// Timeout Parameters</strong></p><p>timeoutErrChk: &lt;true or false&gt;, // boolean, enable timeout check</p><p>timeoutErrCount:  0 to inf, // if 0 it is configured from registers</p><p>timeoutUseExternalValue: 0 or 1, // 0 use timeoutErrCount, 1 use a configurable value</p><p><strong>// Interfaces</strong></p><p>interfaces: {</p><p>    clkInterface: A slave instance of <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168894/InterfaceCLK" data-linked-resource-id="16168894" data-linked-resource-version="5" data-linked-resource-type="page">InterfaceCLK</a>,</p><p>  *intInterface : A master instance of <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16160508/InterfaceINT" data-linked-resource-id="16160508" data-linked-resource-version="3" data-linked-resource-type="page">InterfaceINT</a> (optional),</p><p>   *apbRegInterface: A slave instance of <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168579/InterfaceAPB" data-linked-resource-id="16168579" data-linked-resource-version="2" data-linked-resource-type="page">InterfaceAPB</a> to allow access to registers inside the ATU (optional),</p><p>   *statsInterface: (optional) { </p><p>        name: &quot;a_string&quot;,</p><p>        params: {</p><p>           wOut : 2*maxOutTotal,</p><p>           wIn : 0</p><p>        },</p><p>        direction: &quot;slave&quot;,</p><p>        interface: &quot;InterfaceGeneric&quot;</p><p>    },</p><p>   *pmaControlInterface: A slave instance of <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164503/InterfacePMAControl" data-linked-resource-id="16164503" data-linked-resource-version="6" data-linked-resource-type="page">InterfacePMAControl</a>,</p><p>    apbInterface: A master instance of <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168579/InterfaceAPB" data-linked-resource-id="16168579" data-linked-resource-version="2" data-linked-resource-type="page">InterfaceAPB</a>, the native interface of ATUT_APB,</p><p>    atpReqInterface: A slave instance of <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164453/HW-SYM+InterfaceATP" data-linked-resource-id="16164453" data-linked-resource-version="12" data-linked-resource-type="page">HW-SYM InterfaceATP</a> used to receive request packets from the ATP switch network, </p><p>    atpRespInterface: A master instance of <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164453/HW-SYM+InterfaceATP" data-linked-resource-id="16164453" data-linked-resource-version="12" data-linked-resource-type="page">HW-SYM InterfaceATP</a> used to inject response packets into the ATP switch network,</p><p>    myNodeIdInterface: A slave instance of <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/950927381/InterfaceNodeId" data-linked-resource-id="950927381" data-linked-resource-version="1" data-linked-resource-type="page">InterfaceNodeId</a> used to carry the Node ID of the ATU (optional)</p><pre><strong>verilog:</strong></pre><p style="margin-left: 30.0px;">none.</p><h1 id="HW-CTFatut_apb-I/O"><strong>I/O</strong></h1><p><br/></p><p><strong>Functions Used</strong></p><p>N/A</p><h1 id="HW-CTFatut_apb-ModulesUsed"><strong>Modules Used</strong></h1><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157005/HW-CTF+apb_targ" data-linked-resource-id="16157005" data-linked-resource-version="1" data-linked-resource-type="page">HW-CTF apb_targ</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16156349/HW-SYM+Common+Transaction+Layer+Microarchitecture+Specification#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerTarget" data-linked-resource-id="16156349" data-linked-resource-version="327" data-linked-resource-type="page">Common Transaction Layer Target</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16156621/HW-CTF+vc_smi_pkt" data-linked-resource-id="16156621" data-linked-resource-version="2" data-linked-resource-type="page">HW-CTF vc_smi_pkt</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16156619/HW-CTF+vc_smi_depkt" data-linked-resource-id="16156619" data-linked-resource-version="1" data-linked-resource-type="page">HW-CTF vc_smi_depkt</a></p><h1 id="HW-CTFatut_apb-Description"><strong>Description</strong></h1><div>The ATUT_APB module includes an APB interface to the external slave(s) and an ATP interface from the network fabric. The ATUT APB module converts ATP request packets from the fabric to APB transactions and converts APB responses to ATP response packets for the fabric. </div><p>The current module described in this document <a class="external-link" href="https://confluence.arteris.com/display/ENGR/atut_apb" rel="nofollow">atut_apb</a> is the APB ATU Target top-level block that encapsulates the APB native, common transaction layer target, exclusive monitor (if enabled) &amp; the SMI packet &amp; de-packetizer layer sub-blocks. It does not include the configuration interface since there are no configuration registers on this version of the ATU. </p><p>Top-level block diagram. </p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="https://arterisip.atlassian.net/wiki/download/attachments/16166673/ATUt_APB_toplevel.png?api=v2"></span></p><p><br/></p><div><p>The APB protocol supports only one outstanding transaction/transfer at a time, whether it is a read or write. </p></div></div></div>