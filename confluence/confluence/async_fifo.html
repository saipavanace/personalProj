<div class="wiki-content"><style>[data-colorid=ztlr1ekcbl]{color:#707070} html[data-color-mode=dark] [data-colorid=ztlr1ekcbl]{color:#8f8f8f}</style><h1 id="async_fifo-module_name"><strong>module_name</strong></h1><p>async_fifo</p><p>async_fifo_wt_ctl</p><p>async_fifo_rd_ctl</p><p>async_fifo_reg_dp</p><h1 id="async_fifo-parameters"><strong>parameters</strong></h1><h2 style="margin-left: 30.0px;" id="async_fifo-java_script:"><strong>java_script:</strong></h2><h3 style="margin-left: 60.0px;" id="async_fifo-async_fifo:"><strong>async_fifo:</strong></h3><pre>{</pre><pre>        &quot;jitterOn&quot; : false or true, //true only for simulation. Causes the synchronizer cells to jitter one cycle.</pre><pre>	&quot;width&quot; : any positive integer 2 or greater, // The width of the data interface</pre><pre>        &quot;depth&quot; : any positive integer 2 or greater, // The depth of the pipeline must be a power of 2 if async = &quot;yes&quot;.</pre><pre>&nbsp; &nbsp; &nbsp; &nbsp; &quot;async&quot; : true or false,&nbsp;// If false means there is a fixed phase relationship between in_clk and out_clk where edges align.&nbsp;</pre><pre> &nbsp; &nbsp; &nbsp;  &quot;inClkInterface&quot; : {&quot;name&quot; : a_sting, &quot;signals&quot; : {interface Definition}},</pre><pre>        &quot;outClkInterface&quot; : {&quot;name&quot; : a_sting, &quot;signals&quot; : {interface Definition}},</pre><pre>       &nbsp;&quot;exposeValids&quot; : &quot;yes&quot; or &quot;no&quot;, // If &quot;yes&quot;, the valids are exposed, Act like a normal FIFO. </pre><pre>        &quot;exposeNextValids&quot; : &quot;yes&quot; or &quot;no&quot;, // If &quot;yes&quot;, the nextValids are exposed.</pre><pre>        &quot;InProtectionInterface&quot; :</pre><pre>          {&quot;name&quot; : a_string,</pre><pre>&nbsp; &nbsp; &nbsp;      &quot;signals&quot; : {interface Definition}},</pre><pre>        &quot;outProtectionInterface&quot; :</pre><pre>          {&quot;name&quot; : a_string,</pre><pre>&nbsp; &nbsp; &nbsp;      &quot;signals&quot; : {interface Definition}},</pre><pre>        &quot;protectionStyle&quot; : <a class="external-link" href="https://confluence.arteris.com/display/ENGR/protectionStyle" rel="nofollow">protectionStyle</a>}</pre><pre>}</pre><h3 style="margin-left: 60.0px;" id="async_fifo-async_fifo_wt_ctl:">async_fifo_wt_ctl:</h3><pre>{</pre><pre>        &quot;jitterOn&quot; : true or false,</pre><pre>        &quot;addState&quot; : 0 or greater integer, // defaults to 0, adds signals in_state and out_state with width addState.</pre><pre>        &quot;width&quot; : any positive integer 2 or greater, // The width of the data interface</pre><pre>        &quot;depth&quot; : any positive integer 2 or greater, // The depth of the pipeline must be a power of 2 if async = &quot;yes&quot;.</pre><pre>        &quot;syncDepth&quot; : 2 or higher integer, When async = true, depth of synchronizers. </pre><pre>        &quot;fromClk&quot; : string, // Name of clkInterface. Used to create a comment in dffr_sync generated verilog.</pre><pre>        &quot;toClk&quot; : string, // Name of clock used in async_fifo_rd_ctl. Used to create a comment in dffr_sync generated verilog.</pre><pre>&nbsp; &nbsp; &nbsp; &nbsp; &quot;async&quot; : true or false,&nbsp;// If false means there is a fixed phase relationship between in_clk and out_clk where edges align.</pre><pre> &nbsp; &nbsp; &nbsp;  &quot;clkInterface&quot; : {&quot;name&quot; : a_sting, &quot;signals&quot; : {interface Definition}},</pre><pre>        &quot;exposeValids&quot; : &quot;yes&quot; or &quot;no&quot;, // If &quot;yes&quot;, the valids are exposed, Act like a normal FIFO.</pre><pre>        &quot;exposeNextValids&quot; : &quot;yes&quot; or &quot;no&quot;, // If &quot;yes&quot;, the nextValids are exposed.</pre><pre>        &quot;protectionInterface&quot; :</pre><pre>          {&quot;name&quot; : a_string,</pre><pre>&nbsp; &nbsp; &nbsp;      &quot;signals&quot; : {interface Definition}},</pre><pre>        &quot;protectionStyle&quot; : <a class="external-link" href="https://confluence.arteris.com/display/ENGR/protectionStyle" rel="nofollow">protectionStyle</a>}</pre><pre>}</pre><h3 style="margin-left: 60.0px;" id="async_fifo-async_fifo_rd_ctl:">async_fifo_rd_ctl:</h3><pre>{</pre><pre>        &quot;jitterOn&quot; : true or false,</pre><pre>        &quot;addState&quot; : 0 or greater integer, // defaults to 0, adds signals in_state and out_state with width addState.</pre><pre>	&quot;width&quot; : any positive integer 2 or greater, // The width of the data interface</pre><pre>        &quot;depth&quot; : any positive integer 2 or greater, // The depth of the pipeline must be a power of 2 if async = &quot;yes&quot;.</pre><pre>        &quot;syncDepth&quot; : 2 or higher integer, When async = true, depth of synchronizers. </pre><pre>        &quot;fromClk&quot; : string, // Name of clkInterface. Used to create a comment in dffr_sync generated verilog.</pre><pre>        &quot;toClk&quot; : string, // Name of clock used in async_fifo_wt_ctl. Used to create a comment in dffr_sync generated verilog.</pre><pre>&nbsp; &nbsp; &nbsp; &nbsp; &quot;async&quot; : true or false,&nbsp;// If false means there is a fixed phase relationship between in_clk and out_clk where edges align.</pre><pre> &nbsp; &nbsp; &nbsp;  &quot;clkInterface&quot; : {&quot;name&quot; : a_sting, &quot;signals&quot; : {interface Definition}},</pre><pre>        &quot;protectionInterface&quot; :</pre><pre>          {&quot;name&quot; : a_string,</pre><pre>&nbsp; &nbsp; &nbsp;      &quot;signals&quot; : {interface Definition}},</pre><pre>        &quot;protectionStyle&quot; : <a class="external-link" href="https://confluence.arteris.com/display/ENGR/protectionStyle" rel="nofollow">protectionStyle</a>}</pre><pre>}</pre><h3 style="margin-left: 60.0px;" id="async_fifo-async_fifo_reg_dp:">async_fifo_reg_dp:</h3><pre>{</pre><pre>	&quot;width&quot; : any positive integer 2 or greater, // The width of the data interface</pre><pre>        &quot;depth&quot; : any positive integer 2 or greater, // The depth of the pipeline must be a power of 2 if async = &quot;yes&quot;.</pre><pre>&nbsp; &nbsp; &nbsp; &nbsp; &quot;async&quot; : true or false&nbsp;// If false means there is a fixed phase relationship between in_clk and out_clk where edges align.</pre><pre> &nbsp; &nbsp; &nbsp;  &quot;clkInterface&quot; : {&quot;name&quot; : a_sting, &quot;signals&quot; : {interface Definition}},</pre><pre>}</pre><h1 id="async_fifo-I/O"><strong>I/O</strong></h1><h2 style="margin-left: 30.0px;" id="async_fifo-async_fifo:.1"><strong>async_fifo:</strong></h2><pre>u.interface(inClkInterface.name,'slave',inClkInterface.signals);</pre><pre>u.interface(outClkInterface.name,'slave',outClkInterface.signals);</pre><pre> if (protectionStyle !== &quot;&quot;) {<br />  u.interface(inP<a class="external-link" href="http://protectioninterface.name/" rel="nofollow">rotectionInterfaceIn.name</a>,'slave',inProtectionInterface.signals);</pre><pre>  u.interface(outP<a class="external-link" href="http://protectioninterface.name/" rel="nofollow">rotectionInterfaceOut.name</a>,'slave',outProtectionInterface.signals);</pre><pre> }</pre><pre>u.port('input','in_valid',1);</pre><pre>u.port('output','in_ready',1);</pre><pre>u.port('input', 'in_reset',1);</pre><pre>u.port('input','in_data',width);</pre><pre>u.port('output','out_valid',1);</pre><pre>u.port('input','out_ready',1);</pre><pre>u.port('input','out_reset',1);</pre><pre>u.port('output','out_data',width);</pre><h2 style="margin-left: 30.0px;" id="async_fifo-async_fifo_wt_ctl:.1"><strong>async_fifo_wt_ctl:</strong></h2><pre>u.interface(clkInterface.name,'slave',clkInterface.signals);&nbsp;</pre><pre>if (addState &gt; 0) {</pre><pre> u.interface('input','in_state',addState);</pre><pre> u.port('output','out_state',addState);</pre><pre>}</pre><pre>if (protectionStyle !== &quot;&quot;) {<br />  u.interface(<a class="external-link" href="http://protectioninterface.name/" rel="nofollow">protectionInterface.name</a>,'master',protectionInterface.signals);</pre><pre>}</pre><pre>u.port('input','in_valid',1);</pre><pre>u.port('output','in_ready',1);</pre><pre>u.port('input', 'in_reset',1);</pre><pre>u.port('output','write_sel',depth);</pre><pre>u.port('output','write_ptr',N);  // if (async == &quot;no&quot;) N = depth+1 else N = log2ciel(depth)+1</pre><pre>u.port('input','read_ptr',N);  // if (async == &quot;no&quot;) N = depth+1 else N = log2ciel(depth)+1</pre><h2 style="margin-left: 30.0px;" id="async_fifo-async_fifo_rd_ctl:.1"><strong>async_fifo_rd_ctl:</strong></h2><pre>u.interface(clkInterface.name,'slave',clkInterface.signals);</pre><pre>if (addState &gt; 0) {</pre><pre> u.interface('input','in_state',addState);</pre><pre> u.port('output','out_state',addState);</pre><pre>}</pre><pre>if (protectionStyle !== &quot;&quot;) {</pre><pre>  u.interface(<a class="external-link" href="http://protectioninterface.name/" rel="nofollow">protectionInterface.name</a>,'master',protectionInterface.signals);</pre><pre>}</pre><pre>u.port('output','out_valid',1);</pre><pre>u.port('input','out_ready',1);</pre><pre>u.port('input', 'out_reset',1);</pre><pre>u.port('output','read_sel',depth);</pre><pre>u.port('input','write_ptr',N);  // if (async == &quot;no&quot;) N = depth+1 else N = log2ciel(depth)+1</pre><pre>u.port('output','read_ptr',N);  // if (async == &quot;no&quot;) N = depth+1 else N = log2ciel(depth)+1</pre><h2 style="margin-left: 30.0px;" id="async_fifo-async_fifo_reg_dp:.1"><strong>async_fifo_reg_dp:</strong></h2><pre>u.interface(clkInterface.name,'slave',clkInterface.signals);</pre><pre>u.port('input','in_data',width);</pre><pre>u.port('output',out_data',width);</pre><pre>u.port('input','write_sel',depth);</pre><pre>u.port('input','read_sel',depth);</pre><h1 id="async_fifo-FunctionsUsed"><strong>Functions Used</strong></h1><p>N/A</p><h1 id="async_fifo-ModulesUsed"><strong>Modules Used</strong></h1><p>dffre</p><p>prot_reg</p><h1 id="async_fifo-Description"><strong>Description</strong></h1><p>The internal structure of the async FIFO is a circular FIFO and the block diagram of the async fifo is shown below:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16163996/async%20fifo.svg?api=v2" /></span></p><p>This is provided mainly as an example of how to use async_fifo_wt_ctl, async_fifo_rd_ctl and async_fifo_reg_dp.</p><p>The async fifo is composed of three separate blocks: Write Control, Read Control and FIFO registers. These blocks can be used to build a FIFO between clocks that are synchronous to each other, but running with different dividers off a root clock. If the dividers have a even relationship (the smaller divider divides evenly into the larger divider) than the timing between the two blocks shall be run at the smaller of the two cycles if the rising edges align. If the rising edges don't align, then the timing between the two blocks shall be run at minimum time between any two rising edges. If the dividers do not divide evenly into each other, the timing between the two blocks shall be run a 1/2 the clock cycle of the root clock.</p><p>When the block has async = true the write pointer will come straight from a register in the write control block and uses a gray code. The same is true for the read pointer coming from the read control block. Both these signals will be synchronized in the receiving block. Because a gray code is being used, only depths that are even can be used.</p><p>When the block has async = false the read and write pointers will not be gray code encoded, but will still come straight from registers, but will not be synchronized in the receiving block.</p><p>addState is used to add bits to the protected registers that can be used from above. This keeps from having to merge protectionInterfaces if all you need are a few bits of state when using these blocks.</p><h1 id="async_fifo-CustomerIntegrationNotes:">Customer Integration Notes:</h1><p>After synthesis when this block is used in &quot;async&quot; mode, a check must be run to confirm that no divergent/re-convergent paths exist from the outputs of the registers inside the FIFO register block to the pins in out_data. This shouldn't normally happen, but sometimes synthesis can do this so it needs to be checked for. If it occurs, the logic gates must be edited to remove the&nbsp;divergent/re-convergent paths because what this indicates is a non-selected entry in the buffer changing state can cause out_data to glitch.</p></div><div><div><a class="external-link" href="https://confluence.arteris.com/" rel="nofollow"><span data-colorid="ztlr1ekcbl" class="aui-icon aui-icon-small aui-iconfont-like">&nbsp;</span></a></div></div>