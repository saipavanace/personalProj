<h1 id="Ncore3.2_PowerMicro-ArchitectureSpecification-RevisionNotes">Revision Notes</h1><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Revision</th><th class="confluenceTh">Notes</th><th class="confluenceTh">Reviser</th></tr><tr><td class="confluenceTd">v0.1</td><td class="confluenceTd">Initial Structure and Top-Level Diagram</td><td class="confluenceTd">Eric Taylor</td></tr><tr><td class="confluenceTd">v1.0</td><td class="confluenceTd">Added additional details</td><td class="confluenceTd">Akarsh Hebbar</td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr></tbody></table></div><h1 id="Ncore3.2_PowerMicro-ArchitectureSpecification-TableofContents">Table of Contents</h1><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759725089833 {padding: 0px;}
div.rbtoc1759725089833 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759725089833 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759725089833'>
<ul class='toc-indentation'>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-RevisionNotes'>Revision Notes</a></li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-TableofContents'>Table of Contents</a></li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-Refrences'>Refrences</a></li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-DocumentDescription'>Document Description</a>
<ul class='toc-indentation'>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-SubdomainLevelGating'>Subdomain Level Gating</a></li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-BlockLevelGating'>Block Level Gating</a></li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-ClockGatinginsertedbySynthesis'>Clock Gating inserted by Synthesis</a></li>
</ul>
</li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-Top-LevelDiagram'>Top-Level Diagram</a></li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-Description'>Description</a>
<ul class='toc-indentation'>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-Q-Channel'>Q-Channel</a></li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-P-Channel'>P-Channel</a></li>
</ul>
</li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-Sequencing'>Sequencing</a>
<ul class='toc-indentation'>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-Q-Channel.1'>Q-Channel</a></li>
<li><a href='#Ncore3.2_PowerMicro-ArchitectureSpecification-P-Channel.1'>P-Channel</a></li>
</ul>
</li>
</ul>
</div></p><h1 id="Ncore3.2_PowerMicro-ArchitectureSpecification-Refrences">Refrences</h1><p><a href="https://arterisip.atlassian.net/wiki/download/attachments/16154948/IHI0068C_low_power_interface_spec.pdf?version=1&amp;modificationDate=1565092367980&amp;cacheVersion=1&amp;api=v2" data-linked-resource-id="16325835" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IHI0068C_low_power_interface_spec.pdf" data-nice-type="PDF Document" data-linked-resource-content-type="application/pdf" data-linked-resource-container-id="16154948" data-linked-resource-container-version="212">IHI0068C_low_power_interface_spec.pdf</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16166820/pma" data-linked-resource-id="16166820" data-linked-resource-version="105" data-linked-resource-type="page">pma</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164583/pma_mux" data-linked-resource-id="16164583" data-linked-resource-version="7" data-linked-resource-type="page">pma_mux</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163996/async_fifo" data-linked-resource-id="16163996" data-linked-resource-version="5" data-linked-resource-type="page">async_fifo</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163523/dffr_sync" data-linked-resource-id="16163523" data-linked-resource-version="4" data-linked-resource-type="page">dffr_sync</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16167363/dffre" data-linked-resource-id="16167363" data-linked-resource-version="2" data-linked-resource-type="page">dffre</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16155739/logic_tree" data-linked-resource-id="16155739" data-linked-resource-version="15" data-linked-resource-type="page">logic_tree</a></p><p><br/></p><h1 id="Ncore3.2_PowerMicro-ArchitectureSpecification-DocumentDescription">Document Description</h1><p>This document is to outline the overall microarchitectural implementation of the Power feature over all units.</p><p>You can find additional details in &quot;Ncore 3.2 System Architecture Specification&quot; Chapter 9 [Power and Clock ]</p><p><span>Ncore supports three levels of clock gating:</span></p><ul><li><span>Subdomain Level Clock Gating</span></li><li><span>Block Level Clock Gating</span></li><li><span>Clock Gating inserted by Synthesis</span></li></ul><h2 id="Ncore3.2_PowerMicro-ArchitectureSpecification-SubdomainLevelGating"><span>Subdomain Level Gating</span></h2><p><span>There is a clock interface per subdomain and that clock can be gated (turned on and off) by the customer. The Ncore design DOES NOT do this gating. However, there is a mechanism provided to a customer to inform them when a clock can be turned off, but it is only provided at the clock domain level through the Q-Channel interface that is provided for each switchable clock domain in the design.</span></p><p><span>So, if a customer has requested to turn on or off a switchable clock domain, when that request is acknowledged, the customer should turn all the clock sub domains associated with a clock domain on and off together. This operation can be performed sequentially on the sub domains and does not need to happen within a given clock.</span></p><h2 id="Ncore3.2_PowerMicro-ArchitectureSpecification-BlockLevelGating"><span>Block Level Gating</span></h2><p><span>In each clock subdomain clock interface, there is a parameter, blkClkGateOn, that is passed to any block in a Ncore design that is connected to that clock interface. When the parameter is true, then the block will insert clock gating based on its internal and the state of the interfaces connected to it. Not all blocks will insert clock gates when this parameter is set to true. For instance, blocks related to async_adapter and rate_adapter  do not insert clock gating in response to this parameter.</span></p><h2 id="Ncore3.2_PowerMicro-ArchitectureSpecification-ClockGatinginsertedbySynthesis"><span>Clock Gating inserted by Synthesis</span></h2><p><span>In Ncore, RTL code shall not be written in such a manner as to prevent a customer from turning on automatic clock gating in the synthesis tool. It is the customer’s decision on whether to use this feature in their synthesis tool or not.</span></p><h1 id="Ncore3.2_PowerMicro-ArchitectureSpecification-Top-LevelDiagram">Top-Level Diagram</h1><div><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="840" src="https://arterisip.atlassian.net/wiki/download/attachments/247564618/image2019-8-7%2013:27:56.png?api=v2"></span></div><h1 id="Ncore3.2_PowerMicro-ArchitectureSpecification-Description">Description</h1><h2 id="Ncore3.2_PowerMicro-ArchitectureSpecification-Q-Channel">Q-Channel</h2><p>The block's power sequence will be controlled through a Q channel interface. The general state machine will perform as followed:</p><ol><li>The block is in a powered-up state.</li><li>REQn is asserted (equal to 0) on the Q Channel Interface.</li><li>The block will accept the power down request once it is not busy. ACCEPTn will assert (equal to 0)</li><li>When in the power down state the block will not block any transactions and has no special behavior.</li><li>The Block will go into the powered-up state once REQn deasserts (equal to 1). ACCEPTn will also deassert (equal to 1)</li></ol><p>If it is taking a long time to power down the block , the power down can be aborted and will go as follows:</p><ol><li>The block is in a powered-up state.</li><li>REQn is asserted (equal to 0) on the Q Channel Interface.</li><li>The block stays busy longer than anticipated and ACCEPTn stays deasserted.</li><li>REQn deasserts (power down aborted) and the block stays in the powered-up state.</li></ol><p>Note: This procedure is not Q Channel defined behavior. Normally this is done through a DENY signal which is not used at the moment in NCore.</p><p>The ACTIVE signal indicates if the block is busy. This signal can toggle at any time.</p><p>Each block at the moment only drives busy through the PMA Control Interface to its respective PMA Slave. </p><h2 id="Ncore3.2_PowerMicro-ArchitectureSpecification-P-Channel">P-Channel</h2><div>TODO</div><h1 id="Ncore3.2_PowerMicro-ArchitectureSpecification-Sequencing">Sequencing</h1><h2 id="Ncore3.2_PowerMicro-ArchitectureSpecification-Q-Channel.1">Q-Channel</h2><p>Coming out of reset and into a powered up state can happen from any of the following sequences</p><ul><li>1.Activate Clock    2. REQn Deassert  3. Reset De-assert</li><li>1.Activate Clock    2. Reset De-assert 3. REQn Deassert &lt; - Used By NCore</li><li>1.Reset De-assert 2. Activate Clock    3. REQn Deassert</li><li>1.Reset De-assert 2. REQn Deassert  3. Activate Clock</li><li>1.REQn Deassert  2. Reset De-assert 3. Activate Clock</li><li>1.REQn Deassert  2. Activate Clock    3. Reset De-assert</li></ul><p>Coming out of reset and into a powered down state can happen from any of the following sequences</p><ol><li>Activate Clock    2. Reset De-assert &lt; - Used By NCore</li><li>Reset De-assert 2. Activate Clock<br/><br/></li></ol><h2 id="Ncore3.2_PowerMicro-ArchitectureSpecification-P-Channel.1">P-Channel</h2><div>TODO</div><p><u>See either the PMA confluence page or ARMs Power Management spec for more info on the Q channel interface. (Linked Above)</u></p><p><br/></p>