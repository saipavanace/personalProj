<h2 id="Gitpushqueueforthehw-ncrrepository-Overview">Overview</h2><p>The <a class="external-link" href="http://gitlab.arteris.com/hardware/hw-ncr" rel="nofollow">hw-ncr</a> repository has a fairly long set of tests that must be passed before anything is allowed to be checked in.  Because of that, the requests to check in are queued.  The script 'push_ncr' queues a request for a push to the <a class="external-link" href="http://jenkins.arteris.com:8080/view/NCore/job/NCore/job/pushq/" rel="nofollow">NCore/pushq</a> Jenkins job. When that request reaches the top of the queue, any changes from intervening pushes are merged into the user changes. Then a test is run using the <a class="external-link" href="http://jenkins.arteris.com:8080/view/NCore/job/NCore/job/pushtest/" rel="nofollow">NCore/pushtest </a>Jenkins job. If the test passes, the changes are pushed into the gitlab repository for <a class="external-link" href="http://gitlab.arteris.com/hardware/hw-ncr" rel="nofollow">hardware/hw-ncr</a>.</p><h2 id="Gitpushqueueforthehw-ncrrepository-Setup">Setup</h2><p>In order to run Jenkins jobs from the script, the user needs to have a /home/$USER/.netrc containing a token that is used to authenticate with Jenkins.  Please see <a class="external-link" href="https://confluence.arteris.com/display/ENGR/Using+the+Jenkins+REST+API" rel="nofollow">Using the Jenkins REST API</a> for instructions on setting up your .netrc.</p><h2 id="Gitpushqueueforthehw-ncrrepository-Usage">Usage</h2><p>The 'push_ncr' script is found at the top of your hardware/hw-ncr (aka 'concerto') workspace.  It takes no arguments.  If you have no committed changes, it will tell you so and exit.  The script will run until all tests are complete and the changes are pushed to the repository's origin/master.</p><h2 id="Gitpushqueueforthehw-ncrrepository-SequenceDiagram">Sequence Diagram</h2><p>The sequence of events for the push_ncr script are as follows:</p><img class="wysiwyg-unknown-macro" src="https://arterisip.atlassian.net/wiki/plugins/servlet/confluence/placeholder/unknown-macro?name=svg-out&amp;locale=en_US&amp;version=2" /><p> </p><p> </p>