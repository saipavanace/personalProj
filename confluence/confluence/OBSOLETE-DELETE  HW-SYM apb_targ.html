<p><strong style="font-size: 24.0px;"><br/></strong></p><p><strong style="font-size: 24.0px;">module_name:</strong></p><p><span style="font-size: 24.0px;">apb_targ</span></p><p><strong style="font-size: 24.0px;">parameters</strong></p><div class="page view"><div class="wiki-content"><h2 id="OBSOLETE-DELETEHW-SYMapb_targ-java_script:"><strong>java_script:</strong></h2></div></div><p>maxTransSize: Maximum transaction/payload size. Range: 4/16/32/64/128/../4096 bytes. </p><p>pipeLevel: Depth of pipes inside APB_TARG</p><p>wApbSlvDec: &lt;0,1,2,3&gt;, // The width of the multi-slave decode. This represents the log2 width of how many possible slaves are at the target. Width of 3 == (2^3) slaves at this target.</p><p>apbSlvLut: {</p><p>   addr: &lt;string&gt; // String used to represent address, &quot;4'h0020&quot;</p><p>   chipSel: &lt;string&gt; // String used to represent APB chip select chosen, &quot;2'b01&quot;</p><p>} // Lookup Table used when Multi-Slaves are available at the target.</p><p>tzEn: &lt;boolean&gt; Trust Zone enabled</p><p>interfaces: {</p><p>    clkInterface: { name: &quot;a_string&quot;, params: {}, direction: &quot;slave&quot;, interface: &quot;InterfaceCLK&quot;},</p><p>    apbInterface: { </p><p>        name: &quot;a_string&quot;,</p><p>        params: { file_path: a string containing the full path of the JSON file specifying all the parameters of the interface },</p><p>        direction: &quot;slave&quot;,</p><p>        interface: &quot;InterfaceAPB&quot;</p><p>    },</p><p>    ctlReqInterface: {</p><p>        name: &quot;a_string&quot;    </p><p>        params: { file_path: a string containing the full path of the JSON file specifying all the parameters of the interface },</p><p>        direction: &quot;master&quot;,</p><p>        interface: &quot;InterfaceCTL&quot;</p><p>    },</p><p>    ctlRespInterface: {</p><p>        name: &quot;a_string&quot;    </p><p>        params: { file_path: a string containing the full path of the JSON file specifying all the parameters of the interface },</p><p>        direction: &quot;slave&quot;,</p><p>        interface: &quot;InterfaceCTL&quot;</p><p>    }</p><p>}</p><pre><strong>verilog:</strong></pre><p style="margin-left: 30.0px;">none.</p><h1 id="OBSOLETE-DELETEHW-SYMapb_targ-I/O"><strong>I/O</strong></h1><p><br/></p><p><strong>Functions Used</strong></p><p>N/A</p><h1 id="OBSOLETE-DELETEHW-SYMapb_targ-ModulesUsed"><strong>Modules Used</strong></h1><p>prot_reg</p><p>block_clk_gate</p><p>rdy_vld_pipe</p><p>path_lookup (if nApbSlv&gt;1)</p><h1 id="OBSOLETE-DELETEHW-SYMapb_targ-Description"><strong>Description</strong></h1><p>This is the APB native layer target sub-block used by the ATUT APB top-level block.</p><p>If enabled, there is clock gating logic that returns a busy signal if there are active transactions being processed and will shut off clocks when not busy. </p><p>It is responsible for taking in a CTL request transaction and mapping it to an APB interface. The table below helps to break down various considerations based on features or available fields at the APB interface. This block is also responsible for returning the APB response and mapping it to a CTL response transaction. </p><h2 id="OBSOLETE-DELETEHW-SYMapb_targ-MappingTable."><strong>Mapping Table.</strong></h2><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 105.0px;"/></colgroup><colgroup><col style="width: 91.0px;"/></colgroup><colgroup><col style="width: 91.0px;"/></colgroup><colgroup><col style="width: 64.0px;"/></colgroup><colgroup><col style="width: 81.0px;"/></colgroup><colgroup><col style="width: 267.0px;"/></colgroup><colgroup><col style="width: 235.0px;"/></colgroup><colgroup><col style="width: 122.0px;"/></colgroup><colgroup><col style="width: 232.0px;"/></colgroup><tbody><tr><th class="confluenceTh">CTL Burst Type</th><th class="confluenceTh"><p>Burst Type Supported</p></th><th colspan="1" class="confluenceTh">Narrow Supported</th><th class="confluenceTh">PSTRB Exists</th><th colspan="1" class="confluenceTh">Is Exclusive</th><th class="confluenceTh">APB Behavior</th><th colspan="1" class="confluenceTh">Splitting Equation</th><th colspan="1" class="confluenceTh">PADDR Behavior</th><th colspan="1" class="confluenceTh">Comments</th></tr><tr><td class="confluenceTd">INCR</td><td class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd"><p>A CTL write or read request always produces an APB transaction.</p></td><td colspan="1" class="confluenceTd">See equation ID 1 </td><td rowspan="5" class="confluenceTd">Address is always aligned to target width.<br/><br/><br/><br/></td><td colspan="1" class="confluenceTd">A write transaction with any PSTRB bits == 0 can occur. </td></tr><tr><td colspan="1" class="confluenceTd">INCR</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd">A CTL write or read request always produces an APB transaction. </td><td colspan="1" class="confluenceTd">See equation ID 1 </td><td colspan="1" class="confluenceTd">A write transaction with any PSTRB bits == 0 can occur. </td></tr><tr><td class="confluenceTd">INCR</td><td class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">No</td><td colspan="1" class="confluenceTd"><br/></td><td class="confluenceTd"><p>If ctl_req_addr is misaligned to target width or not all the incoming byte enables are set, no APB write request will be produced. A slave error response will be returned on ctl_resp_err.</p><p>This check is done on a per beat basis so a transaction that is split can write on some beats, but not others.</p><p><strong><em>See diagrams below for more information on how a write could be split. </em></strong></p><p>A CTL read request always produces an APB transaction.</p></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">Mis-aligned to the target means if any bit is set on ctl_req_addr[log2ceil(wData/8)-1:0]</td></tr><tr><td colspan="1" class="confluenceTd">FIXED*</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd">na</td><td colspan="1" class="confluenceTd">na</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">na</td><td colspan="1" class="confluenceTd">na</td><td colspan="1" class="confluenceTd">Fixed burst type is not currently supported at APB target.</td></tr><tr><td colspan="1" class="confluenceTd">WRAP*</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd">na</td><td colspan="1" class="confluenceTd">na</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">na</td><td colspan="1" class="confluenceTd">na</td><td colspan="1" class="confluenceTd">Wrap burst type is not currently supported at APB target.</td></tr></tbody></table></div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Equation ID</th><th class="confluenceTh">Description</th><th class="confluenceTh">Equation</th></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">Split into APB transactions</td><td class="confluenceTd">N=(ctl_req_len + ctl_req_addr[log2ceil(wData/8)-1:0] + 1) / (wData/8)</td></tr></tbody></table></div><p>*The apb target will never receive FIXED and WRAP packet types because the initiator will convert these burst types to INCR. For documentation on how this splitting is done refer to splitting table in the Common Transaction Layer Microarchitecture Specification.</p><p><br/></p><h1 id="OBSOLETE-DELETEHW-SYMapb_targ-Samesizedatawidths.">Same size data widths.</h1><p>The figure below helps visualize a write transaction originating from an initiator to a target that has the same size data width. Every beat at the initiator is seen as an APB transaction at the target.</p><p>'B0' below represents byte0 of the data bus. Each rectangle represents the data bus. The 'F' or '0' in the rectangle represents the byte enables for that entire data bus. You can see the behavior in the example where if the byte enables are not all 'F's, it will be dropped if there is no PSTRB field on the APB interface. </p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16163636/APB%20WR%20SameSize.png?api=v2"></span></p><h1 id="OBSOLETE-DELETEHW-SYMapb_targ-Narrowtowidedatawidths.">Narrow to wide data widths. </h1><p>The figure below helps visualize a write transaction originating from an initiator that has a data bus that is narrower than the target. A single beat at the initiator will always be a single APB transaction, however care must be taken if there are is no PSTRB field on the APB interface. A write transaction from the initiator in this case will create a beat with some byte enables set to 0 to make one beat of data to match the target data bus. </p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16163636/APB%20WR%20Narrow2Wide.png?api=v2"></span></p><h1 id="OBSOLETE-DELETEHW-SYMapb_targ-Widertonarrowdatawidths.">Wider to narrow data widths.</h1><p>The figure below helps visualize a write transaction originating from an initiator that has a data bus that is wider than the target. A single beat at the initiator will always be split into multiple APB transactions at the target. </p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16163636/APB%20WR%20Wide2Narrow.png?api=v2"></span></p><p><br/></p><h2 id="OBSOLETE-DELETEHW-SYMapb_targ-Top-LevelDiagram"><strong>Top-Level Diagram</strong></h2><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="https://arterisip.atlassian.net/wiki/download/attachments/16163636/Annotation%202020-07-24%20175844.png?api=v2"></span></p><div class="page view"><div class="wiki-content"><p><br/></p><p><br/></p></div></div>