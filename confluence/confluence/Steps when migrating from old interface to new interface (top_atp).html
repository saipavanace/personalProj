<h5 id="Stepswhenmigratingfromoldinterfacetonewinterface(top_atp)-Toconverttheoldinterfaceformatstonewformats,thereare5typesoffilesthatareneedtobegeneratedminimum."><style>[data-colorid=pi0lapzj2s]{color:#707070} html[data-color-mode=dark] [data-colorid=pi0lapzj2s]{color:#8f8f8f}</style><span data-colorid="pi0lapzj2s">To convert the old interface formats to new formats, there are 5 types of files that are need to be generated minimum.</span></h5><p>&nbsp;</p><ol><li style="list-style-type: none;background-image: none;"><ol><li><h5 id="Stepswhenmigratingfromoldinterfacetonewinterface(top_atp)-top_tb.jsonfile">top_tb.json file</h5></li><li><h5 id="Stepswhenmigratingfromoldinterfacetonewinterface(top_atp)-top_wrapper.jsonfile(therecanmultipleofsuch)">top_wrapper.json file (there can multiple of such)</h5></li><li><h5 id="Stepswhenmigratingfromoldinterfacetonewinterface(top_atp)-lowlevelrtlmodulejsonfiles(willdefinitelybemultipleofthese)">low level rtl module json files (will definitely be multiple of these)</h5></li><li><h5 id="Stepswhenmigratingfromoldinterfacetonewinterface(top_atp)-ATPinterfaceparams.jsonfile.(useonlyonethroughouttheatpconfiguration)">ATP interface params.json file. (use only one throughout the atp configuration)</h5></li><li><h5 id="Stepswhenmigratingfromoldinterfacetonewinterface(top_atp)-LinkPacketcprfile(alsouseonlyonefileforonetypeoflinkPacketDefinition)">Link Packet cpr file (also use only one file for one type of linkPacketDefinition)</h5></li></ol></li></ol><p><span><br /></span></p><h3 id="Stepswhenmigratingfromoldinterfacetonewinterface(top_atp)-A)tb_top.jsonfile"><span>A) tb_top.json file</span></h3><p><span>&nbsp;</span>Following script converts top_tb &amp; the top_rtl file mentioned inside the old top_tb file.</p><pre>$WORK_TOP/tb/switch/conv_top_atp_new_intf.js</pre><p>This script makes required modifications in old format tb_top file, rtl_top file &amp; also generates atp params.json file. Sample command:</p><p><strong>node $WORK_TOP/tb/switch/conv_top_atp_new_intf.js -otb switch_top_tb_ring_16x16.json -ortl switch_top_wrapper_ring_16x16.json<span class="legacy-color-text-red2">&nbsp;-lin \$WORK_TOP\/tb\/switch\/atp\/switch_tb_ring_16x16.json</span>&nbsp;<span class="legacy-color-text-blue4">-lpn switch_ring_16x16</span>&nbsp;<span class="legacy-color-text-green5">-itb tb_switch_auto_16x16.json</span></strong></p><ol><li>You need to provide the filename of output tb file in &ldquo;-otb&rdquo; option &amp; output top_rtl file in &ldquo;-ortl&rdquo;. The script will dump new files under those names.</li><li>The&nbsp;<span class="legacy-color-text-red2">red</span>&nbsp;highlighted option &ldquo;-lin&rdquo; has to be the path to dump atp params.json file. The script will generate atp params for you from the input top_tb file. Please reference path as $WORK_TOP and escaping / as it&rsquo;ll print this string in the resultant output top_wrapper file.</li><li>The&nbsp;<span class="legacy-color-text-blue4">blue</span>&nbsp;highlighted option &ldquo;-lpn&rdquo; has to be the name of the cpr packet name to be used. This cpr packet file should be passed to the tachl compile via runsim_testlist.json &ldquo;cprOptions&rdquo;.</li><li>The&nbsp;<span class="legacy-color-text-green5">green</span>&nbsp;highlighted option &ldquo;-itb&rdquo; has to be the inpout top_tb file of old interface format that needs to be converted.</li></ol><p>&nbsp;</p><h3 id="Stepswhenmigratingfromoldinterfacetonewinterface(top_atp)-B)top_wrapper.jsonfile">B) top_wrapper.json file</h3><p>The conv_top_atp_new_intf.js script can also generate the stand alone top_wrapper file when you pass the old format top_rtl file as input. Sample Command:</p><p><strong>node $WORK_TOP/tb/switch/conv_top_atp_new_intf.js -ortl switch_top_wrapper_req_mesh.json -lin \$WORK_TOP\/tb\/switch\/atp\/switch_tb_ring_16x16.json -lpn switch_ring_16x16&nbsp;<span class="legacy-color-text-green5">-irtl req_mesh.json</span>&nbsp;<span class="legacy-color-text-pink2">-ni 16 -ne 16</span></strong></p><ol><li>The&nbsp;<span class="legacy-color-text-green5">green</span>&nbsp;highlighted option &ldquo;-irtl&rdquo; is similar as above. Provide the input rtl_top file which needs to be converted.</li><li>The&nbsp;<span class="legacy-color-text-pink2">pink</span>&nbsp;highlighted options are number of Ingress ports (-ni) &amp; number of Egress ports (-ne).</li></ol><p>&nbsp;</p><p>C) Low level rtl module.json file.</p>