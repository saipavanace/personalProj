<h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-History"><strong>History</strong></h1><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Version</th><th class="confluenceTh">Date</th><th colspan="1" class="confluenceTh">Comments</th><th class="confluenceTh">Editor</th></tr><tr><td class="confluenceTd">xxx</td><td class="confluenceTd">xxx</td><td colspan="1" class="confluenceTd"><ul style="list-style-type: square;"><li>Start Revision Control once initial doc is made.</li></ul></td><td class="confluenceTd">Eric Taylor</td></tr></tbody></table></div><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Outline"><strong>Outline</strong></h1><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759723354504 {padding: 0px;}
div.rbtoc1759723354504 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759723354504 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759723354504'>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-History'>History</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Outline'>Outline</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description'>Description</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Features'>Features</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Interfaces'>Interfaces</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReferenceSpecification'>Reference Specification</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerInitiator'>Common Transaction Layer Initiator</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters'>Parameters</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers'>Registers</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagram'>Top Level Diagram</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.1'>Description</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAM,Stripe,andTargetTable'>PAM, Stripe, and Target Table</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAMMode'>PAM Mode</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExternalSignaling:'>External Signaling:</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserBits:(ExcludefromR1Documentation)'>User Bits: (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CSRRegister:(ExcludefromR1Documentation)'>CSR Register: (Exclude from R1 Documentation)</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionStriping'>Transaction Striping</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionBurstTypeandSplitting'>Transaction Burst Type and Splitting</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-250'></a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowTransactions'>Narrow Transactions</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Anarrowtransactioninthiscontextisdefinedwhentxn_hdr_burstSize(BurstWidth)issmallerthantxn_hdr_maxBurstSize(ChannelWidth).'>A narrow transaction in this context is defined when txn_hdr_burstSize (Burst Width) is smaller than txn_hdr_maxBurstSize (Channel Width).</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context'>Context</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ContextFields'>Context Fields</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestCounter'>Request Counter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SequenceNumber'>Sequence Number</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-LatencyMeasurement(StatsInterface)'>Latency Measurement (Stats Interface)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-IDCompression'>ID Compression</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-InputQueues(ExcludefromR1Documentation)'>Input Queues (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Arbiter(ExcludefromR1Documentation)'>Arbiter (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionRequeuing(ExcludefromR1Documentation)'>Transaction Requeuing (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoS(QoSChange)'>QoS ( QoS Change )</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TrafficClassandInternalPriorityMapping'>Traffic Class and Internal Priority Mapping</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimitingandLatencyPressure'>Rate Limiting and Latency Pressure</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoStoPacketFieldMappings'>QoS to Packet Field Mappings</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ConfiguringQoS'>Configuring QoS</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimiterClockGate'>Rate Limiter Clock Gate</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager(ExcludefromR1Documentation)'>Credit Manager (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReOrderBuffer'>Re Order Buffer</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BeatBuffer'>Beat Buffer</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Timing'>Timing</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ErrorGeneration'>Error Generation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseGeneration'>Response Generation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReadDataInterleaving'>Read Data Interleaving</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-EchoField(ExcludefromR1Documentation)'>Echo Field (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserField'>User Field</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MismatchinTargetParameters'>Mismatch in Target Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerTarget'>Common Transaction Layer Target</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters.1'>Parameters</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers.1'>Registers</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagrams'>Top Level Diagrams</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FullTop-levelExample'>Full Top-level Example</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TypicalTop-levelExample'>Typical Top-level Example</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MinimumTop-levelExample'>Minimum Top-level Example</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.2'>Description</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BurstTranslation'>Burst Translation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-OutputQueues'>Output Queues</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestArbiter'>Request Arbiter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context.1'>Context</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager'>Credit Manager</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseQueues&amp;Arbiter'>Response Queues &amp; Arbiter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponsePath'>Response Path</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowPacking/Unpacking'>Narrow Packing/Unpacking</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExclusiveMonitor'>Exclusive Monitor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SharedSpecification'>Shared Specification</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PMAControl'>PMA Control</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FaultReporting'>Fault Reporting</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-DataProtection'>Data Protection</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixA.ExampleStripingTable'>Appendix A. Example Striping Table</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixB.CTLInitiatorContext/QueueFlow(Sketch)(InProgress)'>Appendix B. CTL Initiator Context/Queue Flow (Sketch) (In Progress)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-History.1'>History</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Outline.1'>Outline</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.3'>Description</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Features.1'>Features</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Interfaces.1'>Interfaces</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReferenceSpecification.1'>Reference Specification</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerInitiator.1'>Common Transaction Layer Initiator</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters.2'>Parameters</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers.2'>Registers</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagram.1'>Top Level Diagram</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.4'>Description</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAM,Stripe,andTargetTable.1'>PAM, Stripe, and Target Table</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAMMode.1'>PAM Mode</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExternalSignaling:.1'>External Signaling:</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserBits:(ExcludefromR1Documentation).1'>User Bits: (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CSRRegister:(ExcludefromR1Documentation).1'>CSR Register: (Exclude from R1 Documentation)</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionStriping.1'>Transaction Striping</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionBurstTypeandSplitting.1'>Transaction Burst Type and Splitting</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowTransactions.1'>Narrow Transactions</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Anarrowtransactioninthiscontextisdefinedwhentxn_hdr_burstSize(BurstWidth)issmallerthantxn_hdr_maxBurstSize(ChannelWidth)..1'>A narrow transaction in this context is defined when txn_hdr_burstSize (Burst Width) is smaller than txn_hdr_maxBurstSize (Channel Width).</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context.2'>Context</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ContextFields.1'>Context Fields</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestCounter.1'>Request Counter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SequenceNumber.1'>Sequence Number</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-LatencyMeasurement(StatsInterface).1'>Latency Measurement (Stats Interface)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-IDCompression.1'>ID Compression</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-InputQueues(ExcludefromR1Documentation).1'>Input Queues (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Arbiter(ExcludefromR1Documentation).1'>Arbiter (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionRequeuing(ExcludefromR1Documentation).1'>Transaction Requeuing (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoS(QoSChange).1'>QoS ( QoS Change )</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TrafficClassandInternalPriorityMapping.1'>Traffic Class and Internal Priority Mapping</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimitingandLatencyPressure.1'>Rate Limiting and Latency Pressure</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoStoPacketFieldMappings.1'>QoS to Packet Field Mappings</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ConfiguringQoS.1'>Configuring QoS</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimiterClockGate.1'>Rate Limiter Clock Gate</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager(ExcludefromR1Documentation).1'>Credit Manager (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReOrderBuffer.1'>Re Order Buffer</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BeatBuffer.1'>Beat Buffer</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Timing.1'>Timing</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ErrorGeneration.1'>Error Generation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseGeneration.1'>Response Generation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReadDataInterleaving.1'>Read Data Interleaving</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-EchoField(ExcludefromR1Documentation).1'>Echo Field (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserField.1'>User Field</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MismatchinTargetParameters.1'>Mismatch in Target Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerTarget.1'>Common Transaction Layer Target</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters.3'>Parameters</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers.3'>Registers</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagrams.1'>Top Level Diagrams</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FullTop-levelExample.1'>Full Top-level Example</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TypicalTop-levelExample.1'>Typical Top-level Example</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MinimumTop-levelExample.1'>Minimum Top-level Example</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.5'>Description</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BurstTranslation.1'>Burst Translation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-OutputQueues.1'>Output Queues</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestArbiter.1'>Request Arbiter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context.3'>Context</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager.1'>Credit Manager</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseQueues&amp;Arbiter.1'>Response Queues &amp; Arbiter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponsePath.1'>Response Path</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowPacking/Unpacking.1'>Narrow Packing/Unpacking</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExclusiveMonitor.1'>Exclusive Monitor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SharedSpecification.1'>Shared Specification</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PMAControl.1'>PMA Control</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FaultReporting.1'>Fault Reporting</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-DataProtection.1'>Data Protection</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixA.ExampleStripingTable.1'>Appendix A. Example Striping Table</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixB.CTLInitiatorContext/QueueFlow(Sketch)(InProgress).1'>Appendix B. CTL Initiator Context/Queue Flow (Sketch) (In Progress)</a></li>
</ul>
</div></p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description"><strong>Description</strong></h1><p>This page contains the microarchitectral specification of the Common Transaction Layer inside Symphony.</p><p>This layer can be implemented</p><ul><li>inside an ATU for Native to SMI/SMI to Native Conversion</li><li>NoC to NoC Communication</li><li>In bidirectional adapters to perform various functions on ATP links.</li></ul><p><br/></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="600" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-6-10%2016:45:40.png?api=v2"></span></p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Features"><strong>Features</strong></h1><p><strong>Initiator</strong></p><ul><li>Partial Address Map Lookup</li><li>Target/Route Lookup</li><li>Request Striping/Splitting</li><li>Request Accumulation (Partial Data Width Responses)</li><li>Request Context</li><li>Input Request Queues and Arbiter </li><li>Rate/Request Limiter</li><li>Credit Manager</li><li>Response Reorder Buffer</li></ul><p><strong>Target</strong></p><ul><li>Burst Translation</li><li>Transaction Address Alignment</li><li>Output Queues</li><li>Request Arbiter</li><li>Credit Manager</li><li>Response Queues and Arbiter</li><li>Narrow Packing and Unpacking</li><li>Exclusive Monitor</li></ul><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Interfaces"><strong>Interfaces</strong></h1><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168667/InterfacePROT" data-linked-resource-id="16168667" data-linked-resource-version="16" data-linked-resource-type="page">InterfacePROT</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164503/InterfacePMAControl" data-linked-resource-id="16164503" data-linked-resource-version="6" data-linked-resource-type="page">InterfacePMAControl</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a></p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReferenceSpecification"><strong>Reference Specification</strong></h1><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16166695/HW-SYM+Base+Packet+Parameters+Relationships" data-linked-resource-id="16166695" data-linked-resource-version="108" data-linked-resource-type="page">Base Packet Parameters &amp; Relationships<br /></a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169110/Symphony+Architecture+Spec" data-linked-resource-id="16169110" data-linked-resource-version="18" data-linked-resource-type="page">Symphony Architecture Spec</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157432/HW-SYM+Common+Layer+Protocol" data-linked-resource-id="16157432" data-linked-resource-version="84" data-linked-resource-type="page">HW-SYM Common Layer Protocol</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16171451/HW-SYM+Common+Layer+Transformations" data-linked-resource-id="16171451" data-linked-resource-version="65" data-linked-resource-type="page">HW-SYM Common Layer Transformations</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16172082/HW-SYM+VC+Microarchitecture+and+Restrictions" data-linked-resource-id="16172082" data-linked-resource-version="20" data-linked-resource-type="page">HW-SYM VC Microarchitecture and Restrictions</a></p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerInitiator"><strong><u>Common Transaction Layer Initiator</u></strong></h1><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters"><strong>Parameters</strong></h2><p>{</p><p>   <strong>// General </strong></p><p>    &quot;nodeId&quot; : 0 to inf, // integer</p><p>    &quot;defTId&quot; : 0 to inf, // integer</p><p>    &quot;maxPduSz&quot; :  0 to inf, // integer, Max payload in number of bytes. Must be power of two. 0 - Can Accept any Size</p><p>    &quot;maxOutRd&quot; :  0 to 512, // integer, Max amount of outstanding reads</p><p>    &quot;maxOutWr&quot; : 0 to  512, // integer, Max amount of outstanding writes</p><p>    &quot;maxOutTotal&quot; : 0 to  512 , // integer, Max amount of outstanding transactions</p><p>    &quot;enBufWrite&quot; : 0 or 1, // integer, enable buffered writes. 0 - disable, 1 - enabled</p><p>    &quot;enSplitting&quot; : 0 or 1, // enables and disables the splitting feature of the CTL initiator. 0 - disable, 1 - enabled</p><p>    *atomicsSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported </p><p>    &quot;fixedSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported </p><p>    &quot;incrSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;wrapSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;narrowSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;readInterleaveSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;widthAdaptionSupported&quot; : false or true, // false - width adaption not supported at initiator, true - width adaption supported at initiator</p><p>    &quot;idCompMask&quot; :  [ 0 or 1 , 0 or 1, ...], // Array with wId entries. Each entry indicates if that bit or original ordering id will be in the compressed ordering id. </p><p>  <strong> // Timing</strong><strong>  </strong></p><p>     &quot;pipeLevelRob&quot;: &lt;0,1,2&gt; ,  // Amount of Pipe Levels on the Rob Interfaces</p><p>     &quot;pipeLevelPam&quot;: &lt;0,1,...&gt; ,  // Amount of Pipe Levels on Specific Path</p><p>     &quot;ctlPipeReq&quot;: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>     &quot;ctlPipeResp&quot;: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>     &quot;ctlPipeCtxt&quot;: &lt;0,1,...&gt; ,  // Amount of Pipe Levels on Specific Path. </p><p>  <strong> // Reorder Buffer</strong></p><p>    &quot;useReorderBuffer&quot; : 0 or 1, // 1 - Implement a reorder buffer,, 0 - dont implement a reorder buffer.</p><p>    &quot;reorderBufferParams&quot; : {   </p><p>         &quot;nOutstandingReq&quot; : maxOutTotal, // Need to support the max amount of outstanding requests of the initiator</p><p>         &quot;nDataEntries&quot; : maxOutTotal * (maxPduSz / wData), // Each Entry needs to store a beat of data. </p><p>         &quot;orderMode&quot; : 0 or 1, // 1 - Reorder according to Common Layer Ordering Model, 0 - Reorder All</p><p>         &quot;nSource&quot; : 1, This RoB only has a single source. The ROB will still take into account multiple VCs coming in</p><p>         &quot;orderRd&quot; : 0 or 1, // 0 - Dont Order Reads, 1 - Order Reads</p><p>         &quot;orderWr&quot; : 0 or 1, // 0 - Dont Order Writes, 1 - Order Writes</p><p>         &quot;maxBurst&quot; : maxPduSz // Needs to be same as the maximum incoming transaction</p><p>   }    // Object Containing a subset of the parameters for the inserted reorder buffer. See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157530/HW-SYM+Reorder+Buffer+Microarchitecture+Specification" data-linked-resource-id="16157530" data-linked-resource-version="33" data-linked-resource-type="page">HW-SYM Reorder Buffer Microarchitecture Specification</a> for more information. </p><p>  <strong> // Queue and Arbiter</strong></p><p>    &quot;queueMap&quot; : [&quot;string&quot;, &quot;string&quot;, &quot;string&quot; , ...] // An array of strings which determine which queue a transaction will go to. These strings are verilog conditions involving pri, TC, targ_id, vc, and type. Logic will be constructed so the conditions are checked right to left (queue 0 to nQueue). The left most condition will be the default and the condition will be effectively ignored.  </p><p><s>    &quot;queuePriMap&quot; : [int, int, int, ...] // Array used to map a priority to a queue.   </s>   ( QoS Change )</p><p><s>    &quot;queueSecPriMap&quot; : [int, int, int, ...] // Array used to map a secondary priority to a queue.  </s>    ( QoS Change )</p><p>    &quot;vcMap&quot; : [int, int, ...], // Array of integers indicating which VC is assigned to each queue. Each entry in the array is assigned a queue</p><p>    &quot;qosMapMode&quot; : 0, 1, or 2 // 0 - None, 1 - Remap QoS, 2 - QoS Map per Queue</p><p>    &quot;ctlArbType&quot;: {</p><p>           master : &lt;&quot;arb_rr2&quot;,&quot;arb_wrr_rr1&quot;, ...&gt;</p><p>           vcs : [ &quot;string&quot;, &quot;string&quot; , ... ]  // Each String is an arb type</p><p>           } // The arbiter types of the master and VC arbs for the queues inside the Common Layer</p><p>     &quot;ctlArbWeights&quot;: {</p><p>           master : &lt;1,2,3, ...&gt;</p><p>           vcs : [int, int, , ... ]  // Each String is an arb type</p><p>           } // The arbiter weights of the master and VC arbs for the queues inside the Common Layer</p><p>     &quot;mstrArbLock&quot;: &lt;true or false&gt; , // Indicates whether the arbiters will lock on a VC. </p><p>     &quot;lckStyleVld&quot;: &lt;true or false&gt; ,  // Indicates whether the arbiters will lock on valid.</p><p> <strong>   // Rate Limiter</strong></p><p>    &quot;rateLmtEn&quot; : 0 or 1, // Enable Rate Limiting</p><p>    &quot;rateLmtUseExternalValues&quot; : 0 or 1, // Enable Configuration of Rate Limiting Values</p><p>    &quot;rateLmtRefCntGlobal&quot; : int, // Rate of refresh for the global buckets in clock cycles</p><p>    &quot;rateLmtRefCntQueue_p&quot; : [int, int, ...] , //  Rate of refresh for the queue primary  buckets in clock cycles</p><p>    &quot;rateLmtRefCntQueue_s&quot; : [int, int, ...] , //  Rate of refresh for the queue secondary buckets in clock cycles</p><p>    &quot;refreshAmtGlobal&quot; : int, // The amount of bytes added to the bucket each refresh cycle</p><p>    &quot;refreshAmtQueue_p&quot; : [int, int, ...] , //  The amount of bytes added to the primary  bucket each refresh cycle</p><p>    &quot;refreshAmtQueue_s&quot; : [int, int, ...] , //  The amount of bytes added to the secondary  bucket each refresh cycle</p><p>    &quot;rateLmtBktGlobal&quot; : int, //  The total size of the global bucket</p><p>    &quot;rateLmtBktQueue_p&quot; :  [int, int, ...]  // The total size of the queue primary buckets (0 == Disabled, No Limiting)</p><p>    &quot;rateLmtBktQueue_s&quot; :  [int, int, ...]  // The total size of the queue  secondary buckets (0 == Disabled, No Limiting<u>)</u></p><p><strong>    // Credit Manager</strong></p><p>    &quot;crdMngrEn&quot; : 0 or 1, // Enable Credit management.</p><p>    &quot;wCrdMngrReqCnt&quot; : [int, int, ...], // Array of integers indicating the request dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>    &quot;wCrdMngrDataCnt&quot; :  [int, int, ...], // Array of integers indicating the data dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>    &quot;crdDataUnit&quot; : 1 to inf, // Data Credit Units, Has to be power of 2</p><p>    &quot;wCrdMngrType&quot;  :  [int, int, ...],// Credit Message Type 0 - Shared or 1 Dedicated</p><p>    <strong>// PAM and Striping Tables</strong></p><p>    &quot;modeUserBits&quot;: &quot;string&quot;, //  User bits that select mode. </p><p>     // All arrays below with the &quot;pam&quot; prefix must be the same length</p><p>    &quot;pamMode&quot; : [int, int, ...] , // array of integers representing the PAM mode the entry is attached to </p><p>    &quot;pamBaseAddr&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the base address of each entry. &quot;16'hF000&quot; would be an example of an entry in the array.</p><p>    &quot;pamBaseMask&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the size of the entry in mask form.  &quot;16'hF000&quot; would be an example of an entry in the array.</p><p>    &quot;pamSz&quot; : [int, int, ..] , // array of integers representing the size of the space represented by the entry in the PAM</p><p>    &quot;pamTargId&quot; : [int, int, ..] , // array of integers representing the target id of each entry</p><p>    &quot;pamMapBase&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the mapped base address of each entry.  &quot;16'hF000&quot; would be an example of an entry in the array.</p><p>    &quot;pamRoute&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the route to be inserted.  &quot;8'h2A&quot; would be an example of an entry in the array.</p><p>    &quot;pamRW&quot; : [int,int, ... ], // Array of integers representing the capabilities of the target. 0 - Reads and Writes, 1 - Reads Only, 2 - Writes Only </p><p>    &quot;pamStrp&quot;: [int, int, ...], // Array of integers representing if the target is a stripe group. 0 - Not Striped, 1 - Striped</p><p>    &quot;pamStrpGrpNum&quot; :  [int, int, ...], // Array of integers representing the stripe group of the target</p><p>    &quot;pamTargWidth&quot;:  [int, int int, ...] , // Array of target widths. This is used to know whether the target is narrower for splitting fixed transactions.</p><p>    &quot;pamTargMaxBurst&quot; :  [int, int, ...], // Array of integers representing the max burst. 0 - Target can support any burst length. No splitting will be done based on this field. </p><p>    &quot;pamTargSplitWrap&quot; : [int, int, ...],  // Array of integers representing if wraps are supported at the target. 0 - Supported, 1 - Not Supported (Enable the Wrap Split)</p><p>    &quot;pamTargReadInterleave&quot; : [bool, bool, ...],  // Array of integers representing if the target will interleave read responses. 0 - Will not, 1 - Will</p><p>    &quot;pamTargFixedSupported&quot; : [bool, bool, ...],  // Array of booleans representing if the target will support fixed transactions. </p><p>    &quot;pamTargIncrSupported&quot; : [int, int, ...],  // Array of integers representing if the target will support Incr transactions. </p><p>    &quot;pamTargBoundary&quot; :  [int, int, ...], // Array of integers representing the boundary limits of the target. 0 - Target can support any boundary crossing. No splitting will be done based on this field. </p><p>    &quot;pamTargDomain&quot; : [</p><p>                                  { hash : [int, int, ... ] },</p><p>                                   ....</p><p>                              ], // Array of objects which contain an array of integers. The array of integers represents what bits of domainInt to use from LSB to MSB indicating what domains are crossed to get to a target. All targets in a striping group will share an entry. </p><p>   *&quot;pamMulti&quot;: [bool, bool, bool, ...], // Bool of whether this address space is to a multcast block</p><p>   *&quot;pamMultiLabel&quot;: [int,int,int, ...], // The multicast label to be inserted</p><p>   *&quot;pamMultiUser&quot;: [bool, bool, bool, ...], // Indicates if the label has to come from user bits</p><p>   *&quot;pamMultiLabelUserBits&quot;: [&quot;string&quot;,...] // The bits of user to map to label (eg [3:1])</p><p>   *&quot;pamMultiMaskUserBits&quot;: [&quot;string&quot;,...], // The bits of user to map to mask (eg [3:1])</p><p>     // All arrays below with the &quot;strp&quot; prefix must be the same length</p><p>    &quot;nStrpTarg&quot; :  [int, int, ...],  // Array of integers representing the number of targets in a stripe group</p><p>    &quot;strpFunc&quot; : [int, int, ...],  // Array of integers representing the striping function of the stripe group</p><p>    &quot;strpFuncHash&quot; [</p><p>                                  { hash : [int, int, ... ] },</p><p>                                   ....</p><p>                              ], // Array of objects which contain an array of integers. The array of integers represents what bits of address to use from LSB to MSB. Each entry represents a hash for an individual stripe group. </p><p>    &quot;strpSz&quot; : [int, int, ...],  // Array of integers representing the size of each stripe in the striping group</p><p>    &quot;strpMap&quot; :  [int, int, ...],  // Array of integers representing the address mapping function of the stripe group. (0 - None, 1 - Shift right to stripe bits. 2 - Move MSB to stripe bits)</p><p>     // All arrays below with the &quot;strpstrpGrb&quot; prefix are per stripe group and must be the same length</p><p>    &quot;strpGrpbTables&quot; :  [   // Array of objects that represent a Group of Targets in a stripe group</p><p>        { </p><p>        &quot;strpGrpTargID&quot; :  [int, int, ...],  // Array of integers representing the target ID of each target in a stripe group</p><p>        &quot;strpGrpMapBase&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the mapped base address of each entry.  &quot;16'hF000&quot; would be an example of an entry in the array.</p><p>        &quot;strpGrpRoute&quot;  : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the route to be inserted.  &quot;8'h2A&quot; would be an example of an entry in the array.</p><p>       }, ...</p><p>   ],</p><p>   MemoryGeneration: [</p><p>     {</p><p>          &quot;rtlPrefixString&quot;: &quot;a_string&quot;, // deprecated, must match corresponding generic interface name. </p><p>          &quot;interfaceObjType: &quot;a_string&quot; // Used to match memory to genericInterface (rob0, rob1, ...), (Only &quot;rob0&quot; supported)</p><p>          &quot;nMemDataRatio&quot; : integer, // Ratio of data widths between the external and internal memory</p><p>          &quot;fnMemLatency&quot; : integer, // latency of the connected memory.</p><p>          &quot;fnMemCycle&quot; : integer, // Clock cycles required for memory to complete operation</p><p>          &quot;fnMemPorts&quot; :  integer, // Is fixed to 1 for R1</p><p>          &quot;fnMemType&quot; : &quot;a_string&quot;, // Flops, SRAM, or CLOG SRAM</p><p>          &quot;useMemWrBitEn&quot; : boolean, // Is fixed to true for R1</p><p>          &quot;useMemExternal&quot; : boolean// Is fixed to false for R1</p><p>       }</p><p>]</p><p><strong>   // Interface Parameters</strong></p><p>    &quot;interfaces&quot; :{</p><p>           &quot;clkInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168894/InterfaceCLK" data-linked-resource-id="16168894" data-linked-resource-version="5" data-linked-resource-type="page">InterfaceCLK</a>&quot;},</p><p>           &quot;smiReqInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;SMI Interface Def File&gt; }, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a>&quot;},</p><p>           &quot;smiRespInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;SMI Interface Def File&gt;}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a>&quot;},</p><p>           &quot;ctlReqInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;CTL Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a>&quot;},</p><p>           &quot;ctlRespInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;CTL Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a>&quot;},</p><p>           &quot;pmaInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164503/InterfacePMAControl" data-linked-resource-id="16164503" data-linked-resource-version="6" data-linked-resource-type="page">InterfacePMAControl</a>&quot;},</p><p>           &quot;statsInt&quot; :   [ { name: &quot;a_string&quot;,  params: { &quot;width&quot;: 1 },  direction: &quot;master&quot;,  interface: &quot;<a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceEvt" rel="nofollow" style="text-decoration: none;">InterfaceEvt</a>&quot;  },  { },   . . . ] , An array of interfaces of type<span> </span><a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceEvt" rel="nofollow" style="text-decoration: none;">InterfaceEvt</a>. The length of the array = 2*maxOutTotal.</p><p>           &quot;feedbackInt&quot; :   [ { name: &quot;a_string&quot;,  params: { &quot;width&quot;: 1 },  direction: &quot;slave&quot;,  interface: &quot;<a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceEvt" rel="nofollow" style="text-decoration: none;">InterfaceEvt</a>&quot;  } ] , An array of a single interface of type<span> </span><a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceEvt" rel="nofollow" style="text-decoration: none;">InterfaceEvt</a>. The length of the array = 1. This will hold the latency feedback</p><p>           &quot;modeInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot; <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a>&quot;, ... TODO},</p><p>           &quot;domainInt&quot;: [{ &quot;name&quot; : &quot;domain_0_&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot; <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a>&quot;, ... TODO}, ... ] // Array of generic interfaces with each one carrying a signal indicating a domain is active</p><p>           &quot;apbInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot; <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168579/InterfaceAPB" data-linked-resource-id="16168579" data-linked-resource-version="2" data-linked-resource-type="page">InterfaceAPB</a>&quot;, ... TODO},</p><p>           &quot;intInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {width : 7}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16160508/InterfaceINT" data-linked-resource-id="16160508" data-linked-resource-version="3" data-linked-resource-type="page">InterfaceINT</a>&quot;}, // Interrupt interface driven with CTL Layer interrupts</p><p>           &quot;protInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &lt; See InterfacePROT Params&gt; }, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168667/InterfacePROT" data-linked-resource-id="16168667" data-linked-resource-version="16" data-linked-resource-type="page">InterfacePROT</a>&quot;},</p><p>           &quot;genericIoMem&quot; : [ {name: &quot;a_string&quot;, params: {interface parameters}, interfaceObjType: &quot;a_string&quot;, direction: &quot;slave&quot;, _SKIP_: boolean , interface: &quot;InterfaceGeneric&quot; } ]</p><p>    },</p><p><strong>   // Protection, Error,  and Power Control Parameters </strong></p><p>    &quot;timeoutErrChk&quot; : 0 or 1, // integer, enable timeout check</p><p>    &quot;timeoutErrCount&quot; : 0 to inf, // if 0 it is configured from registers</p><p>    &quot;timeoutUseExternalValue&quot; : 0 or 1, // 0 use timeoutErrCount, 1 use a configurable value</p><p>    &quot;ctlProtectionScheme&quot; :&quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16170235/protectionScheme" data-linked-resource-id="16170235" data-linked-resource-version="9" data-linked-resource-type="page">protectionScheme</a> // This defines how dad will be checked and dp_prot generated. See more detail in common error section.</p><p>    &quot;stateProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;registerProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;memoryProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;csr&quot; : &quot;&quot; or Register Definition Object</p><p>}</p><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers"><strong>Registers</strong></h2><p><strong><br/></strong></p><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 52.5781%;"><colgroup><col style="width: 6.30402%;"/></colgroup><colgroup><col style="width: 9.20183%;"/></colgroup><colgroup><col style="width: 5.94814%;"/></colgroup><colgroup><col style="width: 10.7778%;"/></colgroup><colgroup><col style="width: 4.37214%;"/></colgroup><colgroup><col style="width: 10.3203%;"/></colgroup><colgroup><col style="width: 17.6919%;"/></colgroup><colgroup><col style="width: 17.6919%;"/></colgroup><colgroup><col style="width: 17.6919%;"/></colgroup><tbody><tr><th style="width: 103.0px;" class="confluenceTh">Register</th><th style="width: 160.0px;" class="confluenceTh">Address (Temporary)</th><th style="width: 96.0px;" class="confluenceTh">Field Name</th><th style="width: 191.0px;" class="confluenceTh">Field Bits</th><th style="width: 65.0px;" class="confluenceTh">Access</th><th style="width: 182.0px;" class="confluenceTh">Reset Value</th><th style="width: 327.0px;" class="confluenceTh">Description</th><th style="width: 79.0px;" class="confluenceTh">Optional</th><th style="width: 175.0px;" class="confluenceTh">Controlling Parameter</th></tr><tr><td colspan="9" style="width: 1378.0px;" class="confluenceTd"><em><strong>Common Layer Control Registers</strong></em></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLCR</td><td style="width: 160.0px;" class="confluenceTd">0x0</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">BUSY</td><td style="width: 191.0px;" class="confluenceTd">0</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Busy Indicator for the CTL Initiator</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">MODE</td><td style="width: 191.0px;" class="confluenceTd">MODE_WIDTH:1</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">The mode to be used for PAM Table Comparisons</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLTCR</td><td style="width: 160.0px;" class="confluenceTd">0x1</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td rowspan="2" style="text-align: center;width: 79.0px;" class="confluenceTd">X</td><td rowspan="2" style="width: 175.0px;" class="confluenceTd">timeoutUseExternalValue</td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">COUNT</td><td style="width: 191.0px;" class="confluenceTd">0:31</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Timeout Count (Clock Cycles) (0 == disabled)</td></tr><tr><td colspan="9" style="width: 1378.0px;" class="confluenceTd"><strong><em>Statistics Control Registers</em></strong></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLSCR</td><td style="width: 160.0px;" class="confluenceTd">0x4</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td rowspan="5" style="width: 79.0px;text-align: center;" class="confluenceTd">X</td><td rowspan="5" style="width: 175.0px;" class="confluenceTd"><span>interfaces.statsInt != null</span></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">E</td><td style="width: 191.0px;" class="confluenceTd">0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Enable Statistics</td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TMASK</td><td style="width: 191.0px;" class="confluenceTd">1</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Enable Target Mask</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLSTR</td><td style="width: 160.0px;" class="confluenceTd">0x5</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TARG</td><td style="width: 191.0px;" class="confluenceTd">X:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Target ID to collect statistics on</td></tr><tr><td colspan="9" style="width: 1378.0px;" class="confluenceTd"><strong><em>Error Registers</em></strong></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLTIR</td><td style="width: 160.0px;" class="confluenceTd">0x40</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Timeout Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Timeout Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TID</td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH+1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Timeout Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLBWIR</td><td style="width: 160.0px;" class="confluenceTd">0x41</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Buffered Write Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Buffered Write Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>TID</span></td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Buffered Write Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRWIR</td><td style="width: 160.0px;" class="confluenceTd">0x42</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">R/W Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">R/W Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>TID</span></td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">R/W Error Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLDIR</td><td style="width: 160.0px;" class="confluenceTd">0x43</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Decode Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd"> 1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Decode Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>TID</span></td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Decode Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLTEIR</td><td style="width: 160.0px;" class="confluenceTd">0x44</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Transport Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Transport Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>TID</span></td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Transport Error Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLEEIR</td><td style="width: 160.0px;" class="confluenceTd">0x45</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Exclusive Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Exclusive Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TID</td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Exclusive Error Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLPD</td><td style="width: 160.0px;" class="confluenceTd">0x46</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Power Domain Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Power Domain Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TID</td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Power Domain Error Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="9" style="width: 1378.0px;" class="confluenceTd"><em><strong>QoS Registers ( QoS Change ) </strong></em></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQC</td><td style="width: 160.0px;" class="confluenceTd">0x80</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">E</td><td style="width: 191.0px;" class="confluenceTd">0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Rate Limiter Enable</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd"> rateLmtEn == True</td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">R</td><td style="width: 191.0px;" class="confluenceTd">1</td><td style="width: 65.0px;" class="confluenceTd">w1c</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Rate Limiter Refresh </td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd"> rateLmtEn == True</td></tr><tr><td colspan="1" class="confluenceTd">CTLQR</td><td colspan="1" class="confluenceTd">0x81</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td style="text-align: center;" class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">RSVD</td><td colspan="1" class="confluenceTd">7:0</td><td colspan="1" class="confluenceTd">RSVD</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">RSVD</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">CYCLES</td><td colspan="1" class="confluenceTd">31:8</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Refresh Cycles [31:8] </td><td style="text-align: center;" class="confluenceTd">X</td><td class="confluenceTd"> rateLmtEn == True</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQM0</td><td style="width: 160.0px;" class="confluenceTd">0x82</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q0P</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x15</td><td style="width: 327.0px;" class="confluenceTd">QoS 0 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q0IQ</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x0</td><td style="width: 327.0px;" class="confluenceTd">QoS 0 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q1P</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x14</td><td style="width: 327.0px;" class="confluenceTd">QoS 1 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q1IQ</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x1</td><td style="width: 327.0px;" class="confluenceTd">QoS 1 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q2P</td><td style="width: 191.0px;" class="confluenceTd">19:16</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x13</td><td style="width: 327.0px;" class="confluenceTd">QoS 2 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q2IQ</td><td style="width: 191.0px;" class="confluenceTd">23:20</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x2</td><td style="width: 327.0px;" class="confluenceTd">QoS 2 <span class="inline-comment-marker" data-ref="c2e7bed0-31d8-454b-a1b1-0c8451f9a44e">Internal</span> QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q3P</td><td style="width: 191.0px;" class="confluenceTd">27:24</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x12</td><td style="width: 327.0px;" class="confluenceTd">QoS 3 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q3IQ</td><td style="width: 191.0px;" class="confluenceTd">31:28</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x3</td><td style="width: 327.0px;" class="confluenceTd">QoS 3 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQM1</td><td style="width: 160.0px;" class="confluenceTd">0x83</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q4P</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x11</td><td style="width: 327.0px;" class="confluenceTd">QoS 4 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q4IQ</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x4</td><td style="width: 327.0px;" class="confluenceTd">QoS 4 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q5P</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x10</td><td style="width: 327.0px;" class="confluenceTd">QoS 5 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q5IQ</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x5</td><td style="width: 327.0px;" class="confluenceTd">QoS 5 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q6P</td><td style="width: 191.0px;" class="confluenceTd">19:16</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x9</td><td style="width: 327.0px;" class="confluenceTd">QoS 6 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q6IQ</td><td style="width: 191.0px;" class="confluenceTd">23:20</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x6</td><td style="width: 327.0px;" class="confluenceTd">QoS 6 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q7P</td><td style="width: 191.0px;" class="confluenceTd">27:24</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x8</td><td style="width: 327.0px;" class="confluenceTd">QoS 7 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q7IQ</td><td style="width: 191.0px;" class="confluenceTd">31:28</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x7</td><td style="width: 327.0px;" class="confluenceTd">QoS 7 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQM2</td><td style="width: 160.0px;" class="confluenceTd">0x84</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q8P</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x7</td><td style="width: 327.0px;" class="confluenceTd">QoS 8 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q8IQ</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x8</td><td style="width: 327.0px;" class="confluenceTd">QoS 8 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q9P</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x6</td><td style="width: 327.0px;" class="confluenceTd">QoS 9 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q9IQ</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x9</td><td style="width: 327.0px;" class="confluenceTd">QoS 9 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q10P</td><td style="width: 191.0px;" class="confluenceTd">19:16</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x5</td><td style="width: 327.0px;" class="confluenceTd">QoS 10 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q10IQ</td><td style="width: 191.0px;" class="confluenceTd">23:20</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x10</td><td style="width: 327.0px;" class="confluenceTd">QoS 10 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q11P</td><td style="width: 191.0px;" class="confluenceTd">27:24</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x4</td><td style="width: 327.0px;" class="confluenceTd">QoS 11 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q11IQ</td><td style="width: 191.0px;" class="confluenceTd">31:28</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x11</td><td style="width: 327.0px;" class="confluenceTd">QoS 11 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQM3</td><td style="width: 160.0px;" class="confluenceTd">0x85</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q12P</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x3</td><td style="width: 327.0px;" class="confluenceTd">QoS 12 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q12IQ</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x12</td><td style="width: 327.0px;" class="confluenceTd">QoS 12 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q13P</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x2</td><td style="width: 327.0px;" class="confluenceTd">QoS 13 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q13IQ</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x13</td><td style="width: 327.0px;" class="confluenceTd">QoS 13 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q14P</td><td style="width: 191.0px;" class="confluenceTd">19:16</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x1</td><td style="width: 327.0px;" class="confluenceTd">QoS 14 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q14IQ</td><td style="width: 191.0px;" class="confluenceTd">23:20</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x14</td><td style="width: 327.0px;" class="confluenceTd">QoS 14 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q15P</td><td style="width: 191.0px;" class="confluenceTd">27:24</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x0</td><td style="width: 327.0px;" class="confluenceTd">QoS 15 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q15IQ</td><td style="width: 191.0px;" class="confluenceTd">31:28</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x15</td><td style="width: 327.0px;" class="confluenceTd">QoS 15 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQLX</td><td style="width: 160.0px;" class="confluenceTd">0x90+X</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd">(X == Queue #)</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QSI</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">QoS Step Increase</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QSD</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">QoS Step Decrease</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QM</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span class="inline-comment-marker" data-ref="c2ad44c1-8f22-4ad0-b17b-d72bcdf36878">15</span></td><td style="width: 327.0px;" class="confluenceTd">QoS Max</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QN</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">QoS Min</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLGC</td><td style="width: 160.0px;" class="confluenceTd">0xB0</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">GBRC</td><td style="width: 191.0px;" class="confluenceTd"><span>wR</span>ateLmtRefCntGlobal-1:0<span> </span></td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>rateLmtRefCntGlobal</span></td><td style="width: 327.0px;" class="confluenceTd">Global Bucket Reference Count</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd"> rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLGRA</td><td style="width: 160.0px;" class="confluenceTd">0xB1</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">GBRA</td><td style="width: 191.0px;" class="confluenceTd"><span>wR</span>efreshAmtGlobal-1:0<span> </span></td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>refreshAmtGlobal</span></td><td style="width: 327.0px;" class="confluenceTd">Global Refresh Amount</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLGBS</td><td style="width: 160.0px;" class="confluenceTd">0xB2</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">GBS</td><td style="width: 191.0px;" class="confluenceTd">wRateLmtBktGlobal-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">rateLmtBktGlobal</td><td style="width: 327.0px;" class="confluenceTd">Global Bucket Size</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQCPX</td><td style="width: 160.0px;" class="confluenceTd">0xB3 + X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QBRCP</td><td style="width: 191.0px;" class="confluenceTd">wRateLmtRefCntQueue-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">rateLmtRefCntQueue_p<u><span>[</span></u>X<u><span>]</span></u></td><td style="width: 327.0px;" class="confluenceTd">Primary Queue Bucket Reference Count</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQCSX</td><td style="width: 160.0px;" class="confluenceTd">0xB4 + X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>QBRCS</span></td><td style="width: 191.0px;" class="confluenceTd">wRateLmtRefCntQueue-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>rateLmtRefCntQueue_s<u>[</u><span>X</span><u>]</u></span></td><td style="width: 327.0px;" class="confluenceTd">Secondary Queue Bucket Reference Count</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQRAPX</td><td style="width: 160.0px;" class="confluenceTd">0xB5+ X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QBRAP</td><td style="width: 191.0px;" class="confluenceTd"><span>wR</span>efreshAmtQueue-1:0<span> </span></td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">refreshAmtQueue_p<u><span>[</span></u>X<u><span>]</span></u></td><td style="width: 327.0px;" class="confluenceTd">Primary Queue Refresh Amount</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQRASX</td><td style="width: 160.0px;" class="confluenceTd">0xB6+ X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>QBRAS</span></td><td style="width: 191.0px;" class="confluenceTd">wRefreshAmtQueue-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>refreshAmtQueue_s<u>[</u><span>X</span><u>]</u></span></td><td style="width: 327.0px;" class="confluenceTd">Secondary Queue Refresh Amount</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQBSPX</td><td style="width: 160.0px;" class="confluenceTd">0xB7 + X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QBSP</td><td style="width: 191.0px;" class="confluenceTd">wRateLmtBktQueue-1:0<span> </span></td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">rateLmtBktQueue_p[X]</td><td style="width: 327.0px;" class="confluenceTd">Primary Queue Bucket Size</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQBSSX</td><td style="width: 160.0px;" class="confluenceTd">0xB8 + X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>QBSS</span></td><td style="width: 191.0px;" class="confluenceTd">wRateLmtBktQueue-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>rateLmtBktQueue_s[X]</span></td><td style="width: 327.0px;" class="confluenceTd">Secondary Queue Bucket Size</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr></tbody></table></div><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagram"><strong><br/>Top Level Diagram</strong></h2><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1600" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2020-9-24_14-8-54.png?api=v2"></span></p><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.1"><strong>Description</strong></h2><div class="page view"><div class="wiki-content"><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAM,Stripe,andTargetTable"><strong>PAM, Stripe, and Target Table</strong></h3><p>The PAM table is generated by the SW based on the user configuration of the system address map (SAM) and configuration of the CTL targets. The generated values are hard wired values. For past P0 configurations which use a register based PAM (all or partial) these values will be ignored for the register based values. The default values for the registers will be put into the CSR object. </p><p>A PAM match is determined by this equation. The first entry that matches will be considered the only match. The mode will also have to match if defined. More info in PAM Mode section. </p><p>Match = ((Base Address) == (In Address &amp; ({wAddr{1'b1}} &lt;&lt; log2(Size))) </p><p>If no entry is matched and enDecodeError is true a decode error will occur , otherwise it will match the default entry which is the first entry in the table.</p><p>The PAM Table consists of:</p><ul><li><strong>Mode</strong>: The mode the entry is associated with. The mode will either be defined through select inputs to the CTL block or through user defined bits. </li><li><strong>Base Address</strong>: The base address of the region defined by an entry. This must be aligned to the size of the region.<ul><li>When Mapped Base Address is undefined, transaction address = (addr - base_address)</li></ul></li><li><strong>Size</strong>: The size of the region defined by an entry. Size must be a power of two.</li><li><strong>Target ID</strong>: The target associated with an entry. This will populate the targ_id of the SMI message.</li><li><strong>Mapped Base Address</strong>: The base address mapped to the specific target.<ul><li>If this is defined, transaction address =  Mapped Base Address + (addr - base_address)</li></ul></li><li><strong>Route</strong>: The route associated with the entry. This will populate the route field of the SMI message. This can either be fixed (Review: P0) or configurable through registers.</li><li><strong>RW</strong>: Indication if a target can support: R - Read Only, W - Write Only, RW - Reads and Writes</li><li><strong>Striped</strong>: Indication if this address region is stripped. 0 - Is not stripped, 1 - is stripped</li><li><strong>Stripe Group</strong>: Indicates which stripe group a address region is associated with if it is striped.</li><li><strong>Read Interleave</strong>: Indication if the target associated with the address region supports read interleaving. 0 - does not support, 1 - does support,<ul><li>If a region supports interleaving and the CTL initiator does not, ID interlock must be used.</li></ul></li><li><strong>Max Burst</strong>: The max burst the target can support. Transaction splitting according to burst type is defined below.</li><li><strong>Split Wrap</strong>: Indication if a target supports wraps. 0 - Supports, 1 - Does not support. Wrap splitting is defined below.</li><li><strong>Fixed Supported</strong>: Indication if a target supports fixed. 0 - Supports, 1 - Does not support. Fixed splitting is defined below.</li><li><strong>Incr Supported</strong>: Indication if a target supports incrs. 0 - Supports, 1 - Does not support. Incr splitting is defined below.</li><li><strong>Boundary</strong> (Review: Need for P0?) : Indication if a transaction needs to be split to not cross a specific address boundary. Must be power of 2. Max burst should be smaller than this number. 0 - Disabled, Any Other Number - Boundary to Split on </li></ul><p><strong>PAM Table</strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">Field</th><th colspan="1" class="confluenceTh">Mode</th><th class="confluenceTh">Base Address</th><th class="confluenceTh">Size (Power of Two)</th><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th colspan="1" class="confluenceTh">Route (Optional)</th><th colspan="1" class="confluenceTh">RW (Optional)</th><th colspan="1" class="confluenceTh">Striped (Optional)</th><th colspan="1" class="confluenceTh">Stripe Group (Optional)</th><th colspan="1" class="confluenceTh">Read Interleave</th><th colspan="1" class="confluenceTh">Max Burst (Optional)</th><th colspan="1" class="confluenceTh">Split Wrap (Optional)</th><th colspan="1" class="confluenceTh">Fixed Supported</th><th colspan="1" class="confluenceTh">Incr Supported</th><th colspan="1" class="confluenceTh">Boundary (optional)</th></tr><tr><td colspan="1" class="confluenceTd">Type</td><td colspan="1" class="confluenceTd">int</td><td class="confluenceTd">string</td><td class="confluenceTd">string</td><td class="confluenceTd">int</td><td class="confluenceTd">string</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">bool</td><td colspan="1" class="confluenceTd">bool</td><td colspan="1" class="confluenceTd">int</td></tr></tbody></table></div><p><strong><br/></strong></p><p><strong>Example PAM Table</strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">Mode</th><th class="confluenceTh">Base Address</th><th class="confluenceTh">Size (Power of Two)</th><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th colspan="1" class="confluenceTh">Route (Optional)</th><th colspan="1" class="confluenceTh">RW (Optional)</th><th colspan="1" class="confluenceTh">Read Interleave</th><th colspan="1" class="confluenceTh">Max Burst (Optional)</th><th colspan="1" class="confluenceTh">Split Wrap (Optional)</th><th colspan="1" class="confluenceTh">Fixed Supported</th><th colspan="1" class="confluenceTh">Incr Supported</th><th colspan="1" class="confluenceTh">Boundary (Optional)</th><th colspan="1" class="confluenceTh">Striped (Optional)</th><th colspan="1" class="confluenceTh">Stripe Group (Optional)</th></tr><tr><td colspan="1" class="confluenceTd">0</td><td class="confluenceTd">&quot;32'h0000_8000&quot;</td><td class="confluenceTd">&quot;32'h0000_4000&quot;</td><td class="confluenceTd">0</td><td class="confluenceTd"><span>&quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd">&quot;12'h001&quot;</td><td colspan="1" class="confluenceTd">&quot;RW&quot;</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1028</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">1024</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td class="confluenceTd">1</td><td class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h021&quot;</span></td><td colspan="1" class="confluenceTd">&quot;R&quot;</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">512</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">4096</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td class="confluenceTd"><span>&quot;32'h0002_0000&quot;</span></td><td class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td class="confluenceTd">2</td><td class="confluenceTd"><span>&quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h301&quot;</span></td><td colspan="1" class="confluenceTd">&quot;W&quot;</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd"><span>&quot;32'h0003_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h401&quot;</span></td><td colspan="1" class="confluenceTd">&quot;RW&quot;</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">2048</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><span>&quot;32'h4000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;32'h4000_4000&quot;</span></td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd"><span>&quot;RW&quot;</span></td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><span>2048</span></td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd"><span>&quot;32'h8000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;32'h4000_4000&quot;</span></td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd"><span>&quot;RW&quot;</span></td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><span>512</span></td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td></tr><tr><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd"><span>&quot;32'hc000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;32'h4000_4000&quot;</span></td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd"><span>&quot;RW&quot;</span></td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd"><span>512</span></td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">2</td></tr></tbody></table></div><p><br/></p><p><strong>Power Domain Fencing</strong></p><p>The Power Domain Fencing portion of the PAM Table consists of:</p><ul><li><strong>pamTargDomain</strong>: Each entry contains an object, in which contains an array of integers. Each integer indicates what domains a tranmsaction will pass through on the way to a target. If any of these domains is off according to domainInt the transaction will be terminated and an error response will be made.<br/><br/></li></ul><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh"><strong>pamTargDomain</strong></th></tr><tr><td colspan="1" class="confluenceTd"><span>object</span></td></tr></tbody></table></div><p><br/>Example:</p><p><strong>Example PAM Table</strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th colspan="1" class="confluenceTh"><strong>pamTargDomain</strong></th><th colspan="1" class="confluenceTh">Domain Error Condition</th><th colspan="1" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><p>{</p><p>   hash : [0, 4, 8]</p><p>}</p></td><td colspan="1" class="confluenceTd">~( \=domainInt[0].name=\in &amp;  \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[4].name</a>=\in &amp;  \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[8].name</a>=\in)</td><td colspan="1" class="confluenceTd">Indicates that a transaction to this PAM entry will travel through domains 0,4, and 8</td></tr><tr><td class="confluenceTd">1</td><td colspan="1" class="confluenceTd"><p>{</p><p>   hash : [0, 1, 2]</p><p>}</p></td><td colspan="1" class="confluenceTd">~( \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[0].name</a>=\in &amp;  \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[1].name</a>=\in &amp;  \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[2].name</a>=\in)</td><td colspan="1" class="confluenceTd">Indicates that a transaction to this PAM entry will travel through domains 0,1, and 2</td></tr><tr><td class="confluenceTd">2</td><td colspan="1" class="confluenceTd"><p>{</p><p>   hash : [0, 1, 2, 3 ,4 ,5]</p><p>}</p></td><td colspan="1" class="confluenceTd">~( &amp;(\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[5].name</a>=\in, \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[4].name</a>=\in,\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[3].name</a>=\in,\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[2].name</a>=\in,\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[1].name</a>=\in,\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[0].name</a>=\in))</td><td colspan="1" class="confluenceTd">Indicates that a transaction to this PAM entry will travel through domains 0, 1, 2, 3, 4, </td></tr></tbody></table></div><p><br/></p><p><strong>Multicast (Part of PAM Table) (Exclude from R1 Documentation)</strong></p><p>The Multicast portion of the PAM Table consists of:</p><ul><li><strong>Multicast Entry</strong>: Indicates that this entry is a Multicast entry in the PAM. This means the route assigned to this entry will go to a specific multicast block.</li><li><strong>Multicast User: </strong>Indicates that this entry gets the label from the User field. The label indicates which Multicast tree the transaction will go to.</li><li><strong>Multicast Label</strong>: If the label does not come from the User bits, it will come from this PAM entry.</li><li><strong><strong>Multicast  </strong>Label User Bits: </strong>Indicates which bits of User are used for the Label. Only one is used per block. This is not per entry.</li><li><strong>Multi<strong>cast  </strong>Mask User Bits: </strong>Indicates which bits of User are used for the Mask. The mask indicates which targets in a tree the multicast packet will go to. Only one is used per block. This is not per entry.<br/><br/></li></ul><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">pamMulti</th><th colspan="1" class="confluenceTh">pamMultiLabel</th><th class="confluenceTh">pamMultiUser</th><th class="confluenceTh">pamMultiLabelUserBits</th><th colspan="1" class="confluenceTh">pamMultiMaskUserBits</th></tr><tr><td colspan="1" class="confluenceTd"><span style="white-space: normal;">bool</span></td><td colspan="1" class="confluenceTd">int</td><td class="confluenceTd">bool</td><td class="confluenceTd">string</td><td colspan="1" class="confluenceTd">string</td></tr></tbody></table></div><p><br/>Example:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">pamMulti</th><th colspan="1" class="confluenceTh">pamMultiLabel</th><th class="confluenceTh">pamMultiUser</th><th class="confluenceTh">pamMultiLabelUserBits</th><th colspan="1" class="confluenceTh">pamMultiMaskUserBits</th><th colspan="1" class="confluenceTh">Description</th></tr><tr><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">X</td><td class="confluenceTd">X</td><td rowspan="3" class="confluenceTd">&quot;[1:0]&quot;</td><td rowspan="3" class="confluenceTd">&quot;[3:2]&quot;</td><td colspan="1" class="confluenceTd">Not a multicast entry.</td></tr><tr><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">Multicast entry that gets the label from user bits [1:0] and mask from [3:2]</td></tr><tr><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Multicast entry that gets the label from the PAM (forced to 1) and mask from user bits [3:2]</td></tr></tbody></table></div><p><br/></p><p><strong>Stripe Group Table</strong></p><div>The Stripe Group Table consists of:</div><ul><li><strong>Stripe Group</strong>: The group id of the entry.</li><li><strong>Stripe Target Count</strong>: The amount of targets inside the striping group.<ul><li>Review: Need some limits. Multiple of 2,3,4,5 and non prime numbers above that.</li></ul></li><li><strong>Strip Function</strong>:  A striping function takes in an address and outputs an entry in the stripe group table. The striping functions are defined delow.</li><li><strong>Stripe Size</strong>: The size of each region inside the stripe. Must be a power of two.</li><li><strong>Stripe Map</strong>: Defines how the address is modified to each target in a stripe group. <ul><li>The striped addresses to a target are not contiguous. Address mapping which is configured in this field can be used to remedy that. </li><li>0 - No Address Mapping</li><li>1 - Shift right the bits above the striping bits by number of striping bits.<ul><li>new address = {old_address[addr_width-1:N+nsb],old_address[N-1]} where N = log2(strpSize), nsb = Number of Striping Bits</li></ul></li><li>2 - Move MSB to replace the striping bits<ul><li>new address =  {old_address[addr_width-nsb-1:N+nsb],old_address[addr_width-1:addr_width-nsb],old_address[N-1]} where N = log2(strpSize)</li></ul></li></ul></li><li><strong>Stripe Function Hash:</strong> Determines which bits are used for the striping function if Strip Function == 1.<ul><li>If used Strip Map must be 0</li><li>Must indicate log2ceil(Stripe Target Count) amount of buts</li></ul></li></ul><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Stripe Group</th><th class="confluenceTh">Stripe Target Count</th><th class="confluenceTh">Stripe Function</th><th class="confluenceTh">Stripe Size (Power of 2)</th><th colspan="1" class="confluenceTh">Stripe Map</th><th colspan="1" class="confluenceTh">Stripe Bits Width</th><th colspan="1" class="confluenceTh">Stripe Function Hash</th></tr><tr><td class="confluenceTd"> int</td><td class="confluenceTd">int </td><td class="confluenceTd"> int</td><td class="confluenceTd"> int</td><td colspan="1" class="confluenceTd"> int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">string</td></tr></tbody></table></div><p><br/></p><p><strong>Example Stripe Group Table</strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Stripe Group</th><th class="confluenceTh">Stripe Target Count</th><th class="confluenceTh">Stripe Function</th><th class="confluenceTh">Stripe Size (Power of 2)</th><th colspan="1" class="confluenceTh">Stripe Map</th><th colspan="1" class="confluenceTh"><span>Stripe Bits Width</span></th><th colspan="1" class="confluenceTh">Stripe Function Hash</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">2</td><td class="confluenceTd">0</td><td class="confluenceTd">512</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">4</td><td class="confluenceTd">0</td><td class="confluenceTd">2048</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">3</td><td class="confluenceTd">1</td><td class="confluenceTd">1024</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">{ hash : [53,54,62,63] }</td></tr></tbody></table></div>The Stripe Group Target Table consists of:<ul><li><strong>Target ID</strong>: See PAM.</li><li><strong>Mapped Base Address</strong>: See PAM.</li><li><strong>Route</strong>: See PAM.</li></ul><p><strong>Stripe Group Target Table X<br/></strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th class="confluenceTh">Route (Optional)</th></tr><tr><td class="confluenceTd"> int</td><td class="confluenceTd"> string</td><td class="confluenceTd">sting</td></tr></tbody></table></div><p><strong>Example Stripe Group Target Table for Stripe Groups 0 - 2</strong><strong><br/></strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th class="confluenceTh">Route (Optional)</th></tr><tr><td class="confluenceTd">4</td><td class="confluenceTd"> &quot;32'h0000_0000&quot;</td><td class="confluenceTd"><span>&quot;12'h401&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h402&quot;</span></td></tr></tbody></table></div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th class="confluenceTh">Route (Optional)</th></tr><tr><td class="confluenceTd">6</td><td class="confluenceTd"> <span>&quot;32'h0000_0000&quot;</span></td><td class="confluenceTd"><span>&quot;12'h403&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">7</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h404&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h405&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">9</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h406&quot;</span></td></tr></tbody></table></div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th class="confluenceTh">Route (Optional)</th></tr><tr><td class="confluenceTd">10</td><td class="confluenceTd"> <span>&quot;32'h0000_0000&quot;</span></td><td class="confluenceTd"> <span>&quot;12'h407&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">11</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h408&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">12</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h409&quot;</span></td></tr></tbody></table></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAMMode"><strong>PAM Mode</strong></h3><p>Each entry in the PAM can have a mode defined in pamMode. If pamMode is present inside the PAM the mode the CTL is in will have to match the mode indicated by the pamMode[entry] for there to be a PAM match for that entry. The CTL Mode can be delivered in three different ways:</p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExternalSignaling:">External Signaling:</h4><p>If external signaling is used then modeInt needs to be defined at the top level.</p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserBits:(ExcludefromR1Documentation)">User Bits: <strong>(Exclude from R1 Documentation)</strong></h4><p>If user bits are used then modeUserBits are used to select which user bits carry the mode information for a transaction.</p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CSRRegister:(ExcludefromR1Documentation)">CSR Register: <strong>(Exclude from R1 Documentation)</strong></h4><p>If a CSR Register is used then modeInt._SKIP_ needs to be true and modeUserBits needs to be &quot;&quot;. In addition apbInt needs to be populated.</p><p><br/></p></div><p>If all cases are defined in the JSON TACHL will first select external signals, then user bits, and then CSR Register</p><p><br/></p><div class="wiki-content"><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionStriping"><strong>Transaction Striping</strong></h3><div class="wiki-content">A transaction can be striped across targets using a striping function. This striping function is constructed using the parameters of this block.</div><div class="wiki-content"><u>Restrictions</u>:</div><div class="wiki-content">Each striping group can only have a multiple of 2 targets or exactly 3 targets. </div><div class="wiki-content">If a transaction spans across a stripe boundary the transaction will be split with an updated address, size, and target id. The responses of any transaction that is split from striping must be reordered. This is done using sequence numbers.</div><div class="wiki-content">For INCR</div><div class="wiki-content"><ul><li>Stripe Boundary is at strpSz</li></ul></div><div class="wiki-content"><ul><li>Request 1:  addr = addr, size = size to stripe boundary, targ id = entry[strpFunc(addr)], Transaction Left = len - size to stripe boundary</li><li>Request N: addr = addr of N-1 + size of N-1, size = min(Stripe Size, Transaction Left of N-1), targ id = entry[strpFunc(addr of N)], Transaction Left = Transaction Left of N-1 - size to stripe boundary</li><li>Note: each request can be split further according to the rules of the individual target. Behavior is defined later in this document.</li><li>Note: If the num_targ is a non power of two the next transaction may wrap to the first target where the two requests will be non contiguous with respect to each other. See below</li></ul><p>For WRAP</p><ul><ul><li>The wrap boundary can be calculated from the formula below:<br/><ul><li><p>Wrap Boundary = INT(addr/len_in_bytes) &lt;&lt; log2ceil(len_in_bytes)</p></li></ul></li><li><p class="wiki-content">The upper boundary can be calculated from the formula below:</p><ul><li><p>Upper Boundary = Wrap Boundary + len_in_bytes</p></li></ul></li></ul></ul><ul><li>Request 1: addr = addr, len = Upper Boundary - addr</li><li>Request 2: addr = Wrap Boundary, len = addr - Wrap Boundary </li><li>Each request will Then follow the INCR rules stated above.</li></ul><p>For FIXED</p><ul><li>Will not be split when striped and will not be effected by pamTargBoundary</li></ul></div><p><strong>Striping Functions</strong> </p><p><strong>strpFunc == 0 </strong></p><p><u>Power of Two:</u></p><div class="O1">target_entry = address[(N-1)+log2(num_targ):N] where N = log2(strpGrpSze)</div><p><u>Example:</u></p><p>     strpGrpSize = 1024B, num_targ = 4</p><p>     addr[11:10] will select the entry in the target table.</p><p>     case(addr[11:10])</p><p>          2'b00: Use Entry 0</p><p>          2'b01: Use Entry 1</p><p>          2'b10: Use Entry 2</p><p>          default: Use Entry 3</p><p><u>Non-Power of Two:</u></p><p>MSB = log2(pamSze)</p><p>N = log2(strpGrpSze)</p><p>strpWStrpBits is an engineered value and is fixed. Note: strpWStrpBits max value is (MSB-1-log2ceil(num_targ)) - N. So if strpWStrpBits was 7 it will be capped at 3 in this instance.</p><p>target_entry = (addr[MSB-1:MSB-1-log2ceil(num_targ)] + address[N+strpWStrpBits-1:N]) % num_targ</p><p><u>Example for 3</u></p><ul><li>strpGrpSize = 1kB, num_targ = 3, strpWStrpBits = 3, pamSze = 32kB (15 bits)</li><li>MSB = log2(pamSze)  = 15<ul><li>address[15-1 :N] = address[14:10]</li><li>address[MSB-1 : MSB-1-log2ceil(num_targ)] = address[14:13]</li><li>address[N + strpWStrpBits - 1:N]  = address[12:10]</li></ul></li><li>target entry = (addr[14:13] + address[12:10]) % 3</li></ul><p>Appendix A has a table with more detail</p><p><br/></p><div><p><strong>strpFunc == 1</strong></p><p>The starting entry in the table will be indexed using a parameter defined hash of CTL interface signals (strpFuncHash) that is num_bits = log2ceil(num_targ) wide.</p><p>The strpFuncHash will define an array of integers log2(num_bits) long inside a hash object from LSB to MSB.</p></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionBurstTypeandSplitting"><strong style="font-size: 16.0px;">Transaction Burst Type and Splitting</strong></h3><div class="wiki-content"><div class="wiki-content"><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 99.7985%;"><colgroup><col style="width: 2.12723%;"/></colgroup><colgroup><col style="width: 8.32043%;"/></colgroup><colgroup><col style="width: 4.46988%;"/></colgroup><colgroup><col style="width: 6.35476%;"/></colgroup><colgroup><col style="width: 3.82363%;"/></colgroup><colgroup><col style="width: 5.84315%;"/></colgroup><colgroup><col style="width: 7.45877%;"/></colgroup><colgroup><col style="width: 6.38169%;"/></colgroup><colgroup><col style="width: 6.11242%;"/></colgroup><colgroup><col style="width: 9.45136%;"/></colgroup><colgroup><col style="width: 4.73915%;"/></colgroup><colgroup><col style="width: 6.24706%;"/></colgroup><colgroup><col style="width: 12.7634%;"/></colgroup><colgroup><col style="width: 7.35106%;"/></colgroup><colgroup><col style="width: 8.21272%;"/></colgroup><tbody><tr><th colspan="15" class="confluenceTh"><div class="content-wrapper"><p>Rules for Transaction Splitting</p></div></th></tr><tr><th colspan="1" class="confluenceTh"><br/></th><th class="confluenceTh"><br/></th><th class="confluenceTh"><strong>Initiator</strong></th><th class="confluenceTh"><strong>Relationship</strong></th><th class="confluenceTh"><strong>Target</strong></th><th class="confluenceTh"><strong>Burst Transaction at Initiator</strong></th><th class="confluenceTh"><strong>Burst Supported at Target</strong></th><th colspan="1" class="confluenceTh"><strong>Narrow at Initiator</strong></th><th colspan="1" class="confluenceTh"><strong>Narrow Supported at Target</strong></th><th colspan="1" class="confluenceTh"><strong>Splitting Control Parameter</strong></th><th colspan="1" class="confluenceTh"><strong>Splitting in Initiator</strong></th><th class="confluenceTh"><strong>Splitting Behavior</strong></th><th class="confluenceTh"><strong>Splitting Equation (if any)</strong></th><th class="confluenceTh"><strong>Additional Splitting?</strong></th><th class="confluenceTh"><strong>Comments (if any)</strong></th></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td colspan="14" class="confluenceTd"><strong>Note: If an Exclusive transaction matches any splitting condition below the behavior of the system is unpredictable.</strong></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td colspan="1" class="confluenceTd"><p><strong>Narrow </strong><strong>Mismatch</strong></p></td><td colspan="12" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">1</th><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">INCR/FIXED</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">No &amp; ((1 &lt;&lt; in_txn_hdr_burstSize) &lt; Target Width in Bytes)</td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">Move to category <strong>Width Mismatch</strong></td><td colspan="1" class="confluenceTd"><p style="text-align: left;">The Narrow will not be split. Instead it must be transformed into a non narrow instruction. This means the burstSize of the transaction will be modified to be the full width at the target.</p><p style="text-align: left;">If the transaction is an exclusive then additionally the addr will be aligned to the target data width.</p><p style="text-align: left;">These modifications may cause extra bytes to be read at the target, the extra bytes in the write will be disabled with the write strobe.  Note: Extra read bytes will not be returned</p></td></tr><tr><th colspan="1" class="confluenceTh">2</th><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">WRAP</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">No &amp; ((1 &lt;&lt; in_txn_hdr_burstSize) &lt; Target Width in Bytes)</td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">Split Into One/Two INCRs</td><td colspan="1" class="confluenceTd">See Equation<strong> B </strong>to get INCRs</td><td colspan="1" class="confluenceTd"><p>See Equation<strong> A</strong> to split into single beat<strong> INCRs</strong></p></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">3</th><td colspan="1" class="confluenceTd">else</td><td colspan="9" style="text-align: center;" class="confluenceTd">N/A</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">Move to category <strong>Width Mismatch</strong></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td class="confluenceTd"><strong>Width Mismatch</strong></td><td colspan="13" class="confluenceTd">Resolves all width issues.</td></tr><tr><th colspan="1" class="confluenceTh">4</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">!=</td><td class="confluenceTd">*</td><td class="confluenceTd">FIXED</td><td class="confluenceTd">*</td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Split to single beat Increments</td><td class="confluenceTd">See Equation<strong> A</strong><br/><br/><br/></td><td class="confluenceTd">Move to category <strong>Target Native Layer Restrictions</strong></td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">5</th><td colspan="1" class="confluenceTd">else</td><td colspan="9" style="text-align: center;" class="confluenceTd">N/A</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">Move to category <strong>Unsupported Burst Types</strong>,</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td class="confluenceTd"><strong>Unsupported Burst Types</strong></td><td colspan="13" class="confluenceTd">Resolves all unsupported burst type issues.</td></tr><tr><th colspan="1" class="confluenceTh">6</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">FIXED</td><td class="confluenceTd">No</td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Split to single beat Increments</td><td class="confluenceTd">See Equation<strong> A</strong></td><td class="confluenceTd">Move to category <strong>Target Native Layer Restrictions</strong></td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">7</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">WRAP</td><td class="confluenceTd">No</td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">pamTargSplitWrap </td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Split into One or two Increments</td><td class="confluenceTd">See Equation<strong> B</strong></td><td class="confluenceTd">Move to category <strong>Max Burst Size/Boundary</strong> as new INCRs can be split further.</td><td class="confluenceTd">pamTargSplitWrap must be asserted</td></tr><tr><th colspan="1" class="confluenceTh">8</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">INCR</td><td class="confluenceTd">No</td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Split to single beat Increments</td><td class="confluenceTd">See Equation<strong> A</strong></td><td class="confluenceTd">Move to category <strong>Target Native Layer Restrictions</strong></td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">9</th><td class="confluenceTd">else</td><td colspan="9" style="text-align: center;" class="confluenceTd">N/A</td><td class="confluenceTd">None</td><td class="confluenceTd">None</td><td class="confluenceTd">Move to category at <strong>Max Burst Size/Boundary</strong>.</td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td class="confluenceTd"><strong>Max Burst Size / Boundary (Striping)</strong></td><td colspan="13" class="confluenceTd">Resolves all issues from the transaction being larger than a specified size or going past a specified boundary. Note: If striping is enabled, the striping size will be reflected in a boundary that cannot be crossed.</td></tr><tr><th colspan="1" class="confluenceTh">10</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">FIXED</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">pamTargMaxBurst</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">The burst will be split into FIXED transactions no more than (maxBurstSize <strong style="text-align: left;"><span style="color: inherit;">&gt;&gt; </span></strong><span style="color: inherit;">log2(ATUI.wData)) &lt;&lt; </span><span style="color: inherit;">burstSize</span></td><td class="confluenceTd">See Equation<strong> C</strong></td><td class="confluenceTd">Move to category <strong>Native Layer Restrictions</strong>.</td><td class="confluenceTd">(if (maxBurstSize <strong style="text-align: left;"><span style="color: inherit;">&gt;&gt; </span></strong><span style="color: inherit;">log2(ATUI.wData)) &lt;&lt; </span><span style="color: inherit;">burstSize) </span>&lt; len_in_bytes where maxBurstSize is from PAM</td></tr><tr><th colspan="1" class="confluenceTh">11</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">WRAP</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">pamTargMaxBurst</td><td class="confluenceTd">Yes</td><td class="confluenceTd"><p>Split into One or two Increments if:</p><p>a) The size of the WRAP is greater than maxBurstSize</p><p>b) The size of the WRAP crosses a defined boundary.</p></td><td class="confluenceTd">See Equation<strong> B</strong></td><td class="confluenceTd">See Equation<strong> D </strong>on one or both increments. Move to category <strong>Native Layer Restrictions </strong>for one or both increments</td><td class="confluenceTd">if maxBurstSize &lt; len_in_bytes where maxBurstSize is from PAM</td></tr><tr><th colspan="1" class="confluenceTh">12</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">INCR</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">pamTargMaxBurst</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">The burst will be split into INCR transactions no more than maxBurstSize</td><td class="confluenceTd">See Equation<strong> D</strong></td><td class="confluenceTd">Move to category <strong>Native Layer Restrictions</strong>.</td><td class="confluenceTd">if maxBurstSize &lt; len_in_bytes where maxBurstSize is from PAM</td></tr><tr><th colspan="1" class="confluenceTh">13</th><td class="confluenceTd">else</td><td colspan="9" style="text-align: center;" class="confluenceTd">N/A</td><td class="confluenceTd">None</td><td class="confluenceTd">None</td><td class="confluenceTd">Move to category <strong>Native Layer Restrictions</strong>.</td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td class="confluenceTd"><strong>Target Native Layer Restrictions</strong></td><td colspan="13" class="confluenceTd">Resolves all issues from the transaction being larger than a specified size determined by Native Layer restrictions at the target. Not in CTL Layer, however is added to be informative as it it uses same CTL splitting methodology.</td></tr><tr><th colspan="1" class="confluenceTh">14</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">AXI</td><td class="confluenceTd">FIXED</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">Split transaction as if maxBurstSize was (16 * Target.wData)/8</td><td class="confluenceTd">See Equation<strong> C </strong>with new maxBurstSize, Note: There may be a new burstSize as it has been transformed to fit the target width.</td><td class="confluenceTd">None.</td><td data-highlight-colour="#fff0b3" class="confluenceTd">Will not verify in R1 as per SYM-3261</td></tr><tr><th colspan="1" class="confluenceTh">15</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">AXI</td><td class="confluenceTd">WRAP</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">Split transaction as if maxBurstSize was (16 * Target.wData)/8</td><td class="confluenceTd">See Equation<strong> B</strong> with new maxBurstSize</td><td class="confluenceTd">See Equation<strong> D </strong>for one or both increments with maxBurstSize = (256 * Data Width)/8, then no more splitting is needed. </td><td class="confluenceTd">Note: There may be a new Data Width as it has been transformed to fit the target width.</td></tr><tr><th colspan="1" class="confluenceTh">16</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">AXI</td><td class="confluenceTd">INCR</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">Split transaction as if maxBurstSize was (256 * Target.wData)/8</td><td class="confluenceTd">See Equation<strong> D </strong>with new maxBurstSize</td><td class="confluenceTd">None.</td><td class="confluenceTd">Note: There may be a new Data Width as it has been transformed to fit the target width.</td></tr><tr><th colspan="1" class="confluenceTh">17</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">APB</td><td class="confluenceTd">INCR</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">Split into single beat transactions on APB as if maxBurstSize was (Target.wData/8)</td><td class="confluenceTd">See Equation<strong> D </strong>with new maxBurstSize</td><td class="confluenceTd">None.</td><td class="confluenceTd">Note: There may be a new Data Width as it has been transformed to fit the target width.</td></tr><tr><th colspan="1" class="confluenceTh">17</th><td colspan="1" class="confluenceTd">else</td><td colspan="13" style="text-align: center;" class="confluenceTd">End of Table</td></tr></tbody></table></div><p class="auto-cursor-target">Note: All splitting is done regardless of modifiable or non-modifiable. If non modifiable transactions need to not be split the system needs to be configured to support that non-modifiable transaction throughout its flow.</p></div><div class="wiki-content"><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Equation ID</th><th class="confluenceTh">Description </th><th class="confluenceTh">Equation</th></tr><tr><th class="confluenceTh">A</th><td class="confluenceTd">Split into single beat increments.</td><td class="confluenceTd"><p><strong>First Beat</strong>:<br/>addr= addr<br/>burstType= INCR<br/>len=  (Init.wData/8) - (addr - align(addr,Init.wData)) - 1<br/><strong>Beat N</strong>:<br/>addr = (Fixed) ? addr: (addr+ N*(Init.wData/8))<br/>burstType = INCR<br/>len =  (Init.wData/8) - 1</p></td></tr><tr><th class="confluenceTh">B</th><td class="confluenceTd">Split Wrap Into One/Two Increments</td><td class="confluenceTd"><p><strong>len_in_bytes</strong> = iSIZE * iLEN<br/><strong>Lower Boundary</strong> = align(addr,len_in_bytes)<br/><strong>Upper Boundary</strong> = Lower Boundary + len_in_bytes -1 <br/><br/><strong>If (Lower Boundary == iADDR)</strong><br/>Unmodified except oBURST = INCR</p><p><strong>else if (len_in_bytes &lt;= (ATUI.wData/8)) </strong><br/>oBURST = INCR<br/>oADDR = Lower Boundary</p><p><strong>else</strong><br/>INCR1 - INCR from iADDR to Upper Boundary<br/>INCR2 - INCR from Lower Boundary to iADDR</p></td></tr><tr><th class="confluenceTh">C</th><td class="confluenceTd">Split Fixed from a certain maxBurstSize</td><td class="confluenceTd"><p>Boundary needs no consideration since a fixed transaction cannot cross a Boundary.<br/><strong>maxSize</strong> = (maxBurstSize <strong style="text-align: left;"><span style="color: inherit;">&gt;&gt; </span></strong><span style="color: inherit;">log2(ATUI.wData)) &lt;&lt; </span><span style="color: inherit;">burstSize</span><br/><strong>bytesPerBurst</strong> = maxSize - (align(iADDR, burstSize) + burstSize) - iADDR<br/><strong>Request 1</strong>  : oADDR = iADDR<br/>len = lower(bytesPerBurst,len)<br/><strong>if( N * maxBurstSize &lt;= len_in_bytes)</strong><br/><strong>  Request N</strong> :  oADDR = iADDR<br/>                        len = maxSize<br/><strong>else</strong><br/><strong>  Request N</strong>:   oADDR = iADDR<br/>                        len = len_in_bytes - ((N-1) *                                  bytesPerBurst)</p><p>oBURST = FIXED</p></td></tr><tr><th class="confluenceTh">D</th><td class="confluenceTd">Split Incr from a certain maxBurstSize</td><td class="confluenceTd"><p>bytesToBoundary represents the amount of bytes until that striping boundary from the width aligned address.</p><p><strong>maxSize</strong> = minimum(maxBurstSize, bytesToBoundary)<br/><strong>bytesToMaxSize</strong> = (align(oADDR, Data Width of Initiator) + maxSize) - oADDR<br/><strong>Request 1</strong>  : <br/>    oADDR = iADDR, <br/>    len = min(ctl_req_len, bytesToMaxSize), <br/>    bytesLeft = ctl_req_len - len<br/><strong>Request N</strong>  : <br/>    oADDR = oADDR[N-1] + len[N-1]<br/>    len = min(bytesLeft[N-1] , bytesToMaxSize) <br/>    bytesLeft = bytesLeft[N-1] - len</p><p>oBURST = INCR</p></td></tr></tbody></table></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-250"><a href="/wiki/spaces/ENGR/pages/16156349/HW-SYM+Common+Transaction+Layer+Microarchitecture+Specification?preview=%2F16156349%2F16189756%2Fsplitting_presentation_5_25.pptx"><span style="background: url('/wiki/s/-672721829/6452/d621ad2a33e27b90ca05c475b216bfab745e08a2/1000.0.0-d621ad2a33e2/_/download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-presentation.png'); width: 333px; height: 95px; display: inline-block; padding-top: 155px; margin: 2px; border: 1px solid #ddd; text-align: center; vertical-align: text-bottom; text-decoration: none; font-size: 12px; color: #000;">splitting_presentation_5…</span></a></h3><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowTransactions">Narrow Transactions</h3></div></div></div></div><div class="page view"><div class="wiki-content"><div class="wiki-content"><div class="wiki-content"><div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Anarrowtransactioninthiscontextisdefinedwhentxn_hdr_burstSize(BurstWidth)issmallerthantxn_hdr_maxBurstSize(ChannelWidth)."><span style="font-size: 14.0px;font-weight: 400;letter-spacing: 0.0px;">A narrow transaction in this context is defined when txn_hdr_burstSize (Burst Width)  is smaller than txn_hdr_maxBurstSize (Channel Width).  </span></h3><p><u>Restriction</u>:</p><ul><li>The channel width must be a power of 2 multiple of the burst width. </li><li>Any burst type can have narrow transactions</li><li>There is no limit on amount of narrow read bursts</li></ul><p><u>Byte Lanes</u>:</p><ul><li>In incrementing or wrapping bursts different byte lanes or used for each beat<ul><li>Each beat is split into txn_hdr_maxBurstSize/txn_hdr_burstSize  byte lanes where each beat contains valid data for a single byte lane. </li><li>The byte lane width is txn_hdr_burstSize (Burst Width).</li><li>The starting byte lane is dependent on the address. </li></ul></li><li>In a fixed burst, the same byte lanes are used on each beat.</li></ul><p><u>Data Packing:</u></p><ul><li>The read and write request will flow through unmodified.</li><li>For Write Data: The narrow write data beats will be packed into a wide beat to send to the ATUT. The byte lanes will stay consistent through the packing. </li><li>For Read Data: The CTLI will receive a wide data beat. Then using context will split the wide beat to multiple narrow bursts masking out extraneous data outside what was requested. </li></ul><p><u>SMI Beats Calculation:</u></p><ul style="list-style-type: square;"><li>Narrow transactions will be packed to a specific number of narrow beats on SMI. This will depend on Burst Type.<ul style="list-style-type: square;"><li>WRAP : ((len+1) / (wData/8))</li><li>INCR : Math.ceil( ((len+1) + (addr - align(addr,wData))) / (wData/8) )</li><li>FIXED :  ((len+1)/ Math.pow(2,burstSize))</li></ul></li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1200" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-18%2016:36:17.png?api=v2"></span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1200" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-18%2016:56:47.png?api=v2"></span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1200" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-18%2017:16:45.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context">Context</h3><p>The Common Layer Context is configured on a block by block basis. Which fields exist depends on what functionality the Common Layer has (The parameters above) and don't have to be set by the user/Maestro.</p><p>The context may halt a transaction if the following occurs (and cause a performance loss):</p><ul><li>Next Sequence Number Unavailable </li><li>Too many outstanding reads/writes/total</li><li>Ordering ID and Channel ID combination match to a transaction in a different queue.</li><li>If no Reorder Buffer, Ordering ID and Channel ID combination will lock on a target. Thus if a transaction comes in and matches an Ordering ID and Channel ID with another transaction going to a different target it will block.</li><li><span style="letter-spacing: 0.0px;">If RDI is not supported, a target can only receive a single ID at a time. So if a transaction matches a target and does not match the </span><span style="letter-spacing: 0.0px;">Ordering ID and Channel ID it will block.</span></li><li><span>If RDI is not supported, a split transaction (through splitting or striping) must complete before a new transaction is accepted. </span></li><li><span style="letter-spacing: 0.0px;">If nVC &gt; 1, A transaction can only go to a target 1 VC at a time, thus if a transaction matches a target in addition to Ordering ID and Channel ID, but does not match VC it will block.</span></li></ul></div><p>All errors are sourced from the context block and travel along these signals:</p><ul><li>timeoutError</li><li>bufferedWriteError</li><li>rwError</li><li>decodeError</li><li>transportError</li><li>exclusiveError</li><li>powerDomainError</li></ul><p>All errors will respond in strict sequence number order to follow all possible ordering rules.</p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ContextFields">Context Fields</h4><div><div><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-top: 10.0px;"><colgroup><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">Field Name</th><th style="text-align: center;" class="confluenceTh">Field Width</th><th style="text-align: center;" class="confluenceTh">Driver</th><th style="text-align: center;" class="confluenceTh">Set Condition</th><th style="text-align: center;" class="confluenceTh">Clear Condition</th><th colspan="1" style="text-align: center;" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">resp_sent</td><td style="text-align: left;" class="confluenceTd">1</td><td style="text-align: left;" class="confluenceTd">1</td><td style="text-align: left;" class="confluenceTd">clear_resp_match</td><td style="text-align: left;" class="confluenceTd">write_this_entry</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">dp_sent</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">clear_dp_match</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">id</td><td colspan="1" class="confluenceTd">wCtlId</td><td colspan="1" class="confluenceTd">requestInterface.id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">youngest_clear</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">compressed_id</td><td colspan="1" class="confluenceTd">wSmiOrderingId</td><td colspan="1" class="confluenceTd">new_compressed_id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">seq_num</td><td colspan="1" class="confluenceTd">log2ceil(nSeqnum)</td><td colspan="1" class="confluenceTd">next_seq_num</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">addr</td><td colspan="1" class="confluenceTd">wCtlAddr</td><td colspan="1" class="confluenceTd">requestInterface.addr</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">exclusive</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">requestInterface.atomic[1]</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">valid</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">requestInterface.valid</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">response_matched_this_entry</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">youngest</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">targ_id</td><td colspan="1" class="confluenceTd">wCtlTargId</td><td colspan="1" class="confluenceTd">requestInterface.target_id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">ordering_id</td><td colspan="1" class="confluenceTd">wCtlOrderingId</td><td colspan="1" class="confluenceTd">requestInterface.ordering_id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">channel_id</td><td colspan="1" class="confluenceTd">wCtlChannelId</td><td colspan="1" class="confluenceTd">requestInterface.channel_id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">queue</td><td colspan="1" class="confluenceTd">wQueue</td><td colspan="1" class="confluenceTd">queue_map_out</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">type</td><td colspan="1" class="confluenceTd">wCtlType</td><td colspan="1" class="confluenceTd">requestInterface.type</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">split</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">splitInterface.split</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">last</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">splitInterface.last</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">first</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">splitInterface.first</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">buf_write</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">buffered &amp; ~blocked</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">narrow</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">narrow</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">atomic</td><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">requestInterface.atomic[7:4]</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">atomic_rr</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">atomic_rr_drive</td><td colspan="1" class="confluenceTd">atomic_rr_set</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">atomic_wr</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">atomic_wr_drive</td><td colspan="1" class="confluenceTd">atomic_wr_set</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">burst_size</td><td colspan="1" class="confluenceTd">wCtlBurstSize</td><td colspan="1" class="confluenceTd">requestInterface.burstSize</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">narrow_offset</td><td colspan="1" class="confluenceTd">wCtlAddr (Needs Optimization)</td><td colspan="1" class="confluenceTd">requestInterface.addr</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">rw_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw_error</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">decode_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">pamInterface.decode_error</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">exclusive_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">exclusive_error</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">power_domain_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">power_domain_error</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">beats</td><td colspan="1" class="confluenceTd">Variable</td><td colspan="1" class="confluenceTd">transaction_in_beats</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">timeout</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">timeout_tick</td><td colspan="1" class="confluenceTd">timeout_tick</td><td colspan="1" class="confluenceTd">response_matched_this_entry</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">timeout_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">timeout_error_occured</td><td colspan="1" class="confluenceTd">timeout_tick</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">vc</td><td colspan="1" class="confluenceTd">wVc</td><td colspan="1" class="confluenceTd">destination_vc</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestCounter">Request Counter</h3><p>There is counter for outstanding read and write (and/or total) requests. Once that number the max number is reached, no more requests can be issued.</p><p>The number of requests is parameterized (no counter if corresponding parameter value is zero).</p><p>If there is context per outstanding request (for ID compression, ID inter-lock, request timeout or buffered write etc.), there is not corresponding request counter.</p><p>The request counter is controlled through the maxOutTotal, maxOutRd, and maxOutWr parameters.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SequenceNumber">Sequence Number</h3><p>The sequence numbers are shared between reads and writes and is 2X the number (1-bit each) of outstanding requests.</p><p>-          Full sequence number is used to enable response reordering</p><p>The sequence numbers are assigned to requests in order and when the next sequence number is not free, the requests are held off (that is why the number of sequence numbers is made 2X the requests).</p><p>A sequence number can be poisoned if the associated transaction has a timeout error. In this case this sequence number will not be used again until reset or the condition below and will be skipped when assigning new ones.</p><p>The poisoned sequence numbers will all be unpoisoned when every sequence number becomes poisoned.</p><p>A sequence number is allocated when a transaction leaves the context block, and is cleared once the full response is seen from the context block.</p><p>If a transaction is split all of the created transactions will have separate sequence numbers.</p><p>Sequence numbers are used for context lookup throughout the CTL layer. If sequence numbers are absent then IDs are used.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-LatencyMeasurement(StatsInterface)">Latency Measurement (Stats Interface)</h3><p>Each context entry will consist of a signal indicating it has been written to and a signal indicating it has been cleared if its target matches the one indicated inside the CTLSCR register.</p><p>These signals will be bundled to a <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">S</a>tats Interface. This interface will go out of the CTL Initiator an feed a pmon_stats block. See pmon uArch for measurements possible.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-IDCompression"><span style="font-size: 16.0px;font-weight: bold;">ID Compression</span></h3><p>ID Compression will be used when the SMI Ordering ID field is smaller than the CTL Ordering ID field. The compression is done as follows.</p><p>Lets say the Ordering ID field is M bits wide on the CTL interface and N bits wide on the SMI interface. N bits of the M bit wide CTL Ordering ID will be used to drive the SMI Ordering ID. These bits will be selected by a parameterizable mask that is M bits wide and has N bits unmasked.</p><ul><li>For example, CTD ID = 8 bits wide, SMI ID = 4 bits wide. idCompMask = 01010101. The compressed smi_id = {ctl_id[6],ctl_id[4],ctl_id[2],ctl_id[0]}</li></ul><p>For ID compression each transaction will be given a sequence number. The responses will do look-up in the ID compression context using the sequence number to map to the original request ID.</p><p><u>Exclusive Monitoring</u></p><p>Exclusive monitoring requires an uncompressed ID from the CTL interface. If ID compression is used and a transaction is Exclusive, the CTL Layer must forward the full id in the msg_id SMI signal.</p><ul><li>Going to the same target.</li></ul></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-InputQueues(ExcludefromR1Documentation)">Input Queues <strong>(Exclude from R1 Documentation)</strong></h3><p><u>Queue Map</u></p><p>Once a transaction is inside the Common Layer it will be mapped to a queue. Each queue is independent in terms of ordering so two transactions with ordering dependencies cannot go to separate queues. If a second transaction needs to go on a separate queue it must be barrier-ed. </p><p>The queue mapping is done through the parameterqueueMap<strong>. </strong>queueMap is an array of Verilog statements which resolve into a 1 or 0. Each entry represents a queue. If a queues verilog statement evaluates to 1 that transaction will go into that queue. If more than 1 Verilog statesment resolves to 1 the first queue is selected. </p><p>The Common Layer Signals that can be used in this queueMap parameter are as follows (Use these specific signal names when populating queueMap):</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Common Layer Signal (CTLi)</p></th><th colspan="1" style="text-align: left;" class="confluenceTh"><p>SMI Signal (ATUt)</p></th><th style="text-align: left;" class="confluenceTh"><p>Release</p></th><th colspan="1" style="text-align: left;" class="confluenceTh"><p>Notes</p></th></tr></thead><tbody><tr><td style="text-align: left;" class="confluenceTd"><span>ctl_</span>user</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td style="text-align: left;" class="confluenceTd"><span>ctl_</span>qos</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ctl_txn_channel_id (Read/Write)</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd">It is suggested that this is included (if Read/Writes arent ordered seperatly)</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><span>ctl_txn_ordering_id</span></td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd">It is suggested that this is included.</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><span>ctl_multicast_label</span></td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><span>ctl_targ_id</span></td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">smi_ctl_msg_valid</td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd">VCs Map directly to Queues for 1.0 so only valid can be used.</td></tr></tbody></table></div><p>Example Queue Setup:</p><p>queueMap = [</p><p>                          &quot;(<span>ctl_txn_channel_id == 0) &amp; (ctl_qos &gt; 2) &amp; (ctl_txn_ordering_id[0])&quot;,</span></p><p>                          &quot;(ctl_txn_channel_id == 0) &amp; (ctl_qos &lt;= 2) &amp; (ctl_txn_ordering_id[0])&quot;,</p><p>                          &quot;(ctl_txn_channel_id == 0) &amp; (ctl_txn_ordering_id[1])&quot;,</p><p>                          &quot;(ctl_txn_channel_id == 1) &amp; (ctl_txn_ordering_id[1])&quot;</p><p>                     ]</p><p>vcMap = [ </p><p>                        0,</p><p>                        0,</p><p>                        1,</p><p>                        2</p><p>             ]</p><p>queuePriMap = [ </p><p>                        0,</p><p>                        1,</p><p>                        3,</p><p>                        3</p><p>             ]</p><p>QoS Remap (Not in R1):</p><p>The input transaction QoS can also be remapped based on qosMapMode.</p><ol><li>Queue Based - The QoS will be remapped to the QoS of the matched Queue. (queue #)</li><li>Input Transaction QoS Based</li><li>No Remap (use input QoS)</li></ol><p>There is a configurable register to do the QoS remapping. The mapped QoS is the ATP packet QoS while the transaction address is the ATP Message QoS. If there is no QoS remapping the input transaction QoS is the only QoS.</p><p><u>VC Map</u></p><p><span class="legacy-color-text-blue3">A queue has a direct map to a vc using the parameter</span>vcMap <span class="legacy-color-text-blue3">which is am array of integers. Each entry indicates which VC the queue goes to. There are no restrictions on this.</span></p><p><u>Queues</u>:</p><p><strong>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16161182/OBSOLETE-DELETE+HW-SYM+sym_common_queue" data-linked-resource-id="16161182" data-linked-resource-version="12" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_common_queue</a> for block implementing queue functionality.</strong></p><p>The input queues store the input requests that queue up for arbitration. </p><p>A transaction can map to any queue based on anything inside the Common Layer signaling (including Common Layer Flows) based on queue map explained above. </p><p>Each queue has an assigned priority and secondary priority. These priorities will drive the packet priority if the signaling exists in the SMI layer. The primary priority will be used unless a queue is demoted by the Rate Limiter. See Rate Limiter section for more detail.</p><p>Each queue can have a corresponding data queue to store write data alongside a written request. The size of these data buffers is configurable. At the moment every data queue must be the same size.</p><p>Each queue also has an assigned network VC.</p><p><br/></p></div><p><strong>Note: See </strong><strong><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16172082/HW-SYM+VC+Microarchitecture+and+Restrictions" data-linked-resource-id="16172082" data-linked-resource-version="20" data-linked-resource-type="page">HW-SYM VC Microarchitecture and Restrictions</a> For more information.</strong></p><p><br/></p><div class="wiki-content"><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Arbiter(ExcludefromR1Documentation)"><span>Arbiter <strong>(Exclude from R1 Documentation)</strong></span></h3><p><span><br/></span></p><div><p>The arbiter selects one of the eligible requests to be sent out on the symphony message interface to the packet layer. </p><p>This arbitration is done using a <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164560/OBSOLETE-DELETE+HW-SYM+sym_smi_arb" data-linked-resource-id="16164560" data-linked-resource-version="9" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_smi_arb</a> that is inside the <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16161182/OBSOLETE-DELETE+HW-SYM+sym_common_queue" data-linked-resource-id="16161182" data-linked-resource-version="12" data-linked-resource-type="page">sym_comon_queu</a>e. In summary, the arbiter will first select a VC and then select a queue within that VC. The high-level diagram is seen below.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1024" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-10%2019:2:55.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionRequeuing(ExcludefromR1Documentation)"><strong>Transaction </strong>Requeuing <strong>(Exclude from R1 Documentation)</strong></h3><p>Transaction ordering occurs at the input of queues. The queue table below forces that at any given time an ID belongs to only 1 queue. </p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Ordering Match (a)</th><th colspan="1" class="confluenceTh">Queue Match According to Context Table</th><th colspan="1" class="confluenceTh"> Address Match In Different Queue</th><th colspan="1" class="confluenceTh">Action</th></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">No Ordering Dependency. En-queue to proper queue.</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Put Transaction into Queue of Ordering Match.</td></tr><tr><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">No Ordering Dependency. En-queue to proper queue.</td></tr><tr><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Put Transaction into Queue of Address match..</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Set Barrier on Transaction with Address Match.</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Put Transaction in Queue of Ordering Match. Set Barrier on Transaction with Address Match.</td></tr></tbody></table></div><p>Note: &quot;Queue match according to context table&quot; means that the original intended queue matches with the queue of a previous order matched transaction.</p><p>Note: a) Ordering Match means that a dependency was seen based on ordering id and channel ID. See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157432/HW-SYM+Common+Layer+Protocol" data-linked-resource-id="16157432" data-linked-resource-version="84" data-linked-resource-type="page">HW-SYM Common Layer Protocol</a> for ordering requirements. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoS(QoSChange)"><span class="inline-comment-marker" data-ref="37243aaf-61cb-4529-bde8-5f5dfa70f055">QoS ( QoS Change )</span> </h3><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TrafficClassandInternalPriorityMapping"><strong><u>Traffic Class and Internal Priority Mapping</u></strong></h4><p>A QoS will come in on the ctl_qos signal of the CTL interface. Depending on the packet definition there might be msg_qos, qos, or both fields.</p><ul style="list-style-type: square;"><li>If only a single field exists it will take the value at the bottom of the ctl_qos signal</li><li>If both exist and ctl_qos is smaller in width than the width of both fields combined ctl_qos will be replicated into both fields</li><li>If both exist and ctl_qos is equal to or larger than the width of both fields combined it will map qos to {qos,msg_qos}</li></ul><p>The msg_qos field might be raised or lowered depending on rate limiting and latency pressure.</p><p>From this modified qos signal an Internal QoS and Priority value will be looked up from a register lookup table involving CTLQM0, CTLQM1, CTLQM2, CTLQM3.</p><p>The resulting Internal QoS will be propagated inside the msg_qos field of the packet.</p><p>The qos will be propagated to the qos field of the packet..</p><p>The Priority will be mapped to the pri field of the packet. </p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimitingandLatencyPressure"><u>Rate Limiting and Latency Pressure</u></h4><span style="letter-spacing: 0.0px;">Depending on the number of buckets each queue has there are three modes. In each mode the Rate Limiter is modifying the incoming QoS value that will be used for the Priority and Internal QoS lookup.</span></div></div></div></div></div><div class="page view"><div class="wiki-content"><div class="wiki-content"><div class="wiki-content"><u><span style="color: black;">Two Buckets:</span></u><p><span style="color: black;">- The transaction will keep the same QoS when the First Bucket has enough credits for the transaction. </span></p><p><span class="legacy-color-text-default">- When the first bucket doesn't have enough credits and the second bucket does the transaction will have a demoted QoS equal to the incoming QoS minus </span><span class="inline-comment-marker" data-ref="b4616bbe-5c3e-4c30-87ab-9dfdf7346b07">CTLQLX.QSD (QoS </span><em style="color: black;"><span style="color: inherit;">Dec. Step)</span></em><span style="color: inherit;">. This has a lower bound of CTLQLX.QN (QoS <em>Min.)</em>.</span></p><p><span style="color: black;">- Once the second bucket does not have enough credits the transaction will be blocked until the first or second bucket gets credits.</span></p><p><u><span style="color: black;">One Bucket (Second Bucket has Size of 0):</span></u></p><p><span style="color: black;">- The transaction will keep the same QoS when the First Bucket has enough credits for the transaction. </span></p><p><span style="color: black;">- Once the first bucket doesnt have enough credits the transaction will be blocked until the first bucket gets credits</span></p><p><u><span style="color: black;">No Buckets:</span></u></p><p><span style="color: black;">- The transaction will keep the same QoS and not be blocked based on credits. </span></p><p><span class="legacy-color-text-default">On top of above if &quot;Latency Pressure&quot; is asserted priority would increase by </span><span class="legacy-color-text-blue3">CTLQLX.QSI (</span><em style="color: black;"><span style="color: inherit;">QoS Inc. Step) </span></em><span>to a max of CTLQLX.QM (QoS </span><em style="color: inherit;">Max.)</em><em style="color: inherit;">. </em><span>The </span><span class="legacy-color-text-default">behavior</span><span> of the Latency Pressure signal is defined inside the PMON that is attached to the CTL layer. </span></p><p><span>Each buckets credits will reset to 0 every <span class="legacy-color-text-blue3">CTLQR.CYCLES cycles if it is non 0. </span></span></p><p><span><span style="color: black;"><span style="color: inherit;">See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163237/OBSOLETE-DELETE+HW-SYM+sym_common_rate_limiter" data-linked-resource-id="16163237" data-linked-resource-version="17" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_common_rate_limiter</a> for more detail about bucket behaviour and configuration. </span></span></span></p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoStoPacketFieldMappings"><strong><u>QoS to Packet Field Mappings</u></strong></h4><p><strong><u><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1000" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2021-1-12_15-20-34.png?api=v2"></span></u></strong></p><p><span style="color: black;"><span style="color: inherit;">The resulting equations for three QoS signals are as follows. This mapping is done in the SMI layer so the same fields are present into and out of this logic.</span></span></p></div></div></div></div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Fields Present </th><th class="confluenceTh">Mapping</th></tr><tr><td class="confluenceTd">SMI QoS and Msg QoS Fields</td><td class="confluenceTd"><p><span style="color: black;"><span style="color: inherit;"><strong>smi_qos</strong>           = smi_qos</span></span></p><p><span style="color: black;"><span style="color: inherit;">first_bucket_has_enough_credits = (single_bucket or double_bucket) ? first_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">second_bucket_has_enough_credits = (double_bucket) ? second_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">smi_bucket_qos = (first_bucket_has_enough_credits)        ? smi_msg_qos :</span></span></p><p><span style="color: black;"><span style="color: inherit;">                              (second_bucket_has_enough_credits)  ? Math.max((smi_msg_qos - <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSD), <span class="legacy-color-text-blue3">CTLQLX</span>.QN) :</span></span></span></p><p><span style="color: black;"><span style="color: inherit;"><span>                              smi_msg_qos ;</span></span></span></p><p><span style="color: black;"><span style="color: inherit;">lookup_qos       = (latency_pressure) ? Math.min(smi_bucket_qos + <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSI, <span class="legacy-color-text-blue3">CTLQLX</span>.QM)  </span>: smi_bucket_qos ;</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_msg_qos   = </strong>CTLQM.qos_lookup(lookup_qos)</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_pri             = </strong>CTLQM.pri_lookup(lookup_qos)</span></span></p></td></tr><tr><td class="confluenceTd">SMI Msg QoS Field Only</td><td class="confluenceTd"><p><span style="color: black;"><span style="color: inherit;">first_bucket_has_enough_credits = (single_bucket or double_bucket) ? first_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">second_bucket_has_enough_credits = (double_bucket) ? second_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">smi_bucket_qos = (first_bucket_has_enough_credits)        ? smi_msg_qos :</span></span></p><p><span style="color: black;"><span style="color: inherit;">                              (second_bucket_has_enough_credits)  ? Math.max((smi_msg_qos - <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSD), <span class="legacy-color-text-blue3">CTLQLX</span>.QN) :</span></span></span></p><p><span style="color: black;"><span style="color: inherit;"><span>                              smi_msg_qos ;</span></span></span></p><p><span style="color: black;"><span style="color: inherit;">lookup_qos       = (latency_pressure) ? Math.min(smi_bucket_qos + <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSI, <span class="legacy-color-text-blue3">CTLQLX</span>.QM)  </span>: smi_bucket_qos ;</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_msg_qos   = </strong>CTLQM.qos_lookup(lookup_qos)</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_pri             = </strong>CTLQM.pri_lookup(lookup_qos)</span></span></p></td></tr><tr><td class="confluenceTd">SMI QoS Field Only</td><td class="confluenceTd"><p><span style="color: black;"><span style="color: inherit;">first_bucket_has_enough_credits = (single_bucket or double_bucket) ? first_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">second_bucket_has_enough_credits = (double_bucket) ? second_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">smi_bucket_qos = (first_bucket_has_enough_credits)        ? smi_qos :</span></span></p><p><span style="color: black;"><span style="color: inherit;">                              (second_bucket_has_enough_credits)  ? Math.max((smi_qos - <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSD), <span class="legacy-color-text-blue3">CTLQLX</span>.QN) :</span></span></span></p><p><span style="color: black;"><span style="color: inherit;"><span>                              smi_qos ;</span></span></span></p><p><span style="color: black;"><span style="color: inherit;">lookup_qos       = (latency_pressure) ? Math.min(smi_bucket_qos + <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSI, <span class="legacy-color-text-blue3">CTLQLX</span>.QM)  </span>: smi_bucket_qos ;</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_qos           = </strong>CTLQM.qos_lookup(lookup_qos)</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_pri             = </strong>CTLQM.pri_lookup(lookup_qos)</span></span></p></td></tr><tr><td class="confluenceTd">No Fields</td><td class="confluenceTd"><p><span style="color: black;"><span style="color: inherit;">first_bucket_has_enough_credits = (single_bucket or double_bucket) ? first_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">second_bucket_has_enough_credits = (double_bucket) ? second_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">smi_bucket_qos = (first_bucket_has_enough_credits)        ? 15:</span></span></p><p><span style="color: black;"><span style="color: inherit;">                              (second_bucket_has_enough_credits)  ? Math.max((15- <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSD), <span class="legacy-color-text-blue3">CTLQLX</span>.QN) :</span></span></span></p><p><span style="color: black;"><span style="color: inherit;"><span>                              15;</span></span></span></p><p><span style="color: black;"><span style="color: inherit;">lookup_qos       = (latency_pressure) ? Math.min(smi_bucket_qos + <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSI, <span class="legacy-color-text-blue3">CTLQLX</span>.QM)  </span>: smi_bucket_qos ;</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_pri             = </strong>CTLQM.pri_lookup(lookup_qos)</span></span></p></td></tr></tbody></table></div><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ConfiguringQoS"><strong><u>Configuring QoS</u></strong></h4><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 68.1471%;"><colgroup><col style="width: 37.105%;"/></colgroup><colgroup><col style="width: 62.7931%;"/></colgroup><tbody><tr><th class="confluenceTh">Action </th><th class="confluenceTh">Register Stimulus</th></tr><tr><td colspan="1" class="confluenceTd">From Initial Reset to Configure Rate Limiting</td><td colspan="1" class="confluenceTd"><p>If cyclich refresh of credits is needed:</p><p><span class="legacy-color-text-blue3">-Write CTLQR.CYCLES with the amount of Cyclcles you want the credits to refresh on.</span></p><p><span class="legacy-color-text-blue3">Configure Primary Bucket</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQCP0.QBRCP to the rate at which you want credits to be added.</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQRAP0.QBRAP to the amount of credits to be refreshed every QBRCP cycles.</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQBSP0.QBSP to the total size of the bucket. </span></p><p><span class="legacy-color-text-blue3">If sending traffic at a lower secondary priority is needed configure the secondary bucket:</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQCS0.QBRCP to the rate at which you want credits to be added.</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQRAS0.QBRAP to the amount of credits to be refreshed every QBRCP cycles.</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQBSS0.QBSP to the total size of the bucket. </span></p><p><span class="legacy-color-text-blue3">-Write CTLQL0.QSD to the amount the QoS should decrease if the secondary bucket is used.</span></p><p><span class="legacy-color-text-blue3">-Write CTLQL0.QN to the minimum possible QoS</span></p><p><span class="legacy-color-text-blue3">Write 1 to CTLQC.E to enable.</span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Initial Reset to Configure Latency Pressure</td><td colspan="1" class="confluenceTd"><p><span class="legacy-color-text-blue3">Configure how much the QoS should increase:</span></p><p><span class="legacy-color-text-blue3">-Write CTLQL0.QSI to the amount the QoS should increase if latency pressure asserts.</span></p><p><span class="legacy-color-text-blue3">-Write CTLQL0.QM to the maximum possible QoS</span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Initial Reset to Configure Latency Pressure and Rate Limiting</td><td colspan="1" class="confluenceTd"><p>Follow <strong>From Initial Reset to Configure Latency Pressure</strong></p><p>Follow <strong>From Initial Reset to Configure Rate Limiting</strong></p><p><span class="legacy-color-text-blue3">Start </span><span class="legacy-color-text-blue3">Traffic</span><span class="legacy-color-text-blue3">.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Initial Reset to Configure QoS Mapping</td><td colspan="1" class="confluenceTd"><p>For QoS 0 to 15 set <span class="legacy-color-text-blue3">CTLQMX.Q<em>&lt;QoS&gt;</em>P to the mapped priority for the modified QoS.</span></p><p><span class="legacy-color-text-blue3">For QoS 0 to 15 set CTLQMX.Q<em>&lt;QoS&gt;</em>IQ to the mapped message QoS for the modified QoS.</span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Traffic how to reconfigure Rate Limiting</td><td colspan="1" class="confluenceTd"><p>Stop Traffic.</p><p>Wait for <span class="legacy-color-text-blue3">CTLCR.BUSY = 0</span></p><p><span class="legacy-color-text-blue3">Follow <strong>From Initial Reset to Configure Rate Limiting</strong></span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Traffic how to reconfigure Latency Pressure</td><td colspan="1" class="confluenceTd"><p>Stop Traffic.</p><p>Wait for <span class="legacy-color-text-blue3">CTLCR.BUSY = 0</span></p><p><span class="legacy-color-text-blue3">Follow <strong>From Initial Reset to Configure Latency Pressure</strong></span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Traffic how to reconfigure QoS Mapping</td><td colspan="1" class="confluenceTd"><p>Stop Traffic.</p><p>Wait for <span class="legacy-color-text-blue3">CTLCR.BUSY = 0</span></p><p><span class="legacy-color-text-blue3">Follow F<strong>rom Initial Reset to Configure QoS Mapping</strong></span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td class="confluenceTd">Enable/Disable Rate <span class="inline-comment-marker" data-ref="d5a5e7b6-ab1d-45e2-bf24-31b241ca6dc2">Limiting</span></td><td class="confluenceTd">Toggle using the <span class="legacy-color-text-blue3">CTLQC.E <span class="inline-comment-marker" data-ref="c6e435d4-5036-471c-9fc1-09a7c9cf5bb8">register</span>.</span></td></tr><tr><td colspan="1" class="confluenceTd">Turn on/off Demotion with Rate Limiting</td><td colspan="1" class="confluenceTd"><p>1) On - <span class="legacy-color-text-blue3">CTLQLX.QSD to non-zero value.</span></p><p>2) Off -<span class="legacy-color-text-blue3"> to 'h0</span></p></td></tr><tr><td colspan="1" class="confluenceTd">Turn on/off Latency Pressure </td><td colspan="1" class="confluenceTd"><p>1) On - <span class="legacy-color-text-blue3">CTLQLX.QSI to non-zero value.</span></p><p>2) Off -<span class="legacy-color-text-blue3"> to 'h0</span></p></td></tr><tr><td class="confluenceTd"><span class="legacy-color-text-blue3">Refresh Rate Limiting Credits and Refresh Bucket Counters</span></td><td class="confluenceTd"><span class="legacy-color-text-blue3">Write 1 to CTLQC.R register.</span></td></tr><tr><td colspan="1" class="confluenceTd">Set Refrech Cycle</td><td colspan="1" class="confluenceTd"><p>Turn off Rate Limiting with <span class="legacy-color-text-blue3">CTLQC.E</span></p><p><span class="legacy-color-text-blue3">Write CTLQR.CYCLES with the amount of Cyclcles you want the credits to refresh on.</span></p><p><span class="legacy-color-text-blue3">Turn on Rate Limiting with CTLQC.E</span></p></td></tr><tr><td colspan="1" class="confluenceTd">Turn off Refresh Cycle</td><td colspan="1" class="confluenceTd"><p>Turn off Rate Limiting with <span class="legacy-color-text-blue3">CTLQC.E</span></p><p><span class="legacy-color-text-blue3">Write  CTLQR.CYCLES with 0</span></p><p><span class="legacy-color-text-blue3">Turn on Rate Limiting with CTLQC.E</span></p></td></tr><tr><td class="confluenceTd"><span class="legacy-color-text-blue3">Turn a Secondary Bucket Off</span></td><td class="confluenceTd"><span class="legacy-color-text-blue3">Write 'h0 to CTLRLQBSSX.QBSS register</span></td></tr><tr><td class="confluenceTd">Have Latency Pressure Go to Fixed QoS if Asserted</td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">Write 15 to CTLQLX.QSI</span></p><p><span class="legacy-color-text-blue3">Write  &lt;Fixed QoS Value&gt; to CTLQLX.QM</span></p></td></tr><tr><td class="confluenceTd">Have Secondary Bucket go to Fixed QoS if Used</td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">Write 15 to CTLQLX.QSD </span></p><p><span class="legacy-color-text-blue3">Write  &lt;Fixed QoS Value&gt; to CTLQLX.N </span></p></td></tr><tr><td class="confluenceTd">Reset the Buckets to a known State</td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">Write 0 to CTLQC.E register.</span></p><p><span class="legacy-color-text-blue3">Bucket Counters will Reset. </span></p><p><span class="legacy-color-text-blue3">Buckets be empty until Enabled.</span></p><p><span class="legacy-color-text-blue3">-or-</span></p><p><strong><span class="legacy-color-text-blue3">Refresh Rate Limiting Credits and Refresh Bucket Counters</span></strong></p></td></tr></tbody></table></div><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimiterClockGate"><strong><u>Rate Limiter Clock Gate</u></strong></h4><p>The Rate Limiter must receive an ungated clock and implement its own clock gating based on bucket usage.</p><div class="page view"><div class="wiki-content"><div class="wiki-content"><div class="wiki-content"><div><p><br/></p><div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager(ExcludefromR1Documentation)">Credit Manager <strong>(Exclude from R1 Documentation)</strong></h3><p>Not in R1 and may change. New uArch is currently being constructed. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReOrderBuffer">Re Order Buffer</h3><p>Reorder buffer is an optional module for re-ordering read (and write) responses in the initiator ATU. <em>This will be a library element that can be re-used in ATU or in the fabric (details will be in ROB/library element uArch spec)</em>. The requests as selected by arbiter will be snooped by the ROB to allocate buffer space for the corresponding responses. The responses, when received, will be stored into the allocated space and read out in order (when available). <strong>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157530/HW-SYM+Reorder+Buffer+Microarchitecture+Specification" data-linked-resource-id="16157530" data-linked-resource-version="33" data-linked-resource-type="page">HW-SYM Reorder Buffer Microarchitecture Specification</a></strong></p></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BeatBuffer">Beat Buffer</h3><p>The beat buffer inside the CTL initiator is used to accumulate partial response data beats into full beats to be used by the layer. It is the last block on the request path and the first block on the response path.</p><p>A beat buffer is needed if there are any narrower targets in the system that can read interleave. If a beat buffer is needed at minimum there needs to be 1 entry, however for full capability there should be maxOutRd number of entries </p><p><strong>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16167053/OBSOLETE-DELETE+HW-SYM+sym_beat_buffer" data-linked-resource-id="16167053" data-linked-resource-version="9" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_beat_buffer</a> for block level information</strong></p></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Timing">Timing</h3><p>The timing inside the CTL layer can be controlled through four parameters:</p><ul><li>ctlReqPipe - Will pipe the request ndp and dp coming into the CTL layer.</li><li>ctlRespPipe - Will pipe the response ndp and dp going out of the CTL layer.</li><li>ctlPipeCtxt - Indicates pipe depth of the context lookup. Needs to be equal to or less than log2ceil(Number of Context Entries)</li><li>ctlPipePam- Indicates pipe depth of the PAM lookup. Needs to be equal to or less than log2ceil(Number of PAM Entries)</li><li>pipeLevelRob -Will pipe the response ndp and dp going out of the RoB.</li></ul><div><p><br/></p></div><div><div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ErrorGeneration">Error Generation</h3><div>There can be two types of errors: (All errors will generate an interrupt)</div><div><ul><li>Internally Generated Errors - Errors appear within the operation of the Common Layer. In all cases, errors will be responded in sequence number order (strict) as to not break any ordering protocols. At the moment there are three:<ul><li>RW Error - This means that a PAM entry indicated a target can only receive Writes and or Reads and the incoming transaction is the opposite.<ul><li>The transaction will be dropped and not forwarded to the network </li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li><li>Timeout Error - This means a transaction hasn't seen a completed response within a timeout to 2*timeout amount of cycles. In this case, the sequence number of the timed-out transaction will be poisoned.<br/><ul><li>This means if a response is seen later than the timeout the response will be squashed.</li><li>This sequence number will not be used in any future transactions, and will not become unpoisoned until after reset.</li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li><li>Buffered Write - Error seen inside the response of a buffered write. Since the response has already been made an interrupt will be set and the context will be cleared.</li><li>Decode Error - Error occurs when there is not a match to the PAM table and decode errors are enabled. (If not enabled the packet will match the default entry)<ul><li>The transaction will be dropped and not forwarded to the network </li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li><li>Exclusive Error - Error occurs when there is an exclusive transaction that is split. <ul><li>The transaction will be dropped and not forwarded to the network </li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li><li>Power Domain Error - Error occurs when a transaction is sent to a target through a domain which is off as indicated by pamTargDomain and domainInt<ul><li>The transaction will be dropped and not forwarded to the network </li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li></ul></li><li>Externally Generated Errors - Errors show up inside the packet and/or native interface and aren't generated in the common layer. In this case, the common layer will forward the error through with the appropriate signaling.<ul><li>Transport Error - If a transport error is seen on a response an interrupt will be asserted. </li></ul></li></ul><p>In addition to the interrupt the target ID will be loaded into the register for debugging purposes.</p></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseGeneration">Response Generation</h3><div><p>A response can be generated (optional) by the CTL layer for several reasons -</p><ol><li><u>Buffered Write Response</u> -  Generate a response for the buffered write request (after ID checking in request context). The write response for that specific transaction from the slave needs to be masked for this request. There is an “eligible” for the write response which gets set when there is no ID ordering dependency (check based on request ID or both request ID and target ID). <ol><li>If there is a dependency the write will flow through without sending a buffered write response. </li><li>This can be enabled by the parameter (enBufWrite).</li></ol></li><li><u>Error Response</u> - If an error occurs a response will be sent to complete the protocol. If the error is a read blank beats will be sent again to complete the protocol.<ol><li>If the error is a timeout error and some read beats have come back, the initiator will complete the read will error'd out blank beats.</li></ol></li></ol><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1028" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-12%2014:55:22.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReadDataInterleaving">Read Data Interleaving</h3><p>Read Data interleaving is when data from different transactions can come back interleaved inside one another. The Table below shows the possible situations:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Initiator Supports Interleaving</th><th colspan="1" class="confluenceTh"><span>Target Supports Interleaving</span></th><th class="confluenceTh">Action</th></tr><tr><td class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td class="confluenceTd">The CTL Initiator will take no action.</td></tr><tr><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd"><span>The CTL Initiator will need to interlock with the target. Barrier until all responses for that ID are received.</span></td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><span>The CTL Initiator will take no action. </span></td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">The CTL Initiator will take no action.</td></tr></tbody></table></div></div></div></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-EchoField(ExcludefromR1Documentation)"><span style="font-size: 16.0px;font-weight: bold;">Echo Field </span> <strong>(Exclude from R1 Documentation)</strong></h3><p>The echo bus is a collection of signals taken from the CTL Interface, stored with a request, and then put in the response. The width of the field is determined by the width of the echo field in the response path inside InterfaceCTL.</p><p>How to drive this bus is determined by echoFieldHash. If the echo bus is narrower than this parameter definition the top bits will be cut off. If the width is wider than this definition 0 will be driven to the extra bits. </p><p>The echoFieldHash must be a valid Verilog statement only using signals defined by InterfaceCTL. Typically these bits could be used by the Native Layer to get information about a request to do proper Narrow/Wide conversion.</p><p>An example of echoFieldHash  for an echo bus of width  (wCtlReqBurstType + wCtlReqBurstSize + wCtlReqMaxBurstSize) is: &quot;{txn_hdr_burstType, txn_hdr_burstSize, txn_maxBurstSize}&quot;</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserField">User Field</h3><p><u>Request User</u></p><p>The user field is defined in a very similar way to the echo field, however this field will be passed on to the SMI Request user field. The width of the field is determined by the width of the user field in the SMI request path.</p><p class="wiki-content">If the user bus is narrower than this parameter definition the top bits will be cut off. If the width is wider than this definition 0 will be driven to the extra bits. </p><p><u>Data User</u></p><p class="wiki-content">If the user bus is narrower than this parameter definition the top bits will be cut off. If the width is wider than this definition 0 will be driven to the extra bits. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MismatchinTargetParameters">Mismatch in Target Parameters</h3><p>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16171451/HW-SYM+Common+Layer+Transformations" data-linked-resource-id="16171451" data-linked-resource-version="65" data-linked-resource-type="page">HW-SYM Common Layer Transformations</a> for more information about Common Layer behavior when initiator and target parameters do not match.</p><h1 class="wiki-content" id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerTarget"><strong style="font-size: 24.0px;"><u>Common Transaction Layer Target</u></strong></h1></div></div><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters.1"><strong>Parameters</strong></h2><p>{</p><p>   <strong>// General </strong></p><p>    &quot;nodeId&quot; : 0 to inf, // integer</p><p>    &quot;defTId&quot; : 0 to inf, // integer</p><p>    &quot;maxPduSz&quot; :  0 to inf, // integer, Max payload in number of bytes. Must be power of two. 0 - Can Accept any Size</p><p>    &quot;maxOutRd&quot; :  0 - 512, // integer, Max amount of outstanding reads</p><p>    &quot;maxOutWr&quot; : 0 - 512, // integer, Max amount of outstanding writes</p><p>    &quot;maxOutTotal&quot; : 0 - 512 , // integer, Max amount of outstanding transactions</p><p>    &quot;enBufWrite&quot; : 0 or 1, // integer, enable buffered writes. 0 - disable, 1 - enabled</p><p>    &quot;fixedSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;incrSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;wrapSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;narrowSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;readInterleaveSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;widthAdaptionSupported&quot; : false or true, // false - width adaption not supported at target, true - width adaption supported at target</p><p>    &quot;mapBaseAddr&quot; : &quot;string&quot;, // string representing the base address/offset of the target. &quot;16'hF000&quot; would be an example.</p><p>    &quot;mapBaseMask&quot; : &quot;string&quot;, // string representing the size of the entry in mask form for the base address/offset. &quot;16'hF000&quot; would be an example.</p><p>    &quot;idCompMask&quot; : {{wCtlId{1'b0}} to {{wCtlId{1'b1}} where only wSmiId bits are asserted, // integer, Mask used to indicate how the ID is compressed. Only unmasked bits (indicated by 1) will be used.</p><p>  <strong> // Queue and Arbiter</strong></p><p>    &quot;queueMap&quot; : [&quot;string&quot;, &quot;string&quot;, &quot;string&quot; , ...] // An array of strings which determine which queue a transaction will go to. These strings are verilog conditions involving qos, vc, and type. Logic will be constructed so the conditions are checked right to left (queue 0 to nQueues). The left most condition will be the default and the condition will be effectively ignored.  </p><p>    &quot;queueMapRW&quot; : 0 or 1, // 1 Seperate RW Queues, 0 - Shared RW Queue</p><p>    &quot;queueDepth&quot; :0 to inf, // Depth of each Queue</p><p>    &quot;vcMap&quot; : [int, int, ...], // Array of integers indicating which VC is assigned to each queue. Each entry in the array is assigned a queue</p><p><strong>    // Credit Manager</strong></p><p>    &quot;crdMngrEn&quot; : 0 or 1, // Enable Credit management.</p><p>    &quot;wCrdMngrReqCnt&quot; : [int, int, ...], // Array of integers indicating the request dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>    &quot;wCrdMngrDataCnt&quot; :  [int, int, ...], // Array of integers indicating the data dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>    &quot;crdDataUnit&quot; : 1 to inf, // Data Credit Units, Has to be power of 2</p><p>    &quot;mCrdMngrType&quot;  :  [int, int, ...],// Credit Message Type 0 - Shared or 1 Dedicated</p><p><strong>   // Interface Parameters</strong></p><p>    &quot;interfaces&quot; :{</p><p>           &quot;clkInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168894/InterfaceCLK" data-linked-resource-id="16168894" data-linked-resource-version="5" data-linked-resource-type="page">InterfaceCLK</a>&quot;},</p><p>           &quot;smiReqInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;SMI Interface Def File&gt; }, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a>&quot;},</p><p>           &quot;smiRespInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;SMI Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a>&quot;},</p><p>           &quot;ctlReqInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;CTL Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a>&quot;},</p><p>           &quot;ctlRespInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;CTL Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a>&quot;},</p><p>           &quot;pmaInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164503/InterfacePMAControl" data-linked-resource-id="16164503" data-linked-resource-version="6" data-linked-resource-type="page">InterfacePMAControl</a>&quot;},</p><p>           &quot;statsInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot; <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a>&quot;, ... TODO},</p><p>           &quot;protInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &lt; See InterfacePROT Params&gt; }, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168667/InterfacePROT" data-linked-resource-id="16168667" data-linked-resource-version="16" data-linked-resource-type="page">InterfacePROT</a>&quot;},</p><p>           &quot;myNodeIdInt&quot; : { &quot;name&quot;: &quot;a_string&quot;, &quot;params&quot;: { &lt; See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/950927381/InterfaceNodeId" data-linked-resource-id="950927381" data-linked-resource-version="1" data-linked-resource-type="page">InterfaceNodeId</a> Params&gt; }, &quot;direction&quot;: &quot;slave&quot;, &quot;interface&quot;: &quot;myNodeIdInt&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/950927381/InterfaceNodeId" data-linked-resource-id="950927381" data-linked-resource-version="1" data-linked-resource-type="page">InterfaceNodeId</a>&quot; }</p><p>    },</p><p><strong>   // Protection, Error,  and Power Control Parameters </strong></p><p>    &quot;trustZone&quot; : 0 or 1, // integer, enable trust zone support for APB native layer</p><p>    &quot;respTimeoutChk&quot; : 0 or 1, // integer, enable response timeout check</p><p>    &quot;respTimeoutChkUnit&quot; : 16 or 64, // integer, c<span>lock units for response timeout</span></p><p>    &quot;ctlProtectionScheme&quot; :&quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16170235/protectionScheme" data-linked-resource-id="16170235" data-linked-resource-version="9" data-linked-resource-type="page">protectionScheme</a> // This defines how dad will be checked and dp_prot generated. See more detail in common error section.</p><p>    &quot;stateProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;registerProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;memoryProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;csr&quot; : &quot;&quot; or Register Definition Object </p><p>}</p></div></div><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers.1"><strong>Registers</strong></h2><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 100.0%;"><colgroup><col style="width: 6.58617%;"/></colgroup><colgroup><col style="width: 9.16575%;"/></colgroup><colgroup><col style="width: 5.98244%;"/></colgroup><colgroup><col style="width: 11.2514%;"/></colgroup><colgroup><col style="width: 4.55543%;"/></colgroup><colgroup><col style="width: 10.9769%;"/></colgroup><colgroup><col style="width: 16.9594%;"/></colgroup><colgroup><col style="width: 16.685%;"/></colgroup><colgroup><col style="width: 17.8375%;"/></colgroup><tbody><tr><th class="confluenceTh">Register</th><th class="confluenceTh">Address (Temporary)</th><th class="confluenceTh">Field Name</th><th class="confluenceTh">Field Bits</th><th class="confluenceTh">Access</th><th class="confluenceTh">Reset Value</th><th class="confluenceTh">Description</th><th class="confluenceTh">Optional</th><th class="confluenceTh">Controlling Parameter</th></tr><tr><td colspan="9" class="confluenceTd"><em><strong>Common Layer Control Registers</strong></em></td></tr><tr><td class="confluenceTd">CTLCR</td><td class="confluenceTd">0x0</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">BUSY</td><td class="confluenceTd">0</td><td class="confluenceTd">ro</td><td class="confluenceTd">0</td><td class="confluenceTd">Busy Indicator for the CTL Target</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">CTLTCR</td><td class="confluenceTd">0x1</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td rowspan="2" style="text-align: center;" class="confluenceTd">X</td><td rowspan="2" class="confluenceTd">timeoutUseExternalValue</td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">COUNT</td><td class="confluenceTd">0:31</td><td class="confluenceTd">rw</td><td class="confluenceTd">0</td><td class="confluenceTd">Timeout Count (Clock Cycles) (0 == disabled)</td></tr><tr><td colspan="9" class="confluenceTd"><strong><em>Statistics Control Registers</em></strong></td></tr><tr><td class="confluenceTd">CTLSCR</td><td class="confluenceTd">0x4</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td rowspan="5" style="text-align: center;" class="confluenceTd">X</td><td rowspan="5" class="confluenceTd"><span>interfaces.statsInt != null</span></td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">E</td><td class="confluenceTd">0</td><td class="confluenceTd">rw</td><td class="confluenceTd">0</td><td class="confluenceTd">Enable Statistics</td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">SMASK</td><td class="confluenceTd">1</td><td class="confluenceTd">rw</td><td class="confluenceTd">0</td><td class="confluenceTd">Enable Source Mask (0 == collect on all source IDs, 1 == collect on matching source ID)</td></tr><tr><td class="confluenceTd">CTLSSR</td><td class="confluenceTd">0x5</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">SRC</td><td class="confluenceTd">X:0</td><td class="confluenceTd">rw</td><td class="confluenceTd">0</td><td class="confluenceTd">Source ID to collect statistics on</td></tr><tr><td colspan="9" class="confluenceTd"><strong><em>Error Registers</em></strong></td></tr><tr><td class="confluenceTd">CTLTIR</td><td class="confluenceTd">0x40</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Timeout Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Timeout Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">SID</td><td class="confluenceTd">SID_WIDTH+1:2</td><td class="confluenceTd">ro</td><td class="confluenceTd">0</td><td class="confluenceTd">Timeout Source ID</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr></tbody></table></div><div class="page view"><div class="wiki-content"><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagrams"><strong>Top Level Diagrams</strong></h2><p><strong>TODO: Bring-in functionality from native layer, burst support, exclusive monitor</strong></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FullTop-levelExample"><strong>Full Top-level Example</strong></h3><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20Full.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TypicalTop-levelExample"><strong>Typical Top-level Example</strong></h3><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20Typ.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MinimumTop-levelExample"><strong>Minimum Top-level Example</strong></h3><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20Min.png?api=v2"></span></p><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.2"><strong>Description</strong></h2><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BurstTranslation"><strong>Burst Translation</strong></h3><p>Please see <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16171451/HW-SYM+Common+Layer+Transformations#HW-SYMCommonLayerTransformations-CommonLayertoCommonLayerTransformations" data-linked-resource-id="16171451" data-linked-resource-version="65" data-linked-resource-type="page">HW-SYM Common Layer Transformations#CommonLayertoCommonLayerTransformations</a> for an updated burst translation table. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-OutputQueues"><strong>Output Queues</strong></h3><p>The output queues store the requests (or their index/attributes) that queue up before being sent out to the native layer. The requests can be either read or write requests or both.</p><p><u>Queue Map:</u></p><p>The Queue mapping function exists if there exists more than one output queues. The Queue mapping is a lookup function of – {VC/QoS, Req_type} as determined by the parameter (queueMap).</p><p>Queue Map = Function(VC or Qos, Req_type)</p><ul><li>If there are VCs, the queue mappings are assigned per VC. Otherwise, the queues mappings are per QoS in the packet header (mapped QoS). There is a configuration register per VC/QoS.</li><li>In addition, Queue number can be further separated for request type (Rd/Wr), if enabled by parameter queueMapRW (the total number of queues – nQueues, are doubled – one set for read, other set for writes).</li></ul><p>Examples of queueMap:</p><p>[</p><p>   &quot;(vc == 0) &amp; (type == READ)&quot;,</p><p>   &quot;(vc == 0) &amp; (type == WRITE)&quot;,</p><p>   &quot;(vc == 1) &amp; (type == READ)&quot;,</p><p>   &quot;(vc == 1) &amp; (type == WRITE)&quot;</p><p>]</p><p>will functionally be</p><p>case(1'b1) </p><p>    &quot;(vc == 0) &amp; (type == READ)&quot; : queue = 0;</p><p>    &quot;(vc == 0) &amp; (type == WRITE)&quot; : queue = 1;</p><p>    &quot;(vc == 1) &amp; (type == READ)&quot; : queue = 2;</p><p>    default: queue = 3;</p><p>endcase</p><p><br/></p><p><u>Queues:</u></p><p>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16161182/OBSOLETE-DELETE+HW-SYM+sym_common_queue" data-linked-resource-id="16161182" data-linked-resource-version="12" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_common_queue</a></p><p>The Output Queues store the requests that queue up for arbitration waiting to go out to the target. The requests can be either read or write requests or both, and storage is in the FIFOs or pipeline stages. The write data is stored in the data buffer.</p><p><em>Single queue mode</em> (Shared:1 -RW or Separate:1-R and 1-W):</p><p>Each queue stores the request message(s), and can have a depth of 1 or more. If depth=1, it is just register pipe stage, else it is a FIFO. There will be only 1 queue for writes or reads each/shared, and only 1 corresponding write data buffer.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20OutputQueues%20Basic.png?api=v2"></span></p><p><em>Multi Queue Mode:</em></p><p>Multiple Queues for supporting enhanced QoS (rate limiting/credits/VC per mapped QoS) per queue basis. This should be used only when there are multiple flows to this target with separate credits/VCs for those flows.</p><p>There are multiple Queues, each storing the request, and for writes - write data pointer also. Each queue can have read-only (request only, no write pointers) or write-only or both read/write requests.</p><p>A new valid request can bypass a queue (FIFO or pipe stage), if the queue is empty and the arbiter is ready to accept it the same cycle, otherwise it will be stored in the Queue. The queues can generate (and receive) separate backpressure signals, for supporting VC-based backpressure.</p><p><em><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="800" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-10%2018:34:24.png?api=v2"></span></em></p><p><em>Write Data Buffer</em>: </p><p>Write data buffer is a separate module to separate datapath from control. It is a memory/register-file that stores the data for write requests. The write data buffer can get fragmented (for multi queue mode) and it allows data to be stored in non-contiguous locations. There is a valid bit per entry to indicate if the entry is empty or has valid data. There is pointer per entry to point to the next beat of a write request (an extra bit is used to indicate invalid pointer). When a new write request is written, the first write data buffer address is stored in the request buffer. The following write beats (may or may not be written in contiguous locations) have their address stored in the pointer location of the previous data beat (previous address).</p><p>Wdata_read FSM: </p><p>This FSM controls the reading out of the write data (if any) for a write request that gets selected/sent out by the arbiter. Based on the queue number and request size, it reads out the corresponding first write data entry for the given queue and also updates the next address by the next pointer stored at that location. . Only one write request can be pending at a time (though one or more read requests can be sent out while write data is being drained from the write data buffer) or a write request per-VC (when VCs are present) – maintains the write data state per VC so as to be able to switch between VCs on per data-beat basis.</p><p>The data buffer functionality will be implemented by a library module <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157962/OBSOLETE-DELETE+HW-SYM+sym_data_chain_buffer" data-linked-resource-id="16157962" data-linked-resource-version="12" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_data_chain_buffer</a>.</p><p>Register-file vs. Memory:</p><p>Memory has extra latency for read and writes (extra 1 cycle for write, 1-2 cycle for read depending if read data is registered for timing). It will be determined by synthesis results what is the crossover point (probably register file till 8-beats of data or 1Kb size). The control logic is also affected to affected to handle the memory read latency.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestArbiter">Request Arbiter</h3><p>Same as CTL Initiator arbiter section listed above. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context.1">Context</h3><p>A Context must be stored for each transaction if the features mentioned in the table are needed. It is possible to have no context if none of the features listed are needed.</p><p><u>ID Compression:</u> This is needed if ID Compression is enabled. </p><p><u>Ordering</u>: This is not needed if only a single queue is used. </p><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">Field Name</th><th style="text-align: center;" class="confluenceTh">Field Width</th><th style="text-align: center;" class="confluenceTh">Driver</th><th style="text-align: center;" class="confluenceTh">Set Condition</th><th style="text-align: center;" class="confluenceTh">Clear Condition</th><th colspan="1" style="text-align: center;" class="confluenceTh">ID Compression</th><th colspan="1" style="text-align: center;" class="confluenceTh">Ordering</th><th colspan="1" style="text-align: center;" class="confluenceTh">Description (TODO)</th></tr><tr><td class="confluenceTd">Id</td><td style="text-align: center;" class="confluenceTd">Request Interface In ID</td><td style="text-align: center;" class="confluenceTd">Request Interface In ID</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">Compressed ID</td><td style="text-align: center;" class="confluenceTd">Request Interface Out ID</td><td style="text-align: center;" class="confluenceTd">New Compressed Id</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">Sequence Number</td><td style="text-align: center;" class="confluenceTd">Request Interface Out Seq Num</td><td style="text-align: center;" class="confluenceTd">New Sequence Number</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd">Since seq_num is unique it will be used for matching responses..</td></tr><tr><td class="confluenceTd">Address</td><td style="text-align: center;" class="confluenceTd">Request Interface Out Address</td><td style="text-align: center;" class="confluenceTd">Request Interface In Address</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Exclusive</td><td colspan="1" style="text-align: center;" class="confluenceTd">1</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In atomic[1]</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Target ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Target ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Target ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Youngest Address</td><td colspan="1" style="text-align: center;" class="confluenceTd">1</td><td colspan="1" style="text-align: center;" class="confluenceTd">1'b1</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">New Transaction Depends on This Address</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Ordering ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Ordering ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Ordering ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Channel ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Channel ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Channel ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Depend</td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>1</span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>Dependent on existing entry</span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>Entry Written To</span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>Never</span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>X</span></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Queue</td><td colspan="1" style="text-align: center;" class="confluenceTd">log2ceil(nQueue)</td><td colspan="1" style="text-align: center;" class="confluenceTd">Queue Map Output</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Type</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Type</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Type</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Last</td><td colspan="1" style="text-align: center;" class="confluenceTd">1</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Last</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Valid</td><td colspan="1" style="text-align: center;" class="confluenceTd">1</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Valid</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Response Matched This Entry</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager">Credit Manager</h3><p>The credit manager in the CTL target block can generate credit messages for credit initialization or re-sync (based on credit control configuration register), and credit grants messages to the initiators. The types of credits supported (parameterized) are -</p><ol><li>Dedicated credits -  These credits are pre-allocated at initialization time, and there are no corresponding credit request for these. The dedicated credits are returned (granted again) when a request message (marked with dedicated credit usage) gets sent out of the CT layer output queues. The dedicated credits can be granted through configuration (initialization or re-initialization) or returned once the requests that use dedicated credits, are sent out to the native layer.  There are no credit counters for dedicated credits.</li><li>Shared credits - These credits need to be requested when needed (there is a grant for a given request). There is a request and data credit counter maintained by the credit manager, and a credit request can be granted based on request/data buffer usage.</li><li>Non-credits - These requests without credits, are ignored by the credit manager but can affect the grant of shared credits as they share the same request/data buffer pool.</li></ol><p>Credit units -</p><ol><li>Request Credits - A credit per read or write request</li><li>Data credit - Credit for write data, the units are fixed (parametrized, example – 8B/16B/32B/64B).</li></ol><p>Dedicated Credit Return -</p><p>The dedicated credits to be returned are saved in a credit return array (or into a FIFO if the array is full). Both credit return array and FIFO size are parameterized. The credit return entries have their source ID compared with response messages to see if there is match (to send credit message as part of response). The credit return array stores the following -</p><ol><li>SRC ID</li><li>Credit Msg Type (req, data, req+data)</li><li>Req credits</li><li>Data credits</li></ol><p>There is a timeout that can occur for credit grants sitting in the credit return array (or if the credit FIFO gets almost full) – that will result in sending of next credit message, otherwise if there is a HIT for the current response – the credit grant can be added to the response message.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20CreditManager.png?api=v2"></span></p><p>The credit grant when being added to the credit return array – also checks if there is already an existing credit grant for the same Source ID – and update the existing credit return array entry (unless that credit message is sent out the same cycle – for timing reasons).</p><p><u>Shared Credit Grant</u> (TODO: not in R1 implementation scope) - </p><p>There is a credit counter for shared credits. Based on the credit counter (incremented on shared credit grant, decremented on credit return), and additionally buffer thresholds (optional – based on QoS/VC for the request), a shared credit request can be granted or rejected (credit response sent back without credit grant). The shared requests are held in a register(s)/FIFO, and when it gets full the responses have to be generated – with or without grant.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseQueues&amp;Arbiter">Response Queues &amp; Arbiter</h3><p>The response queues store the response messages before being sent out to the packet layer (to go onto to the fabric’s response network). The response messages can be either read or write transaction requests, or for credit/control messages (not held in response queues).</p><p>Transaction response queue map (nRespQueue &gt; 1): is per-VC (same VC to queue map function as that for output queues but shared for read/write responses).</p><p>The queues are FIFOs – response message FIFO and response data FIFO (only if there are read responses), if FIFO depth &gt;=2, Else a register pipe.</p><p><em>Arbiter</em>:</p><p>The response arbiter selects one of the response queue message or a credit/control message (if any) to be sent out to the SMI interface to packet layer. This will the library element <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16167155/OBSOLETE-DELETE+HW-SYM+arb_pri_rr1" data-linked-resource-id="16167155" data-linked-resource-version="9" data-linked-resource-type="page">OBSOLETE-DELETE  HW-SYM arb_pri_rr1</a> reused here.</p><p>The credit/control message, if exists, has the higher priority/weight over the response queue(s). The credit messages can be generated by the credit manager.</p><p>There are 3 scenarios -</p><ol><li>No (or single) response queue – there is no arbiter</li><li>wo queues (no VC, but separate read, write response queues) – there is a simple arbiter to select between the two queues. For read responses, the corresponding read response FIFO is selected to send out response data till last beat is sent out (the last beat can be a dummy last).</li><li><p>Multi queues (with VC, 2 or more queues) – hierarchical VC-arbiter as described in the output queue arbiter section.</p></li></ol><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponsePath">Response Path</h3><p>The response path performs the following functionality:</p><ol><li><p>Looks up the context to update for the given response ID. Based on context type (if exists), this will be an index into the context or a compare into the context array.</p><ol><li><p>The selected context data can be used to generate the response message (get the SRC id of the request, which is the target id for the response).</p></li><li><p>The context can mark this response to be done if last response beat is received.</p></li></ol></li><li>There is PIPE control to hold/pipeline the response till the context array lookup gets done. Also, the response data is held off till the response is not ready (context lookup done). The control logic can also generate a dummy response data beat to truncate a message if required due to response data timeout (configurable), or change of response ID without the last response beat.</li><li>The target ID can then be used to do path lookup (optional – can be done in SMI packetizer) to get the route for the message.</li></ol><p><br/></p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20ResponsePath.png?api=v2"></span></p><p><u>Response timeout</u>:</p><p>There is response timeout (Error checking – optional/parameterized with respTimeoutChk) that walks through the context to check for timeout response, and if timeout occurs – clears the context and generates an error response.</p><p>Timeout logic walks through the context entries that are valid, and marks a pending flag for a given entry at a time. If after a configurable number of cycles, there are no response updates to that entry – that is pending flag still set (cleared by any response lookup to that entry), it will be timed-out. A response with error is generated (apart from interrupt set) and the context is cleared out for the timed-out response. If the entry is not timed-out, the time-out logic moves to next open entry in the context table.</p><p>Also, if the response ID lookup in the context fails – that is no match (due to error/timeout), the response is discarded and interrupt is set. (TODO: which interrupt?)</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowPacking/Unpacking">Narrow Packing/Unpacking</h3><p>The CTL Target is also responsible for packing/unpacking of narrow transactions. A narrow transaction in this context is defined when txn_hdr_burstSize (Burst Width)  is smaller than txn_hdr_maxBurstSize (Channel Width).  </p><p>Please see the section above on &quot;Narrow Transactions&quot; for more details. </p><p>The CTL Target will receive request transactions and unpack them accordingly to the CTL interface. It will also receive response transactions and pack them accordingly to the SMI interface. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExclusiveMonitor">Exclusive Monitor</h3><p>The exclusive monitor will be instantiated on targets that can receive exclusive transactions. Please see <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157422/HW-SYM+Exclusive+Monitor+Micro-architecture+Specification" data-linked-resource-id="16157422" data-linked-resource-version="19" data-linked-resource-type="page">HW-SYM Exclusive Monitor Micro-architecture Specification</a> for more information. </p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SharedSpecification"><u><strong>Shared Specification</strong></u></h1><h2 class="page view" id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PMAControl"><strong>PMA Control</strong></h2><p class="page view">input asleep - Indication that the CTL block has been successfully put in the asleep state. Level Signal.</p><p class="page view">input goto_sleep - Indication that the CTL must now go to sleep. The CTL initiator will stop accepting transactions. The CTL target will continue to accept transactions. </p><p class="page view">output busy - Indication that the CTL block has an outstanding transaction.</p><p class="page view">              Initiator: This will be high if there is any request without a completed response. (0 Outstanding Transactions)</p><p class="page view">               Target: This will be high until all pending responces are sent by the CTL. (0 Outstanding Responses)</p><p class="page view">output abort - Currently not used.</p><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FaultReporting"><strong>Fault Reporting</strong></h2><p><strong>All faults will be reported through the CTL Block's <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168667/InterfacePROT" data-linked-resource-id="16168667" data-linked-resource-version="16" data-linked-resource-type="page">InterfacePROT</a></strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><tbody><tr><th class="confluenceTh">Protection</th><th class="confluenceTh">Parity</th><th class="confluenceTh">ECC Single</th><th class="confluenceTh">ECC Double</th></tr><tr><td class="confluenceTd">memory</td><td class="confluenceTd">uncorrectable</td><td class="confluenceTd">correctable</td><td class="confluenceTd">uncorrectable</td></tr><tr><td class="confluenceTd">state</td><td class="confluenceTd">uncorrectable</td><td class="confluenceTd">uncorrectable</td><td class="confluenceTd">uncorrectable</td></tr><tr><td colspan="1" class="confluenceTd">register</td><td colspan="1" class="confluenceTd">uncorrectable</td><td colspan="1" class="confluenceTd">correctable</td><td colspan="1" class="confluenceTd">uncorrectable</td></tr></tbody></table></div><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-DataProtection"><strong>Data Protection</strong></h2><p>Data protection will be checked on the data at the sender of the data, and then dropped. It will then be regenerated at the other end. The type of protection is defined by ctlProtectionStyle.</p><ul><li>Read Data: Checked at Target and regenerated at the Initiator.</li><li>Write Data: Checked at the Initiator and regenerated at the target.</li></ul><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixA.ExampleStripingTable"><strong>Appendix A. Example Striping Table</strong></h1><p><strong>Example Striping Table</strong></p><p>strpGrpSize = 1024B, num_targ = 3, strpWStrpBits = 3, pamSze = 32kB (15 bits)</p><ul><li> MSB = log2(pamSze)  = 15</li><li> column a) address[MSB -1 :N] = address[14:10]</li><li> column b) address[MSB -1 : MSB -1-log2(num_targ )] = address[14:13]</li><li> column c) address[N + strpWStrpBits - 1:N]  = address[12:10]</li></ul><p>target entry</p><ul><li>target entry = (addr[14:13] + address[12:10]) % 3</li></ul><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">address[14:10]</th><th class="confluenceTh">address[14:13]</th><th class="confluenceTh">address[12:10]</th><th colspan="1" class="confluenceTh">Target Channel</th><th colspan="3" class="confluenceTh">address[12:10] in Channel</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">0</td><td class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">0</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">0 </td><td class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">0 </td><td class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">3 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">3</td></tr><tr><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">4 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">5 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">6</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">6 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">6</td></tr><tr><td colspan="1" class="confluenceTd">7</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">7 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">7</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">9</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">10</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">2</td></tr><tr><td colspan="1" class="confluenceTd">11</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">3 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">12</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">4 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">13</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">5 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">5</td></tr><tr><td colspan="1" class="confluenceTd">14</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">6 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">6</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">15</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">7 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">7</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">16</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">17</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">1</td></tr><tr><td colspan="1" class="confluenceTd">18</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">19</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">3 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">20</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">4 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">4</td></tr><tr><td colspan="1" class="confluenceTd">21</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">5 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">22</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">6 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">6</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">23</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">7 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">7</td></tr></tbody></table></div><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixB.CTLInitiatorContext/QueueFlow(Sketch)(InProgress)"><strong>Appendix B. CTL Initiator Context/Queue Flow (Sketch) (In Progress)</strong></h1><div><strong><br/></strong></div><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1400" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-23%2010:57:6.png?api=v2"></span></p><p><strong>/======================================================/</strong></p><p><strong>TODO List (New Additions):</strong></p><ul class="inline-task-list" data-inline-tasks-content-id="16156349"><li data-inline-task-id="22">Multicast</li></ul><p><strong>TODO List (Specific Points from Benoit's Notes):</strong></p><div><ul class="inline-task-list" data-inline-tasks-content-id="16156349"><li data-inline-task-id="24">Need WUSER and RUSER support</li><li data-inline-task-id="25">Need Shared Credits</li><li data-inline-task-id="26">Further explanation of user drop in modules</li><li data-inline-task-id="27"><s>CTL needs to be able to function without knowing a Native Type (Ordering rules?)</s></li><li class="checked" data-inline-task-id="28">Non power of 2 outstanding reads/writes (By definition)</li><li class="checked" data-inline-task-id="29">Need to explain dummy bit more in read interleaving section</li><li class="checked" data-inline-task-id="30">Valid signal -&gt; 1 for each VC</li><li data-inline-task-id="31">Just redo diagrams</li><li class="checked" data-inline-task-id="32">CTL needs to store context about narrow conversions for the Native Layer to use</li><li class="checked" data-inline-task-id="33">&quot;Echo&quot; Bits</li><li class="checked" data-inline-task-id="34">Route is Optional </li><li class="checked" data-inline-task-id="35">Address hashing for the stripe function</li><li class="checked" data-inline-task-id="36">Add Boundary Based Column in PAM</li><li class="checked" data-inline-task-id="37">Add interleaving in PAM</li><li data-inline-task-id="38"><s>Address need for Narrow to Wide reassembly</s></li><li class="checked" data-inline-task-id="39">Need to WRAP over stripped regions</li><li class="checked" data-inline-task-id="40">Narrow to Wide wrap support</li><li class="checked" data-inline-task-id="41">Only split wrap if target does not support wrap</li><li class="checked" data-inline-task-id="42">Always have ID Interlock possibilities</li><li data-inline-task-id="43"><s>Queue Map based on request ID along with Target ID and Request Type</s></li><li data-inline-task-id="44">1 Queue per VC might be only useful option</li><li data-inline-task-id="45">Dynamic QoS depending on bucket status</li><li class="checked" data-inline-task-id="47">Need to interlock if CTL I doesnt support interleaving but target does</li></ul></div><p><strong>TODO List (Specific Points from Review):</strong></p><ul class="inline-task-list" data-inline-tasks-content-id="16156349"><li data-inline-task-id="1">Move Burst Alignment Function to CTL Target </li><li class="checked" data-inline-task-id="48">Move Conversion(Narrow/Wide) to the CTL Initiator (Packing) </li><li data-inline-task-id="49">...and Target (Unpacking). </li><li data-inline-task-id="2">Move Exclusive Monitor to be inside CTL Target</li><li class="checked" data-inline-task-id="3">Add parameters to have a finer grain control of supported burst types in CTL Init</li><li class="checked" data-inline-task-id="4">Remove enIdInterlock</li><li class="checked" data-inline-task-id="5">ID Compression defined by widths of CTL ID vs SMI ID</li><li data-inline-task-id="6">Address the two context configurations: Small and Efficient, Large and Pipelined</li><li class="checked" data-inline-task-id="7">Credits need to be classified on a per buffer basis.</li><li class="checked" data-inline-task-id="8">Add Striping Function: Stripe based on some hash of all address bits.</li><li class="checked" data-inline-task-id="9">Non power of two interleaving.</li><li class="checked" data-inline-task-id="10">Latency Measurements from input to output of context table. Having sampling of every x transaction. Dont need numReq counters.</li><li data-inline-task-id="11">Placement of burst rtl dependant on # of Masters vs # of targets. -&gt; Make modular</li><li class="checked" data-inline-task-id="12">pipeLevel (parameter) should be dependent on internal functions. Delete.</li><li class="checked" data-inline-task-id="13">Generic way of defining user bits.</li><li class="checked" data-inline-task-id="14">Make VC visible on CTL interface.</li><li class="checked" data-inline-task-id="15">Echo Bit - CTL Field Store in context and put in response</li><li class="checked" data-inline-task-id="16">Make mode a function of entry. No multiple PAM tables.</li><li class="checked" data-inline-task-id="17">Add interleaved parameter inside PAM. Need to interlock.</li><li class="checked" data-inline-task-id="18">Support WRAP to the Stripe table.</li><li class="checked" data-inline-task-id="19">Remove Write Data buffer. - Review - Modified Write Buffer to not consist of memory. Only will be implemented in registers</li><li data-inline-task-id="20">Spell out timeout errors.</li><li class="checked" data-inline-task-id="46">Remove PPA Section. <br/><br/></li></ul></div></div><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-top: 10.0px;"><tbody><tr><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">rateLmtUseExtrenalValues</td></tr><tr><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><p><u style="white-space: pre-wrap;">[</u><span style="white-space: pre-wrap;">X</span><u style="white-space: pre-wrap;">]</u></p><p>    writeJSON(&quot;ctli_csr.cpr&quot;,csr);</p><div class="wiki-content"><u>Splitting Behavior</u></div><div class="wiki-content"><ul><li>Request can be split if len_in_bytes indicate a size larger than the maxBurstSize.</li><li>Boundary needs no consideration since a fixed transaction cannot cross a Boundary.</li><li>maxBurstSize = minimum(Initiator Max Burst Size, Target Max Burst Size) // If any input to minimum() is 0 or undefined it is non included in calculation</li><li>Request 1  : addr = lower(addr+maxBurstSize,addr+len), len = lower(maxBurstSize,len)</li><li>if( N * maxBurstSize &lt;= len_in_bytes)<ul><li>Request N :  addr = addr, len = maxBurstSize</li></ul></li><li>else<ul><li>Request N:   addr = addr, len = len_in_bytes - ((N-1) * maxBurstSize)</li></ul></li></ul></div><p><strong>Stripe Group Table</strong></p><div><strong><br/></strong></div><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-top: 10.0px;"><colgroup><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th style="text-align: center;" class="confluenceTh">Field Name</th><th style="text-align: center;" class="confluenceTh">Field Width</th><th style="text-align: center;" class="confluenceTh">Driver</th><th style="text-align: center;" class="confluenceTh">Set Condition</th><th style="text-align: center;" class="confluenceTh">Clear Condition</th><th colspan="1" style="text-align: center;" class="confluenceTh">ID Target Lock</th><th colspan="1" style="text-align: center;" class="confluenceTh">ID Compression</th><th colspan="1" style="text-align: center;" class="confluenceTh">Ordering</th><th colspan="1" style="text-align: center;" class="confluenceTh">ID Interlock (Read Interleaving)</th><th colspan="1" style="text-align: center;" class="confluenceTh">Exclusive Barrier</th><th colspan="1" style="text-align: center;" class="confluenceTh">Latency Tracking</th><th colspan="1" class="confluenceTh">S&amp;S</th><th colspan="1" style="text-align: center;" class="confluenceTh">Included in Timing Critical Configuration</th><th colspan="1" style="text-align: center;" class="confluenceTh">Description (TODO)</th></tr><tr><td class="confluenceTd">Id</td><td style="text-align: center;" class="confluenceTd">Request Interface In ID</td><td style="text-align: center;" class="confluenceTd">Request Interface In ID</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-top: 10.0px;"><tbody><tr><td colspan="1" class="confluenceTd">15+TID_WIDTH:15</td></tr></tbody></table></div><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-History.1"><strong>History</strong></h1><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Version</th><th class="confluenceTh">Date</th><th colspan="1" class="confluenceTh">Comments</th><th class="confluenceTh">Editor</th></tr><tr><td class="confluenceTd">xxx</td><td class="confluenceTd">xxx</td><td colspan="1" class="confluenceTd"><ul style="list-style-type: square;"><li>Start Revision Control once initial doc is made.</li></ul></td><td class="confluenceTd">Eric Taylor</td></tr></tbody></table></div><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Outline.1"><strong>Outline</strong></h1><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1759723354796 {padding: 0px;}
div.rbtoc1759723354796 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1759723354796 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1759723354796'>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-History'>History</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Outline'>Outline</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description'>Description</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Features'>Features</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Interfaces'>Interfaces</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReferenceSpecification'>Reference Specification</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerInitiator'>Common Transaction Layer Initiator</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters'>Parameters</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers'>Registers</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagram'>Top Level Diagram</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.1'>Description</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAM,Stripe,andTargetTable'>PAM, Stripe, and Target Table</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAMMode'>PAM Mode</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExternalSignaling:'>External Signaling:</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserBits:(ExcludefromR1Documentation)'>User Bits: (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CSRRegister:(ExcludefromR1Documentation)'>CSR Register: (Exclude from R1 Documentation)</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionStriping'>Transaction Striping</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionBurstTypeandSplitting'>Transaction Burst Type and Splitting</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-250'></a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowTransactions'>Narrow Transactions</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Anarrowtransactioninthiscontextisdefinedwhentxn_hdr_burstSize(BurstWidth)issmallerthantxn_hdr_maxBurstSize(ChannelWidth).'>A narrow transaction in this context is defined when txn_hdr_burstSize (Burst Width) is smaller than txn_hdr_maxBurstSize (Channel Width).</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context'>Context</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ContextFields'>Context Fields</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestCounter'>Request Counter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SequenceNumber'>Sequence Number</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-LatencyMeasurement(StatsInterface)'>Latency Measurement (Stats Interface)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-IDCompression'>ID Compression</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-InputQueues(ExcludefromR1Documentation)'>Input Queues (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Arbiter(ExcludefromR1Documentation)'>Arbiter (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionRequeuing(ExcludefromR1Documentation)'>Transaction Requeuing (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoS(QoSChange)'>QoS ( QoS Change )</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TrafficClassandInternalPriorityMapping'>Traffic Class and Internal Priority Mapping</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimitingandLatencyPressure'>Rate Limiting and Latency Pressure</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoStoPacketFieldMappings'>QoS to Packet Field Mappings</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ConfiguringQoS'>Configuring QoS</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimiterClockGate'>Rate Limiter Clock Gate</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager(ExcludefromR1Documentation)'>Credit Manager (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReOrderBuffer'>Re Order Buffer</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BeatBuffer'>Beat Buffer</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Timing'>Timing</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ErrorGeneration'>Error Generation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseGeneration'>Response Generation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReadDataInterleaving'>Read Data Interleaving</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-EchoField(ExcludefromR1Documentation)'>Echo Field (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserField'>User Field</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MismatchinTargetParameters'>Mismatch in Target Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerTarget'>Common Transaction Layer Target</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters.1'>Parameters</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers.1'>Registers</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagrams'>Top Level Diagrams</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FullTop-levelExample'>Full Top-level Example</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TypicalTop-levelExample'>Typical Top-level Example</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MinimumTop-levelExample'>Minimum Top-level Example</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.2'>Description</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BurstTranslation'>Burst Translation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-OutputQueues'>Output Queues</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestArbiter'>Request Arbiter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context.1'>Context</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager'>Credit Manager</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseQueues&amp;Arbiter'>Response Queues &amp; Arbiter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponsePath'>Response Path</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowPacking/Unpacking'>Narrow Packing/Unpacking</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExclusiveMonitor'>Exclusive Monitor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SharedSpecification'>Shared Specification</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PMAControl'>PMA Control</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FaultReporting'>Fault Reporting</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-DataProtection'>Data Protection</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixA.ExampleStripingTable'>Appendix A. Example Striping Table</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixB.CTLInitiatorContext/QueueFlow(Sketch)(InProgress)'>Appendix B. CTL Initiator Context/Queue Flow (Sketch) (In Progress)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-History.1'>History</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Outline.1'>Outline</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.3'>Description</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Features.1'>Features</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Interfaces.1'>Interfaces</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReferenceSpecification.1'>Reference Specification</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerInitiator.1'>Common Transaction Layer Initiator</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters.2'>Parameters</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers.2'>Registers</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagram.1'>Top Level Diagram</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.4'>Description</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAM,Stripe,andTargetTable.1'>PAM, Stripe, and Target Table</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAMMode.1'>PAM Mode</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExternalSignaling:.1'>External Signaling:</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserBits:(ExcludefromR1Documentation).1'>User Bits: (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CSRRegister:(ExcludefromR1Documentation).1'>CSR Register: (Exclude from R1 Documentation)</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionStriping.1'>Transaction Striping</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionBurstTypeandSplitting.1'>Transaction Burst Type and Splitting</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowTransactions.1'>Narrow Transactions</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Anarrowtransactioninthiscontextisdefinedwhentxn_hdr_burstSize(BurstWidth)issmallerthantxn_hdr_maxBurstSize(ChannelWidth)..1'>A narrow transaction in this context is defined when txn_hdr_burstSize (Burst Width) is smaller than txn_hdr_maxBurstSize (Channel Width).</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context.2'>Context</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ContextFields.1'>Context Fields</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestCounter.1'>Request Counter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SequenceNumber.1'>Sequence Number</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-LatencyMeasurement(StatsInterface).1'>Latency Measurement (Stats Interface)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-IDCompression.1'>ID Compression</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-InputQueues(ExcludefromR1Documentation).1'>Input Queues (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Arbiter(ExcludefromR1Documentation).1'>Arbiter (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionRequeuing(ExcludefromR1Documentation).1'>Transaction Requeuing (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoS(QoSChange).1'>QoS ( QoS Change )</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TrafficClassandInternalPriorityMapping.1'>Traffic Class and Internal Priority Mapping</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimitingandLatencyPressure.1'>Rate Limiting and Latency Pressure</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoStoPacketFieldMappings.1'>QoS to Packet Field Mappings</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ConfiguringQoS.1'>Configuring QoS</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimiterClockGate.1'>Rate Limiter Clock Gate</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager(ExcludefromR1Documentation).1'>Credit Manager (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReOrderBuffer.1'>Re Order Buffer</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BeatBuffer.1'>Beat Buffer</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Timing.1'>Timing</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ErrorGeneration.1'>Error Generation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseGeneration.1'>Response Generation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReadDataInterleaving.1'>Read Data Interleaving</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-EchoField(ExcludefromR1Documentation).1'>Echo Field (Exclude from R1 Documentation)</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserField.1'>User Field</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MismatchinTargetParameters.1'>Mismatch in Target Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerTarget.1'>Common Transaction Layer Target</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters.3'>Parameters</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers.3'>Registers</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagrams.1'>Top Level Diagrams</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FullTop-levelExample.1'>Full Top-level Example</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TypicalTop-levelExample.1'>Typical Top-level Example</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MinimumTop-levelExample.1'>Minimum Top-level Example</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.5'>Description</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BurstTranslation.1'>Burst Translation</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-OutputQueues.1'>Output Queues</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestArbiter.1'>Request Arbiter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context.3'>Context</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager.1'>Credit Manager</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseQueues&amp;Arbiter.1'>Response Queues &amp; Arbiter</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponsePath.1'>Response Path</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowPacking/Unpacking.1'>Narrow Packing/Unpacking</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExclusiveMonitor.1'>Exclusive Monitor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SharedSpecification.1'>Shared Specification</a>
<ul class='toc-indentation'>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PMAControl.1'>PMA Control</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FaultReporting.1'>Fault Reporting</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-DataProtection.1'>Data Protection</a></li>
</ul>
</li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixA.ExampleStripingTable.1'>Appendix A. Example Striping Table</a></li>
<li><a href='#HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixB.CTLInitiatorContext/QueueFlow(Sketch)(InProgress).1'>Appendix B. CTL Initiator Context/Queue Flow (Sketch) (In Progress)</a></li>
</ul>
</div></p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.3"><strong>Description</strong></h1><p>This page contains the microarchitectral specification of the Common Transaction Layer inside Symphony.</p><p>This layer can be implemented</p><ul><li>inside an ATU for Native to SMI/SMI to Native Conversion</li><li>NoC to NoC Communication</li><li>In bidirectional adapters to perform various functions on ATP links.</li></ul><p><br/></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="600" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-6-10%2016:45:40.png?api=v2"></span></p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Features.1"><strong>Features</strong></h1><p><strong>Initiator</strong></p><ul><li>Partial Address Map Lookup</li><li>Target/Route Lookup</li><li>Request Striping/Splitting</li><li>Request Accumulation (Partial Data Width Responses)</li><li>Request Context</li><li>Input Request Queues and Arbiter </li><li>Rate/Request Limiter</li><li>Credit Manager</li><li>Response Reorder Buffer</li></ul><p><strong>Target</strong></p><ul><li>Burst Translation</li><li>Transaction Address Alignment</li><li>Output Queues</li><li>Request Arbiter</li><li>Credit Manager</li><li>Response Queues and Arbiter</li><li>Narrow Packing and Unpacking</li><li>Exclusive Monitor</li></ul><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Interfaces.1"><strong>Interfaces</strong></h1><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168667/InterfacePROT" data-linked-resource-id="16168667" data-linked-resource-version="16" data-linked-resource-type="page">InterfacePROT</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164503/InterfacePMAControl" data-linked-resource-id="16164503" data-linked-resource-version="6" data-linked-resource-type="page">InterfacePMAControl</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a></p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReferenceSpecification.1"><strong>Reference Specification</strong></h1><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16166695/HW-SYM+Base+Packet+Parameters+Relationships" data-linked-resource-id="16166695" data-linked-resource-version="108" data-linked-resource-type="page">Base Packet Parameters &amp; Relationships<br /></a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169110/Symphony+Architecture+Spec" data-linked-resource-id="16169110" data-linked-resource-version="18" data-linked-resource-type="page">Symphony Architecture Spec</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157432/HW-SYM+Common+Layer+Protocol" data-linked-resource-id="16157432" data-linked-resource-version="84" data-linked-resource-type="page">HW-SYM Common Layer Protocol</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16171451/HW-SYM+Common+Layer+Transformations" data-linked-resource-id="16171451" data-linked-resource-version="65" data-linked-resource-type="page">HW-SYM Common Layer Transformations</a></p><p><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16172082/HW-SYM+VC+Microarchitecture+and+Restrictions" data-linked-resource-id="16172082" data-linked-resource-version="20" data-linked-resource-type="page">HW-SYM VC Microarchitecture and Restrictions</a></p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerInitiator.1"><strong><u>Common Transaction Layer Initiator</u></strong></h1><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters.2"><strong>Parameters</strong></h2><p>{</p><p>   <strong>// General </strong></p><p>    &quot;nodeId&quot; : 0 to inf, // integer</p><p>    &quot;defTId&quot; : 0 to inf, // integer</p><p>    &quot;maxPduSz&quot; :  0 to inf, // integer, Max payload in number of bytes. Must be power of two. 0 - Can Accept any Size</p><p>    &quot;maxOutRd&quot; :  0 to 512, // integer, Max amount of outstanding reads</p><p>    &quot;maxOutWr&quot; : 0 to  512, // integer, Max amount of outstanding writes</p><p>    &quot;maxOutTotal&quot; : 0 to  512 , // integer, Max amount of outstanding transactions</p><p>    &quot;enBufWrite&quot; : 0 or 1, // integer, enable buffered writes. 0 - disable, 1 - enabled</p><p>    &quot;enSplitting&quot; : 0 or 1, // enables and disables the splitting feature of the CTL initiator. 0 - disable, 1 - enabled</p><p>    *atomicsSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported </p><p>    &quot;fixedSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported </p><p>    &quot;incrSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;wrapSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;narrowSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;readInterleaveSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;widthAdaptionSupported&quot; : false or true, // false - width adaption not supported at initiator, true - width adaption supported at initiator</p><p>    &quot;idCompMask&quot; :  [ 0 or 1 , 0 or 1, ...], // Array with wId entries. Each entry indicates if that bit or original ordering id will be in the compressed ordering id. </p><p>  <strong> // Timing</strong><strong>  </strong></p><p>     &quot;pipeLevelRob&quot;: &lt;0,1,2&gt; ,  // Amount of Pipe Levels on the Rob Interfaces</p><p>     &quot;pipeLevelPam&quot;: &lt;0,1,...&gt; ,  // Amount of Pipe Levels on Specific Path</p><p>     &quot;ctlPipeReq&quot;: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>     &quot;ctlPipeResp&quot;: &lt;0,1,2&gt; , // Amount of Pipe Levels on Specific Path</p><p>     &quot;ctlPipeCtxt&quot;: &lt;0,1,...&gt; ,  // Amount of Pipe Levels on Specific Path. </p><p>  <strong> // Reorder Buffer</strong></p><p>    &quot;useReorderBuffer&quot; : 0 or 1, // 1 - Implement a reorder buffer,, 0 - dont implement a reorder buffer.</p><p>    &quot;reorderBufferParams&quot; : {   </p><p>         &quot;nOutstandingReq&quot; : maxOutTotal, // Need to support the max amount of outstanding requests of the initiator</p><p>         &quot;nDataEntries&quot; : maxOutTotal * (maxPduSz / wData), // Each Entry needs to store a beat of data. </p><p>         &quot;orderMode&quot; : 0 or 1, // 1 - Reorder according to Common Layer Ordering Model, 0 - Reorder All</p><p>         &quot;nSource&quot; : 1, This RoB only has a single source. The ROB will still take into account multiple VCs coming in</p><p>         &quot;orderRd&quot; : 0 or 1, // 0 - Dont Order Reads, 1 - Order Reads</p><p>         &quot;orderWr&quot; : 0 or 1, // 0 - Dont Order Writes, 1 - Order Writes</p><p>         &quot;maxBurst&quot; : maxPduSz // Needs to be same as the maximum incoming transaction</p><p>   }    // Object Containing a subset of the parameters for the inserted reorder buffer. See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157530/HW-SYM+Reorder+Buffer+Microarchitecture+Specification" data-linked-resource-id="16157530" data-linked-resource-version="33" data-linked-resource-type="page">HW-SYM Reorder Buffer Microarchitecture Specification</a> for more information. </p><p>  <strong> // Queue and Arbiter</strong></p><p>    &quot;queueMap&quot; : [&quot;string&quot;, &quot;string&quot;, &quot;string&quot; , ...] // An array of strings which determine which queue a transaction will go to. These strings are verilog conditions involving pri, TC, targ_id, vc, and type. Logic will be constructed so the conditions are checked right to left (queue 0 to nQueue). The left most condition will be the default and the condition will be effectively ignored.  </p><p><s>    &quot;queuePriMap&quot; : [int, int, int, ...] // Array used to map a priority to a queue.   </s>   ( QoS Change )</p><p><s>    &quot;queueSecPriMap&quot; : [int, int, int, ...] // Array used to map a secondary priority to a queue.  </s>    ( QoS Change )</p><p>    &quot;vcMap&quot; : [int, int, ...], // Array of integers indicating which VC is assigned to each queue. Each entry in the array is assigned a queue</p><p>    &quot;qosMapMode&quot; : 0, 1, or 2 // 0 - None, 1 - Remap QoS, 2 - QoS Map per Queue</p><p>    &quot;ctlArbType&quot;: {</p><p>           master : &lt;&quot;arb_rr2&quot;,&quot;arb_wrr_rr1&quot;, ...&gt;</p><p>           vcs : [ &quot;string&quot;, &quot;string&quot; , ... ]  // Each String is an arb type</p><p>           } // The arbiter types of the master and VC arbs for the queues inside the Common Layer</p><p>     &quot;ctlArbWeights&quot;: {</p><p>           master : &lt;1,2,3, ...&gt;</p><p>           vcs : [int, int, , ... ]  // Each String is an arb type</p><p>           } // The arbiter weights of the master and VC arbs for the queues inside the Common Layer</p><p>     &quot;mstrArbLock&quot;: &lt;true or false&gt; , // Indicates whether the arbiters will lock on a VC. </p><p>     &quot;lckStyleVld&quot;: &lt;true or false&gt; ,  // Indicates whether the arbiters will lock on valid.</p><p> <strong>   // Rate Limiter</strong></p><p>    &quot;rateLmtEn&quot; : 0 or 1, // Enable Rate Limiting</p><p>    &quot;rateLmtUseExternalValues&quot; : 0 or 1, // Enable Configuration of Rate Limiting Values</p><p>    &quot;rateLmtRefCntGlobal&quot; : int, // Rate of refresh for the global buckets in clock cycles</p><p>    &quot;rateLmtRefCntQueue_p&quot; : [int, int, ...] , //  Rate of refresh for the queue primary  buckets in clock cycles</p><p>    &quot;rateLmtRefCntQueue_s&quot; : [int, int, ...] , //  Rate of refresh for the queue secondary buckets in clock cycles</p><p>    &quot;refreshAmtGlobal&quot; : int, // The amount of bytes added to the bucket each refresh cycle</p><p>    &quot;refreshAmtQueue_p&quot; : [int, int, ...] , //  The amount of bytes added to the primary  bucket each refresh cycle</p><p>    &quot;refreshAmtQueue_s&quot; : [int, int, ...] , //  The amount of bytes added to the secondary  bucket each refresh cycle</p><p>    &quot;rateLmtBktGlobal&quot; : int, //  The total size of the global bucket</p><p>    &quot;rateLmtBktQueue_p&quot; :  [int, int, ...]  // The total size of the queue primary buckets (0 == Disabled, No Limiting)</p><p>    &quot;rateLmtBktQueue_s&quot; :  [int, int, ...]  // The total size of the queue  secondary buckets (0 == Disabled, No Limiting<u>)</u></p><p><strong>    // Credit Manager</strong></p><p>    &quot;crdMngrEn&quot; : 0 or 1, // Enable Credit management.</p><p>    &quot;wCrdMngrReqCnt&quot; : [int, int, ...], // Array of integers indicating the request dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>    &quot;wCrdMngrDataCnt&quot; :  [int, int, ...], // Array of integers indicating the data dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>    &quot;crdDataUnit&quot; : 1 to inf, // Data Credit Units, Has to be power of 2</p><p>    &quot;wCrdMngrType&quot;  :  [int, int, ...],// Credit Message Type 0 - Shared or 1 Dedicated</p><p>    <strong>// PAM and Striping Tables</strong></p><p>    &quot;modeUserBits&quot;: &quot;string&quot;, //  User bits that select mode. </p><p>     // All arrays below with the &quot;pam&quot; prefix must be the same length</p><p>    &quot;pamMode&quot; : [int, int, ...] , // array of integers representing the PAM mode the entry is attached to </p><p>    &quot;pamBaseAddr&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the base address of each entry. &quot;16'hF000&quot; would be an example of an entry in the array.</p><p>    &quot;pamBaseMask&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the size of the entry in mask form.  &quot;16'hF000&quot; would be an example of an entry in the array.</p><p>    &quot;pamSz&quot; : [int, int, ..] , // array of integers representing the size of the space represented by the entry in the PAM</p><p>    &quot;pamTargId&quot; : [int, int, ..] , // array of integers representing the target id of each entry</p><p>    &quot;pamMapBase&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the mapped base address of each entry.  &quot;16'hF000&quot; would be an example of an entry in the array.</p><p>    &quot;pamRoute&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the route to be inserted.  &quot;8'h2A&quot; would be an example of an entry in the array.</p><p>    &quot;pamRW&quot; : [int,int, ... ], // Array of integers representing the capabilities of the target. 0 - Reads and Writes, 1 - Reads Only, 2 - Writes Only </p><p>    &quot;pamStrp&quot;: [int, int, ...], // Array of integers representing if the target is a stripe group. 0 - Not Striped, 1 - Striped</p><p>    &quot;pamStrpGrpNum&quot; :  [int, int, ...], // Array of integers representing the stripe group of the target</p><p>    &quot;pamTargWidth&quot;:  [int, int int, ...] , // Array of target widths. This is used to know whether the target is narrower for splitting fixed transactions.</p><p>    &quot;pamTargMaxBurst&quot; :  [int, int, ...], // Array of integers representing the max burst. 0 - Target can support any burst length. No splitting will be done based on this field. </p><p>    &quot;pamTargSplitWrap&quot; : [int, int, ...],  // Array of integers representing if wraps are supported at the target. 0 - Supported, 1 - Not Supported (Enable the Wrap Split)</p><p>    &quot;pamTargReadInterleave&quot; : [bool, bool, ...],  // Array of integers representing if the target will interleave read responses. 0 - Will not, 1 - Will</p><p>    &quot;pamTargFixedSupported&quot; : [bool, bool, ...],  // Array of booleans representing if the target will support fixed transactions. </p><p>    &quot;pamTargIncrSupported&quot; : [int, int, ...],  // Array of integers representing if the target will support Incr transactions. </p><p>    &quot;pamTargBoundary&quot; :  [int, int, ...], // Array of integers representing the boundary limits of the target. 0 - Target can support any boundary crossing. No splitting will be done based on this field. </p><p>    &quot;pamTargDomain&quot; : [</p><p>                                  { hash : [int, int, ... ] },</p><p>                                   ....</p><p>                              ], // Array of objects which contain an array of integers. The array of integers represents what bits of domainInt to use from LSB to MSB indicating what domains are crossed to get to a target. All targets in a striping group will share an entry. </p><p>   *&quot;pamMulti&quot;: [bool, bool, bool, ...], // Bool of whether this address space is to a multcast block</p><p>   *&quot;pamMultiLabel&quot;: [int,int,int, ...], // The multicast label to be inserted</p><p>   *&quot;pamMultiUser&quot;: [bool, bool, bool, ...], // Indicates if the label has to come from user bits</p><p>   *&quot;pamMultiLabelUserBits&quot;: [&quot;string&quot;,...] // The bits of user to map to label (eg [3:1])</p><p>   *&quot;pamMultiMaskUserBits&quot;: [&quot;string&quot;,...], // The bits of user to map to mask (eg [3:1])</p><p>     // All arrays below with the &quot;strp&quot; prefix must be the same length</p><p>    &quot;nStrpTarg&quot; :  [int, int, ...],  // Array of integers representing the number of targets in a stripe group</p><p>    &quot;strpFunc&quot; : [int, int, ...],  // Array of integers representing the striping function of the stripe group</p><p>    &quot;strpFuncHash&quot; [</p><p>                                  { hash : [int, int, ... ] },</p><p>                                   ....</p><p>                              ], // Array of objects which contain an array of integers. The array of integers represents what bits of address to use from LSB to MSB. Each entry represents a hash for an individual stripe group. </p><p>    &quot;strpSz&quot; : [int, int, ...],  // Array of integers representing the size of each stripe in the striping group</p><p>    &quot;strpMap&quot; :  [int, int, ...],  // Array of integers representing the address mapping function of the stripe group. (0 - None, 1 - Shift right to stripe bits. 2 - Move MSB to stripe bits)</p><p>     // All arrays below with the &quot;strpstrpGrb&quot; prefix are per stripe group and must be the same length</p><p>    &quot;strpGrpbTables&quot; :  [   // Array of objects that represent a Group of Targets in a stripe group</p><p>        { </p><p>        &quot;strpGrpTargID&quot; :  [int, int, ...],  // Array of integers representing the target ID of each target in a stripe group</p><p>        &quot;strpGrpMapBase&quot; : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the mapped base address of each entry.  &quot;16'hF000&quot; would be an example of an entry in the array.</p><p>        &quot;strpGrpRoute&quot;  : [&quot;a_string&quot;,&quot;a_string&quot;,... ] , // array of strings representing the route to be inserted.  &quot;8'h2A&quot; would be an example of an entry in the array.</p><p>       }, ...</p><p>   ],</p><p>   MemoryGeneration: [</p><p>     {</p><p>          &quot;rtlPrefixString&quot;: &quot;a_string&quot;, // deprecated, must match corresponding generic interface name. </p><p>          &quot;interfaceObjType: &quot;a_string&quot; // Used to match memory to genericInterface (rob0, rob1, ...), (Only &quot;rob0&quot; supported)</p><p>          &quot;nMemDataRatio&quot; : integer, // Ratio of data widths between the external and internal memory</p><p>          &quot;fnMemLatency&quot; : integer, // latency of the connected memory.</p><p>          &quot;fnMemCycle&quot; : integer, // Clock cycles required for memory to complete operation</p><p>          &quot;fnMemPorts&quot; :  integer, // Is fixed to 1 for R1</p><p>          &quot;fnMemType&quot; : &quot;a_string&quot;, // Flops, SRAM, or CLOG SRAM</p><p>          &quot;useMemWrBitEn&quot; : boolean, // Is fixed to true for R1</p><p>          &quot;useMemExternal&quot; : boolean// Is fixed to false for R1</p><p>       }</p><p>]</p><p><strong>   // Interface Parameters</strong></p><p>    &quot;interfaces&quot; :{</p><p>           &quot;clkInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168894/InterfaceCLK" data-linked-resource-id="16168894" data-linked-resource-version="5" data-linked-resource-type="page">InterfaceCLK</a>&quot;},</p><p>           &quot;smiReqInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;SMI Interface Def File&gt; }, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a>&quot;},</p><p>           &quot;smiRespInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;SMI Interface Def File&gt;}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a>&quot;},</p><p>           &quot;ctlReqInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;CTL Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a>&quot;},</p><p>           &quot;ctlRespInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;CTL Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a>&quot;},</p><p>           &quot;pmaInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164503/InterfacePMAControl" data-linked-resource-id="16164503" data-linked-resource-version="6" data-linked-resource-type="page">InterfacePMAControl</a>&quot;},</p><p>           &quot;statsInt&quot; :   [ { name: &quot;a_string&quot;,  params: { &quot;width&quot;: 1 },  direction: &quot;master&quot;,  interface: &quot;<a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceEvt" rel="nofollow" style="text-decoration: none;">InterfaceEvt</a>&quot;  },  { },   . . . ] , An array of interfaces of type<span> </span><a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceEvt" rel="nofollow" style="text-decoration: none;">InterfaceEvt</a>. The length of the array = 2*maxOutTotal.</p><p>           &quot;feedbackInt&quot; :   [ { name: &quot;a_string&quot;,  params: { &quot;width&quot;: 1 },  direction: &quot;slave&quot;,  interface: &quot;<a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceEvt" rel="nofollow" style="text-decoration: none;">InterfaceEvt</a>&quot;  } ] , An array of a single interface of type<span> </span><a class="external-link" href="https://confluence.arteris.com/display/ENGR/InterfaceEvt" rel="nofollow" style="text-decoration: none;">InterfaceEvt</a>. The length of the array = 1. This will hold the latency feedback</p><p>           &quot;modeInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot; <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a>&quot;, ... TODO},</p><p>           &quot;domainInt&quot;: [{ &quot;name&quot; : &quot;domain_0_&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot; <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a>&quot;, ... TODO}, ... ] // Array of generic interfaces with each one carrying a signal indicating a domain is active</p><p>           &quot;apbInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot; <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168579/InterfaceAPB" data-linked-resource-id="16168579" data-linked-resource-version="2" data-linked-resource-type="page">InterfaceAPB</a>&quot;, ... TODO},</p><p>           &quot;intInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {width : 7}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16160508/InterfaceINT" data-linked-resource-id="16160508" data-linked-resource-version="3" data-linked-resource-type="page">InterfaceINT</a>&quot;}, // Interrupt interface driven with CTL Layer interrupts</p><p>           &quot;protInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &lt; See InterfacePROT Params&gt; }, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168667/InterfacePROT" data-linked-resource-id="16168667" data-linked-resource-version="16" data-linked-resource-type="page">InterfacePROT</a>&quot;},</p><p>           &quot;genericIoMem&quot; : [ {name: &quot;a_string&quot;, params: {interface parameters}, interfaceObjType: &quot;a_string&quot;, direction: &quot;slave&quot;, _SKIP_: boolean , interface: &quot;InterfaceGeneric&quot; } ]</p><p>    },</p><p><strong>   // Protection, Error,  and Power Control Parameters </strong></p><p>    &quot;timeoutErrChk&quot; : 0 or 1, // integer, enable timeout check</p><p>    &quot;timeoutErrCount&quot; : 0 to inf, // if 0 it is configured from registers</p><p>    &quot;timeoutUseExternalValue&quot; : 0 or 1, // 0 use timeoutErrCount, 1 use a configurable value</p><p>    &quot;ctlProtectionScheme&quot; :&quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16170235/protectionScheme" data-linked-resource-id="16170235" data-linked-resource-version="9" data-linked-resource-type="page">protectionScheme</a> // This defines how dad will be checked and dp_prot generated. See more detail in common error section.</p><p>    &quot;stateProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;registerProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;memoryProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;csr&quot; : &quot;&quot; or Register Definition Object</p><p>}</p><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers.2"><strong>Registers</strong></h2><p><strong><br/></strong></p><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 52.5781%;"><colgroup><col style="width: 6.30402%;"/></colgroup><colgroup><col style="width: 9.20183%;"/></colgroup><colgroup><col style="width: 5.94814%;"/></colgroup><colgroup><col style="width: 10.7778%;"/></colgroup><colgroup><col style="width: 4.37214%;"/></colgroup><colgroup><col style="width: 10.3203%;"/></colgroup><colgroup><col style="width: 17.6919%;"/></colgroup><colgroup><col style="width: 17.6919%;"/></colgroup><colgroup><col style="width: 17.6919%;"/></colgroup><tbody><tr><th style="width: 103.0px;" class="confluenceTh">Register</th><th style="width: 160.0px;" class="confluenceTh">Address (Temporary)</th><th style="width: 96.0px;" class="confluenceTh">Field Name</th><th style="width: 191.0px;" class="confluenceTh">Field Bits</th><th style="width: 65.0px;" class="confluenceTh">Access</th><th style="width: 182.0px;" class="confluenceTh">Reset Value</th><th style="width: 327.0px;" class="confluenceTh">Description</th><th style="width: 79.0px;" class="confluenceTh">Optional</th><th style="width: 175.0px;" class="confluenceTh">Controlling Parameter</th></tr><tr><td colspan="9" style="width: 1378.0px;" class="confluenceTd"><em><strong>Common Layer Control Registers</strong></em></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLCR</td><td style="width: 160.0px;" class="confluenceTd">0x0</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">BUSY</td><td style="width: 191.0px;" class="confluenceTd">0</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Busy Indicator for the CTL Initiator</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">MODE</td><td style="width: 191.0px;" class="confluenceTd">MODE_WIDTH:1</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">The mode to be used for PAM Table Comparisons</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLTCR</td><td style="width: 160.0px;" class="confluenceTd">0x1</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td rowspan="2" style="text-align: center;width: 79.0px;" class="confluenceTd">X</td><td rowspan="2" style="width: 175.0px;" class="confluenceTd">timeoutUseExternalValue</td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">COUNT</td><td style="width: 191.0px;" class="confluenceTd">0:31</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Timeout Count (Clock Cycles) (0 == disabled)</td></tr><tr><td colspan="9" style="width: 1378.0px;" class="confluenceTd"><strong><em>Statistics Control Registers</em></strong></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLSCR</td><td style="width: 160.0px;" class="confluenceTd">0x4</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td rowspan="5" style="width: 79.0px;text-align: center;" class="confluenceTd">X</td><td rowspan="5" style="width: 175.0px;" class="confluenceTd"><span>interfaces.statsInt != null</span></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">E</td><td style="width: 191.0px;" class="confluenceTd">0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Enable Statistics</td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TMASK</td><td style="width: 191.0px;" class="confluenceTd">1</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Enable Target Mask</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLSTR</td><td style="width: 160.0px;" class="confluenceTd">0x5</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TARG</td><td style="width: 191.0px;" class="confluenceTd">X:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Target ID to collect statistics on</td></tr><tr><td colspan="9" style="width: 1378.0px;" class="confluenceTd"><strong><em>Error Registers</em></strong></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLTIR</td><td style="width: 160.0px;" class="confluenceTd">0x40</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Timeout Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Timeout Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TID</td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH+1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Timeout Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLBWIR</td><td style="width: 160.0px;" class="confluenceTd">0x41</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Buffered Write Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Buffered Write Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>TID</span></td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Buffered Write Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRWIR</td><td style="width: 160.0px;" class="confluenceTd">0x42</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">R/W Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">R/W Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>TID</span></td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">R/W Error Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLDIR</td><td style="width: 160.0px;" class="confluenceTd">0x43</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Decode Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd"> 1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Decode Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>TID</span></td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Decode Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLTEIR</td><td style="width: 160.0px;" class="confluenceTd">0x44</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Transport Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Transport Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>TID</span></td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Transport Error Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLEEIR</td><td style="width: 160.0px;" class="confluenceTd">0x45</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Exclusive Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Exclusive Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TID</td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Exclusive Error Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLPD</td><td style="width: 160.0px;" class="confluenceTd">0x46</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Power Domain Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Power Domain Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">TID</td><td style="width: 191.0px;" class="confluenceTd">TID_WIDTH-1:2</td><td style="width: 65.0px;" class="confluenceTd">ro</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Power Domain Error Target ID</td><td style="width: 79.0px;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td colspan="9" style="width: 1378.0px;" class="confluenceTd"><em><strong>QoS Registers ( QoS Change ) </strong></em></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQC</td><td style="width: 160.0px;" class="confluenceTd">0x80</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 79.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 175.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">E</td><td style="width: 191.0px;" class="confluenceTd">0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Rate Limiter Enable</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd"> rateLmtEn == True</td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">R</td><td style="width: 191.0px;" class="confluenceTd">1</td><td style="width: 65.0px;" class="confluenceTd">w1c</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">Rate Limiter Refresh </td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd"> rateLmtEn == True</td></tr><tr><td colspan="1" class="confluenceTd">CTLQR</td><td colspan="1" class="confluenceTd">0x81</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td style="text-align: center;" class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">RSVD</td><td colspan="1" class="confluenceTd">7:0</td><td colspan="1" class="confluenceTd">RSVD</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">RSVD</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">CYCLES</td><td colspan="1" class="confluenceTd">31:8</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Refresh Cycles [31:8] </td><td style="text-align: center;" class="confluenceTd">X</td><td class="confluenceTd"> rateLmtEn == True</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQM0</td><td style="width: 160.0px;" class="confluenceTd">0x82</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q0P</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x15</td><td style="width: 327.0px;" class="confluenceTd">QoS 0 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q0IQ</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x0</td><td style="width: 327.0px;" class="confluenceTd">QoS 0 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q1P</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x14</td><td style="width: 327.0px;" class="confluenceTd">QoS 1 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q1IQ</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x1</td><td style="width: 327.0px;" class="confluenceTd">QoS 1 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q2P</td><td style="width: 191.0px;" class="confluenceTd">19:16</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x13</td><td style="width: 327.0px;" class="confluenceTd">QoS 2 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q2IQ</td><td style="width: 191.0px;" class="confluenceTd">23:20</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x2</td><td style="width: 327.0px;" class="confluenceTd">QoS 2 <span class="inline-comment-marker" data-ref="c2e7bed0-31d8-454b-a1b1-0c8451f9a44e">Internal</span> QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q3P</td><td style="width: 191.0px;" class="confluenceTd">27:24</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x12</td><td style="width: 327.0px;" class="confluenceTd">QoS 3 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q3IQ</td><td style="width: 191.0px;" class="confluenceTd">31:28</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x3</td><td style="width: 327.0px;" class="confluenceTd">QoS 3 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQM1</td><td style="width: 160.0px;" class="confluenceTd">0x83</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q4P</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x11</td><td style="width: 327.0px;" class="confluenceTd">QoS 4 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q4IQ</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x4</td><td style="width: 327.0px;" class="confluenceTd">QoS 4 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q5P</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x10</td><td style="width: 327.0px;" class="confluenceTd">QoS 5 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q5IQ</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x5</td><td style="width: 327.0px;" class="confluenceTd">QoS 5 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q6P</td><td style="width: 191.0px;" class="confluenceTd">19:16</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x9</td><td style="width: 327.0px;" class="confluenceTd">QoS 6 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q6IQ</td><td style="width: 191.0px;" class="confluenceTd">23:20</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x6</td><td style="width: 327.0px;" class="confluenceTd">QoS 6 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q7P</td><td style="width: 191.0px;" class="confluenceTd">27:24</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x8</td><td style="width: 327.0px;" class="confluenceTd">QoS 7 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q7IQ</td><td style="width: 191.0px;" class="confluenceTd">31:28</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x7</td><td style="width: 327.0px;" class="confluenceTd">QoS 7 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQM2</td><td style="width: 160.0px;" class="confluenceTd">0x84</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q8P</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x7</td><td style="width: 327.0px;" class="confluenceTd">QoS 8 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q8IQ</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x8</td><td style="width: 327.0px;" class="confluenceTd">QoS 8 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q9P</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x6</td><td style="width: 327.0px;" class="confluenceTd">QoS 9 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q9IQ</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x9</td><td style="width: 327.0px;" class="confluenceTd">QoS 9 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q10P</td><td style="width: 191.0px;" class="confluenceTd">19:16</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x5</td><td style="width: 327.0px;" class="confluenceTd">QoS 10 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q10IQ</td><td style="width: 191.0px;" class="confluenceTd">23:20</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x10</td><td style="width: 327.0px;" class="confluenceTd">QoS 10 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q11P</td><td style="width: 191.0px;" class="confluenceTd">27:24</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x4</td><td style="width: 327.0px;" class="confluenceTd">QoS 11 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q11IQ</td><td style="width: 191.0px;" class="confluenceTd">31:28</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x11</td><td style="width: 327.0px;" class="confluenceTd">QoS 11 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQM3</td><td style="width: 160.0px;" class="confluenceTd">0x85</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q12P</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x3</td><td style="width: 327.0px;" class="confluenceTd">QoS 12 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q12IQ</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x12</td><td style="width: 327.0px;" class="confluenceTd">QoS 12 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q13P</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x2</td><td style="width: 327.0px;" class="confluenceTd">QoS 13 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q13IQ</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x13</td><td style="width: 327.0px;" class="confluenceTd">QoS 13 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q14P</td><td style="width: 191.0px;" class="confluenceTd">19:16</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x1</td><td style="width: 327.0px;" class="confluenceTd">QoS 14 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q14IQ</td><td style="width: 191.0px;" class="confluenceTd">23:20</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x14</td><td style="width: 327.0px;" class="confluenceTd">QoS 14 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q15P</td><td style="width: 191.0px;" class="confluenceTd">27:24</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x0</td><td style="width: 327.0px;" class="confluenceTd">QoS 15 Priority</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">Q15IQ</td><td style="width: 191.0px;" class="confluenceTd">31:28</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0x15</td><td style="width: 327.0px;" class="confluenceTd">QoS 15 Internal QoS</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLQLX</td><td style="width: 160.0px;" class="confluenceTd">0x90+X</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd">(X == Queue #)</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QSI</td><td style="width: 191.0px;" class="confluenceTd">3:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">QoS Step Increase</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QSD</td><td style="width: 191.0px;" class="confluenceTd">7:4</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">QoS Step Decrease</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QM</td><td style="width: 191.0px;" class="confluenceTd">11:8</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span class="inline-comment-marker" data-ref="c2ad44c1-8f22-4ad0-b17b-d72bcdf36878">15</span></td><td style="width: 327.0px;" class="confluenceTd">QoS Max</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QN</td><td style="width: 191.0px;" class="confluenceTd">15:12</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">0</td><td style="width: 327.0px;" class="confluenceTd">QoS Min</td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLGC</td><td style="width: 160.0px;" class="confluenceTd">0xB0</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">GBRC</td><td style="width: 191.0px;" class="confluenceTd"><span>wR</span>ateLmtRefCntGlobal-1:0<span> </span></td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>rateLmtRefCntGlobal</span></td><td style="width: 327.0px;" class="confluenceTd">Global Bucket Reference Count</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd"> rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLGRA</td><td style="width: 160.0px;" class="confluenceTd">0xB1</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">GBRA</td><td style="width: 191.0px;" class="confluenceTd"><span>wR</span>efreshAmtGlobal-1:0<span> </span></td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>refreshAmtGlobal</span></td><td style="width: 327.0px;" class="confluenceTd">Global Refresh Amount</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLGBS</td><td style="width: 160.0px;" class="confluenceTd">0xB2</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">GBS</td><td style="width: 191.0px;" class="confluenceTd">wRateLmtBktGlobal-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">rateLmtBktGlobal</td><td style="width: 327.0px;" class="confluenceTd">Global Bucket Size</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQCPX</td><td style="width: 160.0px;" class="confluenceTd">0xB3 + X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QBRCP</td><td style="width: 191.0px;" class="confluenceTd">wRateLmtRefCntQueue-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">rateLmtRefCntQueue_p<u><span>[</span></u>X<u><span>]</span></u></td><td style="width: 327.0px;" class="confluenceTd">Primary Queue Bucket Reference Count</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQCSX</td><td style="width: 160.0px;" class="confluenceTd">0xB4 + X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>QBRCS</span></td><td style="width: 191.0px;" class="confluenceTd">wRateLmtRefCntQueue-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>rateLmtRefCntQueue_s<u>[</u><span>X</span><u>]</u></span></td><td style="width: 327.0px;" class="confluenceTd">Secondary Queue Bucket Reference Count</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQRAPX</td><td style="width: 160.0px;" class="confluenceTd">0xB5+ X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QBRAP</td><td style="width: 191.0px;" class="confluenceTd"><span>wR</span>efreshAmtQueue-1:0<span> </span></td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">refreshAmtQueue_p<u><span>[</span></u>X<u><span>]</span></u></td><td style="width: 327.0px;" class="confluenceTd">Primary Queue Refresh Amount</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQRASX</td><td style="width: 160.0px;" class="confluenceTd">0xB6+ X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>QBRAS</span></td><td style="width: 191.0px;" class="confluenceTd">wRefreshAmtQueue-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>refreshAmtQueue_s<u>[</u><span>X</span><u>]</u></span></td><td style="width: 327.0px;" class="confluenceTd">Secondary Queue Refresh Amount</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQBSPX</td><td style="width: 160.0px;" class="confluenceTd">0xB7 + X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd">QBSP</td><td style="width: 191.0px;" class="confluenceTd">wRateLmtBktQueue-1:0<span> </span></td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd">rateLmtBktQueue_p[X]</td><td style="width: 327.0px;" class="confluenceTd">Primary Queue Bucket Size</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr><tr><td style="width: 103.0px;" class="confluenceTd">CTLRLQBSSX</td><td style="width: 160.0px;" class="confluenceTd">0xB8 + X * 0x8</td><td style="width: 96.0px;" class="confluenceTd"><br/></td><td style="width: 191.0px;" class="confluenceTd"><br/></td><td style="width: 65.0px;" class="confluenceTd"><br/></td><td style="width: 182.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td><td style="width: 327.0px;text-align: center;" class="confluenceTd"><br/></td><td style="width: 327.0px;" class="confluenceTd"><br/></td></tr><tr><td style="width: 103.0px;" class="confluenceTd"><br/></td><td style="width: 160.0px;" class="confluenceTd"><br/></td><td style="width: 96.0px;" class="confluenceTd"><span>QBSS</span></td><td style="width: 191.0px;" class="confluenceTd">wRateLmtBktQueue-1:0</td><td style="width: 65.0px;" class="confluenceTd">rw</td><td style="width: 182.0px;" class="confluenceTd"><span>rateLmtBktQueue_s[X]</span></td><td style="width: 327.0px;" class="confluenceTd">Secondary Queue Bucket Size</td><td style="width: 327.0px;text-align: center;" class="confluenceTd">X</td><td style="width: 327.0px;" class="confluenceTd">rateLmtEn == True &amp;&amp; rateLmtUseExternalValues</td></tr></tbody></table></div><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagram.1"><strong><br/>Top Level Diagram</strong></h2><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1600" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2020-9-24_14-8-54.png?api=v2"></span></p><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.4"><strong>Description</strong></h2><div class="page view"><div class="wiki-content"><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAM,Stripe,andTargetTable.1"><strong>PAM, Stripe, and Target Table</strong></h3><p>The PAM table is generated by the SW based on the user configuration of the system address map (SAM) and configuration of the CTL targets. The generated values are hard wired values. For past P0 configurations which use a register based PAM (all or partial) these values will be ignored for the register based values. The default values for the registers will be put into the CSR object. </p><p>A PAM match is determined by this equation. The first entry that matches will be considered the only match. The mode will also have to match if defined. More info in PAM Mode section. </p><p>Match = ((Base Address) == (In Address &amp; ({wAddr{1'b1}} &lt;&lt; log2(Size))) </p><p>If no entry is matched and enDecodeError is true a decode error will occur , otherwise it will match the default entry which is the first entry in the table.</p><p>The PAM Table consists of:</p><ul><li><strong>Mode</strong>: The mode the entry is associated with. The mode will either be defined through select inputs to the CTL block or through user defined bits. </li><li><strong>Base Address</strong>: The base address of the region defined by an entry. This must be aligned to the size of the region.<ul><li>When Mapped Base Address is undefined, transaction address = (addr - base_address)</li></ul></li><li><strong>Size</strong>: The size of the region defined by an entry. Size must be a power of two.</li><li><strong>Target ID</strong>: The target associated with an entry. This will populate the targ_id of the SMI message.</li><li><strong>Mapped Base Address</strong>: The base address mapped to the specific target.<ul><li>If this is defined, transaction address =  Mapped Base Address + (addr - base_address)</li></ul></li><li><strong>Route</strong>: The route associated with the entry. This will populate the route field of the SMI message. This can either be fixed (Review: P0) or configurable through registers.</li><li><strong>RW</strong>: Indication if a target can support: R - Read Only, W - Write Only, RW - Reads and Writes</li><li><strong>Striped</strong>: Indication if this address region is stripped. 0 - Is not stripped, 1 - is stripped</li><li><strong>Stripe Group</strong>: Indicates which stripe group a address region is associated with if it is striped.</li><li><strong>Read Interleave</strong>: Indication if the target associated with the address region supports read interleaving. 0 - does not support, 1 - does support,<ul><li>If a region supports interleaving and the CTL initiator does not, ID interlock must be used.</li></ul></li><li><strong>Max Burst</strong>: The max burst the target can support. Transaction splitting according to burst type is defined below.</li><li><strong>Split Wrap</strong>: Indication if a target supports wraps. 0 - Supports, 1 - Does not support. Wrap splitting is defined below.</li><li><strong>Fixed Supported</strong>: Indication if a target supports fixed. 0 - Supports, 1 - Does not support. Fixed splitting is defined below.</li><li><strong>Incr Supported</strong>: Indication if a target supports incrs. 0 - Supports, 1 - Does not support. Incr splitting is defined below.</li><li><strong>Boundary</strong> (Review: Need for P0?) : Indication if a transaction needs to be split to not cross a specific address boundary. Must be power of 2. Max burst should be smaller than this number. 0 - Disabled, Any Other Number - Boundary to Split on </li></ul><p><strong>PAM Table</strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">Field</th><th colspan="1" class="confluenceTh">Mode</th><th class="confluenceTh">Base Address</th><th class="confluenceTh">Size (Power of Two)</th><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th colspan="1" class="confluenceTh">Route (Optional)</th><th colspan="1" class="confluenceTh">RW (Optional)</th><th colspan="1" class="confluenceTh">Striped (Optional)</th><th colspan="1" class="confluenceTh">Stripe Group (Optional)</th><th colspan="1" class="confluenceTh">Read Interleave</th><th colspan="1" class="confluenceTh">Max Burst (Optional)</th><th colspan="1" class="confluenceTh">Split Wrap (Optional)</th><th colspan="1" class="confluenceTh">Fixed Supported</th><th colspan="1" class="confluenceTh">Incr Supported</th><th colspan="1" class="confluenceTh">Boundary (optional)</th></tr><tr><td colspan="1" class="confluenceTd">Type</td><td colspan="1" class="confluenceTd">int</td><td class="confluenceTd">string</td><td class="confluenceTd">string</td><td class="confluenceTd">int</td><td class="confluenceTd">string</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">bool</td><td colspan="1" class="confluenceTd">bool</td><td colspan="1" class="confluenceTd">int</td></tr></tbody></table></div><p><strong><br/></strong></p><p><strong>Example PAM Table</strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">Mode</th><th class="confluenceTh">Base Address</th><th class="confluenceTh">Size (Power of Two)</th><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th colspan="1" class="confluenceTh">Route (Optional)</th><th colspan="1" class="confluenceTh">RW (Optional)</th><th colspan="1" class="confluenceTh">Read Interleave</th><th colspan="1" class="confluenceTh">Max Burst (Optional)</th><th colspan="1" class="confluenceTh">Split Wrap (Optional)</th><th colspan="1" class="confluenceTh">Fixed Supported</th><th colspan="1" class="confluenceTh">Incr Supported</th><th colspan="1" class="confluenceTh">Boundary (Optional)</th><th colspan="1" class="confluenceTh">Striped (Optional)</th><th colspan="1" class="confluenceTh">Stripe Group (Optional)</th></tr><tr><td colspan="1" class="confluenceTd">0</td><td class="confluenceTd">&quot;32'h0000_8000&quot;</td><td class="confluenceTd">&quot;32'h0000_4000&quot;</td><td class="confluenceTd">0</td><td class="confluenceTd"><span>&quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd">&quot;12'h001&quot;</td><td colspan="1" class="confluenceTd">&quot;RW&quot;</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1028</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">1024</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td class="confluenceTd">1</td><td class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h021&quot;</span></td><td colspan="1" class="confluenceTd">&quot;R&quot;</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">512</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">4096</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td class="confluenceTd"><span>&quot;32'h0002_0000&quot;</span></td><td class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td class="confluenceTd">2</td><td class="confluenceTd"><span>&quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h301&quot;</span></td><td colspan="1" class="confluenceTd">&quot;W&quot;</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd"><span>&quot;32'h0003_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd"><span>&quot;32'h0001_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h401&quot;</span></td><td colspan="1" class="confluenceTd">&quot;RW&quot;</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">2048</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><span>&quot;32'h4000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;32'h4000_4000&quot;</span></td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd"><span>&quot;RW&quot;</span></td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><span>2048</span></td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd"><span>&quot;32'h8000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;32'h4000_4000&quot;</span></td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd"><span>&quot;RW&quot;</span></td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><span>512</span></td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td></tr><tr><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd"><span>&quot;32'hc000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;32'h4000_4000&quot;</span></td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd"><span>&quot;RW&quot;</span></td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd"><span>512</span></td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">2</td></tr></tbody></table></div><p><br/></p><p><strong>Power Domain Fencing</strong></p><p>The Power Domain Fencing portion of the PAM Table consists of:</p><ul><li><strong>pamTargDomain</strong>: Each entry contains an object, in which contains an array of integers. Each integer indicates what domains a tranmsaction will pass through on the way to a target. If any of these domains is off according to domainInt the transaction will be terminated and an error response will be made.<br/><br/></li></ul><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh"><strong>pamTargDomain</strong></th></tr><tr><td colspan="1" class="confluenceTd"><span>object</span></td></tr></tbody></table></div><p><br/>Example:</p><p><strong>Example PAM Table</strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th colspan="1" class="confluenceTh"><strong>pamTargDomain</strong></th><th colspan="1" class="confluenceTh">Domain Error Condition</th><th colspan="1" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><p>{</p><p>   hash : [0, 4, 8]</p><p>}</p></td><td colspan="1" class="confluenceTd">~( \=domainInt[0].name=\in &amp;  \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[4].name</a>=\in &amp;  \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[8].name</a>=\in)</td><td colspan="1" class="confluenceTd">Indicates that a transaction to this PAM entry will travel through domains 0,4, and 8</td></tr><tr><td class="confluenceTd">1</td><td colspan="1" class="confluenceTd"><p>{</p><p>   hash : [0, 1, 2]</p><p>}</p></td><td colspan="1" class="confluenceTd">~( \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[0].name</a>=\in &amp;  \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[1].name</a>=\in &amp;  \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[2].name</a>=\in)</td><td colspan="1" class="confluenceTd">Indicates that a transaction to this PAM entry will travel through domains 0,1, and 2</td></tr><tr><td class="confluenceTd">2</td><td colspan="1" class="confluenceTd"><p>{</p><p>   hash : [0, 1, 2, 3 ,4 ,5]</p><p>}</p></td><td colspan="1" class="confluenceTd">~( &amp;(\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[5].name</a>=\in, \=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[4].name</a>=\in,\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[3].name</a>=\in,\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[2].name</a>=\in,\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[1].name</a>=\in,\=<a class="external-link" href="http://domainInt.name" rel="nofollow">domainInt[0].name</a>=\in))</td><td colspan="1" class="confluenceTd">Indicates that a transaction to this PAM entry will travel through domains 0, 1, 2, 3, 4, </td></tr></tbody></table></div><p><br/></p><p><strong>Multicast (Part of PAM Table) (Exclude from R1 Documentation)</strong></p><p>The Multicast portion of the PAM Table consists of:</p><ul><li><strong>Multicast Entry</strong>: Indicates that this entry is a Multicast entry in the PAM. This means the route assigned to this entry will go to a specific multicast block.</li><li><strong>Multicast User: </strong>Indicates that this entry gets the label from the User field. The label indicates which Multicast tree the transaction will go to.</li><li><strong>Multicast Label</strong>: If the label does not come from the User bits, it will come from this PAM entry.</li><li><strong><strong>Multicast  </strong>Label User Bits: </strong>Indicates which bits of User are used for the Label. Only one is used per block. This is not per entry.</li><li><strong>Multi<strong>cast  </strong>Mask User Bits: </strong>Indicates which bits of User are used for the Mask. The mask indicates which targets in a tree the multicast packet will go to. Only one is used per block. This is not per entry.<br/><br/></li></ul><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">pamMulti</th><th colspan="1" class="confluenceTh">pamMultiLabel</th><th class="confluenceTh">pamMultiUser</th><th class="confluenceTh">pamMultiLabelUserBits</th><th colspan="1" class="confluenceTh">pamMultiMaskUserBits</th></tr><tr><td colspan="1" class="confluenceTd"><span style="white-space: normal;">bool</span></td><td colspan="1" class="confluenceTd">int</td><td class="confluenceTd">bool</td><td class="confluenceTd">string</td><td colspan="1" class="confluenceTd">string</td></tr></tbody></table></div><p><br/>Example:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">pamMulti</th><th colspan="1" class="confluenceTh">pamMultiLabel</th><th class="confluenceTh">pamMultiUser</th><th class="confluenceTh">pamMultiLabelUserBits</th><th colspan="1" class="confluenceTh">pamMultiMaskUserBits</th><th colspan="1" class="confluenceTh">Description</th></tr><tr><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">X</td><td class="confluenceTd">X</td><td rowspan="3" class="confluenceTd">&quot;[1:0]&quot;</td><td rowspan="3" class="confluenceTd">&quot;[3:2]&quot;</td><td colspan="1" class="confluenceTd">Not a multicast entry.</td></tr><tr><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">Multicast entry that gets the label from user bits [1:0] and mask from [3:2]</td></tr><tr><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Multicast entry that gets the label from the PAM (forced to 1) and mask from user bits [3:2]</td></tr></tbody></table></div><p><br/></p><p><strong>Stripe Group Table</strong></p><div>The Stripe Group Table consists of:</div><ul><li><strong>Stripe Group</strong>: The group id of the entry.</li><li><strong>Stripe Target Count</strong>: The amount of targets inside the striping group.<ul><li>Review: Need some limits. Multiple of 2,3,4,5 and non prime numbers above that.</li></ul></li><li><strong>Strip Function</strong>:  A striping function takes in an address and outputs an entry in the stripe group table. The striping functions are defined delow.</li><li><strong>Stripe Size</strong>: The size of each region inside the stripe. Must be a power of two.</li><li><strong>Stripe Map</strong>: Defines how the address is modified to each target in a stripe group. <ul><li>The striped addresses to a target are not contiguous. Address mapping which is configured in this field can be used to remedy that. </li><li>0 - No Address Mapping</li><li>1 - Shift right the bits above the striping bits by number of striping bits.<ul><li>new address = {old_address[addr_width-1:N+nsb],old_address[N-1]} where N = log2(strpSize), nsb = Number of Striping Bits</li></ul></li><li>2 - Move MSB to replace the striping bits<ul><li>new address =  {old_address[addr_width-nsb-1:N+nsb],old_address[addr_width-1:addr_width-nsb],old_address[N-1]} where N = log2(strpSize)</li></ul></li></ul></li><li><strong>Stripe Function Hash:</strong> Determines which bits are used for the striping function if Strip Function == 1.<ul><li>If used Strip Map must be 0</li><li>Must indicate log2ceil(Stripe Target Count) amount of buts</li></ul></li></ul><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Stripe Group</th><th class="confluenceTh">Stripe Target Count</th><th class="confluenceTh">Stripe Function</th><th class="confluenceTh">Stripe Size (Power of 2)</th><th colspan="1" class="confluenceTh">Stripe Map</th><th colspan="1" class="confluenceTh">Stripe Bits Width</th><th colspan="1" class="confluenceTh">Stripe Function Hash</th></tr><tr><td class="confluenceTd"> int</td><td class="confluenceTd">int </td><td class="confluenceTd"> int</td><td class="confluenceTd"> int</td><td colspan="1" class="confluenceTd"> int</td><td colspan="1" class="confluenceTd">int</td><td colspan="1" class="confluenceTd">string</td></tr></tbody></table></div><p><br/></p><p><strong>Example Stripe Group Table</strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Stripe Group</th><th class="confluenceTh">Stripe Target Count</th><th class="confluenceTh">Stripe Function</th><th class="confluenceTh">Stripe Size (Power of 2)</th><th colspan="1" class="confluenceTh">Stripe Map</th><th colspan="1" class="confluenceTh"><span>Stripe Bits Width</span></th><th colspan="1" class="confluenceTh">Stripe Function Hash</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">2</td><td class="confluenceTd">0</td><td class="confluenceTd">512</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">4</td><td class="confluenceTd">0</td><td class="confluenceTd">2048</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">X</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">3</td><td class="confluenceTd">1</td><td class="confluenceTd">1024</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">{ hash : [53,54,62,63] }</td></tr></tbody></table></div>The Stripe Group Target Table consists of:<ul><li><strong>Target ID</strong>: See PAM.</li><li><strong>Mapped Base Address</strong>: See PAM.</li><li><strong>Route</strong>: See PAM.</li></ul><p><strong>Stripe Group Target Table X<br/></strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th class="confluenceTh">Route (Optional)</th></tr><tr><td class="confluenceTd"> int</td><td class="confluenceTd"> string</td><td class="confluenceTd">sting</td></tr></tbody></table></div><p><strong>Example Stripe Group Target Table for Stripe Groups 0 - 2</strong><strong><br/></strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th class="confluenceTh">Route (Optional)</th></tr><tr><td class="confluenceTd">4</td><td class="confluenceTd"> &quot;32'h0000_0000&quot;</td><td class="confluenceTd"><span>&quot;12'h401&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h402&quot;</span></td></tr></tbody></table></div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th class="confluenceTh">Route (Optional)</th></tr><tr><td class="confluenceTd">6</td><td class="confluenceTd"> <span>&quot;32'h0000_0000&quot;</span></td><td class="confluenceTd"><span>&quot;12'h403&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">7</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h404&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h405&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">9</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h406&quot;</span></td></tr></tbody></table></div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Target ID</th><th class="confluenceTh">Mapped Base Address (Optional)</th><th class="confluenceTh">Route (Optional)</th></tr><tr><td class="confluenceTd">10</td><td class="confluenceTd"> <span>&quot;32'h0000_0000&quot;</span></td><td class="confluenceTd"> <span>&quot;12'h407&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">11</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h408&quot;</span></td></tr><tr><td colspan="1" class="confluenceTd">12</td><td colspan="1" class="confluenceTd"><span> &quot;32'h0000_0000&quot;</span></td><td colspan="1" class="confluenceTd"><span>&quot;12'h409&quot;</span></td></tr></tbody></table></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PAMMode.1"><strong>PAM Mode</strong></h3><p>Each entry in the PAM can have a mode defined in pamMode. If pamMode is present inside the PAM the mode the CTL is in will have to match the mode indicated by the pamMode[entry] for there to be a PAM match for that entry. The CTL Mode can be delivered in three different ways:</p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExternalSignaling:.1">External Signaling:</h4><p>If external signaling is used then modeInt needs to be defined at the top level.</p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserBits:(ExcludefromR1Documentation).1">User Bits: <strong>(Exclude from R1 Documentation)</strong></h4><p>If user bits are used then modeUserBits are used to select which user bits carry the mode information for a transaction.</p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CSRRegister:(ExcludefromR1Documentation).1">CSR Register: <strong>(Exclude from R1 Documentation)</strong></h4><p>If a CSR Register is used then modeInt._SKIP_ needs to be true and modeUserBits needs to be &quot;&quot;. In addition apbInt needs to be populated.</p><p><br/></p></div><p>If all cases are defined in the JSON TACHL will first select external signals, then user bits, and then CSR Register</p><p><br/></p><div class="wiki-content"><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionStriping.1"><strong>Transaction Striping</strong></h3><div class="wiki-content">A transaction can be striped across targets using a striping function. This striping function is constructed using the parameters of this block.</div><div class="wiki-content"><u>Restrictions</u>:</div><div class="wiki-content">Each striping group can only have a multiple of 2 targets or exactly 3 targets. </div><div class="wiki-content">If a transaction spans across a stripe boundary the transaction will be split with an updated address, size, and target id. The responses of any transaction that is split from striping must be reordered. This is done using sequence numbers.</div><div class="wiki-content">For INCR</div><div class="wiki-content"><ul><li>Stripe Boundary is at strpSz</li></ul></div><div class="wiki-content"><ul><li>Request 1:  addr = addr, size = size to stripe boundary, targ id = entry[strpFunc(addr)], Transaction Left = len - size to stripe boundary</li><li>Request N: addr = addr of N-1 + size of N-1, size = min(Stripe Size, Transaction Left of N-1), targ id = entry[strpFunc(addr of N)], Transaction Left = Transaction Left of N-1 - size to stripe boundary</li><li>Note: each request can be split further according to the rules of the individual target. Behavior is defined later in this document.</li><li>Note: If the num_targ is a non power of two the next transaction may wrap to the first target where the two requests will be non contiguous with respect to each other. See below</li></ul><p>For WRAP</p><ul><ul><li>The wrap boundary can be calculated from the formula below:<br/><ul><li><p>Wrap Boundary = INT(addr/len_in_bytes) &lt;&lt; log2ceil(len_in_bytes)</p></li></ul></li><li><p class="wiki-content">The upper boundary can be calculated from the formula below:</p><ul><li><p>Upper Boundary = Wrap Boundary + len_in_bytes</p></li></ul></li></ul></ul><ul><li>Request 1: addr = addr, len = Upper Boundary - addr</li><li>Request 2: addr = Wrap Boundary, len = addr - Wrap Boundary </li><li>Each request will Then follow the INCR rules stated above.</li></ul><p>For FIXED</p><ul><li>Will not be split when striped and will not be effected by pamTargBoundary</li></ul></div><p><strong>Striping Functions</strong> </p><p><strong>strpFunc == 0 </strong></p><p><u>Power of Two:</u></p><div class="O1">target_entry = address[(N-1)+log2(num_targ):N] where N = log2(strpGrpSze)</div><p><u>Example:</u></p><p>     strpGrpSize = 1024B, num_targ = 4</p><p>     addr[11:10] will select the entry in the target table.</p><p>     case(addr[11:10])</p><p>          2'b00: Use Entry 0</p><p>          2'b01: Use Entry 1</p><p>          2'b10: Use Entry 2</p><p>          default: Use Entry 3</p><p><u>Non-Power of Two:</u></p><p>MSB = log2(pamSze)</p><p>N = log2(strpGrpSze)</p><p>strpWStrpBits is an engineered value and is fixed. Note: strpWStrpBits max value is (MSB-1-log2ceil(num_targ)) - N. So if strpWStrpBits was 7 it will be capped at 3 in this instance.</p><p>target_entry = (addr[MSB-1:MSB-1-log2ceil(num_targ)] + address[N+strpWStrpBits-1:N]) % num_targ</p><p><u>Example for 3</u></p><ul><li>strpGrpSize = 1kB, num_targ = 3, strpWStrpBits = 3, pamSze = 32kB (15 bits)</li><li>MSB = log2(pamSze)  = 15<ul><li>address[15-1 :N] = address[14:10]</li><li>address[MSB-1 : MSB-1-log2ceil(num_targ)] = address[14:13]</li><li>address[N + strpWStrpBits - 1:N]  = address[12:10]</li></ul></li><li>target entry = (addr[14:13] + address[12:10]) % 3</li></ul><p>Appendix A has a table with more detail</p><p><br/></p><div><p><strong>strpFunc == 1</strong></p><p>The starting entry in the table will be indexed using a parameter defined hash of CTL interface signals (strpFuncHash) that is num_bits = log2ceil(num_targ) wide.</p><p>The strpFuncHash will define an array of integers log2(num_bits) long inside a hash object from LSB to MSB.</p></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionBurstTypeandSplitting.1"><strong style="font-size: 16.0px;">Transaction Burst Type and Splitting</strong></h3><div class="wiki-content"><div class="wiki-content"><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 99.7985%;"><colgroup><col style="width: 2.12723%;"/></colgroup><colgroup><col style="width: 8.32043%;"/></colgroup><colgroup><col style="width: 4.46988%;"/></colgroup><colgroup><col style="width: 6.35476%;"/></colgroup><colgroup><col style="width: 3.82363%;"/></colgroup><colgroup><col style="width: 5.84315%;"/></colgroup><colgroup><col style="width: 7.45877%;"/></colgroup><colgroup><col style="width: 6.38169%;"/></colgroup><colgroup><col style="width: 6.11242%;"/></colgroup><colgroup><col style="width: 9.45136%;"/></colgroup><colgroup><col style="width: 4.73915%;"/></colgroup><colgroup><col style="width: 6.24706%;"/></colgroup><colgroup><col style="width: 12.7634%;"/></colgroup><colgroup><col style="width: 7.35106%;"/></colgroup><colgroup><col style="width: 8.21272%;"/></colgroup><tbody><tr><th colspan="15" class="confluenceTh"><div class="content-wrapper"><p>Rules for Transaction Splitting</p></div></th></tr><tr><th colspan="1" class="confluenceTh"><br/></th><th class="confluenceTh"><br/></th><th class="confluenceTh"><strong>Initiator</strong></th><th class="confluenceTh"><strong>Relationship</strong></th><th class="confluenceTh"><strong>Target</strong></th><th class="confluenceTh"><strong>Burst Transaction at Initiator</strong></th><th class="confluenceTh"><strong>Burst Supported at Target</strong></th><th colspan="1" class="confluenceTh"><strong>Narrow at Initiator</strong></th><th colspan="1" class="confluenceTh"><strong>Narrow Supported at Target</strong></th><th colspan="1" class="confluenceTh"><strong>Splitting Control Parameter</strong></th><th colspan="1" class="confluenceTh"><strong>Splitting in Initiator</strong></th><th class="confluenceTh"><strong>Splitting Behavior</strong></th><th class="confluenceTh"><strong>Splitting Equation (if any)</strong></th><th class="confluenceTh"><strong>Additional Splitting?</strong></th><th class="confluenceTh"><strong>Comments (if any)</strong></th></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td colspan="14" class="confluenceTd"><strong>Note: If an Exclusive transaction matches any splitting condition below the behavior of the system is unpredictable.</strong></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td colspan="1" class="confluenceTd"><p><strong>Narrow </strong><strong>Mismatch</strong></p></td><td colspan="12" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">1</th><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">INCR/FIXED</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">No &amp; ((1 &lt;&lt; in_txn_hdr_burstSize) &lt; Target Width in Bytes)</td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">Move to category <strong>Width Mismatch</strong></td><td colspan="1" class="confluenceTd"><p style="text-align: left;">The Narrow will not be split. Instead it must be transformed into a non narrow instruction. This means the burstSize of the transaction will be modified to be the full width at the target.</p><p style="text-align: left;">If the transaction is an exclusive then additionally the addr will be aligned to the target data width.</p><p style="text-align: left;">These modifications may cause extra bytes to be read at the target, the extra bytes in the write will be disabled with the write strobe.  Note: Extra read bytes will not be returned</p></td></tr><tr><th colspan="1" class="confluenceTh">2</th><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">WRAP</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">*</td><td colspan="1" class="confluenceTd">No &amp; ((1 &lt;&lt; in_txn_hdr_burstSize) &lt; Target Width in Bytes)</td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">Split Into One/Two INCRs</td><td colspan="1" class="confluenceTd">See Equation<strong> B </strong>to get INCRs</td><td colspan="1" class="confluenceTd"><p>See Equation<strong> A</strong> to split into single beat<strong> INCRs</strong></p></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">3</th><td colspan="1" class="confluenceTd">else</td><td colspan="9" style="text-align: center;" class="confluenceTd">N/A</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">Move to category <strong>Width Mismatch</strong></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td class="confluenceTd"><strong>Width Mismatch</strong></td><td colspan="13" class="confluenceTd">Resolves all width issues.</td></tr><tr><th colspan="1" class="confluenceTh">4</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">!=</td><td class="confluenceTd">*</td><td class="confluenceTd">FIXED</td><td class="confluenceTd">*</td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Split to single beat Increments</td><td class="confluenceTd">See Equation<strong> A</strong><br/><br/><br/></td><td class="confluenceTd">Move to category <strong>Target Native Layer Restrictions</strong></td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">5</th><td colspan="1" class="confluenceTd">else</td><td colspan="9" style="text-align: center;" class="confluenceTd">N/A</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">None</td><td colspan="1" class="confluenceTd">Move to category <strong>Unsupported Burst Types</strong>,</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td class="confluenceTd"><strong>Unsupported Burst Types</strong></td><td colspan="13" class="confluenceTd">Resolves all unsupported burst type issues.</td></tr><tr><th colspan="1" class="confluenceTh">6</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">FIXED</td><td class="confluenceTd">No</td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Split to single beat Increments</td><td class="confluenceTd">See Equation<strong> A</strong></td><td class="confluenceTd">Move to category <strong>Target Native Layer Restrictions</strong></td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">7</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">WRAP</td><td class="confluenceTd">No</td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">pamTargSplitWrap </td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Split into One or two Increments</td><td class="confluenceTd">See Equation<strong> B</strong></td><td class="confluenceTd">Move to category <strong>Max Burst Size/Boundary</strong> as new INCRs can be split further.</td><td class="confluenceTd">pamTargSplitWrap must be asserted</td></tr><tr><th colspan="1" class="confluenceTh">8</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">INCR</td><td class="confluenceTd">No</td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Split to single beat Increments</td><td class="confluenceTd">See Equation<strong> A</strong></td><td class="confluenceTd">Move to category <strong>Target Native Layer Restrictions</strong></td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh">9</th><td class="confluenceTd">else</td><td colspan="9" style="text-align: center;" class="confluenceTd">N/A</td><td class="confluenceTd">None</td><td class="confluenceTd">None</td><td class="confluenceTd">Move to category at <strong>Max Burst Size/Boundary</strong>.</td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td class="confluenceTd"><strong>Max Burst Size / Boundary (Striping)</strong></td><td colspan="13" class="confluenceTd">Resolves all issues from the transaction being larger than a specified size or going past a specified boundary. Note: If striping is enabled, the striping size will be reflected in a boundary that cannot be crossed.</td></tr><tr><th colspan="1" class="confluenceTh">10</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">FIXED</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">pamTargMaxBurst</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">The burst will be split into FIXED transactions no more than (maxBurstSize <strong style="text-align: left;"><span style="color: inherit;">&gt;&gt; </span></strong><span style="color: inherit;">log2(ATUI.wData)) &lt;&lt; </span><span style="color: inherit;">burstSize</span></td><td class="confluenceTd">See Equation<strong> C</strong></td><td class="confluenceTd">Move to category <strong>Native Layer Restrictions</strong>.</td><td class="confluenceTd">(if (maxBurstSize <strong style="text-align: left;"><span style="color: inherit;">&gt;&gt; </span></strong><span style="color: inherit;">log2(ATUI.wData)) &lt;&lt; </span><span style="color: inherit;">burstSize) </span>&lt; len_in_bytes where maxBurstSize is from PAM</td></tr><tr><th colspan="1" class="confluenceTh">11</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">WRAP</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">pamTargMaxBurst</td><td class="confluenceTd">Yes</td><td class="confluenceTd"><p>Split into One or two Increments if:</p><p>a) The size of the WRAP is greater than maxBurstSize</p><p>b) The size of the WRAP crosses a defined boundary.</p></td><td class="confluenceTd">See Equation<strong> B</strong></td><td class="confluenceTd">See Equation<strong> D </strong>on one or both increments. Move to category <strong>Native Layer Restrictions </strong>for one or both increments</td><td class="confluenceTd">if maxBurstSize &lt; len_in_bytes where maxBurstSize is from PAM</td></tr><tr><th colspan="1" class="confluenceTh">12</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">*</td><td class="confluenceTd">INCR</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">pamTargMaxBurst</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">The burst will be split into INCR transactions no more than maxBurstSize</td><td class="confluenceTd">See Equation<strong> D</strong></td><td class="confluenceTd">Move to category <strong>Native Layer Restrictions</strong>.</td><td class="confluenceTd">if maxBurstSize &lt; len_in_bytes where maxBurstSize is from PAM</td></tr><tr><th colspan="1" class="confluenceTh">13</th><td class="confluenceTd">else</td><td colspan="9" style="text-align: center;" class="confluenceTd">N/A</td><td class="confluenceTd">None</td><td class="confluenceTd">None</td><td class="confluenceTd">Move to category <strong>Native Layer Restrictions</strong>.</td><td class="confluenceTd"><br/></td></tr><tr><th colspan="1" class="confluenceTh"><br/></th><td class="confluenceTd"><strong>Target Native Layer Restrictions</strong></td><td colspan="13" class="confluenceTd">Resolves all issues from the transaction being larger than a specified size determined by Native Layer restrictions at the target. Not in CTL Layer, however is added to be informative as it it uses same CTL splitting methodology.</td></tr><tr><th colspan="1" class="confluenceTh">14</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">AXI</td><td class="confluenceTd">FIXED</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">Split transaction as if maxBurstSize was (16 * Target.wData)/8</td><td class="confluenceTd">See Equation<strong> C </strong>with new maxBurstSize, Note: There may be a new burstSize as it has been transformed to fit the target width.</td><td class="confluenceTd">None.</td><td data-highlight-colour="#fff0b3" class="confluenceTd">Will not verify in R1 as per SYM-3261</td></tr><tr><th colspan="1" class="confluenceTh">15</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">AXI</td><td class="confluenceTd">WRAP</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">Split transaction as if maxBurstSize was (16 * Target.wData)/8</td><td class="confluenceTd">See Equation<strong> B</strong> with new maxBurstSize</td><td class="confluenceTd">See Equation<strong> D </strong>for one or both increments with maxBurstSize = (256 * Data Width)/8, then no more splitting is needed. </td><td class="confluenceTd">Note: There may be a new Data Width as it has been transformed to fit the target width.</td></tr><tr><th colspan="1" class="confluenceTh">16</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">AXI</td><td class="confluenceTd">INCR</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">Split transaction as if maxBurstSize was (256 * Target.wData)/8</td><td class="confluenceTd">See Equation<strong> D </strong>with new maxBurstSize</td><td class="confluenceTd">None.</td><td class="confluenceTd">Note: There may be a new Data Width as it has been transformed to fit the target width.</td></tr><tr><th colspan="1" class="confluenceTh">17</th><td class="confluenceTd"><br/></td><td class="confluenceTd">*</td><td class="confluenceTd">Taken Care of in Group <strong>Width Mismatch</strong></td><td class="confluenceTd">APB</td><td class="confluenceTd">INCR</td><td class="confluenceTd">Taken Care of in <strong>Unsupported Burst Types</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Taken Care of in Group <strong>Narrow </strong><strong>Mismatch</strong></td><td colspan="1" class="confluenceTd">Required based on Configuration</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd">Split into single beat transactions on APB as if maxBurstSize was (Target.wData/8)</td><td class="confluenceTd">See Equation<strong> D </strong>with new maxBurstSize</td><td class="confluenceTd">None.</td><td class="confluenceTd">Note: There may be a new Data Width as it has been transformed to fit the target width.</td></tr><tr><th colspan="1" class="confluenceTh">17</th><td colspan="1" class="confluenceTd">else</td><td colspan="13" style="text-align: center;" class="confluenceTd">End of Table</td></tr></tbody></table></div><p class="auto-cursor-target">Note: All splitting is done regardless of modifiable or non-modifiable. If non modifiable transactions need to not be split the system needs to be configured to support that non-modifiable transaction throughout its flow.</p></div><div class="wiki-content"><div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Equation ID</th><th class="confluenceTh">Description </th><th class="confluenceTh">Equation</th></tr><tr><th class="confluenceTh">A</th><td class="confluenceTd">Split into single beat increments.</td><td class="confluenceTd"><p><strong>First Beat</strong>:<br/>addr= addr<br/>burstType= INCR<br/>len=  (Fixed) ? Init.burstSize : (Init.wData/8) - (addr - align(addr,Init.wData)) - 1<br/><strong>Beat N</strong>:<br/>addr = (Fixed) ? addr: (addr+ N*(Init.wData/8))<br/>burstType = INCR<br/>len =  (Fixed) ? Init.burstSize : (Init.wData/8) - 1</p></td></tr><tr><th class="confluenceTh">B</th><td class="confluenceTd">Split Wrap Into One/Two Increments</td><td class="confluenceTd"><p><strong>len_in_bytes</strong> = iSIZE * iLEN<br/><strong>Lower Boundary</strong> = align(addr,len_in_bytes)<br/><strong>Upper Boundary</strong> = Lower Boundary + len_in_bytes -1 <br/><br/><strong>If (Lower Boundary == iADDR)</strong><br/>Unmodified except oBURST = INCR</p><p><strong>else if (len_in_bytes &lt;= (ATUI.wData/8)) </strong><br/>oBURST = INCR<br/>oADDR = Lower Boundary</p><p><strong>else</strong><br/>INCR1 - INCR from iADDR to Upper Boundary<br/>INCR2 - INCR from Lower Boundary to iADDR</p></td></tr><tr><th class="confluenceTh">C</th><td class="confluenceTd">Split Fixed from a certain maxBurstSize</td><td class="confluenceTd"><p>Boundary needs no consideration since a fixed transaction cannot cross a Boundary.<br/><strong>maxSize</strong> = (maxBurstSize <strong style="text-align: left;"><span style="color: inherit;">&gt;&gt; </span></strong><span style="color: inherit;">log2(ATUI.wData)) &lt;&lt; </span><span style="color: inherit;">burstSize</span><br/><strong>bytesPerBurst</strong> = (align(iADDR, burstSize) + burstSize) - iADDR<br/><strong>Request 1</strong>  : oADDR = iADDR<br/>len = lower(bytesPerBurst,len)<br/><strong>if( N * maxBurstSize &lt;= len_in_bytes)</strong><br/><strong>  Request N</strong> :  oADDR = iADDR<br/>                        len = maxSize<br/><strong>else</strong><br/><strong>  Request N</strong>:   oADDR = iADDR<br/>                        len = len_in_bytes - ((N-1) *                                  bytesPerBurst)</p><p>oBURST = FIXED</p></td></tr><tr><th class="confluenceTh">D</th><td class="confluenceTd">Split Incr from a certain maxBurstSize</td><td class="confluenceTd"><p>bytesToBoundary represents the amount of bytes until that striping boundary.</p><p><strong>maxSize</strong> = minimum(maxBurstSize, bytesToBoundary)<br/><strong>bytesToMaxSize</strong> = (align(oADDR, Data Width of Initiator) + maxSize) - oADDR<br/><strong>Request 1</strong>  : <br/>    oADDR = iADDR, <br/>    len = min(ctl_req_len, bytesToMaxSize), <br/>    bytesLeft = ctl_req_len - len<br/><strong>Request N</strong>  : <br/>    oADDR = oADDR[N-1] + len[N-1]<br/>    len = min(bytesLeft[N-1] , bytesToMaxSize) <br/>    bytesLeft = bytesLeft[N-1] - len</p><p>oBURST = INCR</p></td></tr></tbody></table></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowTransactions.1">Narrow Transactions</h3></div></div></div></div></div><div class="page view"><div class="wiki-content"><div class="wiki-content"><div class="wiki-content"><div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Anarrowtransactioninthiscontextisdefinedwhentxn_hdr_burstSize(BurstWidth)issmallerthantxn_hdr_maxBurstSize(ChannelWidth)..1"><span style="font-size: 14.0px;font-weight: 400;letter-spacing: 0.0px;">A narrow transaction in this context is defined when txn_hdr_burstSize (Burst Width)  is smaller than txn_hdr_maxBurstSize (Channel Width).  </span></h3><p><u>Restriction</u>:</p><ul><li>The channel width must be a power of 2 multiple of the burst width. </li><li>Any burst type can have narrow transactions</li><li>There is no limit on amount of narrow read bursts</li></ul><p><u>Byte Lanes</u>:</p><ul><li>In incrementing or wrapping bursts different byte lanes or used for each beat<ul><li>Each beat is split into txn_hdr_maxBurstSize/txn_hdr_burstSize  byte lanes where each beat contains valid data for a single byte lane. </li><li>The byte lane width is txn_hdr_burstSize (Burst Width).</li><li>The starting byte lane is dependent on the address. </li></ul></li><li>In a fixed burst, the same byte lanes are used on each beat.</li></ul><p><u>Data Packing:</u></p><ul><li>The read and write request will flow through unmodified.</li><li>For Write Data: The narrow write data beats will be packed into a wide beat to send to the ATUT. The byte lanes will stay consistent through the packing. </li><li>For Read Data: The CTLI will receive a wide data beat. Then using context will split the wide beat to multiple narrow bursts masking out extraneous data outside what was requested. </li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1200" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-18%2016:36:17.png?api=v2"></span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1200" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-18%2016:56:47.png?api=v2"></span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1200" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-18%2017:16:45.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context.2">Context</h3><p>The Common Layer Context is configured on a block by block basis. Which fields exist depends on what functionality the Common Layer has (The parameters above) and don't have to be set by the user/Maestro.</p><p>The context may halt a transaction if the following occurs (and cause a performance loss):</p><ul><li>Next Sequence Number Unavailable </li><li>Too many outstanding reads/writes/total</li><li>Ordering ID and Channel ID combination match to a transaction in a different queue.</li><li>If no Reorder Buffer, Ordering ID and Channel ID combination will lock on a target. Thus if a transaction comes in and matches an Ordering ID and Channel ID with another transaction going to a different target it will block.</li><li><span style="letter-spacing: 0.0px;">If RDI is not supported, a target can only receive a single ID at a time. So if a transaction matches a target and does not match the </span><span style="letter-spacing: 0.0px;">Ordering ID and Channel ID it will block.</span></li><li><span>If RDI is not supported, a split transaction (through splitting or striping) must complete before a new transaction is accepted. </span></li><li><span style="letter-spacing: 0.0px;">If nVC &gt; 1, A transaction can only go to a target 1 VC at a time, thus if a transaction matches a target in addition to Ordering ID and Channel ID, but does not match VC it will block.</span></li></ul></div><p>All errors are sourced from the context block and travel along these signals:</p><ul><li>timeoutError</li><li>bufferedWriteError</li><li>rwError</li><li>decodeError</li><li>transportError</li><li>exclusiveError</li><li>powerDomainError</li></ul><p>All errors will respond in strict sequence number order to follow all possible ordering rules.</p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ContextFields.1">Context Fields</h4><div><div><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-top: 10.0px;"><colgroup><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">Field Name</th><th style="text-align: center;" class="confluenceTh">Field Width</th><th style="text-align: center;" class="confluenceTh">Driver</th><th style="text-align: center;" class="confluenceTh">Set Condition</th><th style="text-align: center;" class="confluenceTh">Clear Condition</th><th colspan="1" style="text-align: center;" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">resp_sent</td><td style="text-align: left;" class="confluenceTd">1</td><td style="text-align: left;" class="confluenceTd">1</td><td style="text-align: left;" class="confluenceTd">clear_resp_match</td><td style="text-align: left;" class="confluenceTd">write_this_entry</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">dp_sent</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">clear_dp_match</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">id</td><td colspan="1" class="confluenceTd">wCtlId</td><td colspan="1" class="confluenceTd">requestInterface.id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">youngest_clear</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">compressed_id</td><td colspan="1" class="confluenceTd">wSmiOrderingId</td><td colspan="1" class="confluenceTd">new_compressed_id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">seq_num</td><td colspan="1" class="confluenceTd">log2ceil(nSeqnum)</td><td colspan="1" class="confluenceTd">next_seq_num</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">addr</td><td colspan="1" class="confluenceTd">wCtlAddr</td><td colspan="1" class="confluenceTd">requestInterface.addr</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">exclusive</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">requestInterface.atomic[1]</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">valid</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">requestInterface.valid</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">response_matched_this_entry</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">youngest</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">targ_id</td><td colspan="1" class="confluenceTd">wCtlTargId</td><td colspan="1" class="confluenceTd">requestInterface.target_id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">ordering_id</td><td colspan="1" class="confluenceTd">wCtlOrderingId</td><td colspan="1" class="confluenceTd">requestInterface.ordering_id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">channel_id</td><td colspan="1" class="confluenceTd">wCtlChannelId</td><td colspan="1" class="confluenceTd">requestInterface.channel_id</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">queue</td><td colspan="1" class="confluenceTd">wQueue</td><td colspan="1" class="confluenceTd">queue_map_out</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">type</td><td colspan="1" class="confluenceTd">wCtlType</td><td colspan="1" class="confluenceTd">requestInterface.type</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">split</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">splitInterface.split</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">last</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">splitInterface.last</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">first</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">splitInterface.first</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">buf_write</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">buffered &amp; ~blocked</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">narrow</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">narrow</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">atomic</td><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">requestInterface.atomic[7:4]</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">atomic_rr</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">atomic_rr_drive</td><td colspan="1" class="confluenceTd">atomic_rr_set</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">atomic_wr</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">atomic_wr_drive</td><td colspan="1" class="confluenceTd">atomic_wr_set</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">burst_size</td><td colspan="1" class="confluenceTd">wCtlBurstSize</td><td colspan="1" class="confluenceTd">requestInterface.burstSize</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">narrow_offset</td><td colspan="1" class="confluenceTd">wCtlAddr (Needs Optimization)</td><td colspan="1" class="confluenceTd">requestInterface.addr</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">rw_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw_error</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">decode_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">pamInterface.decode_error</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">exclusive_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">exclusive_error</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">power_domain_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">power_domain_error</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">beats</td><td colspan="1" class="confluenceTd">Variable</td><td colspan="1" class="confluenceTd">transaction_in_beats</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">timeout</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">timeout_tick</td><td colspan="1" class="confluenceTd">timeout_tick</td><td colspan="1" class="confluenceTd">response_matched_this_entry</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">timeout_error</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">timeout_error_occured</td><td colspan="1" class="confluenceTd">timeout_tick</td><td colspan="1" class="confluenceTd">sent_error_response</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">vc</td><td colspan="1" class="confluenceTd">wVc</td><td colspan="1" class="confluenceTd">destination_vc</td><td colspan="1" class="confluenceTd">write_this_entry</td><td colspan="1" class="confluenceTd">zero</td><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestCounter.1">Request Counter</h3><p>There is counter for outstanding read and write (and/or total) requests. Once that number the max number is reached, no more requests can be issued.</p><p>The number of requests is parameterized (no counter if corresponding parameter value is zero).</p><p>If there is context per outstanding request (for ID compression, ID inter-lock, request timeout or buffered write etc.), there is not corresponding request counter.</p><p>The request counter is controlled through the maxOutTotal, maxOutRd, and maxOutWr parameters.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SequenceNumber.1">Sequence Number</h3><p>The sequence numbers are shared between reads and writes and is 2X the number (1-bit each) of outstanding requests.</p><p>-          Full sequence number is used to enable response reordering</p><p>The sequence numbers are assigned to requests in order and when the next sequence number is not free, the requests are held off (that is why the number of sequence numbers is made 2X the requests).</p><p>A sequence number can be poisoned if the associated transaction has a timeout error. In this case this sequence number will not be used again until reset or the condition below and will be skipped when assigning new ones.</p><p>The poisoned sequence numbers will all be unpoisoned when every sequence number becomes poisoned.</p><p>A sequence number is allocated when a transaction leaves the context block, and is cleared once the full response is seen from the context block.</p><p>If a transaction is split all of the created transactions will have separate sequence numbers.</p><p>Sequence numbers are used for context lookup throughout the CTL layer. If sequence numbers are absent then IDs are used.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-LatencyMeasurement(StatsInterface).1">Latency Measurement (Stats Interface)</h3><p>Each context entry will consist of a signal indicating it has been written to and a signal indicating it has been cleared if its target matches the one indicated inside the CTLSCR register.</p><p>These signals will be bundled to a <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">S</a>tats Interface. This interface will go out of the CTL Initiator an feed a pmon_stats block. See pmon uArch for measurements possible.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-IDCompression.1"><span style="font-size: 16.0px;font-weight: bold;">ID Compression</span></h3><p>ID Compression will be used when the SMI Ordering ID field is smaller than the CTL Ordering ID field. The compression is done as follows.</p><p>Lets say the Ordering ID field is M bits wide on the CTL interface and N bits wide on the SMI interface. N bits of the M bit wide CTL Ordering ID will be used to drive the SMI Ordering ID. These bits will be selected by a parameterizable mask that is M bits wide and has N bits unmasked.</p><ul><li>For example, CTD ID = 8 bits wide, SMI ID = 4 bits wide. idCompMask = 01010101. The compressed smi_id = {ctl_id[6],ctl_id[4],ctl_id[2],ctl_id[0]}</li></ul><p>For ID compression each transaction will be given a sequence number. The responses will do look-up in the ID compression context using the sequence number to map to the original request ID.</p><p><u>Exclusive Monitoring</u></p><p>Exclusive monitoring requires an uncompressed ID from the CTL interface. If ID compression is used and a transaction is Exclusive, the CTL Layer must forward the full id in the msg_id SMI signal.</p><ul><li>Going to the same target.</li></ul></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-InputQueues(ExcludefromR1Documentation).1">Input Queues <strong>(Exclude from R1 Documentation)</strong></h3><p><u>Queue Map</u></p><p>Once a transaction is inside the Common Layer it will be mapped to a queue. Each queue is independent in terms of ordering so two transactions with ordering dependencies cannot go to separate queues. If a second transaction needs to go on a separate queue it must be barrier-ed. </p><p>The queue mapping is done through the parameterqueueMap<strong>. </strong>queueMap is an array of Verilog statements which resolve into a 1 or 0. Each entry represents a queue. If a queues verilog statement evaluates to 1 that transaction will go into that queue. If more than 1 Verilog statesment resolves to 1 the first queue is selected. </p><p>The Common Layer Signals that can be used in this queueMap parameter are as follows (Use these specific signal names when populating queueMap):</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Common Layer Signal (CTLi)</p></th><th colspan="1" style="text-align: left;" class="confluenceTh"><p>SMI Signal (ATUt)</p></th><th style="text-align: left;" class="confluenceTh"><p>Release</p></th><th colspan="1" style="text-align: left;" class="confluenceTh"><p>Notes</p></th></tr></thead><tbody><tr><td style="text-align: left;" class="confluenceTd"><span>ctl_</span>user</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td style="text-align: left;" class="confluenceTd"><span>ctl_</span>qos</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ctl_txn_channel_id (Read/Write)</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd">It is suggested that this is included (if Read/Writes arent ordered seperatly)</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><span>ctl_txn_ordering_id</span></td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd">It is suggested that this is included.</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><span>ctl_multicast_label</span></td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><span>ctl_targ_id</span></td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: left;" class="confluenceTd">smi_ctl_msg_valid</td><td colspan="1" style="text-align: left;" class="confluenceTd">1.0</td><td colspan="1" style="text-align: left;" class="confluenceTd">VCs Map directly to Queues for 1.0 so only valid can be used.</td></tr></tbody></table></div><p>Example Queue Setup:</p><p>queueMap = [</p><p>                          &quot;(<span>ctl_txn_channel_id == 0) &amp; (ctl_qos &gt; 2) &amp; (ctl_txn_ordering_id[0])&quot;,</span></p><p>                          &quot;(ctl_txn_channel_id == 0) &amp; (ctl_qos &lt;= 2) &amp; (ctl_txn_ordering_id[0])&quot;,</p><p>                          &quot;(ctl_txn_channel_id == 0) &amp; (ctl_txn_ordering_id[1])&quot;,</p><p>                          &quot;(ctl_txn_channel_id == 1) &amp; (ctl_txn_ordering_id[1])&quot;</p><p>                     ]</p><p>vcMap = [ </p><p>                        0,</p><p>                        0,</p><p>                        1,</p><p>                        2</p><p>             ]</p><p>queuePriMap = [ </p><p>                        0,</p><p>                        1,</p><p>                        3,</p><p>                        3</p><p>             ]</p><p>QoS Remap (Not in R1):</p><p>The input transaction QoS can also be remapped based on qosMapMode.</p><ol><li>Queue Based - The QoS will be remapped to the QoS of the matched Queue. (queue #)</li><li>Input Transaction QoS Based</li><li>No Remap (use input QoS)</li></ol><p>There is a configurable register to do the QoS remapping. The mapped QoS is the ATP packet QoS while the transaction address is the ATP Message QoS. If there is no QoS remapping the input transaction QoS is the only QoS.</p><p><u>VC Map</u></p><p><span class="legacy-color-text-blue3">A queue has a direct map to a vc using the parameter</span>vcMap <span class="legacy-color-text-blue3">which is am array of integers. Each entry indicates which VC the queue goes to. There are no restrictions on this.</span></p><p><u>Queues</u>:</p><p><strong>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16161182/OBSOLETE-DELETE+HW-SYM+sym_common_queue" data-linked-resource-id="16161182" data-linked-resource-version="12" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_common_queue</a> for block implementing queue functionality.</strong></p><p>The input queues store the input requests that queue up for arbitration. </p><p>A transaction can map to any queue based on anything inside the Common Layer signaling (including Common Layer Flows) based on queue map explained above. </p><p>Each queue has an assigned priority and secondary priority. These priorities will drive the packet priority if the signaling exists in the SMI layer. The primary priority will be used unless a queue is demoted by the Rate Limiter. See Rate Limiter section for more detail.</p><p>Each queue can have a corresponding data queue to store write data alongside a written request. The size of these data buffers is configurable. At the moment every data queue must be the same size.</p><p>Each queue also has an assigned network VC.</p><p><br/></p></div><p><strong>Note: See </strong><strong><a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16172082/HW-SYM+VC+Microarchitecture+and+Restrictions" data-linked-resource-id="16172082" data-linked-resource-version="20" data-linked-resource-type="page">HW-SYM VC Microarchitecture and Restrictions</a> For more information.</strong></p><p><br/></p><div class="wiki-content"><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Arbiter(ExcludefromR1Documentation).1"><span>Arbiter <strong>(Exclude from R1 Documentation)</strong></span></h3><p><span><br/></span></p><div><p>The arbiter selects one of the eligible requests to be sent out on the symphony message interface to the packet layer. </p><p>This arbitration is done using a <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164560/OBSOLETE-DELETE+HW-SYM+sym_smi_arb" data-linked-resource-id="16164560" data-linked-resource-version="9" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_smi_arb</a> that is inside the <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16161182/OBSOLETE-DELETE+HW-SYM+sym_common_queue" data-linked-resource-id="16161182" data-linked-resource-version="12" data-linked-resource-type="page">sym_comon_queu</a>e. In summary, the arbiter will first select a VC and then select a queue within that VC. The high-level diagram is seen below.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1024" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-10%2019:2:55.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TransactionRequeuing(ExcludefromR1Documentation).1"><strong>Transaction </strong>Requeuing <strong>(Exclude from R1 Documentation)</strong></h3><p>Transaction ordering occurs at the input of queues. The queue table below forces that at any given time an ID belongs to only 1 queue. </p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Ordering Match (a)</th><th colspan="1" class="confluenceTh">Queue Match According to Context Table</th><th colspan="1" class="confluenceTh"> Address Match In Different Queue</th><th colspan="1" class="confluenceTh">Action</th></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">No Ordering Dependency. En-queue to proper queue.</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Put Transaction into Queue of Ordering Match.</td></tr><tr><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">No Ordering Dependency. En-queue to proper queue.</td></tr><tr><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">X</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Put Transaction into Queue of Address match..</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Set Barrier on Transaction with Address Match.</td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">Put Transaction in Queue of Ordering Match. Set Barrier on Transaction with Address Match.</td></tr></tbody></table></div><p>Note: &quot;Queue match according to context table&quot; means that the original intended queue matches with the queue of a previous order matched transaction.</p><p>Note: a) Ordering Match means that a dependency was seen based on ordering id and channel ID. See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157432/HW-SYM+Common+Layer+Protocol" data-linked-resource-id="16157432" data-linked-resource-version="84" data-linked-resource-type="page">HW-SYM Common Layer Protocol</a> for ordering requirements. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoS(QoSChange).1"><span class="inline-comment-marker" data-ref="37243aaf-61cb-4529-bde8-5f5dfa70f055">QoS ( QoS Change )</span> </h3><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TrafficClassandInternalPriorityMapping.1"><strong><u>Traffic Class and Internal Priority Mapping</u></strong></h4><p>A QoS will come in on the ctl_qos signal of the CTL interface. Depending on the packet definition there might be msg_qos, qos, or both fields.</p><ul style="list-style-type: square;"><li>If only a single field exists it will take the value at the bottom of the ctl_qos signal</li><li>If both exist and ctl_qos is smaller in width than the width of both fields combined ctl_qos will be replicated into both fields</li><li>If both exist and ctl_qos is equal to or larger than the width of both fields combined it will map qos to {qos,msg_qos}</li></ul><p>The msg_qos field might be raised or lowered depending on rate limiting and latency pressure.</p><p>From this modified qos signal an Internal QoS and Priority value will be looked up from a register lookup table involving CTLQM0, CTLQM1, CTLQM2, CTLQM3.</p><p>The resulting Internal QoS will be propagated inside the msg_qos field of the packet.</p><p>The qos will be propagated to the qos field of the packet..</p><p>The Priority will be mapped to the pri field of the packet. </p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimitingandLatencyPressure.1"><u>Rate Limiting and Latency Pressure</u></h4><span style="letter-spacing: 0.0px;">Depending on the number of buckets each queue has there are three modes. In each mode the Rate Limiter is modifying the incoming QoS value that will be used for the Priority and Internal QoS lookup.</span></div></div></div></div></div><div class="page view"><div class="wiki-content"><div class="wiki-content"><div class="wiki-content"><u><span style="color: black;">Two Buckets:</span></u><p><span style="color: black;">- The transaction will keep the same QoS when the First Bucket has enough credits for the transaction. </span></p><p><span class="legacy-color-text-default">- When the first bucket doesn't have enough credits and the second bucket does the transaction will have a demoted QoS equal to the incoming QoS minus </span><span class="inline-comment-marker" data-ref="b4616bbe-5c3e-4c30-87ab-9dfdf7346b07">CTLQLX.QSD (QoS </span><em style="color: black;"><span style="color: inherit;">Dec. Step)</span></em><span style="color: inherit;">. This has a lower bound of CTLQLX.QN (QoS <em>Min.)</em>.</span></p><p><span style="color: black;">- Once the second bucket does not have enough credits the transaction will be blocked until the first or second bucket gets credits.</span></p><p><u><span style="color: black;">One Bucket (Second Bucket has Size of 0):</span></u></p><p><span style="color: black;">- The transaction will keep the same QoS when the First Bucket has enough credits for the transaction. </span></p><p><span style="color: black;">- Once the first bucket doesnt have enough credits the transaction will be blocked until the first bucket gets credits</span></p><p><u><span style="color: black;">No Buckets:</span></u></p><p><span style="color: black;">- The transaction will keep the same QoS and not be blocked based on credits. </span></p><p><span class="legacy-color-text-default">On top of above if &quot;Latency Pressure&quot; is asserted priority would increase by </span><span class="legacy-color-text-blue3">CTLQLX.QSI (</span><em style="color: black;"><span style="color: inherit;">QoS Inc. Step) </span></em><span>to a max of CTLQLX.QM (QoS </span><em style="color: inherit;">Max.)</em><em style="color: inherit;">. </em><span>The </span><span class="legacy-color-text-default">behavior</span><span> of the Latency Pressure signal is defined inside the PMON that is attached to the CTL layer. </span></p><p><span>Each buckets credits will reset to 0 every <span class="legacy-color-text-blue3">CTLQR.CYCLES cycles if it is non 0. </span></span></p><p><span><span style="color: black;"><span style="color: inherit;">See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16163237/OBSOLETE-DELETE+HW-SYM+sym_common_rate_limiter" data-linked-resource-id="16163237" data-linked-resource-version="17" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_common_rate_limiter</a> for more detail about bucket behaviour and configuration. </span></span></span></p><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-QoStoPacketFieldMappings.1"><strong><u>QoS to Packet Field Mappings</u></strong></h4><p><strong><u><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1000" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2021-1-12_15-20-34.png?api=v2"></span></u></strong></p><p><span style="color: black;"><span style="color: inherit;">The resulting equations for three QoS signals are as follows. This mapping is done in the SMI layer so the same fields are present into and out of this logic.</span></span></p></div></div></div></div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Fields Present </th><th class="confluenceTh">Mapping</th></tr><tr><td class="confluenceTd">SMI QoS and Msg QoS Fields</td><td class="confluenceTd"><p><span style="color: black;"><span style="color: inherit;"><strong>smi_qos</strong>           = smi_qos</span></span></p><p><span style="color: black;"><span style="color: inherit;">first_bucket_has_enough_credits = (single_bucket or double_bucket) ? first_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">second_bucket_has_enough_credits = (double_bucket) ? second_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">smi_bucket_qos = (first_bucket_has_enough_credits)        ? smi_msg_qos :</span></span></p><p><span style="color: black;"><span style="color: inherit;">                              (second_bucket_has_enough_credits)  ? Math.max((smi_msg_qos - <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSD), <span class="legacy-color-text-blue3">CTLQLX</span>.QN) :</span></span></span></p><p><span style="color: black;"><span style="color: inherit;"><span>                              smi_msg_qos ;</span></span></span></p><p><span style="color: black;"><span style="color: inherit;">lookup_qos       = (latency_pressure) ? Math.min(smi_bucket_qos + <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSI, <span class="legacy-color-text-blue3">CTLQLX</span>.QM)  </span>: smi_bucket_qos ;</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_msg_qos   = </strong>CTLQM.qos_lookup(lookup_qos)</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_pri             = </strong>CTLQM.pri_lookup(lookup_qos)</span></span></p></td></tr><tr><td class="confluenceTd">SMI Msg QoS Field Only</td><td class="confluenceTd"><p><span style="color: black;"><span style="color: inherit;">first_bucket_has_enough_credits = (single_bucket or double_bucket) ? first_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">second_bucket_has_enough_credits = (double_bucket) ? second_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">smi_bucket_qos = (first_bucket_has_enough_credits)        ? smi_msg_qos :</span></span></p><p><span style="color: black;"><span style="color: inherit;">                              (second_bucket_has_enough_credits)  ? Math.max((smi_msg_qos - <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSD), <span class="legacy-color-text-blue3">CTLQLX</span>.QN) :</span></span></span></p><p><span style="color: black;"><span style="color: inherit;"><span>                              smi_msg_qos ;</span></span></span></p><p><span style="color: black;"><span style="color: inherit;">lookup_qos       = (latency_pressure) ? Math.min(smi_bucket_qos + <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSI, <span class="legacy-color-text-blue3">CTLQLX</span>.QM)  </span>: smi_bucket_qos ;</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_msg_qos   = </strong>CTLQM.qos_lookup(lookup_qos)</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_pri             = </strong>CTLQM.pri_lookup(lookup_qos)</span></span></p></td></tr><tr><td class="confluenceTd">SMI QoS Field Only</td><td class="confluenceTd"><p><span style="color: black;"><span style="color: inherit;">first_bucket_has_enough_credits = (single_bucket or double_bucket) ? first_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">second_bucket_has_enough_credits = (double_bucket) ? second_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">smi_bucket_qos = (first_bucket_has_enough_credits)        ? smi_qos :</span></span></p><p><span style="color: black;"><span style="color: inherit;">                              (second_bucket_has_enough_credits)  ? Math.max((smi_qos - <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSD), <span class="legacy-color-text-blue3">CTLQLX</span>.QN) :</span></span></span></p><p><span style="color: black;"><span style="color: inherit;"><span>                              smi_qos ;</span></span></span></p><p><span style="color: black;"><span style="color: inherit;">lookup_qos       = (latency_pressure) ? Math.min(smi_bucket_qos + <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSI, <span class="legacy-color-text-blue3">CTLQLX</span>.QM)  </span>: smi_bucket_qos ;</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_qos           = </strong>CTLQM.qos_lookup(lookup_qos)</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_pri             = </strong>CTLQM.pri_lookup(lookup_qos)</span></span></p></td></tr><tr><td class="confluenceTd">No Fields</td><td class="confluenceTd"><p><span style="color: black;"><span style="color: inherit;">first_bucket_has_enough_credits = (single_bucket or double_bucket) ? first_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">second_bucket_has_enough_credits = (double_bucket) ? second_bucket_has_enough_credits : 1;</span></span></p><p><span style="color: black;"><span style="color: inherit;">smi_bucket_qos = (first_bucket_has_enough_credits)        ? 15:</span></span></p><p><span style="color: black;"><span style="color: inherit;">                              (second_bucket_has_enough_credits)  ? Math.max((15- <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSD), <span class="legacy-color-text-blue3">CTLQLX</span>.QN) :</span></span></span></p><p><span style="color: black;"><span style="color: inherit;"><span>                              15;</span></span></span></p><p><span style="color: black;"><span style="color: inherit;">lookup_qos       = (latency_pressure) ? Math.min(smi_bucket_qos + <span class="legacy-color-text-blue3">CTLQLX</span><span>.QSI, <span class="legacy-color-text-blue3">CTLQLX</span>.QM)  </span>: smi_bucket_qos ;</span></span></p><p><span style="color: black;"><span style="color: inherit;"><strong>smi_pri             = </strong>CTLQM.pri_lookup(lookup_qos)</span></span></p></td></tr></tbody></table></div><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ConfiguringQoS.1"><strong><u>Configuring QoS</u></strong></h4><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 68.1471%;"><colgroup><col style="width: 37.105%;"/></colgroup><colgroup><col style="width: 62.7931%;"/></colgroup><tbody><tr><th class="confluenceTh">Action </th><th class="confluenceTh">Register Stimulus</th></tr><tr><td colspan="1" class="confluenceTd">From Initial Reset to Configure Rate Limiting</td><td colspan="1" class="confluenceTd"><p>If cyclich refresh of credits is needed:</p><p><span class="legacy-color-text-blue3">-Write CTLQR.CYCLES with the amount of Cyclcles you want the credits to refresh on.</span></p><p><span class="legacy-color-text-blue3">Configure Primary Bucket</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQCP0.QBRCP to the rate at which you want credits to be added.</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQRAP0.QBRAP to the amount of credits to be refreshed every QBRCP cycles.</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQBSP0.QBSP to the total size of the bucket. </span></p><p><span class="legacy-color-text-blue3">If sending traffic at a lower secondary priority is needed configure the secondary bucket:</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQCS0.QBRCP to the rate at which you want credits to be added.</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQRAS0.QBRAP to the amount of credits to be refreshed every QBRCP cycles.</span></p><p><span class="legacy-color-text-blue3">-Write CTLRLQBSS0.QBSP to the total size of the bucket. </span></p><p><span class="legacy-color-text-blue3">-Write CTLQL0.QSD to the amount the QoS should decrease if the secondary bucket is used.</span></p><p><span class="legacy-color-text-blue3">-Write CTLQL0.QN to the minimum possible QoS</span></p><p><span class="legacy-color-text-blue3">Write 1 to CTLQC.E to enable.</span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Initial Reset to Configure Latency Pressure</td><td colspan="1" class="confluenceTd"><p><span class="legacy-color-text-blue3">Configure how much the QoS should increase:</span></p><p><span class="legacy-color-text-blue3">-Write CTLQL0.QSI to the amount the QoS should increase if latency pressure asserts.</span></p><p><span class="legacy-color-text-blue3">-Write CTLQL0.QM to the maximum possible QoS</span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Initial Reset to Configure Latency Pressure and Rate Limiting</td><td colspan="1" class="confluenceTd"><p>Follow <strong>From Initial Reset to Configure Latency Pressure</strong></p><p>Follow <strong>From Initial Reset to Configure Rate Limiting</strong></p><p><span class="legacy-color-text-blue3">Start </span><span class="legacy-color-text-blue3">Traffic</span><span class="legacy-color-text-blue3">.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Initial Reset to Configure QoS Mapping</td><td colspan="1" class="confluenceTd"><p>For QoS 0 to 15 set <span class="legacy-color-text-blue3">CTLQMX.Q<em>&lt;QoS&gt;</em>P to the mapped priority for the modified QoS.</span></p><p><span class="legacy-color-text-blue3">For QoS 0 to 15 set CTLQMX.Q<em>&lt;QoS&gt;</em>IQ to the mapped message QoS for the modified QoS.</span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Traffic how to reconfigure Rate Limiting</td><td colspan="1" class="confluenceTd"><p>Stop Traffic.</p><p>Wait for <span class="legacy-color-text-blue3">CTLCR.BUSY = 0</span></p><p><span class="legacy-color-text-blue3">Follow <strong>From Initial Reset to Configure Rate Limiting</strong></span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Traffic how to reconfigure Latency Pressure</td><td colspan="1" class="confluenceTd"><p>Stop Traffic.</p><p>Wait for <span class="legacy-color-text-blue3">CTLCR.BUSY = 0</span></p><p><span class="legacy-color-text-blue3">Follow <strong>From Initial Reset to Configure Latency Pressure</strong></span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td colspan="1" class="confluenceTd">From Traffic how to reconfigure QoS Mapping</td><td colspan="1" class="confluenceTd"><p>Stop Traffic.</p><p>Wait for <span class="legacy-color-text-blue3">CTLCR.BUSY = 0</span></p><p><span class="legacy-color-text-blue3">Follow F<strong>rom Initial Reset to Configure QoS Mapping</strong></span></p><p><span class="legacy-color-text-blue3">Start Traffic.</span></p></td></tr><tr><td class="confluenceTd">Enable/Disable Rate <span class="inline-comment-marker" data-ref="d5a5e7b6-ab1d-45e2-bf24-31b241ca6dc2">Limiting</span></td><td class="confluenceTd">Toggle using the <span class="legacy-color-text-blue3">CTLQC.E <span class="inline-comment-marker" data-ref="c6e435d4-5036-471c-9fc1-09a7c9cf5bb8">register</span>.</span></td></tr><tr><td colspan="1" class="confluenceTd">Turn on/off Demotion with Rate Limiting</td><td colspan="1" class="confluenceTd"><p>1) On - <span class="legacy-color-text-blue3">CTLQLX.QSD to non-zero value.</span></p><p>2) Off -<span class="legacy-color-text-blue3"> to 'h0</span></p></td></tr><tr><td colspan="1" class="confluenceTd">Turn on/off Latency Pressure </td><td colspan="1" class="confluenceTd"><p>1) On - <span class="legacy-color-text-blue3">CTLQLX.QSI to non-zero value.</span></p><p>2) Off -<span class="legacy-color-text-blue3"> to 'h0</span></p></td></tr><tr><td class="confluenceTd"><span class="legacy-color-text-blue3">Refresh Rate Limiting Credits and Refresh Bucket Counters</span></td><td class="confluenceTd"><span class="legacy-color-text-blue3">Write 1 to CTLQC.R register.</span></td></tr><tr><td colspan="1" class="confluenceTd">Set Refrech Cycle</td><td colspan="1" class="confluenceTd"><p>Turn off Rate Limiting with <span class="legacy-color-text-blue3">CTLQC.E</span></p><p><span class="legacy-color-text-blue3">Write CTLQR.CYCLES with the amount of Cyclcles you want the credits to refresh on.</span></p><p><span class="legacy-color-text-blue3">Turn on Rate Limiting with CTLQC.E</span></p></td></tr><tr><td colspan="1" class="confluenceTd">Turn off Refresh Cycle</td><td colspan="1" class="confluenceTd"><p>Turn off Rate Limiting with <span class="legacy-color-text-blue3">CTLQC.E</span></p><p><span class="legacy-color-text-blue3">Write  CTLQR.CYCLES with 0</span></p><p><span class="legacy-color-text-blue3">Turn on Rate Limiting with CTLQC.E</span></p></td></tr><tr><td class="confluenceTd"><span class="legacy-color-text-blue3">Turn a Secondary Bucket Off</span></td><td class="confluenceTd"><span class="legacy-color-text-blue3">Write 'h0 to CTLRLQBSSX.QBSS register</span></td></tr><tr><td class="confluenceTd">Have Latency Pressure Go to Fixed QoS if Asserted</td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">Write 15 to CTLQLX.QSI</span></p><p><span class="legacy-color-text-blue3">Write  &lt;Fixed QoS Value&gt; to CTLQLX.QM</span></p></td></tr><tr><td class="confluenceTd">Have Secondary Bucket go to Fixed QoS if Used</td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">Write 15 to CTLQLX.QSD </span></p><p><span class="legacy-color-text-blue3">Write  &lt;Fixed QoS Value&gt; to CTLQLX.N </span></p></td></tr><tr><td class="confluenceTd">Reset the Buckets to a known State</td><td class="confluenceTd"><p><span class="legacy-color-text-blue3">Write 0 to CTLQC.E register.</span></p><p><span class="legacy-color-text-blue3">Bucket Counters will Reset. </span></p><p><span class="legacy-color-text-blue3">Buckets be empty until Enabled.</span></p><p><span class="legacy-color-text-blue3">-or-</span></p><p><strong><span class="legacy-color-text-blue3">Refresh Rate Limiting Credits and Refresh Bucket Counters</span></strong></p></td></tr></tbody></table></div><h4 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RateLimiterClockGate.1"><strong><u>Rate Limiter Clock Gate</u></strong></h4><p>The Rate Limiter must receive an ungated clock and implement its own clock gating based on bucket usage.</p><div class="page view"><div class="wiki-content"><div class="wiki-content"><div class="wiki-content"><div><p><br/></p><div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager(ExcludefromR1Documentation).1">Credit Manager <strong>(Exclude from R1 Documentation)</strong></h3><p>Not in R1 and may change. New uArch is currently being constructed. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReOrderBuffer.1">Re Order Buffer</h3><p>Reorder buffer is an optional module for re-ordering read (and write) responses in the initiator ATU. <em>This will be a library element that can be re-used in ATU or in the fabric (details will be in ROB/library element uArch spec)</em>. The requests as selected by arbiter will be snooped by the ROB to allocate buffer space for the corresponding responses. The responses, when received, will be stored into the allocated space and read out in order (when available). <strong>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157530/HW-SYM+Reorder+Buffer+Microarchitecture+Specification" data-linked-resource-id="16157530" data-linked-resource-version="33" data-linked-resource-type="page">HW-SYM Reorder Buffer Microarchitecture Specification</a></strong></p></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BeatBuffer.1">Beat Buffer</h3><p>The beat buffer inside the CTL initiator is used to accumulate partial response data beats into full beats to be used by the layer. It is the last block on the request path and the first block on the response path.</p><p>A beat buffer is needed if there are any narrower targets in the system that can read interleave. If a beat buffer is needed at minimum there needs to be 1 entry, however for full capability there should be maxOutRd number of entries </p><p><strong>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16167053/OBSOLETE-DELETE+HW-SYM+sym_beat_buffer" data-linked-resource-id="16167053" data-linked-resource-version="9" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_beat_buffer</a> for block level information</strong></p></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Timing.1">Timing</h3><p>The timing inside the CTL layer can be controlled through four parameters:</p><ul><li>ctlReqPipe - Will pipe the request ndp and dp coming into the CTL layer.</li><li>ctlRespPipe - Will pipe the response ndp and dp going out of the CTL layer.</li><li>ctlPipeCtxt - Indicates pipe depth of the context lookup. Needs to be equal to or less than log2ceil(Number of Context Entries)</li><li>ctlPipePam- Indicates pipe depth of the PAM lookup. Needs to be equal to or less than log2ceil(Number of PAM Entries)</li><li>pipeLevelRob -Will pipe the response ndp and dp going out of the RoB.</li></ul><div><p><br/></p></div><div><div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ErrorGeneration.1">Error Generation</h3><div>There can be two types of errors: (All errors will generate an interrupt)</div><div><ul><li>Internally Generated Errors - Errors appear within the operation of the Common Layer. In all cases, errors will be responded in sequence number order (strict) as to not break any ordering protocols. At the moment there are three:<ul><li>RW Error - This means that a PAM entry indicated a target can only receive Writes and or Reads and the incoming transaction is the opposite.<ul><li>The transaction will be dropped and not forwarded to the network </li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li><li>Timeout Error - This means a transaction hasn't seen a completed response within a timeout to 2*timeout amount of cycles. In this case, the sequence number of the timed-out transaction will be poisoned.<br/><ul><li>This means if a response is seen later than the timeout the response will be squashed.</li><li>This sequence number will not be used in any future transactions, and will not become unpoisoned until after reset.</li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li><li>Buffered Write - Error seen inside the response of a buffered write. Since the response has already been made an interrupt will be set and the context will be cleared.</li><li>Decode Error - Error occurs when there is not a match to the PAM table and decode errors are enabled. (If not enabled the packet will match the default entry)<ul><li>The transaction will be dropped and not forwarded to the network </li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li><li>Exclusive Error - Error occurs when there is an exclusive transaction that is split. <ul><li>The transaction will be dropped and not forwarded to the network </li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li><li>Power Domain Error - Error occurs when a transaction is sent to a target through a domain which is off as indicated by pamTargDomain and domainInt<ul><li>The transaction will be dropped and not forwarded to the network </li><li>If it is a read the initiator will send blank data along with the error response to complete the protocol.</li></ul></li></ul></li><li>Externally Generated Errors - Errors show up inside the packet and/or native interface and aren't generated in the common layer. In this case, the common layer will forward the error through with the appropriate signaling.<ul><li>Transport Error - If a transport error is seen on a response an interrupt will be asserted. </li></ul></li></ul><p>In addition to the interrupt the target ID will be loaded into the register for debugging purposes.</p></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseGeneration.1">Response Generation</h3><div><p>A response can be generated (optional) by the CTL layer for several reasons -</p><ol><li><u>Buffered Write Response</u> -  Generate a response for the buffered write request (after ID checking in request context). The write response for that specific transaction from the slave needs to be masked for this request. There is an “eligible” for the write response which gets set when there is no ID ordering dependency (check based on request ID or both request ID and target ID). <ol><li>If there is a dependency the write will flow through without sending a buffered write response. </li><li>This can be enabled by the parameter (enBufWrite).</li></ol></li><li><u>Error Response</u> - If an error occurs a response will be sent to complete the protocol. If the error is a read blank beats will be sent again to complete the protocol.<ol><li>If the error is a timeout error and some read beats have come back, the initiator will complete the read will error'd out blank beats.</li></ol></li></ol><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1028" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-12%2014:55:22.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ReadDataInterleaving.1">Read Data Interleaving</h3><p>Read Data interleaving is when data from different transactions can come back interleaved inside one another. The Table below shows the possible situations:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Initiator Supports Interleaving</th><th colspan="1" class="confluenceTh"><span>Target Supports Interleaving</span></th><th class="confluenceTh">Action</th></tr><tr><td class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td class="confluenceTd">The CTL Initiator will take no action.</td></tr><tr><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd"><span>The CTL Initiator will need to interlock with the target. Barrier until all responses for that ID are received.</span></td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd"><span>The CTL Initiator will take no action. </span></td></tr><tr><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">The CTL Initiator will take no action.</td></tr></tbody></table></div></div></div></div><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-EchoField(ExcludefromR1Documentation).1"><span style="font-size: 16.0px;font-weight: bold;">Echo Field </span> <strong>(Exclude from R1 Documentation)</strong></h3><p>The echo bus is a collection of signals taken from the CTL Interface, stored with a request, and then put in the response. The width of the field is determined by the width of the echo field in the response path inside InterfaceCTL.</p><p>How to drive this bus is determined by echoFieldHash. If the echo bus is narrower than this parameter definition the top bits will be cut off. If the width is wider than this definition 0 will be driven to the extra bits. </p><p>The echoFieldHash must be a valid Verilog statement only using signals defined by InterfaceCTL. Typically these bits could be used by the Native Layer to get information about a request to do proper Narrow/Wide conversion.</p><p>An example of echoFieldHash  for an echo bus of width  (wCtlReqBurstType + wCtlReqBurstSize + wCtlReqMaxBurstSize) is: &quot;{txn_hdr_burstType, txn_hdr_burstSize, txn_maxBurstSize}&quot;</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-UserField.1">User Field</h3><p><u>Request User</u></p><p>The user field is defined in a very similar way to the echo field, however this field will be passed on to the SMI Request user field. The width of the field is determined by the width of the user field in the SMI request path.</p><p class="wiki-content">If the user bus is narrower than this parameter definition the top bits will be cut off. If the width is wider than this definition 0 will be driven to the extra bits. </p><p><u>Data User</u></p><p class="wiki-content">If the user bus is narrower than this parameter definition the top bits will be cut off. If the width is wider than this definition 0 will be driven to the extra bits. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MismatchinTargetParameters.1">Mismatch in Target Parameters</h3><p>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16171451/HW-SYM+Common+Layer+Transformations" data-linked-resource-id="16171451" data-linked-resource-version="65" data-linked-resource-type="page">HW-SYM Common Layer Transformations</a> for more information about Common Layer behavior when initiator and target parameters do not match.</p><h1 class="wiki-content" id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CommonTransactionLayerTarget.1"><strong style="font-size: 24.0px;"><u>Common Transaction Layer Target</u></strong></h1></div></div><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Parameters.3"><strong>Parameters</strong></h2><p>{</p><p>   <strong>// General </strong></p><p>    &quot;nodeId&quot; : 0 to inf, // integer</p><p>    &quot;defTId&quot; : 0 to inf, // integer</p><p>    &quot;maxPduSz&quot; :  0 to inf, // integer, Max payload in number of bytes. Must be power of two. 0 - Can Accept any Size</p><p>    &quot;maxOutRd&quot; :  0 - 512, // integer, Max amount of outstanding reads</p><p>    &quot;maxOutWr&quot; : 0 - 512, // integer, Max amount of outstanding writes</p><p>    &quot;maxOutTotal&quot; : 0 - 512 , // integer, Max amount of outstanding transactions</p><p>    &quot;enBufWrite&quot; : 0 or 1, // integer, enable buffered writes. 0 - disable, 1 - enabled</p><p>    &quot;fixedSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;incrSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;wrapSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;narrowSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;readInterleaveSupported&quot; : 0 or 1, // 0 - not supported, 1 - supported</p><p>    &quot;widthAdaptionSupported&quot; : false or true, // false - width adaption not supported at target, true - width adaption supported at target</p><p>    &quot;mapBaseAddr&quot; : &quot;string&quot;, // string representing the base address/offset of the target. &quot;16'hF000&quot; would be an example.</p><p>    &quot;mapBaseMask&quot; : &quot;string&quot;, // string representing the size of the entry in mask form for the base address/offset. &quot;16'hF000&quot; would be an example.</p><p>    &quot;idCompMask&quot; : {{wCtlId{1'b0}} to {{wCtlId{1'b1}} where only wSmiId bits are asserted, // integer, Mask used to indicate how the ID is compressed. Only unmasked bits (indicated by 1) will be used.</p><p>  <strong> // Queue and Arbiter</strong></p><p>    &quot;queueMap&quot; : [&quot;string&quot;, &quot;string&quot;, &quot;string&quot; , ...] // An array of strings which determine which queue a transaction will go to. These strings are verilog conditions involving qos, vc, and type. Logic will be constructed so the conditions are checked right to left (queue 0 to nQueues). The left most condition will be the default and the condition will be effectively ignored.  </p><p>    &quot;queueMapRW&quot; : 0 or 1, // 1 Seperate RW Queues, 0 - Shared RW Queue</p><p>    &quot;queueDepth&quot; :0 to inf, // Depth of each Queue</p><p>    &quot;vcMap&quot; : [int, int, ...], // Array of integers indicating which VC is assigned to each queue. Each entry in the array is assigned a queue</p><p><strong>    // Credit Manager</strong></p><p>    &quot;crdMngrEn&quot; : 0 or 1, // Enable Credit management.</p><p>    &quot;wCrdMngrReqCnt&quot; : [int, int, ...], // Array of integers indicating the request dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>    &quot;wCrdMngrDataCnt&quot; :  [int, int, ...], // Array of integers indicating the data dedicated counter width. Each entry in the array is assigned a queue. (0 is disabled)</p><p>    &quot;crdDataUnit&quot; : 1 to inf, // Data Credit Units, Has to be power of 2</p><p>    &quot;mCrdMngrType&quot;  :  [int, int, ...],// Credit Message Type 0 - Shared or 1 Dedicated</p><p><strong>   // Interface Parameters</strong></p><p>    &quot;interfaces&quot; :{</p><p>           &quot;clkInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168894/InterfaceCLK" data-linked-resource-id="16168894" data-linked-resource-version="5" data-linked-resource-type="page">InterfaceCLK</a>&quot;},</p><p>           &quot;smiReqInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;SMI Interface Def File&gt; }, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a>&quot;},</p><p>           &quot;smiRespInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;SMI Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168917/HW-SYM+InterfaceSMI" data-linked-resource-id="16168917" data-linked-resource-version="9" data-linked-resource-type="page">HW-SYM InterfaceSMI</a>&quot;},</p><p>           &quot;ctlReqInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;CTL Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a>&quot;},</p><p>           &quot;ctlRespInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &quot;file_path&quot; : &lt;CTL Interface Def File&gt;}, &quot;direction&quot; : &quot;master&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164945/HW-SYM+InterfaceCTL" data-linked-resource-id="16164945" data-linked-resource-version="14" data-linked-resource-type="page">HW-SYM InterfaceCTL</a>&quot;},</p><p>           &quot;pmaInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164503/InterfacePMAControl" data-linked-resource-id="16164503" data-linked-resource-version="6" data-linked-resource-type="page">InterfacePMAControl</a>&quot;},</p><p>           &quot;statsInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : {}, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot; <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16164444/InterfaceGeneric" data-linked-resource-id="16164444" data-linked-resource-version="15" data-linked-resource-type="page">InterfaceGeneric</a>&quot;, ... TODO},</p><p>           &quot;protInt&quot; :{ &quot;name&quot; : &quot;a_string&quot;,  &quot;params&quot; : { &lt; See InterfacePROT Params&gt; }, &quot;direction&quot; : &quot;slave&quot;,  &quot;interface&quot; : &quot;<a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168667/InterfacePROT" data-linked-resource-id="16168667" data-linked-resource-version="16" data-linked-resource-type="page">InterfacePROT</a>&quot;},</p><p>    },</p><p><strong>   // Protection, Error,  and Power Control Parameters </strong></p><p>    &quot;trustZone&quot; : 0 or 1, // integer, enable trust zone support for APB native layer</p><p>    &quot;respTimeoutChk&quot; : 0 or 1, // integer, enable response timeout check</p><p>    &quot;respTimeoutChkUnit&quot; : 16 or 64, // integer, c<span>lock units for response timeout</span></p><p>    &quot;ctlProtectionScheme&quot; :&quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16170235/protectionScheme" data-linked-resource-id="16170235" data-linked-resource-version="9" data-linked-resource-type="page">protectionScheme</a> // This defines how dad will be checked and dp_prot generated. See more detail in common error section.</p><p>    &quot;stateProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;registerProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;memoryProtectionStyle&quot; : &quot;&quot; or <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16169044/protectionStyle" data-linked-resource-id="16169044" data-linked-resource-version="15" data-linked-resource-type="page">protectionStyle</a></p><p>    &quot;csr&quot; : &quot;&quot; or Register Definition Object </p><p>}</p></div></div><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Registers.3"><strong>Registers</strong></h2><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 100.0%;"><colgroup><col style="width: 6.58617%;"/></colgroup><colgroup><col style="width: 9.16575%;"/></colgroup><colgroup><col style="width: 5.98244%;"/></colgroup><colgroup><col style="width: 11.2514%;"/></colgroup><colgroup><col style="width: 4.55543%;"/></colgroup><colgroup><col style="width: 10.9769%;"/></colgroup><colgroup><col style="width: 16.9594%;"/></colgroup><colgroup><col style="width: 16.685%;"/></colgroup><colgroup><col style="width: 17.8375%;"/></colgroup><tbody><tr><th class="confluenceTh">Register</th><th class="confluenceTh">Address (Temporary)</th><th class="confluenceTh">Field Name</th><th class="confluenceTh">Field Bits</th><th class="confluenceTh">Access</th><th class="confluenceTh">Reset Value</th><th class="confluenceTh">Description</th><th class="confluenceTh">Optional</th><th class="confluenceTh">Controlling Parameter</th></tr><tr><td colspan="9" class="confluenceTd"><em><strong>Common Layer Control Registers</strong></em></td></tr><tr><td class="confluenceTd">CTLCR</td><td class="confluenceTd">0x0</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">BUSY</td><td class="confluenceTd">0</td><td class="confluenceTd">ro</td><td class="confluenceTd">0</td><td class="confluenceTd">Busy Indicator for the CTL Target</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">CTLTCR</td><td class="confluenceTd">0x1</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td rowspan="2" style="text-align: center;" class="confluenceTd">X</td><td rowspan="2" class="confluenceTd">timeoutUseExternalValue</td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">COUNT</td><td class="confluenceTd">0:31</td><td class="confluenceTd">rw</td><td class="confluenceTd">0</td><td class="confluenceTd">Timeout Count (Clock Cycles) (0 == disabled)</td></tr><tr><td colspan="9" class="confluenceTd"><strong><em>Statistics Control Registers</em></strong></td></tr><tr><td class="confluenceTd">CTLSCR</td><td class="confluenceTd">0x4</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td rowspan="5" style="text-align: center;" class="confluenceTd">X</td><td rowspan="5" class="confluenceTd"><span>interfaces.statsInt != null</span></td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">E</td><td class="confluenceTd">0</td><td class="confluenceTd">rw</td><td class="confluenceTd">0</td><td class="confluenceTd">Enable Statistics</td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">SMASK</td><td class="confluenceTd">1</td><td class="confluenceTd">rw</td><td class="confluenceTd">0</td><td class="confluenceTd">Enable Source Mask (0 == collect on all source IDs, 1 == collect on matching source ID)</td></tr><tr><td class="confluenceTd">CTLSSR</td><td class="confluenceTd">0x5</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">SRC</td><td class="confluenceTd">X:0</td><td class="confluenceTd">rw</td><td class="confluenceTd">0</td><td class="confluenceTd">Source ID to collect statistics on</td></tr><tr><td colspan="9" class="confluenceTd"><strong><em>Error Registers</em></strong></td></tr><tr><td class="confluenceTd">CTLTIR</td><td class="confluenceTd">0x40</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">I</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">w1c</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Timeout Error Interrupt</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">E</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">rw</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">Timeout Error Enable</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td><td class="confluenceTd">SID</td><td class="confluenceTd">SID_WIDTH+1:2</td><td class="confluenceTd">ro</td><td class="confluenceTd">0</td><td class="confluenceTd">Timeout Source ID</td><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr></tbody></table></div><div class="page view"><div class="wiki-content"><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TopLevelDiagrams.1"><strong>Top Level Diagrams</strong></h2><p><strong>TODO: Bring-in functionality from native layer, burst support, exclusive monitor</strong></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FullTop-levelExample.1"><strong>Full Top-level Example</strong></h3><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20Full.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-TypicalTop-levelExample.1"><strong>Typical Top-level Example</strong></h3><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20Typ.png?api=v2"></span></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-MinimumTop-levelExample.1"><strong>Minimum Top-level Example</strong></h3><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20Min.png?api=v2"></span></p><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Description.5"><strong>Description</strong></h2><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-BurstTranslation.1"><strong>Burst Translation</strong></h3><p>Please see <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16171451/HW-SYM+Common+Layer+Transformations#HW-SYMCommonLayerTransformations-CommonLayertoCommonLayerTransformations" data-linked-resource-id="16171451" data-linked-resource-version="65" data-linked-resource-type="page">HW-SYM Common Layer Transformations#CommonLayertoCommonLayerTransformations</a> for an updated burst translation table. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-OutputQueues.1"><strong>Output Queues</strong></h3><p>The output queues store the requests (or their index/attributes) that queue up before being sent out to the native layer. The requests can be either read or write requests or both.</p><p><u>Queue Map:</u></p><p>The Queue mapping function exists if there exists more than one output queues. The Queue mapping is a lookup function of – {VC/QoS, Req_type} as determined by the parameter (queueMap).</p><p>Queue Map = Function(VC or Qos, Req_type)</p><ul><li>If there are VCs, the queue mappings are assigned per VC. Otherwise, the queues mappings are per QoS in the packet header (mapped QoS). There is a configuration register per VC/QoS.</li><li>In addition, Queue number can be further separated for request type (Rd/Wr), if enabled by parameter queueMapRW (the total number of queues – nQueues, are doubled – one set for read, other set for writes).</li></ul><p>Examples of queueMap:</p><p>[</p><p>   &quot;(vc == 0) &amp; (type == READ)&quot;,</p><p>   &quot;(vc == 0) &amp; (type == WRITE)&quot;,</p><p>   &quot;(vc == 1) &amp; (type == READ)&quot;,</p><p>   &quot;(vc == 1) &amp; (type == WRITE)&quot;</p><p>]</p><p>will functionally be</p><p>case(1'b1) </p><p>    &quot;(vc == 0) &amp; (type == READ)&quot; : queue = 0;</p><p>    &quot;(vc == 0) &amp; (type == WRITE)&quot; : queue = 1;</p><p>    &quot;(vc == 1) &amp; (type == READ)&quot; : queue = 2;</p><p>    default: queue = 3;</p><p>endcase</p><p><br/></p><p><u>Queues:</u></p><p>See <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16161182/OBSOLETE-DELETE+HW-SYM+sym_common_queue" data-linked-resource-id="16161182" data-linked-resource-version="12" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_common_queue</a></p><p>The Output Queues store the requests that queue up for arbitration waiting to go out to the target. The requests can be either read or write requests or both, and storage is in the FIFOs or pipeline stages. The write data is stored in the data buffer.</p><p><em>Single queue mode</em> (Shared:1 -RW or Separate:1-R and 1-W):</p><p>Each queue stores the request message(s), and can have a depth of 1 or more. If depth=1, it is just register pipe stage, else it is a FIFO. There will be only 1 queue for writes or reads each/shared, and only 1 corresponding write data buffer.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20OutputQueues%20Basic.png?api=v2"></span></p><p><em>Multi Queue Mode:</em></p><p>Multiple Queues for supporting enhanced QoS (rate limiting/credits/VC per mapped QoS) per queue basis. This should be used only when there are multiple flows to this target with separate credits/VCs for those flows.</p><p>There are multiple Queues, each storing the request, and for writes - write data pointer also. Each queue can have read-only (request only, no write pointers) or write-only or both read/write requests.</p><p>A new valid request can bypass a queue (FIFO or pipe stage), if the queue is empty and the arbiter is ready to accept it the same cycle, otherwise it will be stored in the Queue. The queues can generate (and receive) separate backpressure signals, for supporting VC-based backpressure.</p><p><em><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="800" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-10%2018:34:24.png?api=v2"></span></em></p><p><em>Write Data Buffer</em>: </p><p>Write data buffer is a separate module to separate datapath from control. It is a memory/register-file that stores the data for write requests. The write data buffer can get fragmented (for multi queue mode) and it allows data to be stored in non-contiguous locations. There is a valid bit per entry to indicate if the entry is empty or has valid data. There is pointer per entry to point to the next beat of a write request (an extra bit is used to indicate invalid pointer). When a new write request is written, the first write data buffer address is stored in the request buffer. The following write beats (may or may not be written in contiguous locations) have their address stored in the pointer location of the previous data beat (previous address).</p><p>Wdata_read FSM: </p><p>This FSM controls the reading out of the write data (if any) for a write request that gets selected/sent out by the arbiter. Based on the queue number and request size, it reads out the corresponding first write data entry for the given queue and also updates the next address by the next pointer stored at that location. . Only one write request can be pending at a time (though one or more read requests can be sent out while write data is being drained from the write data buffer) or a write request per-VC (when VCs are present) – maintains the write data state per VC so as to be able to switch between VCs on per data-beat basis.</p><p>The data buffer functionality will be implemented by a library module <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157962/OBSOLETE-DELETE+HW-SYM+sym_data_chain_buffer" data-linked-resource-id="16157962" data-linked-resource-version="12" data-linked-resource-type="page">OBSOLETE-DELETE HW-SYM sym_data_chain_buffer</a>.</p><p>Register-file vs. Memory:</p><p>Memory has extra latency for read and writes (extra 1 cycle for write, 1-2 cycle for read depending if read data is registered for timing). It will be determined by synthesis results what is the crossover point (probably register file till 8-beats of data or 1Kb size). The control logic is also affected to affected to handle the memory read latency.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-RequestArbiter.1">Request Arbiter</h3><p>Same as CTL Initiator arbiter section listed above. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-Context.3">Context</h3><p>A Context must be stored for each transaction if the features mentioned in the table are needed. It is possible to have no context if none of the features listed are needed.</p><p><u>ID Compression:</u> This is needed if ID Compression is enabled. </p><p><u>Ordering</u>: This is not needed if only a single queue is used. </p><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">Field Name</th><th style="text-align: center;" class="confluenceTh">Field Width</th><th style="text-align: center;" class="confluenceTh">Driver</th><th style="text-align: center;" class="confluenceTh">Set Condition</th><th style="text-align: center;" class="confluenceTh">Clear Condition</th><th colspan="1" style="text-align: center;" class="confluenceTh">ID Compression</th><th colspan="1" style="text-align: center;" class="confluenceTh">Ordering</th><th colspan="1" style="text-align: center;" class="confluenceTh">Description (TODO)</th></tr><tr><td class="confluenceTd">Id</td><td style="text-align: center;" class="confluenceTd">Request Interface In ID</td><td style="text-align: center;" class="confluenceTd">Request Interface In ID</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">Compressed ID</td><td style="text-align: center;" class="confluenceTd">Request Interface Out ID</td><td style="text-align: center;" class="confluenceTd">New Compressed Id</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">Sequence Number</td><td style="text-align: center;" class="confluenceTd">Request Interface Out Seq Num</td><td style="text-align: center;" class="confluenceTd">New Sequence Number</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd">Since seq_num is unique it will be used for matching responses..</td></tr><tr><td class="confluenceTd">Address</td><td style="text-align: center;" class="confluenceTd">Request Interface Out Address</td><td style="text-align: center;" class="confluenceTd">Request Interface In Address</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Exclusive</td><td colspan="1" style="text-align: center;" class="confluenceTd">1</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In atomic[1]</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Target ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Target ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Target ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Youngest Address</td><td colspan="1" style="text-align: center;" class="confluenceTd">1</td><td colspan="1" style="text-align: center;" class="confluenceTd">1'b1</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">New Transaction Depends on This Address</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Ordering ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Ordering ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Ordering ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Channel ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Channel ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Channel ID</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Depend</td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>1</span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>Dependent on existing entry</span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>Entry Written To</span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>Never</span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><span>X</span></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Queue</td><td colspan="1" style="text-align: center;" class="confluenceTd">log2ceil(nQueue)</td><td colspan="1" style="text-align: center;" class="confluenceTd">Queue Map Output</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Type</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Type</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Type</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Last</td><td colspan="1" style="text-align: center;" class="confluenceTd">1</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Last</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Valid</td><td colspan="1" style="text-align: center;" class="confluenceTd">1</td><td colspan="1" style="text-align: center;" class="confluenceTd">Request Interface In Valid</td><td colspan="1" style="text-align: center;" class="confluenceTd">Entry Written To</td><td colspan="1" style="text-align: center;" class="confluenceTd">Response Matched This Entry</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-CreditManager.1">Credit Manager</h3><p>The credit manager in the CTL target block can generate credit messages for credit initialization or re-sync (based on credit control configuration register), and credit grants messages to the initiators. The types of credits supported (parameterized) are -</p><ol><li>Dedicated credits -  These credits are pre-allocated at initialization time, and there are no corresponding credit request for these. The dedicated credits are returned (granted again) when a request message (marked with dedicated credit usage) gets sent out of the CT layer output queues. The dedicated credits can be granted through configuration (initialization or re-initialization) or returned once the requests that use dedicated credits, are sent out to the native layer.  There are no credit counters for dedicated credits.</li><li>Shared credits - These credits need to be requested when needed (there is a grant for a given request). There is a request and data credit counter maintained by the credit manager, and a credit request can be granted based on request/data buffer usage.</li><li>Non-credits - These requests without credits, are ignored by the credit manager but can affect the grant of shared credits as they share the same request/data buffer pool.</li></ol><p>Credit units -</p><ol><li>Request Credits - A credit per read or write request</li><li>Data credit - Credit for write data, the units are fixed (parametrized, example – 8B/16B/32B/64B).</li></ol><p>Dedicated Credit Return -</p><p>The dedicated credits to be returned are saved in a credit return array (or into a FIFO if the array is full). Both credit return array and FIFO size are parameterized. The credit return entries have their source ID compared with response messages to see if there is match (to send credit message as part of response). The credit return array stores the following -</p><ol><li>SRC ID</li><li>Credit Msg Type (req, data, req+data)</li><li>Req credits</li><li>Data credits</li></ol><p>There is a timeout that can occur for credit grants sitting in the credit return array (or if the credit FIFO gets almost full) – that will result in sending of next credit message, otherwise if there is a HIT for the current response – the credit grant can be added to the response message.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20CreditManager.png?api=v2"></span></p><p>The credit grant when being added to the credit return array – also checks if there is already an existing credit grant for the same Source ID – and update the existing credit return array entry (unless that credit message is sent out the same cycle – for timing reasons).</p><p><u>Shared Credit Grant</u> (TODO: not in R1 implementation scope) - </p><p>There is a credit counter for shared credits. Based on the credit counter (incremented on shared credit grant, decremented on credit return), and additionally buffer thresholds (optional – based on QoS/VC for the request), a shared credit request can be granted or rejected (credit response sent back without credit grant). The shared requests are held in a register(s)/FIFO, and when it gets full the responses have to be generated – with or without grant.</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponseQueues&amp;Arbiter.1">Response Queues &amp; Arbiter</h3><p>The response queues store the response messages before being sent out to the packet layer (to go onto to the fabric’s response network). The response messages can be either read or write transaction requests, or for credit/control messages (not held in response queues).</p><p>Transaction response queue map (nRespQueue &gt; 1): is per-VC (same VC to queue map function as that for output queues but shared for read/write responses).</p><p>The queues are FIFOs – response message FIFO and response data FIFO (only if there are read responses), if FIFO depth &gt;=2, Else a register pipe.</p><p><em>Arbiter</em>:</p><p>The response arbiter selects one of the response queue message or a credit/control message (if any) to be sent out to the SMI interface to packet layer. This will the library element <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16167155/OBSOLETE-DELETE+HW-SYM+arb_pri_rr1" data-linked-resource-id="16167155" data-linked-resource-version="9" data-linked-resource-type="page">OBSOLETE-DELETE  HW-SYM arb_pri_rr1</a> reused here.</p><p>The credit/control message, if exists, has the higher priority/weight over the response queue(s). The credit messages can be generated by the credit manager.</p><p>There are 3 scenarios -</p><ol><li>No (or single) response queue – there is no arbiter</li><li>wo queues (no VC, but separate read, write response queues) – there is a simple arbiter to select between the two queues. For read responses, the corresponding read response FIFO is selected to send out response data till last beat is sent out (the last beat can be a dummy last).</li><li><p>Multi queues (with VC, 2 or more queues) – hierarchical VC-arbiter as described in the output queue arbiter section.</p></li></ol><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ResponsePath.1">Response Path</h3><p>The response path performs the following functionality:</p><ol><li><p>Looks up the context to update for the given response ID. Based on context type (if exists), this will be an index into the context or a compare into the context array.</p><ol><li><p>The selected context data can be used to generate the response message (get the SRC id of the request, which is the target id for the response).</p></li><li><p>The context can mark this response to be done if last response beat is received.</p></li></ol></li><li>There is PIPE control to hold/pipeline the response till the context array lookup gets done. Also, the response data is held off till the response is not ready (context lookup done). The control logic can also generate a dummy response data beat to truncate a message if required due to response data timeout (configurable), or change of response ID without the last response beat.</li><li>The target ID can then be used to do path lookup (optional – can be done in SMI packetizer) to get the route for the message.</li></ol><p><br/></p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/CTL%20Target%20ResponsePath.png?api=v2"></span></p><p><u>Response timeout</u>:</p><p>There is response timeout (Error checking – optional/parameterized with respTimeoutChk) that walks through the context to check for timeout response, and if timeout occurs – clears the context and generates an error response.</p><p>Timeout logic walks through the context entries that are valid, and marks a pending flag for a given entry at a time. If after a configurable number of cycles, there are no response updates to that entry – that is pending flag still set (cleared by any response lookup to that entry), it will be timed-out. A response with error is generated (apart from interrupt set) and the context is cleared out for the timed-out response. If the entry is not timed-out, the time-out logic moves to next open entry in the context table.</p><p>Also, if the response ID lookup in the context fails – that is no match (due to error/timeout), the response is discarded and interrupt is set. (TODO: which interrupt?)</p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-NarrowPacking/Unpacking.1">Narrow Packing/Unpacking</h3><p>The CTL Target is also responsible for packing/unpacking of narrow transactions. A narrow transaction in this context is defined when txn_hdr_burstSize (Burst Width)  is smaller than txn_hdr_maxBurstSize (Channel Width).  </p><p>Please see the section above on &quot;Narrow Transactions&quot; for more details. </p><p>The CTL Target will receive request transactions and unpack them accordingly to the CTL interface. It will also receive response transactions and pack them accordingly to the SMI interface. </p><h3 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-ExclusiveMonitor.1">Exclusive Monitor</h3><p>The exclusive monitor will be instantiated on targets that can receive exclusive transactions. Please see <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16157422/HW-SYM+Exclusive+Monitor+Micro-architecture+Specification" data-linked-resource-id="16157422" data-linked-resource-version="19" data-linked-resource-type="page">HW-SYM Exclusive Monitor Micro-architecture Specification</a> for more information. </p><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-SharedSpecification.1"><u><strong>Shared Specification</strong></u></h1><h2 class="page view" id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-PMAControl.1"><strong>PMA Control</strong></h2><p class="page view">input asleep - Indication that the CTL block has been successfully put in the asleep state. Level Signal.</p><p class="page view">input goto_sleep - Indication that the CTL must now go to sleep. The CTL initiator will stop accepting transactions. The CTL target will continue to accept transactions. </p><p class="page view">output busy - Indication that the CTL block has an outstanding transaction.</p><p class="page view">              Initiator: This will be high if there is any request without a completed response. (0 Outstanding Transactions)</p><p class="page view">               Target: This will be high until all pending responces are sent by the CTL. (0 Outstanding Responses)</p><p class="page view">output abort - Currently not used.</p><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-FaultReporting.1"><strong>Fault Reporting</strong></h2><p><strong>All faults will be reported through the CTL Block's <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16168667/InterfacePROT" data-linked-resource-id="16168667" data-linked-resource-version="16" data-linked-resource-type="page">InterfacePROT</a></strong></p><div class="table-wrap"><table class="wrapped confluenceTable"><tbody><tr><th class="confluenceTh">Protection</th><th class="confluenceTh">Parity</th><th class="confluenceTh">ECC Single</th><th class="confluenceTh">ECC Double</th></tr><tr><td class="confluenceTd">memory</td><td class="confluenceTd">uncorrectable</td><td class="confluenceTd">correctable</td><td class="confluenceTd">uncorrectable</td></tr><tr><td class="confluenceTd">state</td><td class="confluenceTd">uncorrectable</td><td class="confluenceTd">uncorrectable</td><td class="confluenceTd">uncorrectable</td></tr><tr><td colspan="1" class="confluenceTd">register</td><td colspan="1" class="confluenceTd">uncorrectable</td><td colspan="1" class="confluenceTd">correctable</td><td colspan="1" class="confluenceTd">uncorrectable</td></tr></tbody></table></div><h2 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-DataProtection.1"><strong>Data Protection</strong></h2><p>Data protection will be checked on the data at the sender of the data, and then dropped. It will then be regenerated at the other end. The type of protection is defined by ctlProtectionStyle.</p><ul><li>Read Data: Checked at Target and regenerated at the Initiator.</li><li>Write Data: Checked at the Initiator and regenerated at the target.</li></ul><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixA.ExampleStripingTable.1"><strong>Appendix A. Example Striping Table</strong></h1><p><strong>Example Striping Table</strong></p><p>strpGrpSize = 1024B, num_targ = 3, strpWStrpBits = 3, pamSze = 32kB (15 bits)</p><ul><li> MSB = log2(pamSze)  = 15</li><li> column a) address[MSB -1 :N] = address[14:10]</li><li> column b) address[MSB -1 : MSB -1-log2(num_targ )] = address[14:13]</li><li> column c) address[N + strpWStrpBits - 1:N]  = address[12:10]</li></ul><p>target entry</p><ul><li>target entry = (addr[14:13] + address[12:10]) % 3</li></ul><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">address[14:10]</th><th class="confluenceTh">address[14:13]</th><th class="confluenceTh">address[12:10]</th><th colspan="1" class="confluenceTh">Target Channel</th><th colspan="3" class="confluenceTh">address[12:10] in Channel</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">0</td><td class="confluenceTd">0</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">0</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">0 </td><td class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">0 </td><td class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">3 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">3</td></tr><tr><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">4 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">5 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">6</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">6 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">6</td></tr><tr><td colspan="1" class="confluenceTd">7</td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">7 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">7</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">9</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">10</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">2</td></tr><tr><td colspan="1" class="confluenceTd">11</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">3 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">12</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">4 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">13</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">5 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">5</td></tr><tr><td colspan="1" class="confluenceTd">14</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">6 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">6</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">15</td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">7 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">7</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">16</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">0 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">17</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">1 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">1</td></tr><tr><td colspan="1" class="confluenceTd">18</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">19</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">3 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">20</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">4 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">4</td></tr><tr><td colspan="1" class="confluenceTd">21</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">5 </td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">22</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">6 </td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">6</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td></tr><tr><td colspan="1" class="confluenceTd">23</td><td colspan="1" class="confluenceTd">2 </td><td colspan="1" class="confluenceTd">7 </td><td colspan="1" class="confluenceTd">0</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd">7</td></tr></tbody></table></div><h1 id="HW-SYMCommonTransactionLayerMicroarchitectureSpecification-AppendixB.CTLInitiatorContext/QueueFlow(Sketch)(InProgress).1"><strong>Appendix B. CTL Initiator Context/Queue Flow (Sketch) (In Progress)</strong></h1><div><strong><br/></strong></div><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="1400" src="https://arterisip.atlassian.net/wiki/download/attachments/16156349/image2019-4-23%2010:57:6.png?api=v2"></span></p><p><strong>/======================================================/</strong></p><p><strong>TODO List (New Additions):</strong></p><ul class="inline-task-list" data-inline-tasks-content-id="16156349"><li data-inline-task-id="238">Multicast</li></ul><p><strong>TODO List (Specific Points from Benoit's Notes):</strong></p><div><ul class="inline-task-list" data-inline-tasks-content-id="16156349"><li data-inline-task-id="239">Need WUSER and RUSER support</li><li data-inline-task-id="240">Need Shared Credits</li><li data-inline-task-id="241">Further explanation of user drop in modules</li><li data-inline-task-id="242"><s>CTL needs to be able to function without knowing a Native Type (Ordering rules?)</s></li><li class="checked" data-inline-task-id="243">Non power of 2 outstanding reads/writes (By definition)</li><li class="checked" data-inline-task-id="244">Need to explain dummy bit more in read interleaving section</li><li class="checked" data-inline-task-id="245">Valid signal -&gt; 1 for each VC</li><li data-inline-task-id="246">Just redo diagrams</li><li class="checked" data-inline-task-id="247">CTL needs to store context about narrow conversions for the Native Layer to use</li><li class="checked" data-inline-task-id="248">&quot;Echo&quot; Bits</li><li class="checked" data-inline-task-id="249">Route is Optional </li><li class="checked" data-inline-task-id="250">Address hashing for the stripe function</li><li class="checked" data-inline-task-id="251">Add Boundary Based Column in PAM</li><li class="checked" data-inline-task-id="252">Add interleaving in PAM</li><li data-inline-task-id="253"><s>Address need for Narrow to Wide reassembly</s></li><li class="checked" data-inline-task-id="254">Need to WRAP over stripped regions</li><li class="checked" data-inline-task-id="255">Narrow to Wide wrap support</li><li class="checked" data-inline-task-id="256">Only split wrap if target does not support wrap</li><li class="checked" data-inline-task-id="257">Always have ID Interlock possibilities</li><li data-inline-task-id="258"><s>Queue Map based on request ID along with Target ID and Request Type</s></li><li data-inline-task-id="259">1 Queue per VC might be only useful option</li><li data-inline-task-id="260">Dynamic QoS depending on bucket status</li><li class="checked" data-inline-task-id="261">Need to interlock if CTL I doesnt support interleaving but target does</li></ul></div><p><strong>TODO List (Specific Points from Review):</strong></p><ul class="inline-task-list" data-inline-tasks-content-id="16156349"><li data-inline-task-id="262">Move Burst Alignment Function to CTL Target </li><li class="checked" data-inline-task-id="263">Move Conversion(Narrow/Wide) to the CTL Initiator (Packing) </li><li data-inline-task-id="264">...and Target (Unpacking). </li><li data-inline-task-id="265">Move Exclusive Monitor to be inside CTL Target</li><li class="checked" data-inline-task-id="266">Add parameters to have a finer grain control of supported burst types in CTL Init</li><li class="checked" data-inline-task-id="267">Remove enIdInterlock</li><li class="checked" data-inline-task-id="268">ID Compression defined by widths of CTL ID vs SMI ID</li><li data-inline-task-id="269">Address the two context configurations: Small and Efficient, Large and Pipelined</li><li class="checked" data-inline-task-id="270">Credits need to be classified on a per buffer basis.</li><li class="checked" data-inline-task-id="271">Add Striping Function: Stripe based on some hash of all address bits.</li><li class="checked" data-inline-task-id="272">Non power of two interleaving.</li><li class="checked" data-inline-task-id="273">Latency Measurements from input to output of context table. Having sampling of every x transaction. Dont need numReq counters.</li><li data-inline-task-id="274">Placement of burst rtl dependant on # of Masters vs # of targets. -&gt; Make modular</li><li class="checked" data-inline-task-id="275">pipeLevel (parameter) should be dependent on internal functions. Delete.</li><li class="checked" data-inline-task-id="276">Generic way of defining user bits.</li><li class="checked" data-inline-task-id="277">Make VC visible on CTL interface.</li><li class="checked" data-inline-task-id="278">Echo Bit - CTL Field Store in context and put in response</li><li class="checked" data-inline-task-id="279">Make mode a function of entry. No multiple PAM tables.</li><li class="checked" data-inline-task-id="280">Add interleaved parameter inside PAM. Need to interlock.</li><li class="checked" data-inline-task-id="281">Support WRAP to the Stripe table.</li><li class="checked" data-inline-task-id="282">Remove Write Data buffer. - Review - Modified Write Buffer to not consist of memory. Only will be implemented in registers</li><li data-inline-task-id="283">Spell out timeout errors.</li><li class="checked" data-inline-task-id="284">Remove PPA Section. <br/><br/></li></ul></div></div><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-top: 10.0px;"><tbody><tr><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">rateLmtUseExtrenalValues</td></tr><tr><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><p><u style="white-space: pre-wrap;">[</u><span style="white-space: pre-wrap;">X</span><u style="white-space: pre-wrap;">]</u></p><p>    writeJSON(&quot;ctli_csr.cpr&quot;,csr);</p><div class="wiki-content"><u>Splitting Behavior</u></div><div class="wiki-content"><ul><li>Request can be split if len_in_bytes indicate a size larger than the maxBurstSize.</li><li>Boundary needs no consideration since a fixed transaction cannot cross a Boundary.</li><li>maxBurstSize = minimum(Initiator Max Burst Size, Target Max Burst Size) // If any input to minimum() is 0 or undefined it is non included in calculation</li><li>Request 1  : addr = lower(addr+maxBurstSize,addr+len), len = lower(maxBurstSize,len)</li><li>if( N * maxBurstSize &lt;= len_in_bytes)<ul><li>Request N :  addr = addr, len = maxBurstSize</li></ul></li><li>else<ul><li>Request N:   addr = addr, len = len_in_bytes - ((N-1) * maxBurstSize)</li></ul></li></ul></div><p><strong>Stripe Group Table</strong></p><div><strong><br/></strong></div><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-top: 10.0px;"><colgroup><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><td colspan="1" class="confluenceTd"><br/></td></tr><tr><th style="text-align: center;" class="confluenceTh">Field Name</th><th style="text-align: center;" class="confluenceTh">Field Width</th><th style="text-align: center;" class="confluenceTh">Driver</th><th style="text-align: center;" class="confluenceTh">Set Condition</th><th style="text-align: center;" class="confluenceTh">Clear Condition</th><th colspan="1" style="text-align: center;" class="confluenceTh">ID Target Lock</th><th colspan="1" style="text-align: center;" class="confluenceTh">ID Compression</th><th colspan="1" style="text-align: center;" class="confluenceTh">Ordering</th><th colspan="1" style="text-align: center;" class="confluenceTh">ID Interlock (Read Interleaving)</th><th colspan="1" style="text-align: center;" class="confluenceTh">Exclusive Barrier</th><th colspan="1" style="text-align: center;" class="confluenceTh">Latency Tracking</th><th colspan="1" class="confluenceTh">S&amp;S</th><th colspan="1" style="text-align: center;" class="confluenceTh">Included in Timing Critical Configuration</th><th colspan="1" style="text-align: center;" class="confluenceTh">Description (TODO)</th></tr><tr><td class="confluenceTd">Id</td><td style="text-align: center;" class="confluenceTd">Request Interface In ID</td><td style="text-align: center;" class="confluenceTd">Request Interface In ID</td><td style="text-align: center;" class="confluenceTd">Entry Written To</td><td style="text-align: center;" class="confluenceTd">Never</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" data-highlight-colour="blue" style="text-align: center;" class="highlight-blue confluenceTd">X</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-top: 10.0px;"><tbody><tr><td colspan="1" class="confluenceTd">15+TID_WIDTH:15</td></tr></tbody></table></div>