<p>This page presents the new “Ncore 3.4 Interleaving” feature of Maestro, and other related changes. The main objective of this feature is to reduce the connectivity of the various system Networks by exploiting common interleaving patterns.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Please refer to <a href="https://arterisip.atlassian.net/wiki/spaces/ENGR/pages/16160456/Arch+Ncore+3.4+Docs" data-linked-resource-id="16160456" data-linked-resource-version="110" data-linked-resource-type="page">Arch Ncore 3.4 Docs</a> for the main specification of the feature.</p></div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Test Maestro build at:</p><p>/engr/prerelease/maestro/interleavingproject<br/>/engr/prerelease/maestro/interleavingproject.tar.gz</p><p>Release notes: in this build, the command <code>create_default_ncore_connectivity -use_case $use_case</code> needs to be entered <code>create_default_ncore_connectivity -usecase $use_case</code> (an underscore of difference). Subsequent builds will use <code>use_case</code>.</p></div></div><h2 id="Ncore3.4InterleavingInMaestro-Mainchangesataglance">Main changes at a glance</h2><p /><p>The feature impacts several facets of Maestro, and applies to both the GUI and TCL flows.</p><ol><li><p>All interleaving-related specifications occur in the “<strong>Memory Map</strong>” state of Maestro. This includes DCE interleaving (previously available via the <em>dceInterleavingBits</em> parameter of the topology in Topology Structure), DMI interleaving (unchanged, and defined via MemorySets, DynamicMemoryGroups and MemoryInterleavingFunctions), and AIU interleaving (brand new capability, implemented via InitiatorGroups). Based on these specifications, Maestro automatically and internally infers which units are going to be able to talk to each other.<br/>To be able to define DCE interleaving in “<strong>Memory Map</strong>”, the user is now asked to enter the number of DCEs earlier in the flow. While this was previously done in <strong>Topology Structure</strong>, when inserting all the Ncore Units, this is now done in <strong>Sockets</strong>, where the user is also defining - implicitly - the list of all other Ncore Units that will be present in the design.<br/></p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" width="680" src="https://arterisip.atlassian.net/wiki/download/attachments/16171668/image-20220613-213315.png?api=v2"></span><p /></li><li><p>The user now has some visibility and control over the connectivity of the Ncore Units, which Maestro encodes in the new concept of “Flow”. This happens in the <strong>Communication</strong> state. Here, the user can review AIU → DMI connectivity (which is automatically aware of interleaving rules, and is non-directly-modifiable) and can manually tweak AIU → DII connectivity, in particular by choosing which AIUs can access any DII. Automation has been added to assist the user, by automatically creating the necessary connectivity. The GUI and TCL have received improvements to access Flows.</p></li><li><p>The Topology Editor, accessible in <strong>Topology Structure</strong>, will automatically reflect the connectivity specifications entered in (1) and (2), i.e. pruned connectivity due to interleaving and due to manual DII disconnection. Pruned connectivity will not show up as dashed red lines in the editor, and automation that creates an initial topology - “Prepare for Manual Editing” and “Create Regular Topology” - will only create the necessary connections. It will not be possible to edit the presence or absence of connections directly in the Topology Editor; rather, the user will have to go back and change the specifications in (1) and (2).<br/>The pruned connectivity can be visually inspected in the Topology Editor in the GUI; from TCL, the <em>report_interleaving_optimizations -of $topology</em> command gives an itemized list of each pruned connection due to interleaving.</p></li><li><p>Maestro will enforce new checks on SnoopFilters; the main ones are that the number of ways has to be a multiple of 4, and that all AIUs that are interleaved in the same InitiatorGroup have to be assigned to the same SnoopFilter.</p></li></ol><h2 id="Ncore3.4InterleavingInMaestro-TCLFlow">TCL Flow</h2><p>All the changes described above are available in TCL, both in the native command set and in the tcllib library.</p><p>Attached below are two sample scripts encoding similar designs, in Maestro’s native command set, one before the addition of the new features, and one after. It can be useful to look at the files in isolation, as well as in a diff viewer.</p><p class="media-group"><a href="/wiki/spaces/ENGR/pages/16171668/Ncore+3.4+Interleaving+In+Maestro?preview=%2F16171668%2F18252327%2Fdemo_design_before.tcl"><span style="background: url('/wiki/s/-672721829/6452/d621ad2a33e27b90ca05c475b216bfab745e08a2/1000.0.0-d621ad2a33e2/_/download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-file.png'); width: 250px; height: 95px; display: inline-block; padding-top: 155px; margin: 2px; border: 1px solid #ddd; text-align: center; vertical-align: text-bottom; text-decoration: none; font-size: 12px; color: #000;">demo_design_before.tcl</span></a><a href="/wiki/spaces/ENGR/pages/16171668/Ncore+3.4+Interleaving+In+Maestro?preview=%2F16171668%2F18252333%2Fdemo_design_after.tcl"><span style="background: url('/wiki/s/-672721829/6452/d621ad2a33e27b90ca05c475b216bfab745e08a2/1000.0.0-d621ad2a33e2/_/download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-file.png'); width: 250px; height: 95px; display: inline-block; padding-top: 155px; margin: 2px; border: 1px solid #ddd; text-align: center; vertical-align: text-bottom; text-decoration: none; font-size: 12px; color: #000;">demo_design_after.tcl</span></a></p><p>The detailed differences between these two scripts, which illustrate the changes to Maestro, are as follows.</p><h3 id="Ncore3.4InterleavingInMaestro-ChangesintheSocketsstate">Changes in the Sockets state</h3><p>The number of DCEs was previously specified as an argument to interface unit insertion, while this is now a dedicated parameter that needs to be specified during the <strong>Sockets</strong> state.<br/>Old:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">run_generator -name &quot;interface_units&quot; -topology $topology -clock $clocksubdomain -params [list directories 2]; # -clock is used for DCEs/DVE</pre>
</div></div><p>New:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">set_attribute -object $subsystem/NcoreSettings -name dceCount -value 2</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>tcllib equivalent: <code>Project::set_dce_count 2</code></p></div></div><h3 id="Ncore3.4InterleavingInMaestro-ChangesintheMemoryMapstate">Changes in the Memory Map state</h3><p>New interleaving specifications can now be entered in <strong>Memory Map</strong>:<br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence"># AIU InterleavingGroup
set ig0 [create_object -parent $memorymap -type initiator_group -name ig0]
update_object -name $ig0 -type initiators -value_list [list $s2 $s3]
set_attribute -object $ig0 -name interleavingBits -value_list [list 8]; # LSB first!

# DCE interleaving is set here
set_attribute -object $memorymap -name dceInterleavingBits -value_list [list 8]; # LSB first!</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>tcllib equivalent: </p><p><code>Interleaving::set_initiator_group [list $s2 $s3] [list 8] &quot;ig0&quot;</code></p><p><code>Interleaving::set_DCE_PrimarySelBits [list 8]</code></p></div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The tcllib commands of the <code>DmiInterleaving::</code> package are renamed <code>Interleaving::</code> for consistency, so that this package handles AIU, DCE and DMI interleaving.</p></div></div><p>For DCE interleaving, this is just a move; the same parameter used to exist as a parameter of the topology.<br/>For AIU interleaving, there is the completely new notion of InitiatorGroup. Sockets of type INITIATOR or MULTI_INITIATOR that are identical can be tagged as belonging to a common InitiatorGroup; if so, they have to be in number of 1, 2, 4, 8 or 16. These Sockets, and therefore the CAIUs or NCAIUs that will be created in front of them, can then be specified as interleaved with the <em>interleavingBits</em> parameter.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>The interleaving bits are specified LSB-first. This means that if four units of any type (AIU, DCE, DMI) are interleaved on bits [7 8], the units will be assumed to respond to these address patterns respectively: [7 8] = 00, [7 8] = 10, [7 8] = 01, [7 8] = 11. This has an impact on connectivity; for example, if four AIUs are interleaved on bits [7 8] and four DCEs on bits [8 7], the resulting connectivity would be aiu0 ↔︎ dce0, aiu1 ↔︎ dce2, aiu2 ↔︎ dce1, and aiu3 ↔︎ dce3. Beware!</strong></p></div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>DMI interleaving is functionally unchanged from before. However, optimizing connectivity based on DMI interleaving is tricky due to the possibility of runtime changes of interleaving pattern via CSRs (switching to a different MemorySet and/or to a different MemoryInterleavingFunction). For the sake of testability, currently Maestro adopts these two simplifying rules to decide if a certain DMI, on an individual basis, is interleaved in a way compatible with static connectivity pruning:</strong></p><ol><li><p><strong>A given DMI is clustered with the same other DMIs in every MemorySet. For example:</strong></p><ol><li><p><strong>A design has a single MemorySet in which four DMIs are interleaved {0, 1, 2, 3} → all DMIs are considered for pruning</strong></p></li><li><p><strong>A design has MS0 = {0, 1, 2, 3}, MS1 = {0, 1} + {2, 3} → no DMIs are considered for pruning</strong></p></li><li><p><strong>A design has MS0 = {0, 1} + {2, 3}, MS1 = {0, 1} + {2} + {3} → only DMIs 0 and 1 are considered for pruning.</strong></p></li></ol></li><li><p><strong>There is a single MemoryInterleavingFunction associated with the DMI. For example:</strong></p><ol><li><p><strong>Two DMIs are clustered in a 2-way DynamicMemoryGroup (MIG) in each MemorySet, and the user has defined a single 2-way MemoryInterleavingFunction → the DMIs are considered for pruning</strong></p></li><li><p><strong>Four DMIs are clustered in a 4-way DynamicMemoryGroup (MIG) in the only MemorySet of the design, but the user has defined two alternate 4-way MemoryInterleavingFunctions → no DMIs are considered for pruning.</strong></p></li></ol></li></ol><p><strong>Note that these rules may discard possible corner-case optimizations. If those turn out to be valuable, we can always revisit the simplifications later, at the cost of testing complexity.</strong></p></div></div><h3 id="Ncore3.4InterleavingInMaestro-NewCommunicationstate">New Communication state</h3><p>The new <strong>Communication</strong> state now allows to edit connectivity. For example, this is one way to do it:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">set use_case $subsystem/default

# Creates Flows between all units, abiding by interleaving optimizations
create_default_ncore_connectivity -use_case $use_case
# Note that this command is REDUNDANT as it will anyway be executed automatically
# on the user&#39;s behalf if nothing else is specified.

# Delete a CAIU -&gt; DII connection
set flows_to_delete [get_flows -use_case $use_case -from $s1 -to $s6]
foreach flow_to_delete $flows_to_delete {
  delete_object -name $flow_to_delete
}</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>tcllib equivalent is in progress, native TCL commands can be used instead for the time being.</p></div></div><p>Maestro is gearing up to support the definition of multiple traffic scenarios, in constructs called UseCases. Each UseCase is a container of Flows, which describe bidirectional communication between two Sockets. In this build of Maestro, a single UseCase comes pre-defined and the user cannot add or remove UseCases. Also, Flows are currently minimalistic and they only have a <em>source </em>and <em>destination</em>; as such, they only define the existence of connectivity in a binary way. They will later be extended to allow the user to specify bandwidth and other requirements.</p><p>In this snippet, the user grabs the default, Maestro-provided UseCase, coming out of the box with a name of “default”. Then, the user uses a newly-provided automation <code>create_default_ncore_connectivity</code> to populate the UseCase with all connectivity. In detail, this automation connects (creates a Flow between) each AIUs to each DMIs and DIIs, minus for cases of AIU -&gt; DMI pruning due to interleaving, and for forbidding access to the Configuration DII from AIUs that do not have the <em>csrAccessSupported</em> flag set. Later, the user manually removes an individual AIU → DII Flow that is not desired, by way of the new <code>get_flows</code> command.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Maestro will, by default, automatically create all required Flows as the user transitions forward from the previous state <strong>Memory Map</strong>. Thus, <code>create_default_ncore_connectivity</code> is redundant in this example, and is issued just for clarity. This said, the user can still run this command manually, e.g. to fix connectivity after accidentally removing some needed Flows.</p></div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p> In the trivial case, where the user does not want to modify the connectivity, no command needs to be issued for the <strong>Communications</strong> state at all. This is also the case for all our legacy tests and designs, which thus do not need any changes for this part of the flow.</p></div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The user is free to manually create or destroy Flows individually via <code>create_object</code> and <code>delete_object</code>, then setting each Flow’s endpoints with <code>update_object -name X -bind Y -type source</code> or <code>-destination</code>. This is structurally equivalent to what the automation does. However, before progress to the following <strong>Topology Structure </strong>state can be made, Maestro will still check the consistency of the provided information, e.g.:</p><ul><li><p>No duplicate Flows can exist between the same Sockets,</p></li><li><p>No Flows can exist between Sockets that cannot talk due to interleaving patterns,</p></li><li><p>Flows must exist between all AIUs and DMIs that are not interleaved away.</p></li></ul></div></div><h3 id="Ncore3.4InterleavingInMaestro-ChangesintheTopologyStructurestate">Changes in the Topology Structure state</h3><p>In <strong>Topology Structure</strong>, there are almost no functional changes. The main difference is that the various Networks will have sparser connectivity if either interleaving patterns have allowed some pruning, or if the user has manually removed AIU → DII connectivity. A few minor changes still apply:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence"># Either individual Coherent Agents or InitiatorGroups are assigned to SnoopFilters.
snoop_filter -name $sf0 -assign [list $caiu $ig0]</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>tcllib equivalent is in progress, native TCL commands can be used instead for the time being.</p></div></div><p>As part of the new rules, all AIUs that are interleaved together (i.e. belong to the same InitiatorGroup) need to be assigned to the same SnoopFilter. Maestro has introduced the new <code>snoop_filter</code> command, and for convenience, the command allows the user to directly specify a whole InitiatorGroup to be assigned to a SnoopFilter at once, which is faster and less error-prone. (The user can also assign units individually, and the old syntax based on <code>update_object -name X -bind Y -type snoopFilterAssignment</code> also still works.)</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">report_interleaving_optimizations -of $topology</pre>
</div></div><p>The new <code>report_interleaving_optimizations</code> command provides diagnostic output, valuable to debug and review the effects of interleaving. Sample output can be:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">===================================
Interleaving optimization report for project/default_chip/default_system/default_subsystem/default_solution:
  caiu0 to caiu1: Optimized away as these NcoreCAIUs are in the same InitiatorGroup.
  caiu0 to caiu2: Optimized away as these NcoreCAIUs are in the same InitiatorGroup.
  caiu0 to caiu3: Optimized away as these NcoreCAIUs are in the same InitiatorGroup.
  caiu0 to dmi1: Optimized away as the units are staggered on the same interleaving bits (caiu0: bit 6 = 0, bit 7 = 0 - dmi1: bit 7 = 1, bit 8 = 0).
  caiu0 to dmi3: Optimized away as the units are staggered on the same interleaving bits (caiu0: bit 6 = 0, bit 7 = 0 - dmi3: bit 7 = 1, bit 8 = 1).
  caiu0 to dce1: Optimized away as the units are staggered on the same interleaving bits (caiu0: bit 6 = 0, bit 7 = 0 - dce1: bit 6 = 1, bit 7 = 0).
  caiu0 to dce2: Optimized away as the units are staggered on the same interleaving bits (caiu0: bit 6 = 0, bit 7 = 0 - dce2: bit 6 = 0, bit 7 = 1).
  caiu0 to dce3: Optimized away as the units are staggered on the same interleaving bits (caiu0: bit 6 = 0, bit 7 = 0 - dce3: bit 6 = 1, bit 7 = 1).
[...]</pre>
</div></div><h2 id="Ncore3.4InterleavingInMaestro-GUIFlow">GUI Flow</h2><p>The GUI flow is aligned to the changes described above for TCL use, and most comments apply to the GUI as well.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>Maestro is not yet fully tolerant of iterative changes to the interleaving specifications, e.g. defining an interleaving pattern, moving forward in the flow, and then coming back and changing the interleaving pattern. For now, for all the steps highlighted below, GUI use should be linear. This usability limitation is being worked on and will be removed soon.</strong></p></div></div><h3 id="Ncore3.4InterleavingInMaestro-ChangesintheSocketsstate.1">Changes in the Sockets state</h3><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/16171668/image-20220614-093218.png?api=v2"></span><p>A new Task is provided to choose the number of DCEs in the system. The default number of DCEs is just 1, and if that is what the user desires, then this Task does not need to be clicked. The number of DCEs can be changed also by clicking on the NcoreSettings object in the Project Tree.</p><h3 id="Ncore3.4InterleavingInMaestro-ChangesintheMemoryMapstate.1">Changes in the Memory Map state</h3><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/16171668/image-20220614-092210.png?api=v2"></span><p>DMI interleaving is determined here, unchanged from the past.</p><p>DCE interleaving is configured with a dedicated Task in this phase. The Task is disabled if the user has chosen to have a single DCE.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Presently, this Task will pick a valid interleaving bit configuration for the AIUs and bring the Object Editor configuration to the foreground to allow the user to review and possibly modify the choice. A better UX for this Task is being looked at. 

    

            



<style>
    .jira-issue {
        padding: 0 0 0 2px;
        line-height: 20px;
    }

    .jira-issue img {
        padding-right: 5px;
    }
    .jira-issue .aui-lozenge {
        line-height: 18px;
        vertical-align: top;
    }

    .jira-issue .icon {
        background-position: left center;
        background-repeat: no-repeat;
        display: inline-block;
        font-size: 0;
        max-height: 16px;
        text-align: left;
        text-indent: -9999em;
        vertical-align: text-bottom;
    }
</style>

    <span class="confluence-jim-macro jira-issue" data-jira-key="MAES-4869" >
                <a href="https://arterisip.atlassian.net/browse/MAES-4869?src=confmacro" class="jira-issue-key">MAES-4869</a>
                            </span>
</p></div></div><p>AIU interleaving, if the user desires, needs to be set manually. From the Project Tree, right-clicking on the Initiator Groups folder, it is possible to create an object of type InitiatorGroup. Then, this object can be edited by assigning a number of identical Sockets to it (in number of 1, 2, 4, 8 or 16) and setting the corresponding interleaving bits.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>A Task and dedicated GUI for this step will be added later.</p></div></div><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/16171668/image-20220614-092959.png?api=v2"></span><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>Beware of the same pitfalls described above in the context of the TCL flow, namely, the rules for interleaving of DMIs and the fact that the first interleaving bit specified in the GUI is the LSB.</strong></p></div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>In particular, since the “Partition into DynamicMemoryGroups” Task by default pre-populates two MemoryInterleavingFunctions per associativity, remember to review its outcome and delete some MemoryInterleavingFunctions if DMI interleaving is desired.</p></div></div><h3 id="Ncore3.4InterleavingInMaestro-NewCommunicationstate.1">New Communication state</h3><p>When moving forward from the <strong>Memory Map</strong> state, this widget now shows up, pre-populated:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/16171668/image-20220614-103009.png?api=v2"></span><p>Maestro automatically runs the “Create Default Connectivity” Task that can be seen on the right; the Task is nevertheless re-clickable, e.g. to fix any mistakes. This Task populates connectivity based on interleaving rules; in the screenshot above, a 4-AIU, 4-DMI system was configured to have AIUs and DMIs all interleaved on the same bits. As can be seen, instead of all-to-all connectivity, now the connectivity is aiu0 ↔︎ dmi0, aiu1 ↔︎ dmi1, aiu2 ↔︎ dmi2, aiu3 ↔︎ dmi3. Green cells in the table represent connectivity (i.e. the existence of a Flow), red means non-connectivity. It can be noticed that by default a DII (last column) is connected to all AIUs, but the user can change this with a right-click.</p><p>The Flows are also visible in the Project Tree to the left, from which they can also be created/destroyed, and their endpoints are visible in the Parameter Editor to the right.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This widget is going to be replaced by a new one with better usability, sharing a common look and feel with the widget normally shown next to the Topology Editor. 

    

            



<style>
    .jira-issue {
        padding: 0 0 0 2px;
        line-height: 20px;
    }

    .jira-issue img {
        padding-right: 5px;
    }
    .jira-issue .aui-lozenge {
        line-height: 18px;
        vertical-align: top;
    }

    .jira-issue .icon {
        background-position: left center;
        background-repeat: no-repeat;
        display: inline-block;
        font-size: 0;
        max-height: 16px;
        text-align: left;
        text-indent: -9999em;
        vertical-align: text-bottom;
    }
</style>

    <span class="confluence-jim-macro jira-issue" data-jira-key="MAES-4752" >
                <a href="https://arterisip.atlassian.net/browse/MAES-4752?src=confmacro" class="jira-issue-key">MAES-4752</a>
                            </span>
</p></div></div><h3 id="Ncore3.4InterleavingInMaestro-ChangesintheTopologyStructurestate.1">Changes in the Topology Structure state</h3><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/16171668/image-20220614-095008.png?api=v2"></span><p>The main change that is user-visible in the GUI in this state is the fact that connectivity could be sparser. The screenshot above is for a 4-AIU, 4-DMI system in which AIUs and DMIs are all interleaved on the same bits. As can be seen, instead of all-to-all connectivity, now the connectivity is aiu0 ↔︎ dmi0, aiu1 ↔︎ dmi1, aiu2 ↔︎ dmi2, aiu3 ↔︎ dmi3 (linear as opposed to quadratic wiring cost.)</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="https://arterisip.atlassian.net/wiki/download/attachments/16171668/image-20220614-095430.png?api=v2"></span><p>The dialog to configure SnoopFilters has some initial changes to reflect the new specifications, for example, the number of ways is only configurable in multiples of 4.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This dialog is being further optimized, e.g. to allow assigning a whole InitiatorGroup to the same SnoopFilter. For now, this latter constraint must be manually taken care of by the user, by making sure all AIUs in the same InitiatorGroup are assigned to the same SnoopFilter. This usability problem will be resolved soon. 

    

            



<style>
    .jira-issue {
        padding: 0 0 0 2px;
        line-height: 20px;
    }

    .jira-issue img {
        padding-right: 5px;
    }
    .jira-issue .aui-lozenge {
        line-height: 18px;
        vertical-align: top;
    }

    .jira-issue .icon {
        background-position: left center;
        background-repeat: no-repeat;
        display: inline-block;
        font-size: 0;
        max-height: 16px;
        text-align: left;
        text-indent: -9999em;
        vertical-align: text-bottom;
    }
</style>

    <span class="confluence-jim-macro jira-issue" data-jira-key="MAES-4798" >
                <a href="https://arterisip.atlassian.net/browse/MAES-4798?src=confmacro" class="jira-issue-key">MAES-4798</a>
                            </span>
</p></div></div><p />