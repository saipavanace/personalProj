<h2 id="Instructiontointegrateaxi4_probe_module&amp;tocontrolprobefilegeneration:-1)Pathofaxi4_probe_moduledefintionfile:"><style>[data-colorid=hxp5yz2lvi]{color:#910091} html[data-color-mode=dark] [data-colorid=hxp5yz2lvi]{color:#ff6eff}[data-colorid=egmgkznk1m]{color:#910091} html[data-color-mode=dark] [data-colorid=egmgkznk1m]{color:#ff6eff}[data-colorid=l8lmo5odh5]{color:#009100} html[data-color-mode=dark] [data-colorid=l8lmo5odh5]{color:#6eff6e}[data-colorid=jy33cpvxnd]{color:#009100} html[data-color-mode=dark] [data-colorid=jy33cpvxnd]{color:#6eff6e}[data-colorid=a7via4ehsn]{color:#910091} html[data-color-mode=dark] [data-colorid=a7via4ehsn]{color:#ff6eff}[data-colorid=iqu7mw927f]{color:#910091} html[data-color-mode=dark] [data-colorid=iqu7mw927f]{color:#ff6eff}[data-colorid=fu8o8av894]{color:#910091} html[data-color-mode=dark] [data-colorid=fu8o8av894]{color:#ff6eff}[data-colorid=b8iikamwl6]{color:#910091} html[data-color-mode=dark] [data-colorid=b8iikamwl6]{color:#ff6eff}</style><strong>1) Path of axi4_probe_module defintion file :</strong>&nbsp;</h2><p>Module definition in this path - hw-dv/vip/axi4/lib/<a class="external-link" href="http://axi4_probe_module.sv" rel="nofollow">axi4_probe_module.sv</a>.tachl is defived from <a class="external-link" href="http://ncore_probe_module.sv" rel="nofollow">ncore_probe_module.sv</a>&nbsp;(
    

            

    <span class="aui-message aui-message-warning jim-error-message jim-error-message-single">
        <span class="icon-in-pdf" />
                            Unable to locate Jira server for this macro. It may be due to Application Link configuration.
            </span>
)</p><p><strong>module axi4_probe_module_&lt;nodeId&gt; </strong></p><p><span style="letter-spacing: 0.0px;">(input logic clk,&nbsp;</span></p><p><span style="letter-spacing: 0.0px;">input logic reset_n,</span></p><p><span style="letter-spacing: 0.0px;">axi4_if_&lt;axi4_if_type&gt;_if_&lt;nodeId&gt;</span></p><p><span style="letter-spacing: 0.0px;">)</span></p><p><span style="letter-spacing: 0.0px;">where,&nbsp;</span></p><p><span style="letter-spacing: 0.0px;"><span>axi4_if_type = local variable , string type, string value initiator or target</span></span></p><p><span style="letter-spacing: 0.0px;"><span>nodeId = from tb.json</span></span></p><h2 id="Instructiontointegrateaxi4_probe_module&amp;tocontrolprobefilegeneration:-2)Integratemodule-axi4_probe_moduleinTB,"><strong>2) Integrate module -&nbsp;axi4_probe_module&nbsp;in TB,</strong></h2><p>Include axi4_probe_module&nbsp;in package -&nbsp;<strong>axi4_pkg</strong>&nbsp;(imported in tb_top) to make it available to testbench top module -&nbsp;<strong>tb_top (from tb_wrapper.tachl)</strong></p><p>package axi4_pkg_&lt;%=obj.lib.getParam('BlockId')%&gt;;</p><p style="margin-left: 30.0px;">obj.lib.instance({ moduleName : 'axi4_probe_module_'+id+'.sv',tachlName : '<a class="external-link" href="http://axi4_probe_module.sv" rel="nofollow">axi4_probe_module.sv</a>',params:cparams, script:true });</p><p style="margin-left: 30.0px;">`include &quot;axi4_seq_lib_&lt;%=obj.lib.getParam('BlockId')%&gt;.sv&quot;</p><p>endpackage : axi4_pkg_&lt;%=obj.lib.getParam('BlockId')%&gt;</p><p><br /></p><p><span style="letter-spacing: 0.0px;">Take instance of&nbsp;</span><strong style="letter-spacing: 0.0px;">axi4_probe_module&nbsp;</strong><span style="letter-spacing: 0.0px;">in&nbsp;</span><strong style="letter-spacing: 0.0px;">tb_top</strong><span style="letter-spacing: 0.0px;">&nbsp;(from </span><strong style="letter-spacing: 0.0px;">tb_wrapper</strong><span style="letter-spacing: 0.0px;">) to probe initiator and target interfaces. Partial code from tb_wrapper.tachl is shown below.</span></p><p><span style="letter-spacing: 0.0px;">for(var i=0; i&lt;nAxi4Masters; i++) {</span></p><p style="margin-left: 30.0px;"><span style="letter-spacing: 0.0px;">axi4_probe_module_\=inst=\ axi4_probe_initiator_module_\=inst=\(axi4_in_if_\=inst=\.clk, axi4_in_if_\=inst=\.reset_n, axi4_in_if_\=inst=\.monitor);</span></p><p><span style="letter-spacing: 0.0px;">}</span></p><p><span style="letter-spacing: 0.0px;">for(var i=0; i&lt;nAxi4Slaves; i++) {</span></p><p style="margin-left: 30.0px;"><span style="letter-spacing: 0.0px;">axi4_probe_module_\=inst=\ axi4_probe_target_module_\=inst=\(axi4_out_if_\=inst=\.clk, axi4_out_if_\=inst=\.reset_n, axi4_out_if_\=inst=\.monitor);</span></p><p><span>}</span></p><p><strong style="font-size: 20.0px;letter-spacing: -0.008em;">3) Generation of&nbsp;probe files&nbsp;- axi4_probe_&lt;&quot;initiator&quot; or &quot;target&quot;&gt;_&lt;nodeId&gt;.txt</strong></p><h3 id="Instructiontointegrateaxi4_probe_module&amp;tocontrolprobefilegeneration:-Therearetwodifferentcontrolstoit.">There are two different controls to it.</h3><ul class="alternate"><li><strong>&quot;axi4ProbeOn&quot; .json parameter</strong><span>&nbsp;</span>: true value of this parameter creates logic inside axi4_probe_module that generates axi4_probe_&lt;&quot;initiator&quot; or &quot;target&quot;&gt;_&lt;nodeId&gt;.txt file and this parameter is separate for each initiator/target.<br />Hence each initiator/target interface can hold true/false value</li><li><strong>Compiler directive</strong><span>&nbsp;</span>:<br /><strong>+define+AXI4_PROBE_ON</strong><span>&nbsp;</span>: If &quot;axi4ProbeOn&quot;==true, then +define+AXI4_PROBE_ON (for all initiator and target interfaces) can enable logic inside axi4_probe_module that generates probe file<br />*+define+AXI4_PROBE_ON_&lt;nodeId&gt; * : If &quot;axi4ProbeOn&quot;==true and still don't need all initiator and target interfaces probe file, then user can have choice to do the same using this compiler directive</li></ul><p>Some of the examples,<br />Let say configuration -<span>&nbsp;</span><strong>maestro_4x4_AXI4_256_128_256_64_32_AXI4_32_256_64_32_32_hp</strong><span>&nbsp;</span>have below values of<span>&nbsp;</span><strong>axi4ProbeOn</strong><span>&nbsp;</span>for each interface.<br />1) For initiator interface with nodeId==0 : axi4ProbeOn==false<br />2) For all other seven initiator/target interfaces nodeId==1,2...7 : axi4ProbeOn==true</p><p><strong>Command-line :</strong></p><pre class="code-java">runsim -c maestro_4x4_AXI4_256_128_256_64_32_AXI4_32_256_64_32_32_hp -t axi4_single_beat_wr -s 0 -w -co <span data-colorid="l8lmo5odh5" class="code-quote">&quot;+define+AXI4_PROBE_ON_0 +define+AXI4_PROBE_ON_1 +define+AXI4_PROBE_ON_5&quot;</span>
</pre><pre class="code-java">Now, above command generates two probe files - axi4_probe_initiator_1.txt &amp; axi4_probe_target_5.txt 
It will not generate probe file <span data-colorid="hxp5yz2lvi" class="code-keyword">for</span> <span data-colorid="a7via4ehsn" class="code-keyword">interface</span> with nodeId==0 even <span data-colorid="b8iikamwl6" class="code-keyword">if</span> +define+AXI4_PROBE_ON_0 is passed on command-line
It is due to axi4ProbeOn==<span data-colorid="iqu7mw927f" class="code-keyword">false</span> <span data-colorid="egmgkznk1m" class="code-keyword">for</span> initiator <span data-colorid="fu8o8av894" class="code-keyword">interface</span> with nodeId==0
</pre><p><strong>Command-line :</strong></p><pre class="code-java">runsim -c maestro_4x4_AXI4_256_128_256_64_32_AXI4_32_256_64_32_32_hp -t axi4_single_beat_wr -s 0 -w -co <span data-colorid="jy33cpvxnd" class="code-quote">&quot;+define+AXI4_PROBE_ON&quot;</span>
</pre><p>this command would skip generattion of probe file as mentioned in previous case and generates for rest of all interfaces.</p><pre class="code-java">axi4_probe_initiator_1.txt 
axi4_probe_initiator_2.txt
axi4_probe_initiator_3.txt 
axi4_probe_target_4.txt
axi4_probe_target_5.txt
axi4_probe_target_6.txt
axi4_probe_target_7.txt</pre>