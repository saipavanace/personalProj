<p>Updated DV-JSON:</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250925-160506.png" width="760" src="https://arterisip.atlassian.net/wiki/download/attachments/1593737217/image-20250925-160506.png?api=v2"></span><p /><p>Updates in dvpkg.Json file:</p><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="10cddcca-6306-424e-9b43-188667460d4f" class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><strong>Key</strong></p></th><th class="confluenceTh"><p><strong>Previous Version</strong></p></th><th class="confluenceTh"><p><strong>3.8 version</strong></p></th><th class="confluenceTh"><p><strong>Notes</strong></p></th></tr><tr><td class="confluenceTd"><p>File paths</p></td><td class="confluenceTd"><p>In previoius dvpkg.json files all paths to the files and packages were relative to the current files location. For example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;../../common/arm_sva/Axi4PC_ace_defs.v&quot;</pre>
</div></div></td><td class="confluenceTd"><p>All paths to the files and packages need to be relative to hw-ncr repository.<br/>Example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;dv/common/arm_sva/Axi4PC_ace_defs.v&quot;</pre>
</div></div></td><td class="confluenceTd"><p>This change is made to make the computation simple and for readability.</p></td></tr><tr><td class="confluenceTd"><p>flist</p></td><td class="confluenceTd"><p>Previously, flist used be a list of strings in the file.<br/>Example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;flist&quot;:[&quot;../../common/arm_sva/Axi4PC_ace_defs.v&quot;
]</pre>
</div></div></td><td class="confluenceTd"><p>Instead of using flist as a separate key in file, add files obj (list of files to be added to flist) under include files key and set <strong>addToFlist</strong> to true. Example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;includeFiles&quot;: [
		{
			&quot;files&quot;: [
				&quot;dv/common/arm_sva/Axi4PC_ace_defs.v&quot;,
			],
			&quot;addToFlist&quot;: true
		},
        &quot;dv/common/lib_tb/ConcertoHelperFunctions.svh&quot;,
		&quot;dv/common/lib_tb/ConcertoAxiHelperFunctions.svh&quot;
        ]</pre>
</div></div></td><td class="confluenceTd"><p>Rest of the files that need to be included can be specified same as before. New “files” object supports features in addition with addToFlist.</p></td></tr><tr><td class="confluenceTd"><p>formatScript</p></td><td class="confluenceTd"><p>formatScript was used to modify the obj to handle unique block level scenarios. </p></td><td class="confluenceTd"><p>formatScript has been removed from the new flow and there is no need to have this key in the file. The new DV flow applies a common transform function to all the packages and block level formatting using a new flow in the transform directory. (dv/scripts/transform/)</p></td><td class="confluenceTd"><p>To reduce the computation time and number of iterations the code is being moved to handle these scenarios more efficiently.</p></td></tr><tr><td class="confluenceTd"><p>dutInfo</p></td><td class="confluenceTd"><hr/></td><td class="confluenceTd"><p>This new option is included in the dvpkg.json files to pass the correct obj to the subsequent levels of files instead of passing full dvJson. For example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
	&quot;name&quot;: &quot;dve&quot;,
	&quot;dutInfo&quot;: &quot;DveInfo&quot;,
	&quot;addInstancePrefix&quot;: true,</pre>
</div></div><p>Specifying dutInfo as DveInfo will limit the scope of “obj” a package has to extract the correct info. </p></td><td class="confluenceTd"><p>The idea is to not pass chiplet level dvJson to all levels of files. To access any obj.field now that the scope is defined, we can use obj.dutInfo.field in .svh files. Valid values for dutInfo are the objects inside “_root_”, </p></td></tr><tr><td class="confluenceTd"><p>addInstancePrefix</p></td><td class="confluenceTd"><hr/></td><td class="confluenceTd"><p><strong>addInstancePrefix: true</strong>, will make sure that the files generated will have instance prefix to their name. </p></td><td class="confluenceTd"><p>BlockId is the default preferred prefix in this case. If not specified to true then the files generated will not have any prefix. </p></td></tr><tr><td class="confluenceTd"><p>addNamePrefix</p></td><td class="confluenceTd"><hr/></td><td class="confluenceTd"><p>This property, when set to true, it will add specified “name” as prefix to all the files generated.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;name&quot;: &quot;apb_debug&quot;,
  &quot;addNamePrefix&quot;: true,
  &quot;dutInfo&quot;: &quot;DebugApbInfo&quot;,
  &quot;path&quot;: &quot;dv/common/lib_tb/apb_agent_debug/dvPkg.json&quot;,		
}</pre>
</div></div><p>“apb_debug” will be added as prefix to files generated.</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>addModulePrefix</p></td><td class="confluenceTd"><hr/></td><td class="confluenceTd"><p>When set to true, module name is added as prefix to the generated files.</p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p>pkgs</p></td><td class="confluenceTd"><p>pkgs object used to consist of list of strings or objects where the data that needs to be passed on to lower-level packages had to be specified.<br/>For example: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;pkgs&quot;: [
		{
			&quot;path&quot;: &quot;dv/common/synopsys/ioaiu/dvPkg.json&quot;,
			&quot;data&quot;: &quot;&quot;,
			&quot;formatScript&quot;: &quot;&quot;,
			&quot;name&quot;: &quot;&quot;
		},
        &quot;dv/common/lib_tb/connectivity/dvPkg.json&quot;</pre>
</div></div></td><td class="confluenceTd"><p>The new pkgs field supports two types of valid values inside the pkgs list.</p><ol start="1"><li><p>Pass the package as a string - when passed as a string, none of the parent package’s properties will be passed down to this package.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;pkgs&quot;: [
		&quot;dv/chi_aiu/env/dvPkg.json&quot;,
		&quot;dv/chi_aiu/seq/dvPkg.json&quot;,
		]</pre>
</div></div></li><li><p>Pass the package as an object - when passed as an object with “path”:”package.dvpkg.json”, it by default passes down all the properties of parent package. for example: dutInfo, addInstancePrefix values etc. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;pkgs&quot;: [
		{
			&quot;path&quot;: &quot;dv/full_sys/env/raldvPkg.json&quot;
		},
		&quot;dv/chi_aiu/env/dvPkg.json&quot;,
		{
			&quot;path&quot;: &quot;dv/chi_aiu/sub_sys/env/dvPkg.json&quot;,
			&quot;addInstancePrefix&quot;: false,
			&quot;dutInfo&quot;: &quot;ChiaiuInfo&quot;
		},
		&quot;dv/chi_aiu/seq/dvPkg.json&quot;,
]</pre>
</div></div></li></ol></td><td class="confluenceTd"><p>Adding a package as an object provides more configurability to either inherit the parent package properties or overwrite them. For example: If parent package has addInstancePrefix set to true then setting this to false inside the package object will overwrite. </p></td></tr><tr><td class="confluenceTd"><p /></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><p />